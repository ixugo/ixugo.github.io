---
title: 支付相关
description: 
date: 2025-10-09
slug: 
image: 
draft: false
categories:
    - 后端
tags:

---



## 微信支付

微信支付与支付宝支付接口有几个区别要重点注意，从接口上微信更严格一些

1. 支付宝采用 float64 表示金额，单位是元。微信采用 int64 表示金额，单位是分。
2. 微信要求订单号长度不能超过 32 位
3. 微信要求订单描述不能超过 127 个字节

### 开通微信支付流程

1. 「账户中心」-「API 安全」- 「申请证书/管理证书」，根据流程操作在本地电脑生成证书
2. 「账户中心」- 「API 安全」- 「解密回调/API v3 秘钥设置」，自定义个长度为 32 位的秘钥
3. 「产品中心」- 「开发配置」拿到商户号
4. 「产品中心」- 「AppID 账户管理」关联相关的 AppID，要求服务号，政府/媒体订阅号，小程序，企业微信等，一般订阅号不行。
5. 「账户中心」-「API 安全」-「管理证书」-「序列号」，注意这个序列化是假的!!巨坑，用这个序列号请求最终会导致接口报错 `商户证书序列号有误。请使用签名私钥匹配的证书序列号`，在终端执行`openssl x509 -in apiclient_cert.pem -noout -serial` 获取序列号。
6. 「产品中心」-「我的产品」 要开通对应的产品，比如 JSAPI 支付，APP 支付等。

[参数说明 - 微信支付官方文档](https://pay.weixin.qq.com/doc/v3/merchant/4013070756)

`apiclient_key.pem` 是私钥文件，通过以上步骤拿到了必要的请求参数，注意回调解析等，基本就大差不差了。

![image-20251014152601219](http://img.golang.space/img-1760426761429.png)



## 支付宝周期付款

**1. 登录支付宝开放平台**

打开 [产品介绍](https://open.alipay.com/api/detail?code=I1080300001000042072&index=0)，此页面可以检测当前账号是否允许调用相关 API，未开通相关产品时，根据文档引导流程前往[商家平台产品中心](https://b.alipay.com/page/product-workspace/product-detail/I1080300001000066811/ALL?) 开通。

注意扣款单笔限额 100 元。

![image-20251009155227321](http://img.golang.space/img-1759996347940.png)

开通需要公司主体注册资金 2000 万。
