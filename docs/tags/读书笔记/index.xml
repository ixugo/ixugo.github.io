<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>è¯»ä¹¦ç¬”è®° on ixugo</title>
        <link>https://blog.golang.space/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</link>
        <description>Recent content in è¯»ä¹¦ç¬”è®° on ixugo</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Sat, 26 Apr 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.golang.space/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>é¿å…åœ¨ Go ä¸­æ„å¤–åœ°å¤åˆ¶ç»“æ„ä½“</title>
        <link>https://blog.golang.space/p/%E9%81%BF%E5%85%8D%E5%9C%A8-go-%E4%B8%AD%E6%84%8F%E5%A4%96%E5%9C%B0%E5%A4%8D%E5%88%B6%E7%BB%93%E6%9E%84%E4%BD%93/</link>
        <pubDate>Sat, 26 Apr 2025 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E9%81%BF%E5%85%8D%E5%9C%A8-go-%E4%B8%AD%E6%84%8F%E5%A4%96%E5%9C%B0%E5%A4%8D%E5%88%B6%E7%BB%93%E6%9E%84%E4%BD%93/</guid>
        <description>&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒGo åœ¨ä¼ é€’å€¼æ—¶ä¼šå¤åˆ¶å®ƒä»¬ã€‚ä½†æœ‰æ—¶è¿™å¯èƒ½æ˜¯ä¸å¸Œæœ›çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä¸å°å¿ƒå¤åˆ¶äº†ä¸€ä¸ªäº’æ–¥é”ï¼Œå¹¶ä¸”å¤šä¸ª goroutine åœ¨ä¸åŒçš„é”å®ä¾‹ä¸Šå·¥ä½œï¼Œå®ƒä»¬å°†æ— æ³•æ­£ç¡®åŒæ­¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¼ é€’é”çš„æŒ‡é’ˆå¯ä»¥é¿å…å¤åˆ¶å¹¶æŒ‰é¢„æœŸå·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä»¥è¿™ä¸ªä¾‹å­æ¥è¯´ï¼šé€šè¿‡å€¼ä¼ é€’ &lt;code&gt;sync.WaitGroup&lt;/code&gt; ä¼šä»¥å¾®å¦™çš„æ–¹å¼ç ´åç¨‹åºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WaitGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// ... do something with the waitgroup
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WaitGroup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// oops! wg is getting copied here!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;sync.WaitGroup&lt;/code&gt; è®©ä½ å¯ä»¥ç­‰å¾…å¤šä¸ª goroutine å®Œæˆä¸€äº›å·¥ä½œã€‚åœ¨å¹•åï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å« &lt;code&gt;Add&lt;/code&gt; ã€ &lt;code&gt;Done&lt;/code&gt; å’Œ &lt;code&gt;Wait&lt;/code&gt; ç­‰æ–¹æ³•çš„ç»“æ„ä½“ï¼Œç”¨äºåŒæ­¥å¹¶å‘è¿è¡Œçš„ goroutineã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ®µä»£ç å¯ä»¥ç¼–è¯‘ï¼Œä½†ç”±äºæˆ‘ä»¬åœ¨ &lt;code&gt;f&lt;/code&gt; å‡½æ•°ä¸­å¤åˆ¶äº†é”è€Œä¸æ˜¯å¼•ç”¨å®ƒï¼Œå› æ­¤ä¼šå¯¼è‡´é”™è¯¯è¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;å¹¸è¿çš„æ˜¯ï¼Œ &lt;code&gt;go vet&lt;/code&gt; ä¼šæ•è·è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœä½ åœ¨ä»£ç ä¸Šè¿è¡Œ vetï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªç±»ä¼¼äºè¿™æ ·çš„è­¦å‘Šï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;f passes lock by value: sync.WaitGroup contains sync.noCopy
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;call of f copies lock value: sync.WaitGroup contains sync.noCopy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ„å‘³ç€å½“æˆ‘ä»¬åº”è¯¥ä¼ é€’ä¸€ä¸ªå¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬å´é€šè¿‡å€¼ä¼ é€’äº† &lt;code&gt;wg&lt;/code&gt; ã€‚è¿™æ˜¯ä¿®å¤æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WaitGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// pass by reference
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ... do something with the waitgroup
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WaitGroup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// pass a pointer to wg
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç”±äºè¿™ç§ä¸æ­£ç¡®çš„å¤åˆ¶ä¸ä¼šæŠ›å‡ºç¼–è¯‘é”™è¯¯ï¼Œå¦‚æœä½ è·³è¿‡äº† &lt;code&gt;go vet&lt;/code&gt; ï¼Œä½ å¯èƒ½æ°¸è¿œä¹Ÿå‘ç°ä¸äº†å®ƒã€‚è¿™ä¹Ÿæ˜¯å§‹ç»ˆå®¡æŸ¥ä»£ç çš„å¦ä¸€ä¸ªåŸå› ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å¾ˆå¥½å¥‡ Go å·¥å…·é“¾æ˜¯å¦‚ä½•å¼ºåˆ¶æ‰§è¡Œè¿™ä¸€ç‚¹çš„ã€‚çº¿ç´¢å°±åœ¨ vet è­¦å‘Šä¸­ï¼š&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ &lt;code&gt;sync.noCopy&lt;/code&gt; ç»“æ„ä½“åœ¨ &lt;code&gt;sync.WaitGroup&lt;/code&gt; ä¸­åšäº†äº›ä»€ä¹ˆæ¥æé†’ &lt;code&gt;go vet&lt;/code&gt; å½“ä½ é€šè¿‡å€¼ä¼ é€’å®ƒæ—¶ã€‚&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹ &lt;code&gt;sync.WaitGroup&lt;/code&gt; &lt;a class=&#34;link&#34; href=&#34;https://rednafi.com/go/prevent_struct_copies/#fn:1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1&lt;/a&gt; çš„å®ç°ï¼Œä½ ä¼šå‘ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;WaitGroup&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;atomic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Uint64&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;sema&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;uint32&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç„¶åæˆ‘è¿½è¸ªäº† &lt;code&gt;noCopy&lt;/code&gt; åœ¨ &lt;code&gt;sync/cond.go&lt;/code&gt; &lt;a class=&#34;link&#34; href=&#34;https://rednafi.com/go/prevent_struct_copies/#fn:2&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2&lt;/a&gt; ä¸­çš„å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// noCopy may be added to structs which must not be copied
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// after the first use.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Note that it must not be embedded, due to the Lock and Unlock methods.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Lock is a no-op used by -copylocks checker from `go vet`.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;   &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åªéœ€è¦åœ¨ &lt;code&gt;noCopy&lt;/code&gt; ä¸Šå®šä¹‰é‚£äº›ç©ºçš„ &lt;code&gt;Lock&lt;/code&gt; å’Œ &lt;code&gt;Unlock&lt;/code&gt; æ–¹æ³•ã€‚è¿™å®ç°äº† &lt;code&gt;Locker&lt;/code&gt; &lt;a class=&#34;link&#34; href=&#34;https://rednafi.com/go/prevent_struct_copies/#fn:3&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3&lt;/a&gt; æ¥å£ã€‚ç„¶åå¦‚æœä½ å°†è¿™ä¸ªç»“æ„ä½“åµŒå…¥åˆ°å¦ä¸€ä¸ªç»“æ„ä½“ä¸­ï¼Œ &lt;code&gt;go vet&lt;/code&gt; å°†ä¼šæ ‡è®°ä½ åœ¨å°è¯•å¤åˆ¶å¤–éƒ¨ç»“æ„ä½“æ—¶å‡ºç°çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œè¯·æ³¨æ„æ³¨é‡Šï¼šä¸è¦åµŒå…¥ &lt;code&gt;noCopy&lt;/code&gt; ã€‚æ˜¾å¼åŒ…å«å®ƒã€‚åµŒå…¥ä¼šä½¿ &lt;code&gt;Lock&lt;/code&gt; å’Œ &lt;code&gt;Unlock&lt;/code&gt; åœ¨å¤–éƒ¨ç»“æ„ä½“ä¸­å¯è§ï¼Œè¿™å¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚&lt;/p&gt;
&lt;p&gt;Go å·¥å…·é“¾é€šè¿‡ &lt;code&gt;-copylocks&lt;/code&gt; æ£€æŸ¥å™¨æ¥å¼ºåˆ¶æ‰§è¡Œè¿™ä¸€ç‚¹ã€‚å®ƒæ˜¯ &lt;code&gt;go vet&lt;/code&gt; çš„ä¸€éƒ¨åˆ†ã€‚ä½ å¯ä»¥å•ç‹¬ä½¿ç”¨ &lt;code&gt;go vet -copylocks ./...&lt;/code&gt; æ¥è°ƒç”¨å®ƒã€‚å®ƒä¼šæŸ¥æ‰¾ä»»ä½•åŒ…å« &lt;code&gt;Lock&lt;/code&gt; å’Œ &lt;code&gt;Unlock&lt;/code&gt; æ–¹æ³•çš„åµŒå¥—ç»“æ„ä½“çš„å€¼æ‹·è´ã€‚è¿™äº›æ–¹æ³•çš„å…·ä½“åŠŸèƒ½å¹¶ä¸é‡è¦ï¼Œåªè¦æœ‰è¿™äº›æ–¹æ³•å°±è¶³å¤Ÿäº†ã€‚&lt;/p&gt;
&lt;p&gt;å½“ vet è¿è¡Œæ—¶ï¼Œå®ƒä¼šéå†æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œå¹¶åœ¨èµ‹å€¼ã€å‡½æ•°è°ƒç”¨ã€è¿”å›å€¼ã€ç»“æ„ä½“å­—é¢é‡ã€èŒƒå›´å¾ªç¯ã€é€šé“å‘é€ç­‰ä»»ä½•å€¼è¢«æ‹·è´çš„åœ°æ–¹åº”ç”¨æ£€æŸ¥å™¨ã€‚å¦‚æœå®ƒå‘ç°ä½ æ‹·è´äº†ä¸€ä¸ªåŒ…å« &lt;code&gt;noCopy&lt;/code&gt; çš„ç»“æ„ä½“ï¼Œå®ƒä¼šå‘å‡ºè­¦å‘Šã€‚ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹æ£€æŸ¥çš„å®ç° &lt;a class=&#34;link&#34; href=&#34;https://rednafi.com/go/prevent_struct_copies/#fn:4&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰è¶£çš„æ˜¯ï¼Œå¦‚æœä½ å°† &lt;code&gt;noCopy&lt;/code&gt; å®šä¹‰ä¸ºä»»ä½•éç»“æ„ä½“ç±»å‹å¹¶å®ç° &lt;code&gt;Locker&lt;/code&gt; æ¥å£ï¼Œvet ä¼šå¿½ç•¥å®ƒã€‚æˆ‘åœ¨ Go 1.24 ä¸­è¿›è¡Œäº†æµ‹è¯•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;     &lt;span class=&#34;c1&#34;&gt;// this is valid but vet doesn&amp;#39;t get triggered
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;   &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä¸ä¼šè§¦å‘ vetã€‚åªæœ‰å½“ &lt;code&gt;noCopy&lt;/code&gt; æ˜¯ç»“æ„ä½“æ—¶æ‰ä¼šç”Ÿæ•ˆã€‚åŸå› æ˜¯ vet åœ¨æ£€æŸ¥ä½•æ—¶è§¦å‘è­¦å‘Šæ—¶é‡‡å–äº†ä¸€æ¡æ·å¾„ &lt;a class=&#34;link&#34; href=&#34;https://rednafi.com/go/prevent_struct_copies/#fn:5&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5&lt;/a&gt; ã€‚ç›®å‰ï¼Œå®ƒæ˜ç¡®æŸ¥æ‰¾æ»¡è¶³ &lt;code&gt;Locker&lt;/code&gt; æ¥å£çš„ç»“æ„ä½“ï¼Œå¹¶å¿½ç•¥ä»»ä½•å…¶ä»–ç±»å‹ï¼Œå³ä½¿å®ƒä»¬å®ç°äº†è¯¥æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;ä½ ä¹Ÿä¼šåœ¨ sync åŒ…çš„å…¶ä»–éƒ¨åˆ†çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚ &lt;code&gt;sync.Mutex&lt;/code&gt; ä½¿ç”¨äº†åŒæ ·çš„æŠ€å·§ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Mutex&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;mu&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Mutex&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åŒæ ·é€‚ç”¨äº &lt;code&gt;sync.Once&lt;/code&gt; :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Once&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;done&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;uint32&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;      &lt;span class=&#34;nx&#34;&gt;Mutex&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ &lt;code&gt;-copylocks&lt;/code&gt; é¿å…å¤åˆ¶æˆ‘ä»¬è‡ªå·±çš„ç»“æ„ä½“çš„å®Œæ•´ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Svc&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;   &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;noCopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Use this
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;svc&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Svc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;svc&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// go vet will complain about this copy op
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡Œ &lt;code&gt;go vet&lt;/code&gt; å¾—åˆ°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;assignment copies lock value to s: play.Svc contains play.noCopy
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;call of fmt.Println copies lock value: play.Svc contains play.noCopy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æœ‰äººåœ¨ Reddit ä¸Šé—®æˆ‘ï¼Œæ˜¯ä»€ä¹ˆè§¦å‘äº† &lt;code&gt;copylock&lt;/code&gt; æ£€æŸ¥å™¨åœ¨ &lt;code&gt;go vet&lt;/code&gt; â€” æ˜¯ç»“æ„ä½“çš„å­—é¢åç§° &lt;code&gt;noCopy&lt;/code&gt; è¿˜æ˜¯å®ƒå®ç°äº† &lt;code&gt;Locker&lt;/code&gt; æ¥å£ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;code&gt;noCopy&lt;/code&gt; è¿™ä¸ªåå­—ä¸æ˜¯ç‰¹æ®Šçš„ã€‚ä½ å¯ä»¥æƒ³å«å®ƒä»€ä¹ˆå°±å«ä»€ä¹ˆã€‚åªè¦å®ƒå®ç°äº† &lt;code&gt;Locker&lt;/code&gt; æ¥å£ï¼Œ &lt;code&gt;go vet&lt;/code&gt; ä¼šåœ¨å‘¨å›´ç»“æ„ä½“è¢«å¤åˆ¶æ—¶æŠ±æ€¨ã€‚å‚è§è¿™ä¸ª Go Playground ç‰‡æ®µ &lt;a class=&#34;link&#34; href=&#34;https://rednafi.com/go/prevent_struct_copies/#fn:6&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;6&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://rednafi.com/go/prevent_struct_copies&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Preventing accidental struct copies in Go&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>åœ¨ Go å’Œ Docker ä¸­æœå¯»åƒµå°¸è¿›ç¨‹</title>
        <link>https://blog.golang.space/p/%E5%9C%A8-go-%E5%92%8C-docker-%E4%B8%AD%E6%90%9C%E5%AF%BB%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B/</link>
        <pubDate>Fri, 25 Apr 2025 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E5%9C%A8-go-%E5%92%8C-docker-%E4%B8%AD%E6%90%9C%E5%AF%BB%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B/</guid>
        <description>&lt;p&gt;ä¸Šå‘¨ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼šåƒµå°¸è¿›ç¨‹å¯¼è‡´æˆ‘çš„æ¼”ç¤ºæœåŠ¡å™¨å´©æºƒ ğŸ§Ÿâ€â™‚ï¸ å¦‚æœä½ æœ‰è¿‡åœ¨ Go æˆ– Docker ä¸­å¤„ç†è¿›ç¨‹ç®¡ç†çš„ç»éªŒï¼Œä½ å¯èƒ½ä¼šå¯¹è¿™æ®µç»å†æ„ŸåŒèº«å—ã€‚ä¸‹é¢æ˜¯å¯¹è¿™ä¸ªé—®é¢˜çš„æ·±å…¥æŠ€æœ¯åˆ†æï¼Œä»¥åŠæˆ‘æ˜¯å¦‚ä½•è¿½è¸ªå¹¶è§£å†³å®ƒçš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œåœ¨ Stormkit ä¸­å¯ä»¥æ ¹æ®è‡ªæ‰˜ç®¡ç”¨æˆ·çš„éœ€æ±‚å¯åŠ¨ Node.js æœåŠ¡å™¨ï¼Œä½¿ç”¨åŠ¨æ€ç«¯å£åˆ†é…åœ¨åŒä¸€æœåŠ¡å™¨ä¸Šè¿è¡Œå¤šä¸ªå®ä¾‹ã€‚å®ƒæ˜¯ç”¨ Go ç¼–å†™çš„ï¼Œåˆ©ç”¨ &lt;code&gt;os/exec&lt;/code&gt; æ¥ç®¡ç†è¿›ç¨‹ã€‚è¯¥ç³»ç»Ÿä¸€ç›´éå¸¸ç¨³å®šâ€”â€”æ²¡æœ‰å®•æœºæ—¶é—´ï¼Œç”¨æˆ·ä¹Ÿå¾ˆæ»¡æ„ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘ï¼Œæˆ‘è®¾ç½®äº†ä¸€ä¸ªç”¨äºæ‰˜ç®¡ Next.js å’Œ Svelte æœåŠ¡å™¨ç«¯åº”ç”¨çš„æ¼”ç¤ºæœåŠ¡å™¨ã€‚ä¸€åˆ‡çœ‹èµ·æ¥éƒ½æ­£å¸¸ï¼Œç›´åˆ°æœåŠ¡å™¨å¼€å§‹éšæœºå‡ºç° Redis å‘å¸ƒ/è®¢é˜…é”™è¯¯è€Œå´©æºƒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å°† Redis å‡çº§åˆ°äº† 7.x ç‰ˆæœ¬ï¼Œæ£€æŸ¥äº†æ—¥å¿—å¹¶å°è¯•åœ¨æœ¬åœ°é‡ç°é—®é¢˜â€”â€”æ²¡æœ‰å‘ç°ä»»ä½•é—®é¢˜ã€‚å´©æºƒæ˜¯éšæœºä¸”éš¾ä»¥æ‰æ‘¸çš„ã€‚ç„¶åï¼Œæˆ‘ç¦ç”¨äº† Next.js åº”ç”¨ï¼Œå´©æºƒå°±åœæ­¢äº†ã€‚æˆ‘æ€€ç–‘æ˜¯ Next.js æœ¬èº«çš„é—®é¢˜ï¼Œäºæ˜¯æ·±å…¥ç ”ç©¶äº†å…¶è¿è¡Œæ—¶è¡Œä¸ºï¼Œä½†æ²¡æœ‰å‘ç°ä»€ä¹ˆå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æœåŠ¡å™¨æŒ‡æ ‡æ—¶ï¼Œæˆ‘å‘ç°å†…å­˜ä½¿ç”¨ç‡åœ¨å´©æºƒå‰ä¼šæ¿€å¢ã€‚å¿«é€Ÿè¿è¡Œ &lt;code&gt;ps aux&lt;/code&gt; å‘½ä»¤åï¼Œæˆ‘å‘ç°æœ‰ä¸€å †é—ç•™çš„ Next.js è¿›ç¨‹æ²¡æœ‰è¢«ç»ˆæ­¢ã€‚æˆ‘ä»¬çš„å…³æœºé€»è¾‘å¤±è´¥äº†ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œæœ€ç»ˆè€—å°½äº†æœåŠ¡å™¨èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;ç½ªé­ç¥¸é¦–åœ¨äºæˆ‘ä»¬çš„ Go ä»£ç ã€‚æˆ‘ä½¿ç”¨ &lt;code&gt;os.Process.Kill&lt;/code&gt; æ¥ç»ˆæ­¢è¿›ç¨‹ï¼Œä½†æ²¡æœ‰æ€æ­»ç”± npm å¯åŠ¨çš„å­è¿›ç¨‹ï¼ˆä¾‹å¦‚ï¼Œ &lt;code&gt;npm run start&lt;/code&gt; å¯åŠ¨äº† &lt;code&gt;next start&lt;/code&gt; ï¼‰ã€‚è¿™å¯¼è‡´å­¤å„¿è¿›ç¨‹ä¸æ–­ç´¯ç§¯ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªåŸå§‹ä»£ç çš„ç®€åŒ–ç‰ˆæœ¬ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;stopProcess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Process&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Kill&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ‘é€šè¿‡å¯åŠ¨ä¸€ä¸ªå¸¦æœ‰å­è¿›ç¨‹çš„ Node.js è¿›ç¨‹å¹¶æ€æ­»çˆ¶è¿›ç¨‹æ¥æœ¬åœ°é‡ç°äº†è¿™ä¸ªé—®é¢˜ã€‚æœç„¶ï¼Œå­è¿›ç¨‹è¿˜åœ¨è¿è¡Œã€‚åœ¨ Go ä¸­ï¼Œ &lt;code&gt;os.Process.Kill&lt;/code&gt; å‘è¿›ç¨‹å‘é€ä¿¡å·ï¼Œä½†ä¸å¤„ç†å…¶å­è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£å†³å°è¯•è¿›ç¨‹ç»„&#34;&gt;è§£å†³å°è¯•ï¼šè¿›ç¨‹ç»„&lt;/h2&gt;
&lt;p&gt;è¦æ€æ­»å­è¿›ç¨‹ï¼Œæˆ‘ä¿®æ”¹ä»£ç ä½¿ç”¨äº†è¿›ç¨‹ç»„ã€‚é€šè¿‡ä½¿ç”¨ &lt;code&gt;syscall.SysProcAttr&lt;/code&gt; è®¾ç½®è¿›ç¨‹ç»„ IDï¼ˆPGIDï¼‰ï¼Œæˆ‘å¯ä»¥å‘æ•´ä¸ªç»„å‘é€ä¿¡å·ã€‚è¿™æ˜¯æ›´æ–°åçš„ä»£ç ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;os/exec&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;syscall&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;startProcess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;npm&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;run&amp;#34;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;start&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SysProcAttr&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SysProcAttr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Setpgid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// Assign PGID
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;stopProcess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Process&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// Send SIGTERM to the process group
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;pgid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Getpgid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Kill&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pgid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SIGTERM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// Negative PGID targets group
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™åœ¨æœ¬åœ°å·¥ä½œäº†ï¼šæ€æ­»çˆ¶è¿›ç¨‹ä¹Ÿç»ˆæ­¢äº†å­è¿›ç¨‹ã€‚æˆ‘å°†ä¸€ä¸ªæµ‹è¯•ç‰ˆæœ¬éƒ¨ç½²åˆ°æˆ‘ä»¬çš„è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼ŒæœŸæœ›èƒœåˆ©ã€‚ä½† &lt;code&gt;ps aux&lt;/code&gt; æ˜¾ç¤º &lt;code&gt;&amp;lt;defunct&amp;gt;&lt;/code&gt; æ¥è¿‘è¿›ç¨‹æ—è¾¹â€”â€”åƒµå°¸è¿›ç¨‹ï¼ğŸ§ &lt;/p&gt;
&lt;h2 id=&#34;åƒµå°¸è¿›ç¨‹-101&#34;&gt;åƒµå°¸è¿›ç¨‹ 101&lt;/h2&gt;
&lt;p&gt;åœ¨ Linux ä¸­ï¼Œå½“ä¸€ä¸ªå­è¿›ç¨‹ç»ˆæ­¢ï¼Œä½†å…¶çˆ¶è¿›ç¨‹æ²¡æœ‰æ”¶é›†å…¶é€€å‡ºçŠ¶æ€ï¼ˆé€šè¿‡ wait æˆ– waitpidï¼‰æ—¶ï¼Œå°±ä¼šå‡ºç°åƒµå°¸è¿›ç¨‹ã€‚è¯¥è¿›ç¨‹ä¼šåœç•™åœ¨è¿›ç¨‹è¡¨ä¸­ï¼Œæ ‡è®°ä¸º &lt;code&gt;&amp;lt;defunct&amp;gt;&lt;/code&gt; ã€‚å°‘é‡çš„åƒµå°¸è¿›ç¨‹æ˜¯æ— å®³çš„ï¼Œä½†å½“å®ƒä»¬ç§¯ç´¯æ—¶ï¼Œä¼šè€—å°½è¿›ç¨‹è¡¨ï¼Œé˜»æ­¢æ–°è¿›ç¨‹çš„å¯åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬åœ°ï¼Œæˆ‘çš„ Go äºŒè¿›åˆ¶æ–‡ä»¶å¯ä»¥æ­£å¸¸å›æ”¶è¿›ç¨‹ã€‚ä½†åœ¨è¿œç¨‹ï¼Œåƒµå°¸è¿›ç¨‹ä»ç„¶å­˜åœ¨ã€‚å…³é”®åŒºåˆ«åœ¨äºè¿œç¨‹æœåŠ¡å™¨åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œäº† Stormkitã€‚&lt;/p&gt;
&lt;h2 id=&#34;docker-çš„åƒµå°¸è¿›ç¨‹é—®é¢˜&#34;&gt;Docker çš„åƒµå°¸è¿›ç¨‹é—®é¢˜&lt;/h2&gt;
&lt;p&gt;Docker å°† PID 1 åˆ†é…ç»™å®¹å™¨çš„å…¥å£ç‚¹ï¼ˆå³æˆ‘ä»¬çš„ Go äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ã€‚åœ¨ Linux ä¸­ï¼ŒPID 1ï¼ˆ &lt;code&gt;init/systemd&lt;/code&gt; ï¼‰è´Ÿè´£æ”¶å…»å­¤å„¿è¿›ç¨‹å¹¶å›æ”¶å…¶è‡ªèº«çš„åƒµå°¸å­è¿›ç¨‹ï¼ŒåŒ…æ‹¬å®ƒå·²ç»æ”¶å…»çš„å‰å­¤å„¿è¿›ç¨‹ã€‚å¦‚æœ PID 1 æ²¡æœ‰å¤„ç† &lt;code&gt;SIGCHLD&lt;/code&gt; ä¿¡å·å¹¶è°ƒç”¨ waitï¼Œåƒµå°¸è¿›ç¨‹å°±ä¼šç´¯ç§¯ã€‚æˆ‘ä»¬çš„ Go ç¨‹åºå¹¶æ²¡æœ‰è®¾è®¡æˆä¸€ä¸ªåˆå§‹åŒ–ç³»ç»Ÿï¼Œæ‰€ä»¥å®ƒå¿½ç•¥äº†å­¤å„¿è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£å†³æ–¹æ¡ˆtini&#34;&gt;è§£å†³æ–¹æ¡ˆï¼šTini&lt;/h2&gt;
&lt;p&gt;ç»è¿‡è¿›ä¸€æ­¥è°ƒæŸ¥ï¼Œæˆ‘å‘ç°å›æ”¶åƒµå°¸è¿›ç¨‹æ˜¯ Docker é•¿æœŸå­˜åœ¨çš„é—®é¢˜ï¼Œæ‰€ä»¥å¸‚åœºä¸Šå·²ç»æœ‰äº†è§£å†³æ–¹æ¡ˆã€‚æœ€ç»ˆæˆ‘æ‰¾åˆ°äº† Tiniï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºå®¹å™¨è®¾è®¡çš„è½»é‡çº§åˆå§‹åŒ–ç³»ç»Ÿã€‚Tini ä½œä¸º PID 1 è¿è¡Œï¼Œé€šè¿‡å¤„ç† SIGCHLD å’Œ wait æ‰€æœ‰è¿›ç¨‹æ¥æ­£ç¡®å›æ”¶åƒµå°¸è¿›ç¨‹ã€‚æˆ‘æ›´æ–°äº†æˆ‘ä»¬çš„ Dockerfileï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;ENTRYPOINT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/usr/bin/tini&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;--&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;CMD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/app/stormkit&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ–è€…ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨ Docker çš„ &amp;ndash;init æ ‡å¿—ï¼Œè¯¥æ ‡å¿—ä¼šè‡ªåŠ¨æ·»åŠ  Tiniã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Tini éƒ¨ç½²åï¼Œ &lt;code&gt;ps aux&lt;/code&gt; å¹²å‡€äº†â€”â€”æ²¡æœ‰åƒµå°¸è¿›ç¨‹ï¼ğŸ‰ æœåŠ¡å™¨ç¨³å®šäº†ï¼ŒRedis é”™è¯¯æ¶ˆå¤±äº†ï¼Œå› ä¸ºå®ƒä»¬æ˜¯èµ„æºè€—å°½çš„å‰¯ä½œç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Go è¿›ç¨‹ç®¡ç†ï¼šos.Process.Kill ä¸å¤„ç†å­è¿›ç¨‹ã€‚ä½¿ç”¨è¿›ç¨‹ç»„æˆ–é€‚å½“çš„ä¿¡å·å¤„ç†ä»¥å®ç°å¹²å‡€ç»ˆæ­¢ã€‚&lt;/li&gt;
&lt;li&gt;Docker PID 1ï¼šå¦‚æœä½ çš„åº”ç”¨ç¨‹åºä½œä¸º PID 1 è¿è¡Œï¼Œå®ƒéœ€è¦å›æ”¶åƒµå°¸è¿›ç¨‹æˆ–å§”æ‰˜ç»™åƒ Tini è¿™æ ·çš„åˆå§‹åŒ–ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;li&gt;è°ƒè¯•æç¤ºï¼šå¤„ç†å´©æºƒæ—¶ï¼Œè¯·å§‹ç»ˆæ£€æŸ¥ &lt;code&gt;ps aux&lt;/code&gt; æŸ¥çœ‹è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æœ¬åŸå› å¾ˆé‡è¦ï¼šRedis é”™è¯¯åªæ˜¯ä¸€ä¸ªè¯¯å¯¼â€”â€”åƒµå°¸è¿›ç¨‹å¯¼è‡´çš„å†…å­˜è€—å°½æ‰æ˜¯çœŸæ­£çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://www.stormkit.io/blog/hunting-zombie-processes-in-go-and-docker&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hunting Zombie Processes in Go and Docker  &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Go ä¸­çš„å¼±æŒ‡é’ˆ:ä¸ºä»€ä¹ˆä»–ä»¬ç°åœ¨å¾ˆé‡è¦?</title>
        <link>https://blog.golang.space/p/go-%E4%B8%AD%E7%9A%84%E5%BC%B1%E6%8C%87%E9%92%88%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BB%96%E4%BB%AC%E7%8E%B0%E5%9C%A8%E5%BE%88%E9%87%8D%E8%A6%81/</link>
        <pubDate>Sun, 01 Dec 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/go-%E4%B8%AD%E7%9A%84%E5%BC%B1%E6%8C%87%E9%92%88%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BB%96%E4%BB%AC%E7%8E%B0%E5%9C%A8%E5%BE%88%E9%87%8D%E8%A6%81/</guid>
        <description>&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯å¼±æŒ‡é’ˆå‘¢&#34;&gt;ä»€ä¹ˆæ˜¯å¼±æŒ‡é’ˆå‘¢?&lt;/h2&gt;
&lt;p&gt;å¼±æŒ‡é’ˆåŸºæœ¬ä¸Šæ˜¯ä¸€ç§å¼•ç”¨ä¸€å—å†…å­˜è€Œä¸é”å®šå®ƒçš„æ–¹æ³•ï¼Œå› æ­¤å¦‚æœæ²¡æœ‰å…¶ä»–äººä¸»åŠ¨æŒæœ‰å®ƒï¼Œåƒåœ¾æ”¶é›†å™¨å¯ä»¥æ¸…ç†å®ƒã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;ä¸ºä»€ä¹ˆè¿˜è¦ä¸ºå¼±æŒ‡é’ˆçƒ¦æ¼å‘¢ï¼Ÿ Go æœ‰å—ï¼Ÿ&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å—¯ï¼Œæ˜¯çš„ï¼ŒGo ç¡®å®æœ‰å¼±æŒ‡é’ˆçš„æ¦‚å¿µã€‚å®ƒæ˜¯å¼±åŒ…çš„ä¸€éƒ¨åˆ†ï¼Œä¸ Go è¿è¡Œæ—¶ç´§å¯†ç›¸è¿ã€‚æœ‰è¶£çš„æ˜¯ï¼Œå®ƒæ›¾ç»æ›´å¤šåœ°æ˜¯ä¸€ä¸ªå†…éƒ¨å·¥å…·ï¼Œä½†æœ€è¿‘æœ‰äººé€šè¿‡è¿™ä¸ª&lt;a class=&#34;link&#34; href=&#34;https://github.com/golang/go/issues/67552&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ææ¡ˆ&lt;/a&gt;æ¨åŠ¨å°†å…¶å…¬å¼€ã€‚&lt;/p&gt;
&lt;p&gt;å¾ˆé…·ï¼Œå¯¹å§ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¼±æŒ‡é’ˆçš„å…³é”®æ˜¯å®ƒä»¬æ˜¯å®‰å…¨çš„ã€‚å¦‚æœå®ƒä»¬æŒ‡å‘çš„å†…å­˜è¢«æ¸…ç†ï¼Œå¼±æŒ‡é’ˆä¼šè‡ªåŠ¨å˜ä¸º&lt;code&gt;nil&lt;/code&gt;å› æ­¤ä¸å­˜åœ¨æ„å¤–æŒ‡å‘å·²é‡Šæ”¾å†…å­˜çš„é£é™©ã€‚å½“æ‚¨ç¡®å®éœ€è¦ä¿ç•™è¯¥å†…å­˜æ—¶ï¼Œå¯ä»¥å°†å¼±æŒ‡é’ˆè½¬æ¢ä¸ºå¼ºæŒ‡é’ˆã€‚è¿™ä¸ªå¼ºæŒ‡é’ˆå‘Šè¯‰åƒåœ¾æ”¶é›†å™¨ï¼Œâ€œå˜¿ï¼Œå½“æˆ‘ä½¿ç”¨å®ƒæ—¶ï¼Œè¯·æŠŠå®ƒæ”¾å¼€ã€‚â€&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;ç­‰ç­‰ï¼Œå®ƒå°±è‡ªåŠ¨å˜æˆ nil äº†ï¼Ÿè¿™å¬èµ·æ¥â€¦â€¦æœ‰é£é™©&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ˜¯çš„ï¼Œå¼±æŒ‡é’ˆè‚¯å®šä¼šå˜æˆ&lt;code&gt;nil&lt;/code&gt;æœ‰æ—¶åœ¨ä½ æ„æƒ³ä¸åˆ°çš„æ—¶åˆ»ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒä»¬æ¯”å¸¸è§„æŒ‡é’ˆæ›´éš¾ä½¿ç”¨ã€‚åœ¨ä»»ä½•æ—¶å€™ï¼Œå¦‚æœå¼±æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜è¢«æ¸…ç†ï¼Œå®ƒå°±å¯ä»¥å˜æˆ&lt;code&gt;nil&lt;/code&gt; ã€‚å½“æ²¡æœ‰å¼ºæŒ‡é’ˆæŒæœ‰è¯¥å†…å­˜æ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚å› æ­¤ï¼Œå§‹ç»ˆæ£€æŸ¥åˆšåˆšä»å¼±æŒ‡é’ˆè½¬æ¢è€Œæ¥çš„å¼ºæŒ‡é’ˆæ˜¯å¦ä¸º&lt;code&gt;nil&lt;/code&gt;éå¸¸é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œå…³äºæ¸…ç†ä½•æ—¶å‘ç”Ÿâ€”â€”å®ƒä¸æ˜¯ç«‹å³å‘ç”Ÿçš„ã€‚å³ä½¿æ²¡æœ‰äººå¼•ç”¨å†…å­˜ï¼Œæ¸…ç†æ—¶é—´ä¹Ÿå®Œå…¨å–å†³äºåƒåœ¾æ”¶é›†å™¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç°åœ¨ï¼Œå±•ç¤ºä¸€äº›ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œå¼±åŒ…å°šæœªæ­£å¼å‘å¸ƒã€‚é¢„è®¡å°†åœ¨ Go 1.24 ä¸­è½åœ°ã€‚ä½†æˆ‘ä»¬å¯ä»¥å·çœ‹ä¸€ä¸‹æºä»£ç å¹¶å°è¯•ä¸€ä¸‹ã€‚è¯¥è½¯ä»¶åŒ…ä¸ºæ‚¨æä¾›äº†ä¸¤ä¸ªä¸»è¦çš„ APIï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;weak.Make&lt;/code&gt; ï¼šä»å¼ºæŒ‡é’ˆåˆ›å»ºå¼±æŒ‡é’ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;weak.Pointer[T].Strong&lt;/code&gt; ï¼šå°†å¼±æŒ‡é’ˆè½¬æ¢å›å¼ºæŒ‡é’ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;original:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// make a weak pointer
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;weakA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weak&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// use weakA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;strongA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weakA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Strong&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;strong:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strongA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// use weakA again
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;strongA&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weakA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Strong&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;strong:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strongA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Output:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// original: 0x1400010c670
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// strong: 0x1400010c670 0x1400010c670
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// strong: 0x0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ˜¯ä»£ç ä¸­å‘ç”Ÿçš„äº‹æƒ…ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ç¬¬ä¸€æ¬¡åƒåœ¾å›æ”¶ï¼ˆ &lt;code&gt;runtime.GC()&lt;/code&gt; ï¼‰ä¹‹åï¼Œå¼±æŒ‡é’ˆ&lt;code&gt;weakA&lt;/code&gt;ä»ç„¶æŒ‡å‘å†…å­˜ï¼Œå› ä¸ºæˆ‘ä»¬ä»åœ¨ä½¿ç”¨å˜é‡&lt;code&gt;a&lt;/code&gt; &lt;code&gt;println(&amp;quot;strong:&amp;quot;, strongA, a)&lt;/code&gt; çº¿ã€‚ç”±äºå†…å­˜æ­£åœ¨ä½¿ç”¨ä¸­ï¼Œå› æ­¤è¿˜æ— æ³•æ¸…ç†ã€‚&lt;/li&gt;
&lt;li&gt;ä½†æ˜¯å½“ç¬¬äºŒæ¬¡åƒåœ¾æ”¶é›†è¿è¡Œæ—¶ï¼Œå¼ºå¼•ç”¨ï¼ˆ &lt;code&gt;a&lt;/code&gt; ï¼‰ä¸å†ä½¿ç”¨ã€‚è¿™æ„å‘³ç€åƒåœ¾æ”¶é›†å™¨å¯ä»¥å®‰å…¨åœ°æ¸…ç†å†…å­˜ï¼Œè®©&lt;code&gt;weakA.Strong()&lt;/code&gt;è¿”å›&lt;code&gt;nil&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç°åœ¨ï¼Œå¦‚æœæ‚¨å°è¯•ä½¿ç”¨&lt;code&gt;string&lt;/code&gt;æŒ‡é’ˆä»¥å¤–çš„å…¶ä»–å†…å®¹ï¼ˆä¾‹å¦‚&lt;code&gt;*int&lt;/code&gt; ã€ &lt;code&gt;*bool&lt;/code&gt;æˆ–å…¶ä»–ç±»å‹ï¼‰æ¥å°è¯•æ­¤ä»£ç ï¼Œæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ä¸åŒçš„è¡Œä¸ºï¼Œæœ€åä¸€ä¸ª&lt;code&gt;strong&lt;/code&gt;è¾“å‡ºå¯èƒ½ä¸æ˜¯&lt;code&gt;nil&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ Go å¦‚ä½•å¤„ç†&lt;code&gt;int&lt;/code&gt; ã€ &lt;code&gt;bool&lt;/code&gt; ã€ &lt;code&gt;float32&lt;/code&gt; ã€ &lt;code&gt;float64&lt;/code&gt;ç­‰â€œå¾®å°å¯¹è±¡â€æœ‰å…³ã€‚è¿™äº›ç±»å‹è¢«åˆ†é…ä¸ºå¾®å°å¯¹è±¡ï¼Œå³ä½¿å®ƒä»¬åœ¨æŠ€æœ¯ä¸Šæœªä½¿ç”¨ï¼Œåƒåœ¾æ”¶é›†å™¨ä¹Ÿå¯èƒ½ä¸ä¼šç«‹å³æ¸…ç†å®ƒä»¬åœ¨åƒåœ¾æ”¶é›†æœŸé—´ã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥æ›´æ·±å…¥åœ°ç ”ç©¶&lt;a class=&#34;link&#34; href=&#34;https://victoriametrics.com/blog/go-runtime-finalizer-keepalive&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go Runtime Finalizer å’Œ Keep Alive&lt;/a&gt;ä¸­çš„å¾®å°å¯¹è±¡åˆ†é…ã€‚&lt;/p&gt;
&lt;p&gt;å¼±æŒ‡é’ˆå¯¹äºç‰¹å®šåœºæ™¯ä¸‹çš„å†…å­˜ç®¡ç†éå¸¸å®ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œå®ƒä»¬éå¸¸é€‚åˆè§„èŒƒåŒ–æ˜ å°„ - æ‚¨åªæƒ³ä¿ç•™ä¸€ä»½æ•°æ®çš„ä¸€ä»½å‰¯æœ¬çš„æƒ…å†µã€‚è¿™ä¸æˆ‘ä»¬ä¹‹å‰&lt;a class=&#34;link&#34; href=&#34;https://victoriametrics.com/blog/go-unique-package-intern-string&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å…³äºå­—ç¬¦ä¸²é©»ç•™çš„è®¨è®º&lt;/a&gt;æœ‰å…³ã€‚&lt;/li&gt;
&lt;li&gt;å¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œå½“æ‚¨å¸Œæœ›æŸäº›å†…å­˜çš„å¯¿å‘½ä¸å¦ä¸€ä¸ªå¯¹è±¡çš„å¯¿å‘½ç›¸åŒ¹é…æ—¶ï¼Œç±»ä¼¼äº JavaScript çš„ WeakMap çš„å·¥ä½œæ–¹å¼ã€‚ WeakMap å…è®¸å¯¹è±¡åœ¨ä¸å†ä½¿ç”¨æ—¶è‡ªåŠ¨æ¸…ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œå¼±æŒ‡é’ˆçš„ä¸»è¦å¥½å¤„æ˜¯å®ƒä»¬å¯ä»¥è®©ä½ å‘Šè¯‰åƒåœ¾æ”¶é›†å™¨ï¼Œ *â€œå˜¿ï¼Œå¦‚æœæ²¡æœ‰äººä½¿ç”¨è¿™ä¸ªèµ„æºï¼Œå°±å¯ä»¥åˆ é™¤å®ƒâ€”â€”æˆ‘ä»¥åå¯ä»¥éšæ—¶é‡æ–°åˆ›å»ºå®ƒã€‚â€*è¿™å¯¹äºå ç”¨å¤§é‡å†…å­˜ä½†ä¸éœ€è¦ä¿ç•™çš„å¯¹è±¡éå¸¸æœ‰æ•ˆï¼Œé™¤éå®ƒä»¬æ­£åœ¨è¢«ç§¯æä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¼±æŒ‡é’ˆå¦‚ä½•å·¥ä½œï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ‰è¶£çš„æ˜¯ï¼Œå¼±æŒ‡é’ˆå®é™…ä¸Šå¹¶ä¸ç›´æ¥æŒ‡å‘å®ƒä»¬å¼•ç”¨çš„å†…å­˜ã€‚ç›¸åï¼Œå®ƒä»¬æ˜¯åŒ…å«â€œé—´æ¥å¯¹è±¡â€çš„ç®€å•ç»“æ„ï¼ˆä½¿ç”¨æ³›å‹ï¼‰ã€‚è¿™ä¸ªå¯¹è±¡å¾ˆå°ï¼Œåªæœ‰ 8 ä¸ªå­—èŠ‚ï¼Œå®ƒæŒ‡å‘å®é™…çš„å†…å­˜ç›®æ ‡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;any&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1734485576251.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;å¼±æŒ‡é’ˆé€šè¿‡é—´æ¥å¼•ç”¨å†…å­˜&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ­¤è®¾ç½®ä½¿åƒåœ¾æ”¶é›†å™¨å¯ä»¥é«˜æ•ˆåœ°ä¸€æ¬¡æ€§æ¸…ç†æŒ‡å‘ç‰¹å®šå¯¹è±¡çš„å¼±æŒ‡é’ˆã€‚å½“å®ƒå†³å®šåº”è¯¥é‡Šæ”¾å†…å­˜æ—¶ï¼Œæ”¶é›†å™¨åªéœ€å°†é—´æ¥å¯¹è±¡ä¸­çš„æŒ‡é’ˆè®¾ç½®ä¸º&lt;code&gt;nil&lt;/code&gt; ï¼ˆæˆ–&lt;code&gt;0x0&lt;/code&gt; ï¼‰ã€‚å®ƒä¸å¿…å•ç‹¬æ›´æ–°æ¯ä¸ªå¼±æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1734485968905.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;GCå›æ”¶å†…å­˜ï¼Œæ›´æ–°å¼±æŒ‡é’ˆé“¾æ¥&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æœ€é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªè®¾è®¡æ”¯æŒç›¸ç­‰æ£€æŸ¥ï¼ˆ &lt;code&gt;==&lt;/code&gt; ï¼‰ã€‚ä»åŒä¸€åŸå§‹æŒ‡é’ˆåˆ›å»ºçš„å¼±æŒ‡é’ˆå°†è¢«è§†ä¸ºâ€œç›¸ç­‰â€ï¼Œå³ä½¿å®ƒä»¬æŒ‡å‘çš„å¯¹è±¡å·²è¢«åƒåœ¾å›æ”¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// make a weak pointers
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;weakA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weak&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;weakA2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weak&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Before GC - Equality check:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weakA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weakA2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// Test their equality
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;After GC - Strong:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weakA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Strong&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weakA2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Strong&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;After GC - Equality check:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weakA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;weakA2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Before GC - Equality check: true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// After GC - Strong: 0x0 0x0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// After GC - Equality check: true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºæ¥è‡ªåŒä¸€åŸå§‹å¯¹è±¡çš„å¼±æŒ‡é’ˆå…±äº«ç›¸åŒçš„é—´æ¥å¯¹è±¡ã€‚å½“æ‚¨è°ƒç”¨&lt;code&gt;weak.Make&lt;/code&gt;æ—¶ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡å·²ç»æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å¼±æŒ‡é’ˆï¼Œåˆ™ç°æœ‰çš„é—´æ¥å¯¹è±¡å°†è¢«é‡ç”¨ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­‰ç­‰ï¼Œä½¿ç”¨ 8 ä¸ªå­—èŠ‚ä½œä¸ºé—´æ¥å¯¹è±¡ä¸æ˜¯æœ‰ç‚¹æµªè´¹å—ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;çœ‹èµ·æ¥å¥½åƒæ˜¯è¿™æ ·ï¼Œä½†ä½œè€…ä¼šè¯´ï¼Œè¿™å¹¶ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚å¼±æŒ‡é’ˆé€šå¸¸ç”¨äºæ€»ä½“ç›®æ ‡æ˜¯èŠ‚çœå†…å­˜çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨è§„èŒƒåŒ–æ˜ å°„ä¸­ï¼ˆé€šè¿‡ä»…ä¿ç•™æ¯ä¸ªå”¯ä¸€æ•°æ®çš„ä¸€ä»½å‰¯æœ¬æ¥æ¶ˆé™¤é‡å¤é¡¹ï¼‰ï¼Œæ‚¨å·²ç»é€šè¿‡é¿å…å†—ä½™èŠ‚çœäº†å¤§é‡å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ‚¨å­˜åœ¨å¤§é‡å”¯ä¸€é¡¹å’Œå¾ˆå°‘é‡å¤é¡¹çš„æƒ…å†µä¸‹ä½¿ç”¨å¼±æŒ‡é’ˆï¼Œåˆ™æœ€ç»ˆå¯èƒ½ä¼šä½¿ç”¨æ¯”é¢„æœŸæ›´å¤šçš„å†…å­˜ã€‚å› æ­¤ï¼Œåœ¨å†³å®šå¼±æŒ‡é’ˆæ˜¯å¦æ˜¯é€‚åˆè¯¥å·¥ä½œçš„å·¥å…·æ—¶ï¼Œè€ƒè™‘å…·ä½“ç”¨ä¾‹éå¸¸é‡è¦ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://victoriametrics.com/blog/go-weak-pointer/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Weak Pointers in Go: Why They Matter Now&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ä¸è¦åœ¨å¯å†™æ–‡ä»¶ä¸Šå»¶è¿Ÿ Close</title>
        <link>https://blog.golang.space/p/%E4%B8%8D%E8%A6%81%E5%9C%A8%E5%8F%AF%E5%86%99%E6%96%87%E4%BB%B6%E4%B8%8A%E5%BB%B6%E8%BF%9F-close/</link>
        <pubDate>Tue, 17 Sep 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E4%B8%8D%E8%A6%81%E5%9C%A8%E5%8F%AF%E5%86%99%E6%96%87%E4%BB%B6%E4%B8%8A%E5%BB%B6%E8%BF%9F-close/</guid>
        <description>&lt;p&gt;å¯¹äº Go ç¨‹åºå‘˜æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¿«å°±ä¼šæ­»è®°ç¡¬èƒŒçš„ä¹ æƒ¯ç”¨æ³•ï¼šæ¯å½“ä½ æƒ³å‡ºä¸€ä¸ªå®ç°&lt;code&gt;io.Closer&lt;/code&gt;æ¥å£çš„å€¼æ—¶ï¼Œåœ¨æ£€æŸ¥é”™è¯¯åï¼Œä½ ä¼šç«‹å³&lt;code&gt;defer&lt;/code&gt;å…¶&lt;code&gt;Close()&lt;/code&gt;æ–¹æ³•ã€‚åœ¨å‘å‡º HTTP è¯·æ±‚æ—¶æœ€å¸¸çœ‹åˆ°è¿™ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;https://joeshaw.org&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ–æ‰“å¼€æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/home/joeshaw/notes.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½†è¿™ç§ä¹ æƒ¯ç”¨æ³•å®é™…ä¸Šå¯¹å¯å†™æ–‡ä»¶æœ‰å®³ï¼Œå› ä¸ºå»¶è¿Ÿå‡½æ•°è°ƒç”¨ä¼šå¿½ç•¥å…¶è¿”å›å€¼ï¼Œå¹¶ä¸”&lt;code&gt;Close()&lt;/code&gt;æ–¹æ³•å¯èƒ½ä¼šè¿”å›é”™è¯¯ã€‚&lt;strong&gt;å¯¹äºå¯å†™æ–‡ä»¶ï¼ŒGo ç¨‹åºå‘˜åº”è¯¥é¿å…&lt;code&gt;defer&lt;/code&gt;ä¹ æƒ¯ç”¨æ³•ï¼Œå¦åˆ™ä¼šå‡ºç°éå¸¸ç½•è§çš„ä»¤äººæŠ“ç‹‚çš„é”™è¯¯ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆæ‚¨ä¼šä»&lt;code&gt;Close()&lt;/code&gt;ä¸­æ”¶åˆ°é”™è¯¯ï¼Œä½†åœ¨ä¹‹å‰çš„&lt;code&gt;Write()&lt;/code&gt;è°ƒç”¨ä¸­å´æ²¡æœ‰æ”¶åˆ°é”™è¯¯ï¼Ÿä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è¡¥å……ä¸€ä¸‹è®¡ç®—æœºä½“ç³»ç»“æ„é¢†åŸŸçŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æ¥è¯´ï¼Œå½“ä½ ä» CPU å‘å¤–ç§»åŠ¨æ—¶ï¼Œæ“ä½œçš„é€Ÿåº¦ä¼šå˜å¾—æ…¢å‡ ä¸ªæ•°é‡çº§ã€‚å†™å…¥ CPU å¯„å­˜å™¨éå¸¸å¿«ã€‚è®¿é—®ç³»ç»Ÿ RAM ç›¸å¯¹è¾ƒæ…¢ã€‚è¿›è¡Œç£ç›˜æˆ–ç½‘ç»œ I/O åˆ™æ…¢å¾—å¤šã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ¯ä¸ª&lt;code&gt;Write()&lt;/code&gt;è°ƒç”¨éƒ½å°†æ•°æ®åŒæ­¥æäº¤åˆ°ç£ç›˜ï¼Œæˆ‘ä»¬ç³»ç»Ÿçš„æ€§èƒ½å°†ä¼šæ…¢å¾—æ— æ³•ä½¿ç”¨ã€‚è™½ç„¶åŒæ­¥å†™å…¥å¯¹äºæŸäº›ç±»å‹çš„è½¯ä»¶ï¼ˆä¾‹å¦‚æ•°æ®åº“ï¼‰éå¸¸é‡è¦ï¼Œä½†å¤§å¤šæ•°æ—¶å€™å®ƒæ˜¯å¤šä½™çš„ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç³Ÿç³•çš„æƒ…å†µæ˜¯ä¸€æ¬¡å†™å…¥ä¸€ä¸ªå­—èŠ‚åˆ°æ–‡ä»¶ä¸­ã€‚ç¡¬ç›˜é©±åŠ¨å™¨â€”â€”ç²—æš´çš„æœºæ¢°è®¾å¤‡â€”â€”éœ€è¦å°†ç£å¤´ç‰©ç†ç§»åŠ¨åˆ°ç›˜ç‰‡ä¸Šçš„ä½ç½®ï¼Œå¹¶å¯èƒ½éœ€è¦ç­‰å¾…æ•´ç›˜çš„æ—‹è½¬æ‰èƒ½å°†æ•°æ®æŒä¹…åŒ–ã€‚å›ºæ€ç¡¬ç›˜ï¼ˆSSDï¼‰ï¼Œå®ƒä»¬ä»¥å—çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼Œå¹¶ä¸”æ¯ä¸ªå—çš„å†™å…¥å‘¨æœŸæ˜¯æœ‰é™çš„ï¼Œä¼šå› ä¸ºå—è¢«åå¤å†™å…¥å’Œè¦†ç›–è€Œè¿…é€Ÿç£¨æŸã€‚&lt;/p&gt;
&lt;p&gt;å¹¸è¿çš„æ˜¯ï¼Œè¿™ç§æƒ…å†µä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºç¡¬ä»¶å’Œè½¯ä»¶çš„å¤šä¸ªå±‚æ¬¡å®ç°äº†ç¼“å­˜å’Œå†™å…¥ç¼“å†²ã€‚å½“ä½ è°ƒç”¨ Write() æ—¶ï¼Œæ•°æ®ä¸ä¼šç«‹å³è¢«å†™å…¥åˆ°ä»‹è´¨ä¸Šã€‚æ“ä½œç³»ç»Ÿã€å­˜å‚¨æ§åˆ¶å™¨å’Œä»‹è´¨æœ¬èº«éƒ½åœ¨ç¼“å­˜æ•°æ®ï¼Œä»¥ä¾¿å°†è¾ƒå°çš„å†™å…¥æ“ä½œæ‰¹é‡å¤„ç†ï¼Œä¼˜åŒ–æ•°æ®åœ¨ä»‹è´¨ä¸Šçš„å­˜å‚¨ï¼Œå¹¶å†³å®šä½•æ—¶æœ€ä½³åœ°æäº¤æ•°æ®ã€‚è¿™å°†æˆ‘ä»¬çš„å†™å…¥æ“ä½œä»ç¼“æ…¢çš„ã€é˜»å¡çš„åŒæ­¥æ“ä½œè½¬å˜ä¸ºå¿«é€Ÿçš„ã€å¼‚æ­¥çš„æ“ä½œï¼Œè¿™äº›æ“ä½œä¸ä¼šç›´æ¥è§¦åŠæ›´æ…¢çš„ I/O è®¾å¤‡ã€‚ä¸€æ¬¡å†™å…¥ä¸€ä¸ªå­—èŠ‚ä»æ¥ä¸æ˜¯æœ€æœ‰æ•ˆçš„åšæ³•ï¼Œä½†è‡³å°‘æˆ‘ä»¬ä¸ä¼šå› ä¸ºè¿™æ ·åšè€Œè€—æŸç¡¬ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œè¿™äº›å­—èŠ‚æœ€ç»ˆå¿…é¡»è¢«å†™å…¥ç£ç›˜ã€‚æ“ä½œç³»ç»ŸçŸ¥é“å½“æˆ‘ä»¬å…³é—­ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å¯¹å®ƒçš„æ“ä½œï¼Œä¸ä¼šæœ‰åç»­çš„å†™å…¥æ“ä½œå‘ç”Ÿã€‚å®ƒè¿˜çŸ¥é“å…³é—­æ–‡ä»¶æ˜¯å®ƒæœ€åä¸€æ¬¡å‘Šè¯‰æˆ‘ä»¬æ˜¯å¦å‡ºç°äº†é—®é¢˜çš„æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Linux å’Œ macOS ç­‰ POSIX ç³»ç»Ÿä¸Šï¼Œå…³é—­æ–‡ä»¶æ˜¯é€šè¿‡&lt;code&gt;close&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨æ¥å¤„ç†çš„ã€‚ &lt;code&gt;close(2)&lt;/code&gt;çš„ BSD æ‰‹å†Œé¡µè®¨è®ºäº†å®ƒå¯èƒ½è¿”å›çš„é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ERRORS
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     The close&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; system call will fail &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;EBADF&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;            fildes is not a valid, active file descriptor.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;EINTR&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;            Its execution was interrupted by a signal.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;EIO&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;              A previously-uncommitted write&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; encountered an input/output
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        error.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;EIO æ­£æ˜¯æˆ‘ä»¬æ‹…å¿ƒçš„é”™è¯¯ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬åœ¨å°è¯•å°†æ•°æ®ä¿å­˜åˆ°ç£ç›˜æ—¶ä¸¢å¤±äº†æ•°æ®ï¼Œæˆ‘ä»¬çš„ Go ç¨‹åºåœ¨è¿™ç§æƒ…å†µä¸‹ç»å¯¹ä¸åº”è¿”å› nil é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³è¿™ä¸ªé—®é¢˜æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯åœ¨å†™å…¥æ–‡ä»¶æ—¶ä¸ä½¿ç”¨&lt;code&gt;defer&lt;/code&gt; ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;helloNotes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/home/joeshaw/notes.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WriteString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello world&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ç¡®å®æ„å‘³ç€åœ¨å‡ºç°é”™è¯¯æ—¶éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œé¢å¤–çš„è®°å½•ï¼šåœ¨&lt;code&gt;io.WriteString()&lt;/code&gt;å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»æ˜¾å¼å…³é—­å®ƒï¼ˆå¹¶å¿½ç•¥å®ƒçš„é”™è¯¯ï¼Œå› ä¸ºå†™å…¥é”™è¯¯ä¼˜å…ˆï¼‰ã€‚ä½†å®ƒå¾ˆæ¸…æ™°ã€ç›´æ¥ï¼Œå¹¶ä¸”å¯ä»¥æ­£ç¡®æ£€æŸ¥&lt;code&gt;f.Close()&lt;/code&gt;è°ƒç”¨ä¸­çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æœ‰&lt;/em&gt;ä¸€ç§æ–¹æ³•å¯ä»¥é€šè¿‡ä½¿ç”¨å‘½åè¿”å›å€¼å’Œé—­åŒ…&lt;code&gt;defer&lt;/code&gt;å¤„ç†è¿™ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;helloNotes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;File&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/home/joeshaw/notes.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;cerr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cerr&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WriteString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello world&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤æ¨¡å¼çš„ä¸»è¦å¥½å¤„æ˜¯ä¸å¯èƒ½å¿˜è®°å…³é—­æ–‡ä»¶ï¼Œå› ä¸ºå»¶è¿Ÿå…³é—­å§‹ç»ˆä¼šæ‰§è¡Œã€‚åœ¨å…·æœ‰æ›´å¤š&lt;code&gt;if err != nil&lt;/code&gt;æ¡ä»¶åˆ†æ”¯çš„è¾ƒé•¿å‡½æ•°ä¸­ï¼Œæ­¤æ¨¡å¼è¿˜å¯ä»¥å‡å°‘ä»£ç è¡Œæ•°å’Œé‡å¤æ¬¡æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯è§‰å¾—è¿™ç§æ¨¡å¼æœ‰ç‚¹é­”æ³•äº†ã€‚æˆ‘ä¸å–œæ¬¢ä½¿ç”¨å‘½åè¿”å›å€¼ï¼Œå¹¶ä¸”å³ä½¿å¯¹äºç»éªŒä¸°å¯Œçš„ Go ç¨‹åºå‘˜æ¥è¯´ï¼Œåœ¨æ ¸å¿ƒå‡½æ•°å®Œæˆåä¿®æ”¹è¿”å›å€¼ä¹Ÿä¸æ˜¯ç›´è§‚ä¸Šæ¸…æ¥šçš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æ„¿æ„æ¥å—æ›´å…·å¯è¯»æ€§å’Œæ˜“äºç†è§£çš„ä»£ç çš„æƒè¡¡ï¼Œå› ä¸ºéœ€è¦ä¸æ–­åœ°å®¡æŸ¥ä»£ç ä»¥ç¡®ä¿æ–‡ä»¶åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½å·²å…³é—­ï¼Œè¿™å°±æ˜¯æˆ‘åœ¨å‘å…¶ä»–äººæä¾›çš„ä»£ç å®¡æŸ¥ä¸­æ¨èçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ›´æ–° 1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://twitter.com/benbjohnson/status/874286396411961345&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Ben Johnson åœ¨ Twitter ä¸Šå»ºè®®&lt;/a&gt;ï¼Œå¯¹æ–‡ä»¶å¤šæ¬¡è¿è¡Œ&lt;code&gt;Close()&lt;/code&gt;å¯èƒ½æ˜¯å®‰å…¨çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;doSomething&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;foo&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;bar&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;io.Closer&lt;/code&gt;ä¸Šçš„ Go æ–‡æ¡£&lt;a class=&#34;link&#34; href=&#34;https://golang.org/pkg/io/#Closer&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ˜ç¡®æŒ‡å‡º&lt;/a&gt;ï¼Œåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨åçš„æ¥å£çº§åˆ«è¡Œä¸ºæ˜¯æœªæŒ‡å®šçš„ï¼Œä½†ç‰¹å®šçš„å®ç°å¯èƒ½ä¼šè®°å½•å…¶è‡ªå·±çš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;ä¸å¹¸çš„æ˜¯ï¼Œ &lt;code&gt;*os.File&lt;/code&gt;çš„æ–‡æ¡£&lt;a class=&#34;link&#34; href=&#34;https://golang.org/pkg/os/#File.Close&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¹¶ä¸æ¸…æ¥š&lt;/a&gt;å®ƒçš„è¡Œä¸ºï¼Œåªæ˜¯è¯´ï¼Œâ€œClose å…³é—­æ–‡ä»¶ï¼Œä½¿å…¶æ— æ³•ç”¨äº I/Oã€‚å¦‚æœæœ‰çš„è¯ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚â€ç„¶è€Œï¼Œä» 1.8 å¼€å§‹çš„å®ç°æ˜¾ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;File&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ErrInvalid&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;badFd&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;EINVAL&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PathError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;close&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fd&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// so it can&amp;#39;t be closed again
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// no need for a finalizer anymore
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SetFinalizer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸ºäº†æ¸…æ¥šèµ·è§ï¼Œ &lt;code&gt;badFd&lt;/code&gt;è¢«å®šä¹‰ä¸º -1 ï¼Œå› æ­¤éšåå°è¯•å…³é—­&lt;code&gt;*os.File&lt;/code&gt;å°†ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œå¹¶è¿”å›&lt;code&gt;syscall.EINVAL&lt;/code&gt; ã€‚ä½†ç”±äºæˆ‘ä»¬å¿½ç•¥äº†&lt;code&gt;defer&lt;/code&gt;çš„é”™è¯¯ï¼Œæ‰€ä»¥è¿™å¹¶ä¸é‡è¦ã€‚ç¡®åˆ‡åœ°è¯´ï¼Œå®ƒä¸æ˜¯å¹‚ç­‰çš„ï¼Œä½†æ­£å¦‚ Ben åæ¥åœ¨ Twitter å¸–å­ä¸­æ‰€è¯´çš„é‚£æ ·ï¼Œ &lt;a class=&#34;link&#34; href=&#34;https://twitter.com/benbjohnson/status/874289044800368640&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;â€œwonâ€™t blow shit up if you call it twice.â€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ›´æ–° 2&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…³é—­æ–‡ä»¶æ˜¯æ“ä½œç³»ç»Ÿå‘Šè¯‰æˆ‘ä»¬é—®é¢˜çš„æœ€åæœºä¼šï¼Œä½†å…³é—­æ–‡ä»¶æ—¶ç¼“å†²åŒºä¸ä¸€å®šä¼šè¢«åˆ·æ–°ã€‚å…³é—­æ–‡ä»¶&lt;em&gt;å&lt;/em&gt;å®Œå…¨æœ‰å¯èƒ½å°†å†™å…¥ç¼“å†²åŒºåˆ·æ–°åˆ°ç£ç›˜ï¼Œå¹¶ä¸”æ— æ³•æ•è·å…¶ä¸­çš„æ•…éšœã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œé€šå¸¸æ„å‘³ç€å‡ºç°ä¸¥é‡é”™è¯¯ï¼Œä¾‹å¦‚ç£ç›˜å‡ºç°æ•…éšœã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨&lt;code&gt;*os.File&lt;/code&gt;ä¸Šçš„&lt;code&gt;Sync()&lt;/code&gt;æ–¹æ³•å¼ºåˆ¶å†™å…¥ç£ç›˜ï¼Œè¯¥æ–¹æ³•è°ƒç”¨&lt;code&gt;fsync&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ã€‚æ‚¨åº”è¯¥æ£€æŸ¥è¯¥è°ƒç”¨ä¸­çš„é”™è¯¯ï¼Œä½†æˆ‘è®¤ä¸ºå¿½ç•¥&lt;code&gt;Close()&lt;/code&gt;ä¸­çš„é”™è¯¯æ˜¯å®‰å…¨çš„ã€‚è°ƒç”¨&lt;code&gt;fsync&lt;/code&gt;å¯¹æ€§èƒ½æœ‰ä¸¥é‡å½±å“ï¼šå®ƒå°†å†™å…¥ç¼“å†²åŒºåˆ·æ–°åˆ°é€Ÿåº¦è¾ƒæ…¢çš„ç£ç›˜ã€‚ä½†å¦‚æœæ‚¨çœŸçš„éå¸¸æƒ³è¦å°†æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œé‚£ä¹ˆæœ€å¥½éµå¾ªçš„æ¨¡å¼å¯èƒ½æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;helloNotes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/home/joeshaw/notes.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WriteString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello world&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>æŒ‡é’ˆä¸­çš„éšæœºå€¼</title>
        <link>https://blog.golang.space/p/%E6%8C%87%E9%92%88%E4%B8%AD%E7%9A%84%E9%9A%8F%E6%9C%BA%E5%80%BC/</link>
        <pubDate>Mon, 16 Sep 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E6%8C%87%E9%92%88%E4%B8%AD%E7%9A%84%E9%9A%8F%E6%9C%BA%E5%80%BC/</guid>
        <description>&lt;h2 id=&#34;è ¢èŒçš„æ­»æ³•-æŒ‡é’ˆä¸­çš„éšæœºå€¼&#34;&gt;è ¢èŒçš„æ­»æ³•: æŒ‡é’ˆä¸­çš„éšæœºå€¼&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘æœ‰äººæå‡ºã€Œæ˜¯å¦å¯ä»¥å°†éæŒ‡é’ˆæ”¾å…¥ unsafe.Pointer å˜é‡ã€çš„é—®é¢˜ã€‚æ™®éçš„ååº”æ˜¯ã€ŒNOï¼Œè¿™æ˜¯ä¸€ä¸ªåä¸»æ„ã€ã€‚æˆ‘åŒæ„ï¼Œä½†å¦‚æœæˆ‘ä»¬ä»ä¸æ¢ç´¢ç³Ÿç³•çš„æƒ³æ³•ï¼Œæ°¸è¿œä¸ä¼š&amp;hellip;å—¯ï¼Œå®é™…ä¸Šï¼Œå¦‚æœä»ä¸æ¢ç´¢ç³Ÿç³•çš„æƒ³æ³•ï¼Œç»å¯¹ä¸ä¼šå‡ºé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è®©æˆ‘ä»¬æ¢è®¨ä¸€ä¸‹è¿™ä¸ª Bad idea&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆæ˜¯åä¸»æ„? ä¸»è¦æ˜¯å¯èƒ½æ˜¯ä¼šè®© Go çš„åƒåœ¾æ”¶é›†å™¨å´©æºƒã€‚Go GC ä¼šæŸ¥çœ‹ç¨‹åºå¯è§çš„æ¯ä¸ªæŒ‡é’ˆï¼Œä»¥æŸ¥çœ‹å“ªäº›å†…å­˜ä»åœ¨ä½¿ç”¨ï¼Œä»¥åŠå“ªäº›å†…å­˜å¯ä»¥é‡Šæ”¾ã€‚å¦‚æœå®ƒè·Ÿéšçš„æŒ‡é’ˆæœªæŒ‡å‘æœ‰æ•ˆçš„å†…å­˜åœ°å€ï¼Œåˆ™å¯èƒ½ä¼šå´©æºƒã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹ï¼Œåˆ†é…åäº¿ä¸ª unsafe.Pointers å¹¶å°†ä»–ä»¬å…¨éƒ¨è®¾ç½®ä¸ºæ— æ•ˆæŒ‡é’ˆçš„å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestRandomUnsafePointers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1e9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// Possible misuse of unsafe.Pointer? Definite misuse of unsafe.Pointer!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;uintptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;KeepAlive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤ä»£ç åˆ›å»ºä¸€ä¸ªåŒ…å« 10 äº¿ä¸ª&lt;code&gt;unsafe.Pointer&lt;/code&gt;çš„åˆ‡ç‰‡ï¼Œç„¶åå¼ºåˆ¶ GC è¿è¡Œã€‚å®ƒä¸ä¼šå´©æºƒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ç”¨çœŸæ­£çš„éšæœºå€¼å†è¯•ä¸€æ¬¡ï¼Œå¹¶ä¸”åšä¸€äº›å‚»äº‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestRandomUnsafePointers2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1e9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// Possible misuse of unsafe.Pointer? Definite misuse of unsafe.Pointer!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;uintptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// Possible misuse of unsafe.Pointer? Definite misuse of unsafe.Pointer!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;			&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;KeepAlive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä»æ—§æœªå´©æºƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœæˆ‘ä»¬ä¸å¤Ÿèªæ˜æ€ä¹ˆåŠï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Go å¯èƒ½ä¼šæŸ¥çœ‹è¿™äº›å€¼å¹¶æ€è€ƒã€Œå•Šå˜ã€ï¼Œç„¶åå¿½ç•¥ä»–ã€‚ Go å¯ä»¥ä¸ C äº¤äº’ï¼Œå› æ­¤å®ƒéœ€è¦èƒ½å¤Ÿå¤„ç†åœ¨å…¶æ§åˆ¶ä¹‹å¤–åˆ†é…çš„å†…å­˜ã€‚å¤šå¹´æ¥ï¼Œæˆ‘è¿˜ä½¿ç”¨ Go ç›´æ¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨åˆ†é…çš„å†…å­˜ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼ˆç¥ˆç¥·ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæŒ‡é’ˆçš„å€¼çœ‹èµ·æ¥åƒå®ƒåº”è¯¥å…³å¿ƒçš„å†…å­˜ï¼ŒGo å¯èƒ½ä¼šå‘ç°å®ƒæ›´å›°éš¾ã€‚å¦‚æœæˆ‘ä»¬å­˜å‚¨çš„å€¼æ›¾ç»æ˜¯ Go æœ¬èº«åˆ†é…çš„æœ‰æ•ˆå†…å­˜åœ°å€ï¼Œä½†æˆ‘ä»¬çŸ¥é“å®ƒä¸å†æœ‰æ•ˆæ€ä¹ˆåŠï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬åˆ†é…ä¸€ä¸ªè¶³å¤Ÿå¤§çš„åˆ‡ç‰‡ï¼Œä»¥ä¾¿å§‹ç»ˆåˆ†é…åœ¨å †ä¸Šã€‚ç„¶åï¼Œæˆ‘ä»¬è·å–æ”¯æŒè¯¥åˆ‡ç‰‡çš„æ•°ç»„çš„åœ°å€ï¼Œå¹¶å°†å…¶æ”¾å…¥ uintptr ä¸­ã€‚æˆ‘ä»¬çŸ¥é“ Go ä¸ä¼šå°† uintptr è§†ä¸ºæŒ‡é’ˆï¼Œå› æ­¤å°†å€¼ä¿å­˜åœ¨ uintptr ä¸­ä¸åº”å¯¼è‡´ Go ä¿ç•™åˆ†é…ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬éšååˆ é™¤å¯¹åˆ‡ç‰‡çš„å¼•ç”¨å¹¶å¼ºåˆ¶æ‰§è¡Œ GCï¼Œåˆ™åº”è¯¥é‡Šæ”¾å†…å­˜ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1e4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;yptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;uintptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SliceData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å°†æ­¤å€¼å­˜å‚¨åœ¨&lt;code&gt;unsafe.Pointer&lt;/code&gt;ä¸­å¹¶å†æ¬¡è¿è¡Œ GCï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°éº»çƒ¦ã€‚è¿™æ˜¯å®Œæ•´çš„æµ‹è¯•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestUnsafePointerBadNumber&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1e4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;yptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;uintptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SliceData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pointer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;yptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;KeepAlive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;äº‹å®ä¸Šï¼Œè¿™ç¡®å®å¼•èµ·äº† panic ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pointer&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc000162000&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unallocated&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;span&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;span&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;base&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()=&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xc000288000&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;span&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xc000290000&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;span&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;found&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;object&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;at&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xc00005ff58&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xc00005ff58&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;base&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()=&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xc00005e000&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xc000066000&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;spanclass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;elemsize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2048&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mSpanManual&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;fatal&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;found&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bad&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pointer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Go&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;heap&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;incorrect&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;use&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cgo&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœæ‚¨æƒ³çŸ¥é“ä¸ºä»€ä¹ˆè¦å¤šæ¬¡è°ƒç”¨&lt;code&gt;runtime.GC()&lt;/code&gt; ï¼Œæˆ‘ä¹Ÿæ˜¯ã€‚è¿™ä¼¼ä¹ä½¿å®ƒæ›´å¯é åœ°å´©æºƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Go çš„åƒåœ¾æ”¶é›†å™¨éå¸¸å¼ºå¤§ï¼Œå¯ä»¥å¤„ç†å¾ˆå¤šæ»¥ç”¨æƒ…å†µã€‚æ‚¨å¯ä»¥å°†å€¼å­˜å‚¨åœ¨ GC ä¸çŸ¥é“çš„æŒ‡é’ˆä¸­ï¼Œæˆ–è€…ç”šè‡³ä¸æ˜¯æœ‰æ•ˆçš„å†…å­˜åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å¦‚æœä½ å­˜å‚¨äº† GC è®¤ä¸ºå®ƒèƒ½æ§åˆ¶çš„å†…å­˜åœ°å€ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå‘ç”Ÿ Panicã€‚å¦‚æœæ‚¨å°†éæŒ‡é’ˆå€¼å­˜å‚¨åœ¨&lt;code&gt;unsafe.Pointer&lt;/code&gt;ä¸­ï¼Œæ‚¨å¯èƒ½ä¸ä¼šç«‹å³çœ‹åˆ°é—®é¢˜ã€‚ä½ çš„æµ‹è¯•å¯èƒ½ä¸ä¼šæ˜¾ç¤ºä»»ä½•é—®é¢˜ã€‚ä½†æœ‰ä¸€å¤©ï¼Œæ€»ä¼šæœ‰å¼‚å¸¸ç”©ä½ è„¸ä¸Šï¼Œè€Œä½ å´ä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çš„ç»“è®ºå¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é™¤éç¡®å®å¿…è¦ï¼Œå¦åˆ™ä¸è¦ä½¿ç”¨&lt;code&gt;unsafe.Pointer&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;li&gt;é™¤éç¡®å®æœ‰å¿…è¦ï¼Œå¦åˆ™ä¸è¦ä¿ç•™&lt;code&gt;unsafe.Pointer&lt;/code&gt;æŒ‡é’ˆå€¼ã€‚å¤§å¤šæ•°ä½¿ç”¨&lt;code&gt;unsafe.Pointer&lt;/code&gt;çš„å®‰å…¨æ“ä½œä»…å°†å…¶ç”¨ä½œç¬æ€å€¼ï¼ŒåŒæ—¶å°†æŸäº›å†…å®¹è½¬æ¢ä¸ºå…¶ä»–å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;ä½ å¯èƒ½ä¸éœ€è¦ã€‚&lt;/li&gt;
&lt;li&gt;ä»…å°†å†…å­˜åœ°å€å­˜å‚¨åœ¨&lt;code&gt;unsafe.Pointer&lt;/code&gt;ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;ä¹Ÿè®¸åªæœ‰åœ¨ Go è¿è¡Œæ—¶ä¹‹å¤–åˆ†é…çš„å†…å­˜åœ°å€ï¼ˆä¾‹å¦‚é€šè¿‡ç›´æ¥è°ƒç”¨ mmap ç³»ç»Ÿè°ƒç”¨ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº&lt;a class=&#34;link&#34; href=&#34;https://philpearl.github.io/post/dumb_ways_to_die_random_pointers/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Dumb ways to die: Random Values in Pointers&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Golang IO Cookbook</title>
        <link>https://blog.golang.space/p/golang-io-cookbook/</link>
        <pubDate>Tue, 27 Aug 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/golang-io-cookbook/</guid>
        <description>&lt;p&gt;è¿™å‡ å¤©ï¼Œæˆ‘å¼€å‘äº†ä¸€ä¸ªåä¸º &amp;ldquo;Horcux&amp;rdquo; çš„ç¨‹åºï¼Œå®ƒå…è®¸å°†ä¸€ä¸ªæ–‡ä»¶æ‹†åˆ†ä¸ºä»»æ„æ•°é‡çš„é­‚å™¨ï¼Œç„¶åå¯ä»¥é‡æ–°ç»„åˆä»¥æ¢å¤åŸå§‹æ–‡ä»¶ã€‚æœŸé—´ï¼Œæˆ‘äº†è§£äº†å¾ˆå¤šæœ‰å…³ io.Reader å’Œ io.Writer æ¥å£çš„çŸ¥è¯†ï¼Œä¸å¤§å®¶åˆ†äº«ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä½¿ç”¨ io.Reader å’Œ io.Writer? åœ¨ Horcrux çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œåšäº†ç±»ä¼¼ä»¥ä¸‹çš„äº‹æƒ…æ¥åŠ å¯†æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// plaintext: &amp;#34;this is my file&amp;#39;s content&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ioutil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ReadFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;myfile&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;encryptedContent&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;encrypt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// ciphertext: &amp;#34;uijt!jt!nz!gjmf(t!dpoufou&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;ioutil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WriteFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;myfile.encryped&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;encryptedContent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mo&#34;&gt;0644&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å°æ–‡ä»¶è¶…çº§å¿«ã€‚å½“æ–‡ä»¶ä¸º 1GB æ—¶è¶…çº§æ…¢ã€‚æˆ‘çš„ç›®çš„æ˜¯åŠ å¯†æºæ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°†æ•´ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚è¿™å°±æ˜¯ io.Reader å’Œ io.Writer å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1724691975028.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240827010614870&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;io.Reader ä»æºè¯»å–æ•°æ®ã€‚io.Writer å°†å†…å®¹å†™å…¥ç›®çš„åœ°ï¼Œä¸¤ä¸ªæ¥å£æ˜¯å¤„ç†æµä¿¡æ¯çš„æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;æµå¼æ–¹æ³•æœ‰å‡ ä¸ªå¥½å¤„:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨ä¸€ä¸ªå°çš„ç¼“å†²åŒºè¯»å†™æ•°æ®ï¼Œä¸éœ€è¦å°†æ•´ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜&lt;/li&gt;
&lt;li&gt;ä¸éœ€è¦ç­‰å¾…æ•´ä¸ªæ–‡ä»¶åŠ è½½å¥½æ‰å¼€å§‹åŠ å¯†ï¼Œä¸€æ—¦æ•°æ®è¯»å…¥ç¼“å†²åŒºï¼Œå³å¯å¼€å§‹å†™å…¥ç›®æ ‡æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ioreader&#34;&gt;io.Reader&lt;/h2&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯ io.Reader?&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¸¸è§çš„è¿”å›é”™è¯¯æ˜¯ io.EOFï¼Œå®ƒä»£è¡¨è¯»å–ç»“æŸã€‚&lt;/p&gt;
&lt;p&gt;æŒ‰ç…§æƒ¯ä¾‹ï¼Œåœ¨ Go ä¸­ï¼Œå½“å‡½æ•°æœ‰å¤šä¸ªè¿”å›å€¼æ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯ errorï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œå…¶ä»–å€¼åº”ä¸ºé›¶å€¼ã€‚ä½†è€ƒè™‘å¦‚æœè¯»å–ä¸­é€”å‘ç”Ÿé”™è¯¯ï¼Œåº”è¯¥å‘Šè¯‰è°ƒç”¨è€…å½“å‰è¯»å–äº†å¤šå°‘å­—èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ io.Reader&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;reader&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;this is the stuff i&amp;#39;m reading&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;EOF&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œåˆ›å»ºç¼“å†²åŒº(å¤§å°ä¸º 4 å­—èŠ‚) å¹¶æ‰§è¡Œå¾ªç¯ï¼Œåœ¨æ¯æ¬¡å¾ªç¯ä¸­è°ƒç”¨è¯»å–å™¨ä¸Šçš„ Read æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨ç¬¬ä¸€ä¸ªè¿”å›å€¼æ¥æŸ¥çœ‹å·²å†™å…¥å¤šå°‘å­—èŠ‚ã€‚æœ€åå°†è¿™äº›æ•°æ®é™„åŠ åˆ°ç»“æœä¸­ï¼Œå¦‚æœå‡ºç° EOF é”™è¯¯ï¼Œè·³å‡ºå¾ªç¯ã€‚\&lt;/p&gt;
&lt;p&gt;æ³¨æ„æœ‰ä¸€ä¸ªç‚¹æ˜¯å…ˆå¤„ç†æ•°æ®ï¼Œå†å¤„ç†é”™è¯¯ã€‚è¿”å› (0,nil) å¹¶ä¸æ„å‘³ç€æ²¡æœ‰æ›´å¤šå†…å®¹å¯è¯»ï¼Œå¯èƒ½æ˜¯æ­£åœ¨ç­‰å¾…åº•å±‚æºè¿”å›æ›´å¤šçš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç° io.Reader&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;myReader&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strcut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;position&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;myReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;remainingBytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;position&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;remainingBytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nb&#34;&gt;copy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;position&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;position&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;position&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨è¿™é‡Œï¼Œåˆ›å»ºä¸€ä¸ªç»“æ„ä½“ï¼ŒåŒ…å«è¦è¯»å–çš„å†…å®¹ content å­—æ®µï¼Œä»¥åŠç”¨äºè·Ÿè¸ªè¯»å–ä½ç½®çš„ position å­—æ®µã€‚ å°†æºæ•°æ®å¡«å……ç¼“å­˜åŒºå¹¶é˜²æ­¢æº¢å‡ºã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼Œå½“æ²¡æœ‰æ›´å¤šå†…å®¹å¯è¯»å–æ—¶ï¼Œè¿”å› (0,io.EOF) ï¼Œä»è€Œé¿å…è°ƒç”¨è€…å¯¹ Read æ–¹æ³•è¿›è¡Œä¸å¿…è¦çš„è°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼–å†™ io.Readers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;augmentedReader&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;innerReader&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;augmentFunc&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// replaces &amp;#39; &amp;#39; with &amp;#39;!&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;bangify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Replace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;augmentedReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;tmpBuf&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;innerReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tmpBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nb&#34;&gt;copy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;augmentFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tmpBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;BangReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;augmentedReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;innerReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;augmentFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bangify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;UpcaseReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;augmentedReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;innerReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;augmentFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ToUpper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;augment&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;originalReader&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;this is the stuff I&amp;#39;m reading&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;augmentedReader&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;UpcaseReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;BangReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;originalReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ioutil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ReadAll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;augmentedReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// THIS!IS!THE!STUFF!I&amp;#39;M!READING
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä¸€ä¸ªå¢å¼ºåŒ…ï¼Œå®ƒå¯¼å‡ºä¸€äº›å¯ç»„åˆçš„è¯»å–å™¨å‡½æ•°ã€‚æ¯ä¸ªå‡½æ•°éƒ½æ¥å—ä¸€ä¸ª io.Readerï¼Œå¹¶è¿”å›ä¸€ä¸ª io.Readerã€‚ä½†å†…éƒ¨ io.Reader çš„è¾“å‡ºç”±å¤–éƒ¨ IO å¢å¼ºã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå°† &lt;code&gt;&amp;quot; &amp;quot;&lt;/code&gt; ä¸ &lt;code&gt;!&lt;/code&gt; äº¤æ¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ io.Writer&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;writer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stdout&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello there\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;å®ç° io.Writer&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;myWriter&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;myWriter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;myWriter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;writer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;myWriter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello there\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// &amp;#34;hello there\n&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨ Write æ–¹æ³•ä¸­ä»…è·å–ç¼“å†²åŒºå¹¶å°†å…¶é™„åŠ åˆ°å…¶å†…éƒ¨å†…å®¹ã€‚æˆ‘ä»¬è¿˜ç»™å®ƒä¸€ä¸ª&lt;code&gt;String&lt;/code&gt;æ–¹æ³•æ¥å‘Šè¯‰æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢å®ƒå†™äº†ä»€ä¹ˆã€‚ç¢°å·§æˆ‘ä»¬åœ¨è¿™é‡Œå®ç°äº† bytes.Buffer çš„ç²¾ç®€ç¼–å†™å™¨ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://jesseduffield.com/Golang-IO-Cookbook/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Golang IO Cookbook&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Go Maps åˆ†æ é”®å€¼å¯¹å®é™…ä¸Šæ˜¯å¦‚ä½•å­˜å‚¨çš„?</title>
        <link>https://blog.golang.space/p/go-maps-%E5%88%86%E6%9E%90-%E9%94%AE%E5%80%BC%E5%AF%B9%E5%AE%9E%E9%99%85%E4%B8%8A%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%98%E5%82%A8%E7%9A%84/</link>
        <pubDate>Thu, 22 Aug 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/go-maps-%E5%88%86%E6%9E%90-%E9%94%AE%E5%80%BC%E5%AF%B9%E5%AE%9E%E9%99%85%E4%B8%8A%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%98%E5%82%A8%E7%9A%84/</guid>
        <description>&lt;p&gt;ç†è§£ maps çš„çœŸæ­£å·¥ä½œåŸç†æœ‰å¯èƒ½ç›¸å½“å›°éš¾ï¼Œä¸¾ä¸ªä¾‹å­: ä½ æ˜¯å¦æ›¾ç»è®¾ç½®è¿‡ map çš„ hintï¼Œå³ &lt;code&gt;make(map,hint)&lt;/code&gt;ï¼Œä¸ºä»€ä¹ˆå®ƒå« hint ï¼Œè€Œä¸æ˜¯sliceé‚£æ ·çš„ len?&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥å·²ç»æ³¨æ„åˆ°ï¼Œå½“ä½ åœ¨ map ä¸Šä½¿ç”¨ for-range æ—¶ï¼Œé¡ºåºä¸æ’å…¥é¡ºåºä¸åŒ¹é…ã€‚å¦‚æœåœ¨ä¸åŒçš„æ—¶é—´å¾ªç¯åŒä¸€ä¸ª mapï¼Œæ¯æ¬¡çš„ç»“æœå¯èƒ½éƒ½ä¸ä¸€æ ·ã€‚å¥‡æ€ªçš„æ˜¯ï¼ŒåŒä¸€ä¸ªæ—¶é—´å¾ªç¯ï¼Œé¡ºåºé€šå¸¸ä¿æŒä¸å˜ã€‚&lt;/p&gt;
&lt;p&gt;è·Ÿä¸Šï¼Œå¸¦ä½ çœ‹çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡åŸºäº Go 1.23 ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¿«é€Ÿå¼€å§‹&#34;&gt;å¿«é€Ÿå¼€å§‹&lt;/h2&gt;
&lt;p&gt;Go ä¸­çš„ mapï¼Œæ˜¯ä¸€ç§å†…ç½®ç±»å‹ï¼Œå……å½“é”®å€¼å­˜å‚¨ï¼Œ key å¯ä»¥æ˜¯ä»»ä½•å¯æ¯”è¾ƒçš„ç±»å‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// map[a:1 b:2]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;make()&lt;/code&gt; åˆ›å»ºäº†ä¸€ä¸ªç©º mapï¼Œå…¶ä¸­ key æ˜¯å­—ç¬¦ä¸²ï¼Œvalue æ˜¯æ•´æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1724336931681.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240822222851523&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥åœ¨å£°æ˜ map çš„åŒæ—¶èµ‹å€¼é”®å€¼å¯¹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆ é™¤çš„æ–¹æ³•æ˜¯ &lt;code&gt;delete(m,&amp;quot;a&amp;quot;)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;map çš„é›¶å€¼æ˜¯ nilï¼Œå¹¶ä¸” nil map åœ¨æŸäº›æ–¹é¢æœ‰ç‚¹åƒ empty mapï¼Œå¯ä»¥å°è¯•åœ¨å…¶ä¸­æŸ¥æ‰¾ keyï¼Œgolang ä¸ä¼šå‘ç”Ÿ panic ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæœç´¢ä¸å­˜åœ¨çš„ keyï¼ŒGo ä¼šæä¾›è¯¥ç±»å‹çš„é›¶å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// panic: assignment to entry in nil map
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è­¦å‘Š: ä½†ä¸èƒ½å¯¹ nil map æ·»åŠ æ–°çš„é”®å€¼å¯¹!&lt;/p&gt;
&lt;p&gt;äº‹å®ä¸Šï¼Œ Go å¤„ç† map çš„æ–¹å¼ä¸å¤„ç† slice çš„æ–¹å¼éå¸¸ç›¸ä¼¼ï¼Œä¸¤è€…çš†ä»¥ nil å¼€å§‹ï¼Œfor-range ä¹Ÿä¸ä¼šå‘ç”Ÿ panicï¼ŒGo å°†ä»»ä½•ç±»å‹çš„é›¶å€¼è§†ä¸ºæœ‰ç”¨çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯å¯¼è‡´ç¨‹åºå´©æºƒçš„ä¸œè¥¿ï¼Œé™¤éå½“ä½ åšäº†ä¸€äº›éæ³•çš„äº‹æƒ…ï¼Œä¾‹å¦‚å°è¯•åƒ nil map æ·»åŠ æ–°çš„é”®å€¼å¯¹ï¼Œæˆ–è€…å¯¹ nil slice è¶Šç•Œç´¢å¼•ã€‚&lt;/p&gt;
&lt;p&gt;å…³äº Go ä¸­çš„ mapï¼Œåº”è¯¥äº†è§£ä»¥ä¸‹å‡ ç‚¹:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;map çš„éå†æ˜¯ä¹±åºçš„&lt;/li&gt;
&lt;li&gt;map éçº¿ç¨‹å®‰å…¨ï¼Œå¹¶ä¸”æ•°æ®ç«äº‰æ—¶ä¼šå‘ç”Ÿ panic&lt;/li&gt;
&lt;li&gt;å¯ä»¥é€šè¿‡ &lt;code&gt;ok&lt;/code&gt; æ¥æ£€æŸ¥ key æ˜¯å¦å­˜åœ¨ &lt;code&gt;_,ok := m[key]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;map çš„ key å¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œå¯æ¯”è¾ƒç±»å‹åˆ°åº•æ˜¯ä»€ä¹ˆ?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç®€å•çš„å¾ˆï¼Œå¦‚æœå¯ä»¥ä½¿ç”¨ &lt;code&gt;==&lt;/code&gt; æ¥åˆ¤æ–­ç›¸åŒç±»å‹çš„ä¸¤ä¸ªå€¼ï¼Œé‚£ä¹ˆè¯¥ç±»å‹è¢«è®¤ä¸ºå¯ä»¥æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;comparable&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// compile error: invalid operation: s == s (map can only be compared to nil)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ˜¾ç„¶ï¼Œä¸Šé¢çš„ä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œmap åªèƒ½ä¸ nil æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·çš„è§„åˆ™é€‚ç”¨äºå…¶ä»–ä¸å¯æ¯”è¾ƒçš„ç±»å‹ï¼Œä¾‹å¦‚sliceã€å‡½æ•°æˆ–åŒ…å«sliceæˆ–mapçš„ç»“æ„ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½†è¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ï¼Œæ¥å£æ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸å¯æ¯”è¾ƒçš„ã€‚&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ„æ€? å³å¯ä»¥å®šä¹‰ä¸€ä¸ªç©ºæ¥å£ä¸ºé”®çš„ map ï¼Œè€Œä¸ä¼šç¼–è¯‘å‡ºé”™ï¼Œä½†å¯ä»¥è¿è¡Œæ—¶å‡ºé”™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// panic: runtime error: hash of unhashable type []int
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// panic: runtime error: hash of unhashable type func()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆå¥½ï¼Œç›´åˆ°å°è¯•åˆ†é…ä¸€ä¸ªä¸å¯æ¯”è¾ƒçš„ç±»å‹ä½œä¸º key ã€‚è¿™æ¯”ç¼–è¯‘é”™è¯¯æ›´éš¾å¤„ç†ï¼Œåº”å½“é¿å…ä½¿ç”¨ interface{} ä½œä¸º map çš„ key ã€‚&lt;/p&gt;
&lt;h2 id=&#34;map-å‰–æ&#34;&gt;Map å‰–æ&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬ç”±æµ…å…¥æ·±ï¼Œç»†å“ï¼Œåˆ«é™·å…¥ Go æºç çš„å…·ä½“å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œé”®å€¼å¯¹æ˜¯ä¸€ä¸ªæŠ½è±¡ï¼Œåº•å±‚æ˜¯ç”±è®¸å¤šç§°ä¸º &lt;code&gt;bucket&lt;/code&gt; çš„è¾ƒå°å•å…ƒé˜»å¡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hmap&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;buckets&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ³¨æ„çœ‹ï¼Œè¿™ä¸ª buckets æ˜¯æŒ‡é’ˆï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå°† map åˆ†é…ç»™å˜é‡æˆ–ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œåœ¨å¤–éƒ¨çš„ä¿®æ”¹ä¹Ÿä¼šå½±å“åˆ°è¿™ä¸ªå€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;changeMap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m2&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;m2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;m1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;changeMap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;map æ˜¯æŒ‡å‘è¿è¡Œæ—¶ hmap çš„æŒ‡é’ˆï¼Œä½†å®ƒä»¬ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¦‚æœå¦‚ä¸‹æ‰€ç¤ºçš„æ›´æ”¹ï¼Œå®ƒä¸ä¼šåæ˜ åˆ°è°ƒç”¨è€…ä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;changeMap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m2&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;m2&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;m1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;changeMap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨ Go ä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚çœŸæ­£å‘ç”Ÿçš„æƒ…å†µæœ‰ç‚¹ä¸åŒï¼Œå½“ä½ å°† map m1 ä¼ é€’ç»™ changeMap å‡½æ•°æ—¶ï¼ŒGo ä¼šåˆ›å»º &lt;code&gt;*hmap&lt;/code&gt; ç»“æ„çš„å‰¯æœ¬ã€‚å› æ­¤ï¼Œ&lt;code&gt;main()&lt;/code&gt; ä¸­çš„ &lt;code&gt;m1&lt;/code&gt; å’Œ &lt;code&gt;changeMap()&lt;/code&gt; å‡½æ•°ä¸­çš„ m2 ä»æŠ€æœ¯ä¸Šè®²æ˜¯æŒ‡å‘ç›¸åŒ hmap ä¸åŒçš„æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1724338240761.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240822225040639&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªå­˜å‚¨æ¡¶æœ€å¤šåªèƒ½å®¹çº³ 8 ä¸ªé”®å€¼å¯¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1724338257501.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240822225057396&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„mapæœ‰2ä¸ªbucketï¼Œ &lt;code&gt;len(map)&lt;/code&gt;æ˜¯6ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ·»åŠ é”®å€¼å¯¹æ—¶ï¼Œä¼šæ ¹æ® &lt;code&gt;hash(key, seed)&lt;/code&gt; å°†é”®å€¼å¯¹æ”¾å…¥å…¶ä¸­ä¸€ä¸ªå­˜å‚¨æ¡¶ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹çœ‹ä»¥ä¸‹åœºæ™¯: æœ‰ä¸€ä¸ª nil map  å¹¶ä¸ºå…¶åˆ†é…é”®å€¼å¯¹&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1724338358306.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240822225238187&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å®ƒé¦–å…ˆå°†â€œhelloâ€æ•£åˆ—åˆ°ä¸€ä¸ªæ•°å­—ï¼Œç„¶åè·å–è¯¥æ•°å­—å¹¶æŒ‰å­˜å‚¨æ¡¶çš„æ•°é‡å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæˆ‘ä»¬è¿™é‡Œåªæœ‰ä¸€ä¸ªå­˜å‚¨æ¡¶ï¼Œä»»ä½•æ•°å­— mod 1 éƒ½æ˜¯ 0ï¼Œæ‰€ä»¥å®ƒä¼šç›´æ¥è¿›å…¥å­˜å‚¨æ¡¶ 0ï¼Œå½“æ‚¨æ·»åŠ å¦ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼Œä¹Ÿä¼šå‘ç”Ÿç›¸åŒçš„è¿‡ç¨‹ã€‚å®ƒå°†å°è¯•å°†å…¶æ”¾å…¥å­˜å‚¨æ¡¶ 0 ä¸­ï¼Œå¦‚æœç¬¬ä¸€ä¸ª bucket å·²è¢«å ç”¨æˆ–å…·æœ‰ä¸åŒçš„å¯†é’¥ï¼Œå®ƒå°†ç§»åŠ¨åˆ°è¯¥å­˜å‚¨æ¡¶ä¸­çš„ä¸‹ä¸€ä¸ª bucketã€‚&lt;/p&gt;
&lt;p&gt;çœ‹ä¸€ä¸‹&lt;code&gt;hash(key, seed)&lt;/code&gt; ï¼Œå½“æ‚¨åœ¨å…·æœ‰ç›¸åŒé”®çš„ä¸¤ä¸ªmapä¸Šä½¿ç”¨ for-range å¾ªç¯æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°é”®ä»¥ä¸åŒçš„é¡ºåºå‡ºç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;d&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;e&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;f&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;d&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;e&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;f&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nb&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Output:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// a b c d e f
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// c d e f a b
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ€ä¹ˆå¯èƒ½ï¼Ÿmap a ä¸­çš„é”®â€œaâ€å’Œmap b ä¸­çš„é”®â€œaâ€ä¸æ˜¯ä»¥ç›¸åŒçš„æ–¹å¼æ•£åˆ—å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä½†äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œè™½ç„¶ Go ä¸­ç”¨äº map çš„å“ˆå¸Œå‡½æ•°åœ¨å…·æœ‰&lt;strong&gt;ç›¸åŒé”®ç±»å‹&lt;/strong&gt;çš„æ‰€æœ‰ map ä¸­æ˜¯ä¸€è‡´çš„ï¼Œä½†è¯¥å“ˆå¸Œå‡½æ•°ä½¿ç”¨çš„&lt;code&gt;seed&lt;/code&gt;å¯¹äºæ¯ä¸ª map å®ä¾‹æ˜¯ä¸åŒçš„ã€‚å› æ­¤ï¼Œå½“æ‚¨åˆ›å»ºæ–° map æ—¶ï¼ŒGo ä¼šä¸“é—¨ä¸ºè¯¥ map ç”Ÿæˆä¸€ä¸ªéšæœºç§å­ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€ä¸ª bucket çš„é•¿åº¦æœ€å¤§æ˜¯ 8ï¼Œé‚£æ»¡äº†ä¼šæ€æ ·?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å½“æ¡¶å¼€å§‹å˜æ»¡ï¼Œç”šè‡³å‡ ä¹æ»¡æ—¶ï¼Œæ ¹æ®ç®—æ³•å¯¹â€œæ»¡â€çš„å®šä¹‰ï¼Œmap å°†è§¦å‘æ‰©å®¹ï¼Œè¿™å¯èƒ½ä¼šä½¿ main buckets çš„æ•°é‡å¢åŠ ä¸€å€ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰è¶£ã€‚&lt;/p&gt;
&lt;p&gt;å½“æˆ‘è¯´â€œ main bucketsâ€ æ—¶ï¼Œæˆ‘æ­£åœ¨è®¾ç½®å¦ä¸€ä¸ªæ¦‚å¿µï¼šâ€œoverflow bucketsâ€ã€‚å½“é‡åˆ°é«˜ç¢°æ’çš„æƒ…å†µæ—¶ï¼Œè¿™äº›å°±ä¼šå‘æŒ¥ä½œç”¨ã€‚è¯•æƒ³: å­˜åœ¨ 4 ä¸ªbucketï¼Œä½†å…¶ä¸­ä¸€ä¸ªç”±äºé«˜å†²çªè€Œå®Œå…¨è£…æ»¡ï¼Œå¦å¤– 3 ä¸ªåˆ™ç©ºç€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1724338742096.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240822225901973&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ˜¯å¦çœŸçš„éœ€è¦å°† map ç¿»å€æ‰©å®¹åˆ° 8 ä¸ª buckets? ä»…ä»…æ˜¯éœ€è¦æ·»åŠ ä¸€ä¸ªä¸å¹¸ä¹Ÿè½åˆ° bucket 0 çš„é”®å€¼å¯¹?&lt;/p&gt;
&lt;p&gt;No! è¿™æ ·å¤ªæµªè´¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;Go é€šè¿‡åˆ›å»ºé“¾æ¥åˆ°ç¬¬ä¸€ä¸ª bucket çš„ &lt;code&gt;overflow bucket&lt;/code&gt; æ¥æ›´æœ‰æ•ˆå¤„ç†è¿™ä¸ªé—®é¢˜ã€‚æ–°çš„é”®å€¼å¯¹å­˜å‚¨åœ¨è¿™ä¸ªæº¢å‡ºæ¡¶ä¸­ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶å®Œå…¨æ‰©å®¹ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€æ—¶ï¼ŒGo ä¸­çš„ map å°±ä¼šæ‰©å®¹: è¦ä¹ˆæº¢å‡ºæ¡¶å¤ªå¤šï¼Œè¦ä¹ˆ map è¿‡è½½(è´Ÿè½½å› å­å¤ªé«˜)ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹åº”è¿™ä¸¤ç§æ¡ä»¶ï¼Œä¹Ÿæœ‰ä¸¤ç§æ‰©å®¹æ–¹å¼:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¿»å€æ‰©å®¹(è¿‡è½½æ—¶)&lt;/li&gt;
&lt;li&gt;ä¿æŒç›¸åŒå¤§å°ï¼Œä½†é‡æ–°åˆ†é… bucket ä¸­çš„æ•°æ®ã€‚(å½“æº¢å‡ºæ¡¶å¤ªå¤šæ—¶)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®å‰ï¼ŒGo çš„è´Ÿè½½å› å­è®¾ç½®ä¸º 6.5ï¼Œè¿™æ„å‘³ç€ map è®¾è®¡ä¸ºæ¯ä¸ª bucket å¹³å‡ç»´æŠ¤ 6,5 ä¸ªï¼Œå¤§çº¦æ˜¯ 80%çš„å®¹é‡ï¼Œå½“è´Ÿè½½å› å­è¶…è¿‡æ­¤é˜ˆå€¼ï¼Œmap è§†ä¸ºè¿‡è½½ã€‚æ­¤æ—¶ï¼Œå°†é€šè¿‡åˆ†é…ä¸€ä¸ªæ–°çš„ buckets æ•°ç»„ï¼Œè¯¥æ•°ç»„æ˜¯å¤§å°æ˜¯å½“å‰çš„ä¸¤å€ï¼Œç„¶åå…ƒç´ é‡æ–°æ•£åˆ—åˆ°æ–°çš„ buckets ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é€šå¸¸è®¤ä¸ºåœ¨mapä¸­è®¿é—®å’Œèµ‹å€¼æ˜¯ O(1)ï¼Œå¯¹å§ï¼Ÿä½†äº‹æƒ…å¹¶ä¸æ€»æ˜¯é‚£ä¹ˆç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1724339247109.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240822230726996&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;bucket ä¸­çš„å…ƒç´ è¶Šå¤šï¼Œé€Ÿåº¦å°±è¶Šæ…¢ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ‚¨æƒ³è¦æ·»åŠ å¦ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼Œä¸ä»…ä»…æ˜¯æ£€æŸ¥å­˜å‚¨æ¡¶æ˜¯å¦æœ‰ç©ºé—´ï¼Œè€Œæ˜¯å°†é”®ä¸è¯¥å­˜å‚¨æ¡¶ä¸­çš„æ¯ä¸ªç°æœ‰é”®è¿›è¡Œæ¯”è¾ƒï¼Œä»¥å†³å®šæ˜¯æ·»åŠ æ–°æ¡ç›®è¿˜æ˜¯æ›´æ–°ç°æœ‰æ¡ç›®ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ‚¨æœ‰æº¢å‡ºæ¡¶æ—¶ï¼Œæƒ…å†µä¼šå˜å¾—æ›´ç³Ÿï¼Œå› ä¸ºæ‚¨è¿˜å¿…é¡»æ£€æŸ¥è¿™äº›æº¢å‡ºæ¡¶ä¸­çš„æ¯ä¸ªæ’æ§½ã€‚è¿™ç§é€Ÿåº¦å‡æ…¢ä¹Ÿä¼šå½±å“è®¿é—®å’Œåˆ é™¤æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä½† Go å›¢é˜Ÿå¼ºå‘€ï¼Œä»–ä»¬ä¸ºæˆ‘ä»¬ä¼˜åŒ–äº†è¿™ä¸ªæ¯”è¾ƒã€‚&lt;/p&gt;
&lt;p&gt;è¿˜è®°å¾—æˆ‘ä»¬å¯¹é”®â€œHelloâ€è¿›è¡Œæ•£åˆ—æ—¶å¾—åˆ°çš„æ•£åˆ—å—ï¼Ÿ Go ä¸åªæ˜¯æŠŠå®ƒæ‰”æ‰ã€‚å®ƒå®é™…ä¸Šå°†â€œHelloâ€çš„ tophash ä½œä¸º&lt;code&gt;uint8&lt;/code&gt;ç¼“å­˜åœ¨å­˜å‚¨æ¡¶ä¸­ï¼Œå¹¶ä½¿ç”¨å®ƒä¸ä»»ä½•æ–°å¯†é’¥çš„ tophash è¿›è¡Œå¿«é€Ÿæ¯”è¾ƒã€‚è¿™ä½¿å¾—åˆå§‹æ£€æŸ¥è¶…çº§å¿«ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1724339343910.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240822230903757&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ¯”è¾ƒ&lt;code&gt;tophash&lt;/code&gt;åï¼Œå¦‚æœå®ƒä»¬åŒ¹é…ï¼Œåˆ™æ„å‘³ç€å¯†é’¥â€œå¯èƒ½â€ç›¸åŒã€‚ç„¶åï¼ŒGo ç»§ç»­è¿›è¡Œè¾ƒæ…¢çš„è¿‡ç¨‹ï¼Œæ£€æŸ¥å¯†é’¥æ˜¯å¦å®é™…ä¸Šç›¸åŒã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä½¿ç”¨ make(map,hint) åˆ›å»ºæ–° map ä¸æä¾›ç¡®åˆ‡çš„å¤§å°è€Œåªæä¾› hintï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;make(map, hint)&lt;/code&gt;ä¸­çš„&lt;code&gt;hint&lt;/code&gt;å‚æ•°å‘Šè¯‰Goæ‚¨&lt;strong&gt;æœŸæœ›&lt;/strong&gt;mapä¿å­˜çš„å…ƒç´ çš„åˆå§‹æ•°é‡ã€‚æ­¤ hint æœ‰åŠ©äºæœ€å¤§é™åº¦åœ°å‡å°‘æ·»åŠ å…ƒç´ æ—¶ map éœ€è¦æ‰©å®¹çš„æ¬¡æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæ¯ä¸ªæ‰©å®¹æ“ä½œéƒ½æ¶‰åŠåˆ†é…æ–°çš„å­˜å‚¨æ¡¶æ•°ç»„å¹¶å¤åˆ¶ç°æœ‰å…ƒç´ ï¼Œå› æ­¤è¿™ä¸æ˜¯æœ€æœ‰æ•ˆçš„è¿‡ç¨‹ã€‚ä»è¾ƒå¤§çš„åˆå§‹å®¹é‡å¼€å§‹å¯ä»¥å¸®åŠ©é¿å…ä¸€äº›æˆæœ¬é«˜æ˜‚çš„æ‰©å®¹æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å½“æ‚¨æ·»åŠ æ›´å¤šå…ƒç´ æ—¶ï¼Œå­˜å‚¨æ¡¶å¤§å°è¿™æ ·æ‰©å®¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Hint Range&lt;/th&gt;
&lt;th&gt;Bucket Count&lt;/th&gt;
&lt;th&gt;Capacity&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0 - 8&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9 - 13&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;14 - 26&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;32&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;27 - 52&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;64&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;53 - 104&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;128&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;105 - 208&lt;/td&gt;
&lt;td&gt;32&lt;/td&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;209 - 416&lt;/td&gt;
&lt;td&gt;64&lt;/td&gt;
&lt;td&gt;512&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;417 - 832&lt;/td&gt;
&lt;td&gt;128&lt;/td&gt;
&lt;td&gt;1024&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;833 - 1664&lt;/td&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;2048&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆ hint= 14 ä¼šäº§ç”Ÿ 4 ä¸ªæ¡¶ï¼Ÿæˆ‘ä»¬åªéœ€è¦ 2 ä¸ªæ¡¶å°±å¯ä»¥å®¹çº³ 14 ä¸ªå…ƒç´ ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™å°±æ˜¯è´Ÿè½½å› å­å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ï¼Œå½“ hint=13ï¼Œæœ‰ 2 ä¸ª bucketsï¼Œè´Ÿè½½å› å­ä¸º 13/2=6.5ï¼Œè¾¾åˆ°é˜ˆå€¼ä½†æœªè¶…è¿‡ã€‚å› æ­¤ï¼Œå½“ hint=14ï¼Œè´Ÿè½½å› å­è¶…è¿‡ 6.5ï¼Œè§¦å‘ç¿»å€æ‰©å®¹ã€‚&lt;/p&gt;
&lt;p&gt;hint=26ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œ26/4=6.5ï¼Œå½“ hint&amp;gt;26ï¼Œmap éœ€è¦æ‰©å®¹ä»¥æœ‰æ•ˆå®¹çº³æ›´å¤šå…ƒç´ ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ•£åˆ—&#34;&gt;æ•£åˆ—&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆæ— æ³•è·å– map å…ƒç´ çš„åœ°å€? ä¸ºä»€ä¹ˆä¸åŒæ—¶é—´ä¸èƒ½ä¿è¯èŒƒå›´å†…çš„é¡ºåº?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å½“ map å¢é•¿æ—¶ï¼Œä¼šåˆ†é…ä¸€ä¸ªæ–°çš„ buckets æ•°ç»„ï¼Œæ˜¯æ—§ buckets çš„ä¸¤å€ï¼Œæ—§ buckets ä¸­æ‰€æœ‰å…ƒç´ éƒ½å˜å¾—æ— æ•ˆï¼Œéœ€è¦ç§»åŠ¨åˆ°æ–°å†…å­˜åœ°å€çš„ buckets ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1724339906450.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240822231826323&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœ map å¾ˆå¤§ï¼Œä¸€æ¬¡æ€§çš„ç§»åŠ¨æƒ³å½“æ˜‚è´µï¼Œå¯èƒ½åœ¨ç›¸å½“é•¿çš„æ—¶é—´å†…é˜»å¡ goroutineã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼ŒGo ä½¿ç”¨å¢é‡çš„æ–¹å¼ï¼Œä¸€æ¬¡åªé‡æ–°å“ˆå¸Œä¸€éƒ¨åˆ†å…ƒç´ ã€‚ä½ çš„ç¨‹åºå¯ä»¥ä¿æŒå¹³ç¨³è¿è¡Œï¼Œä¸ä¼šçªç„¶å‡ºç°æ»åã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»æ—§ buckets è¿ç§»åˆ° æ–° buckets  ä»€ä¹ˆæ—¶å€™å‘ç”Ÿ?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸¤ç§æƒ…å†µ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ·»åŠ æ–°çš„é”®å€¼å¯¹&lt;/li&gt;
&lt;li&gt;ä» map ä¸­åˆ é™¤é”®å€¼å¯¹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾‹å¦‚ &lt;code&gt;map[&amp;quot;hello&amp;quot;]=2&lt;/code&gt; æ—¶ï¼Œå®é™…ç¬¬ä¸€ä»¶äº‹æ˜¯æ¸…ç©ºåŒ…å« &lt;code&gt;hello&lt;/code&gt; çš„æ—§ bucketsã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1724340184080.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240822232303757&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ—§ buckets æœ‰æº¢å‡ºæ¡¶ï¼Œ map ä¹Ÿä¼šå°†è¿™äº› overflow buckets çš„å…ƒç´ ç§»åŠ¨åˆ°æ–° bucketsï¼Œç§»åŠ¨æ‰€æœ‰å…ƒç´ åï¼Œ map é€šè¿‡åœ¨ tophash å­—æ®µå°†æ—§æ¡¶æ ‡è®°ä¸º &lt;code&gt;evacuated&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆè¿™ä¹ˆå¤šå“ˆï¼ŒGo map ç¡®å®æ¯”è¿™æ›´å¤æ‚ï¼Œå¾ˆå¤šå°ç»†èŠ‚å…ˆä¸ç»†è¯´ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://victoriametrics.com/blog/go-map/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;em&gt;Go Maps Explained: How Key-Value Pairs Are Actually Stored&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Base64 ç¼–è§£ç </title>
        <link>https://blog.golang.space/p/base64-%E7%BC%96%E8%A7%A3%E7%A0%81/</link>
        <pubDate>Fri, 26 Jul 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/base64-%E7%BC%96%E8%A7%A3%E7%A0%81/</guid>
        <description>&lt;h2 id=&#34;ä»‹ç»&#34;&gt;ä»‹ç»&lt;/h2&gt;
&lt;p&gt;Base64 æ˜¯ä¸€ç§ç”¨äºå°†äºŒè¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼çš„æ ‡å‡†ç¼–ç ã€‚ Base64 é€šå¸¸ç”¨äºå¯¹ JSONã€XML å’Œ HTML ç­‰æ–‡æœ¬æ ¼å¼çš„äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œç¼–ç ã€‚ Base64 è¿˜ç”¨äºå¯¹ç”µå­é‚®ä»¶é™„ä»¶ä¸­çš„äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œç¼–ç ã€‚&lt;/p&gt;
&lt;h2 id=&#34;go-ä¸­çš„-base64-ç¼–ç &#34;&gt;&lt;strong&gt;Go ä¸­çš„ Base64 ç¼–ç &lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Encoding æ˜¯å°†æ•°æ®ä»ä¸€ç§æ ¼å¼è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼çš„è¿‡ç¨‹ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†äºŒè¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºæ–‡æœ¬ã€‚ &lt;code&gt;base64&lt;/code&gt; åŒ…æä¾›äº† &lt;code&gt;EncodeToString&lt;/code&gt; å‡½æ•°ï¼Œç”¨äºå°†äºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸º Base64ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;encoding/base64&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StdEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncodeToString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// SGVsbG8gV29ybGQh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;EncodeToString&lt;/code&gt; å‡½æ•°å°†å­—èŠ‚åˆ‡ç‰‡ä½œä¸ºè¾“å…¥å¹¶è¿”å›å­—ç¬¦ä¸²ã€‚ &lt;code&gt;StdEncoding&lt;/code&gt; å˜é‡æ˜¯å®ç° &lt;code&gt;Encoding&lt;/code&gt; æ¥å£çš„ &lt;code&gt;*Encoding&lt;/code&gt; ç±»å‹ã€‚ &lt;code&gt;Encoding&lt;/code&gt; æ¥å£æä¾› &lt;code&gt;EncodeToString&lt;/code&gt; åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;go-ä¸­çš„-base64-è§£ç &#34;&gt;&lt;strong&gt;Go ä¸­çš„ Base64 è§£ç &lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Decoding æ˜¯å°†æ•°æ®ä»ä¸€ç§æ ¼å¼è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼çš„è¿‡ç¨‹ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æ–‡æœ¬è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®ã€‚ &lt;code&gt;base64&lt;/code&gt; åŒ…æä¾›äº† &lt;code&gt;DecodeString&lt;/code&gt; å‡½æ•°ï¼Œç”¨äºå°† Base64 è§£ç ä¸ºäºŒè¿›åˆ¶æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;DecodeString&lt;/code&gt; å‡½æ•°å°†å­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥å¹¶è¿”å›å­—èŠ‚åˆ‡ç‰‡ã€‚ &lt;code&gt;StdEncoding&lt;/code&gt; å˜é‡æ˜¯å®ç° &lt;code&gt;Encoding&lt;/code&gt; æ¥å£çš„ &lt;code&gt;*Encoding&lt;/code&gt; ç±»å‹ã€‚ &lt;code&gt;Encoding&lt;/code&gt; æ¥å£æä¾› &lt;code&gt;DecodeString&lt;/code&gt; åŠŸèƒ½&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;encoding/base64&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;SGVsbG8gV29ybGQh&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;decoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StdEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DecodeString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;decoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Hello World!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;urlç¼–ç ä¸è§£ç &#34;&gt;URLç¼–ç ä¸è§£ç &lt;/h2&gt;
&lt;p&gt;&lt;code&gt;base64&lt;/code&gt; åŒ…æä¾› &lt;code&gt;URLEncoding&lt;/code&gt; å˜é‡ï¼Œç”¨äºä½¿ç”¨ URL å’Œæ–‡ä»¶åå®‰å…¨å­—æ¯è¡¨è¿›è¡Œ Base64 ç¼–ç å’Œè§£ç ã€‚ &lt;code&gt;URLEncoding&lt;/code&gt; å˜é‡æ˜¯å®ç° &lt;code&gt;Encoding&lt;/code&gt; æ¥å£çš„ &lt;code&gt;*Encoding&lt;/code&gt; ç±»å‹ã€‚ &lt;code&gt;Encoding&lt;/code&gt; æ¥å£æä¾› &lt;code&gt;EncodeToString&lt;/code&gt; å’Œ &lt;code&gt;DecodeString&lt;/code&gt; åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;encoding/base64&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;URLEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncodeToString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;decoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;URLEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DecodeString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;decoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// SGVsbG8gV29ybGQh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Hello World!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¯¥ç¨‹åºçš„åŠŸèƒ½ä¸å‰ä¸€ä¸ªç¨‹åºç›¸åŒï¼Œä½†ä½¿ç”¨ &lt;code&gt;URLEncoding&lt;/code&gt; å˜é‡è€Œä¸æ˜¯ &lt;code&gt;StdEncoding&lt;/code&gt; å˜é‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åŸå§‹ç¼–ç å’Œè§£ç &#34;&gt;åŸå§‹ç¼–ç å’Œè§£ç &lt;/h2&gt;
&lt;p&gt;&lt;code&gt;base64&lt;/code&gt; åŒ…æä¾› &lt;code&gt;RawStdEncoding&lt;/code&gt; å˜é‡ï¼Œç”¨äºä½¿ç”¨æ ‡å‡†åŸå§‹ã€æœªå¡«å……çš„ Base64 æ ¼å¼å¯¹ Base64 è¿›è¡Œç¼–ç å’Œè§£ç ã€‚ &lt;code&gt;RawStdEncoding&lt;/code&gt; å˜é‡æ˜¯å®ç° &lt;code&gt;Encoding&lt;/code&gt; æ¥å£çš„ &lt;code&gt;*Encoding&lt;/code&gt; ç±»å‹ã€‚ &lt;code&gt;Encoding&lt;/code&gt; æ¥å£æä¾› &lt;code&gt;EncodeToString&lt;/code&gt; å’Œ &lt;code&gt;DecodeString&lt;/code&gt; åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;encoding/base64&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RawStdEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncodeToString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;decoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RawStdEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DecodeString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;decoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å½“å¯¹éœ€è¦ä»¥æ–‡æœ¬æ ¼å¼å­˜å‚¨çš„äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œç¼–ç æ—¶ï¼ŒåŸå§‹ç¼–ç å’Œè§£ç éå¸¸æœ‰ç”¨ã€‚ç¨‹åºçš„è¾“å‡ºæ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;SGVsbG8gV29ybGQh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;Hello&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;World&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;ç¤ºä¾‹ç¼–ç å’Œè§£ç -json-å¯¹è±¡&#34;&gt;ç¤ºä¾‹ï¼šç¼–ç å’Œè§£ç  JSON å¯¹è±¡&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;base64&lt;/code&gt; åŒ…æä¾›äº† &lt;code&gt;EncodeToString&lt;/code&gt; å’Œ &lt;code&gt;DecodeString&lt;/code&gt; å‡½æ•°ç”¨äºbase64ç¼–ç å’Œè§£ç ã€‚ &lt;code&gt;json&lt;/code&gt; åŒ…æä¾›äº† &lt;code&gt;Marshal&lt;/code&gt; å’Œ &lt;code&gt;Unmarshal&lt;/code&gt; å‡½æ•°æ¥ç¼–ç å’Œè§£ç  JSONã€‚ &lt;code&gt;json&lt;/code&gt; åŒ…è¿˜æä¾›äº† &lt;code&gt;MarshalIndent&lt;/code&gt; å‡½æ•°ï¼Œç”¨äºä½¿ç”¨ç¼©è¿›ç¼–ç  JSONã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;encoding/base64&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;encoding/json&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Person&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Age&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Person&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;John Doe&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;Age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;MarshalIndent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;    &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StdEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncodeToString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;decoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StdEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DecodeString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;encoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p2&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Person&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;decoded&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// eyJBY2UiOjMwLCJOYW1lIjoiSm9obiBEb2UifQ==
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// {30 John Doe}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;MarshalIndent&lt;/code&gt; å‡½æ•°æ¥å—ä¸€ä¸ªå€¼å¹¶è¿”å›ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ã€‚ &lt;code&gt;MarshalIndent&lt;/code&gt; å‡½æ•°è¿˜é‡‡ç”¨å‰ç¼€å’Œç¼©è¿›å­—ç¬¦ä¸²ã€‚è¯¥å‰ç¼€è¢«æ·»åŠ åˆ°è¾“å‡ºçš„æ¯ä¸€è¡Œä¹‹å‰ã€‚ç¼©è¿›å­—ç¬¦ä¸²ç”¨äºç¼©è¿›è¾“å‡ºçš„æ¯ä¸ªçº§åˆ«ã€‚ &lt;code&gt;MarshalIndent&lt;/code&gt; å‡½æ•°å¯¹äºä½¿ç”¨ç¼©è¿›ç¼–ç  JSON éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Unmarshal&lt;/code&gt; å‡½æ•°é‡‡ç”¨ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡å’Œä¸€ä¸ªæŒ‡å‘å€¼çš„æŒ‡é’ˆã€‚ &lt;code&gt;Unmarshal&lt;/code&gt; å‡½æ•°å¯¹ JSON ç¼–ç æ•°æ®è¿›è¡Œè§£ç ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ v æŒ‡å‘çš„å€¼ä¸­ã€‚å¦‚æœ JSON ç¼–ç æ•°æ®ä¸æ˜¯æœ‰æ•ˆè¡¨ç¤ºï¼Œ &lt;code&gt;Unmarshal&lt;/code&gt; å‡½æ•°å°†è¿”å›é”™è¯¯v æŒ‡å‘çš„å€¼ã€‚&lt;/p&gt;
&lt;h2 id=&#34;base64åŒ…ä¸­çš„å…¶ä»–å‡½æ•°&#34;&gt;Base64åŒ…ä¸­çš„å…¶ä»–å‡½æ•°&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NewEncoder&lt;/code&gt; -  è¿”å›ä¸€ä¸ªæ–°çš„ Base64 æµç¼–ç å™¨ã€‚å†™å…¥è¿”å›çš„ writerï¼Œå°† base64 æ•°æ®ç¼–ç ä¸º wã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NewDecoder&lt;/code&gt; - è¿”å›ä¸€ä¸ªæ–°çš„ Base64 æµè§£ç å™¨ã€‚ä» r è¯»å–è§£ç  Base64 æ•°æ®åˆ° wã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NewEncoding&lt;/code&gt; - è¿”å›ç”±ç»™å®šå­—æ¯è¡¨å®šä¹‰çš„æ–°è‡ªå®šä¹‰ç¼–ç ï¼Œè¯¥ç¼–ç å¿…é¡»æ˜¯ä¸åŒ…å«å¡«å……å­—ç¬¦â€œ=â€çš„ 64 å­—èŠ‚å­—ç¬¦ä¸²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RawStdEncoding&lt;/code&gt; - è¿”å›æ ‡å‡†åŸå§‹ã€æœªå¡«å……çš„ base64 ç¼–ç ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;base64-åŒ…ä¸­çš„å…¶ä»–ç±»å‹&#34;&gt;Base64 åŒ…ä¸­çš„å…¶ä»–ç±»å‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Encoding&lt;/code&gt; - è¡¨ç¤º Base64 ç¼–ç /è§£ç æ–¹æ¡ˆï¼Œç”± 64 ä¸ªå­—ç¬¦çš„å­—æ¯è¡¨å®šä¹‰ã€‚æœ€å¸¸è§çš„ç”¨æ³•æ˜¯é€šè¿‡æ ‡å‡†é¢„å®šä¹‰ç¼–ç  StdEncoding å’Œ URLEncodingã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CorruptInputError&lt;/code&gt; - æŠ¥å‘Šè¾“å…¥ä¸æ˜¯æœ‰æ•ˆçš„ Base64 æ•°æ®çš„é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://www.kelche.co/blog/go/golang-base64/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Golang Base64 Encoding and Decoding &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>åœ¨ Go ä¸­é‡ç½®è®¡æ—¶å™¨</title>
        <link>https://blog.golang.space/p/%E5%9C%A8-go-%E4%B8%AD%E9%87%8D%E7%BD%AE%E8%AE%A1%E6%97%B6%E5%99%A8/</link>
        <pubDate>Thu, 18 Jul 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E5%9C%A8-go-%E4%B8%AD%E9%87%8D%E7%BD%AE%E8%AE%A1%E6%97%B6%E5%99%A8/</guid>
        <description>&lt;p&gt;å¦‚æœä½ åœ¨ Go 1.22 æˆ–æ›´æ—©ç‰ˆæœ¬ä¸­ä½¿ç”¨ &lt;code&gt;Timer.Reset()&lt;/code&gt; ï¼Œä½ å¯èƒ½ä¼šåšé”™ã€‚ç”šè‡³ã€Š100 Go Mistakesã€‹ä¸€ä¹¦ï¼ˆå…³äº Go çš„ç»†å¾®å·®åˆ«é€šå¸¸æ˜¯æ­£ç¡®çš„ï¼‰ä¹ŸçŠ¯äº†é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬çœ‹çœ‹é—®é¢˜å¯èƒ½æ˜¯ä»€ä¹ˆä»¥åŠå¦‚ä½•è§£å†³å®ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;timeafter&#34;&gt;time.After&lt;/h2&gt;
&lt;p&gt;åœ¨ Go â‰¤1.22 çš„å¾ªç¯ä¸­ä½¿ç”¨ &lt;code&gt;time.After()&lt;/code&gt; å¯èƒ½ä¼šå¯¼è‡´å¤§é‡å†…å­˜ä½¿ç”¨ã€‚è€ƒè™‘è¿™ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// go 1.22
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;token&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;consumer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Hour&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// do stuff
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;After&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// log warning
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ¶ˆè´¹è€…ä»è¾“å…¥é€šé“è¯»å–ä»¤ç‰Œï¼Œå¦‚æœä¸€å°æ—¶åé€šé“ä¸­æ²¡æœ‰å‡ºç°å€¼ï¼Œåˆ™ä¼šå‘å‡ºè­¦æŠ¥ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªå®¢æˆ·ç«¯æ¥æµ‹é‡ 100K é€šé“å‘é€åçš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// go 1.22
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cancel&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WithCancel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Background&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;cancel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;consumer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;memBefore&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getAlloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;memAfter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getAlloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;memUsed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memAfter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memBefore&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Memory used: %d KB\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memUsed&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// Memory used: 20379 KB
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;ä»€ä¹ˆæ˜¯-getalloc&#34;&gt;ä»€ä¹ˆæ˜¯ getAlloc&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// getAlloc returns the number of bytes of allocated
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// heap objects (after garbage collection).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getAlloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MemStats&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ReadMemStats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Alloc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;time.After&lt;/code&gt; åœ¨å¹•ååˆ›å»ºä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè¯¥è®¡æ—¶å™¨åœ¨åˆ°æœŸä¹‹å‰ä¸ä¼šè¢«é‡Šæ”¾ã€‚ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†è¾ƒé•¿çš„è¶…æ—¶ï¼ˆä¸€å°æ—¶ï¼‰ï¼Œå› æ­¤ for å¾ªç¯æœ¬è´¨ä¸Šåˆ›å»ºäº†æ— æ•°å°šæœªé‡Šæ”¾çš„è®¡æ—¶å™¨ã€‚è¿™äº›è®¡æ—¶å™¨æ€»å…±ä½¿ç”¨çº¦ 20 MB çš„å†…å­˜ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é”™è¯¯çš„è§£å†³æ–¹æ¡ˆ&#34;&gt;é”™è¯¯çš„è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè®¡æ—¶å™¨å¹¶åœ¨æ¯æ¬¡å¾ªç¯è¿­ä»£ä¸­é‡ç½®å®ƒæ€ä¹ˆæ ·ï¼Ÿçœ‹èµ·æ¥å¾ˆåˆç†ã€‚è¿™æ˜¯ &lt;em&gt;100 Go Mistakes&lt;/em&gt; å»ºè®®çš„è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// go 1.22
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;consumer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Hour&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// do stuff
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// log warning
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Memory used: 0 KB
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç”±äºæˆ‘ä»¬é‡å¤ä½¿ç”¨ç›¸åŒçš„è®¡æ—¶å™¨å®ä¾‹è€Œä¸æ˜¯åˆ›å»ºæ–°å®ä¾‹ï¼Œå› æ­¤å†…å­˜ä½¿ç”¨é—®é¢˜å¾—åˆ°è§£å†³ã€‚ä½†é—®é¢˜æ˜¯ï¼Œè¿™ä¸æ˜¯ Go â‰¤1.22 ä¸­ä½¿ç”¨ &lt;code&gt;Reset&lt;/code&gt; æ–¹æ³•çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// go 1.22
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Time elapsed: %dms\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Since&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Milliseconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// expected: Time elapsed: 10ms
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// actual:   Time elapsed:  0ms
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è®¡æ—¶å™¨ &lt;code&gt;t&lt;/code&gt; çš„è¶…æ—¶æ—¶é—´ä¸º 10 æ¯«ç§’ã€‚æ‰€ä»¥æˆ‘ä»¬ç­‰å¾…äº† 20ms åï¼Œå®ƒå·²ç»è¿‡æœŸäº†ï¼Œå¹¶å‘ &lt;code&gt;t.C&lt;/code&gt; é€šé“å‘é€äº†ä¸€ä¸ªå€¼ã€‚ç”±äº &lt;code&gt;Reset&lt;/code&gt; ä¸ä¼šæ’ç©ºé€šé“ï¼Œå› æ­¤ &lt;code&gt;&amp;lt;-t.C&lt;/code&gt; ä¸ä¼šé˜»å¡å¹¶ç«‹å³ç»§ç»­ã€‚å¦å¤–ï¼Œç”±äº &lt;code&gt;Reset&lt;/code&gt; é‡æ–°å¯åŠ¨äº†è®¡æ—¶å™¨ï¼Œ10 æ¯«ç§’åæˆ‘ä»¬å°†åœ¨ &lt;code&gt;t.C&lt;/code&gt; ä¸­çœ‹åˆ°å¦ä¸€ä¸ªå€¼ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸æ˜¯ä¸€ä¸ªå°é—®é¢˜ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚æœæ¶ˆè´¹è€…ä¸­çš„â€œdo stuffâ€åˆ†æ”¯èŠ±è´¹çš„æ—¶é—´è¶…è¿‡è®¡æ—¶å™¨è¶…æ—¶æ—¶é—´ä¼šå‘ç”Ÿä»€ä¹ˆï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// go 1.22
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;consumer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// do stuff
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;			&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;should not happen&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç”±äºè®¡æ—¶å™¨é€šé“æœªè€—å°½ï¼Œå› æ­¤æ— è®º &lt;code&gt;Reset&lt;/code&gt; è°ƒç”¨å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œè®¡æ—¶å™¨åˆ†æ”¯ï¼Œä»è€Œå¯¼è‡´ææ…Œã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘åœ¨è¿™é‡Œå¼•ç”¨ Go stdlib æ–‡æ¡£ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For a Timer created with NewTimer, Reset should be invoked only on stopped or expired timers with drained channels.&lt;/p&gt;
&lt;p&gt;å¯¹äºä½¿ç”¨ NewTimer åˆ›å»ºçš„è®¡æ—¶å™¨ï¼Œä»…åº”åœ¨é€šé“å·²è€—å°½çš„åœæ­¢æˆ–è¿‡æœŸè®¡æ—¶å™¨ä¸Šè°ƒç”¨ Resetã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å®ƒå¯èƒ½ä¸æ˜¯å¾ˆç›´è§‚ï¼Œä½†å®ƒæ˜¯åœ¨ Go â‰¤1.22 ä¸­æ­£ç¡®ä½¿ç”¨ &lt;code&gt;Reset&lt;/code&gt; çš„å”¯ä¸€æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;123-ä¿®å¤&#34;&gt;1.23 ä¿®å¤&lt;/h2&gt;
&lt;p&gt;Go 1.23 ä¿®å¤äº†é‡ç½®é—®é¢˜ã€‚å†æ¬¡å¼•ç”¨æ–‡æ¡£ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The timer channel associated with a Timer is now unbuffered, with capacity 0. The main effect of this change is that Go now guarantees that for any call to a Reset (or Stop) method, no stale values prepared before that call will be sent or received after the call.&lt;/p&gt;
&lt;p&gt;ä¸ Timer å…³è”çš„è®¡æ—¶å™¨é€šé“ç°åœ¨æ˜¯æ— ç¼“å†²çš„ï¼Œå®¹é‡ä¸º 0ã€‚æ­¤æ›´æ”¹çš„ä¸»è¦æ•ˆæœæ˜¯ï¼ŒGo ç°åœ¨ä¿è¯å¯¹äºä»»ä½•å¯¹ Resetï¼ˆæˆ– Stopï¼‰æ–¹æ³•çš„è°ƒç”¨ï¼Œä¸ä¼šå‘é€è¯¥è°ƒç”¨ä¹‹å‰å‡†å¤‡çš„è¿‡æ—¶å€¼ï¼Œæˆ–è€…é€šè¯åæ”¶åˆ°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½†å¦‚æœæ‚¨æŸ¥çœ‹ä»£ç ï¼Œæ‚¨ä¼šå‘ç°é€šé“å®é™…ä¸Šä»åœ¨ç¼“å†²ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// As of Go 1.23, the channel is synchronous (unbuffered, capacity 0),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// eliminating the possibility of those stale values.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Timer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Timer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;newTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;when&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sendTime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;syncTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/golang/go/blob/release-branch.go1.23/src/time/sleep.go#L142&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;time/sleep.go&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®æäº¤æ¶ˆæ¯ï¼ŒGo å›¢é˜Ÿå°†è®¡æ—¶å™¨é€šé“ä¿ç•™ä¸ºç¼“å†²çŠ¶æ€ï¼ˆä¸ä»£ç æ³¨é‡Šæ‰€è¿°ç›¸åï¼‰ã€‚ä½†ä»–ä»¬è¿˜ç ´è§£äº† &lt;code&gt;chan&lt;/code&gt; ç±»å‹æœ¬èº«ï¼Œä»¥è¿”å›è®¡æ—¶å™¨é€šé“çš„é›¶é•¿åº¦å’Œå®¹é‡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/golang/go/blob/release-branch.go1.23/src/runtime/chan.go#L786&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;runtime/chan.go&lt;/a&gt; â€¢ &lt;a class=&#34;link&#34; href=&#34;https://go-review.googlesource.com/c/go/&amp;#43;/568341&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;commit message&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯¹æˆ‘æ¥è¯´è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªè‚®è„çš„é»‘å®¢æ–¹æ³•ï¼Œä½†æˆ‘æ‡‚ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;h2 id=&#34;123-ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆ&#34;&gt;1.23 ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;è™½ç„¶ç®€å•çš„ &lt;code&gt;Reset&lt;/code&gt; åº”è¯¥é€‚ç”¨äº 1.23+ï¼Œä½†åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿è®¡æ—¶å™¨åœæ­¢æˆ–è¿‡æœŸï¼Œå¹¶ä¸”å…·æœ‰è€—å°½çš„é€šé“ã€‚è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªè¾…åŠ©å‡½æ•°å¹¶åœ¨æ¶ˆè´¹è€…ä¸­ä½¿ç”¨å®ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// resetTimer stops, drains and resets the timer.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;resetTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Timer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// go 1.22
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;consumer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Hour&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nf&#34;&gt;resetTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// do stuff
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// log warning
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç°åœ¨ï¼Œæ— è®ºè¶…æ—¶å€¼å’Œâ€œdo stuffâ€æ‰§è¡Œæ—¶é—´å¦‚ä½•ï¼Œæ¶ˆè´¹è€…éƒ½å¯ä»¥ä¿è¯æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// go 1.22
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;resetTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Time elapsed: %dms\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Since&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Milliseconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;123-åçš„è§£å†³æ–¹æ¡ˆ&#34;&gt;1.23 åçš„è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;ä» Go 1.23 å¼€å§‹ï¼Œåƒåœ¾æ”¶é›†å™¨å¯ä»¥é‡Šæ”¾æ´»åŠ¨çš„ï¼ˆä½†æœªå¼•ç”¨çš„ï¼‰è®¡æ—¶å™¨ã€‚å› æ­¤å¾ªç¯ä¸­çš„ &lt;code&gt;time.After&lt;/code&gt; ä¸ä¼šå †ç§¯å†…å­˜ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// go 1.23
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;consumer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Hour&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// do stuff
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;After&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// log warning
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å½“ç„¶ï¼Œå®ƒä»ç„¶ä¼šè¿›è¡Œå¤§é‡åˆ†é…ã€‚å› æ­¤ï¼Œæ‚¨å¯èƒ½æ›´å–œæ¬¢ &lt;code&gt;NewTimer&lt;/code&gt; + &lt;code&gt;Reset&lt;/code&gt; æ–¹æ³• - å®ƒä¸ä¼šåˆ›å»ºæ–°çš„è®¡æ—¶å™¨ï¼Œå› æ­¤ GC ä¸éœ€è¦æ”¶é›†å®ƒä»¬ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// go 1.23
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;consumer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Hour&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// do stuff
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// log warning
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä»¥ä¸‹ä¸¤ä¸ªé€‰é¡¹ï¼ˆ &lt;code&gt;time.After&lt;/code&gt; VS &lt;code&gt;timer.Reset&lt;/code&gt; ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;BenchmarkAfter-8    &lt;span class=&#34;m&#34;&gt;24&lt;/span&gt;    &lt;span class=&#34;m&#34;&gt;49271620&lt;/span&gt; ns/op    &lt;span class=&#34;m&#34;&gt;23201095&lt;/span&gt; B/op    &lt;span class=&#34;m&#34;&gt;300012&lt;/span&gt; allocs/op
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;BenchmarkReset-8    &lt;span class=&#34;m&#34;&gt;40&lt;/span&gt;    &lt;span class=&#34;m&#34;&gt;29428138&lt;/span&gt; ns/op         &lt;span class=&#34;m&#34;&gt;652&lt;/span&gt; B/op         &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; allocs/op
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;èƒœåˆ©è€…å·²ç»å¾ˆæ˜æ˜¾äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;timeafterfunc&#34;&gt;time.AfterFunc&lt;/h2&gt;
&lt;p&gt;æ›´ç³Ÿç³•çš„æ˜¯ï¼Œ &lt;code&gt;time.AfterFunc&lt;/code&gt; è¿˜åˆ›å»ºäº†ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œä½†æ˜¯æ˜¯ä¸€ä¸ªéå¸¸ä¸åŒçš„è®¡æ—¶å™¨ã€‚å®ƒæœ‰ä¸€ä¸ª nil &lt;code&gt;C&lt;/code&gt; é€šé“ï¼Œå› æ­¤ &lt;code&gt;Reset&lt;/code&gt; æ–¹æ³•çš„å·¥ä½œæ–¹å¼ä¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœè®¡æ—¶å™¨ä»ç„¶å¤„äºæ´»åŠ¨çŠ¶æ€ï¼ˆæœªåœæ­¢ï¼Œæœªè¿‡æœŸï¼‰ï¼Œ &lt;code&gt;Reset&lt;/code&gt; ä¼šæ¸…é™¤è¶…æ—¶ï¼Œä»è€Œæœ‰æ•ˆåœ°é‡æ–°å¯åŠ¨è®¡æ—¶å™¨ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè®¡æ—¶å™¨å·²åœæ­¢æˆ–åˆ°æœŸï¼Œ &lt;code&gt;Reset&lt;/code&gt; ä¼šå®‰æ’æ–°çš„å‡½æ•°æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;work&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;work done after %dms\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Since&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Milliseconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// run work after 10 milliseconds
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// ignore the data race for simplicity
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;AfterFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;work&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// wait for 5 to 15 milliseconds
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;delay&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Intn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%dms has passed...\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Milliseconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// Reset behavior depends on whether the timer has expired
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœè®¡æ—¶å™¨å°šæœªåˆ°æœŸï¼Œ &lt;code&gt;Reset&lt;/code&gt; ä¼šæ¸…é™¤è¶…æ—¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;8ms has passed...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;work &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt; after 10ms
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœè®¡æ—¶å™¨å·²è¿‡æœŸï¼ŒReset ä¼šå®‰æ’æ–°çš„å‡½æ•°è°ƒç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;work&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;done&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;after&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ms&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ms&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;has&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;passed&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;work&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;done&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;after&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ms&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;æœ€å&#34;&gt;æœ€å&lt;/h2&gt;
&lt;p&gt;é‡ç”³ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Go â‰¤ 1.22ï¼šå¯¹äºä½¿ç”¨ &lt;code&gt;NewTimer&lt;/code&gt; åˆ›å»ºçš„ &lt;code&gt;Timer&lt;/code&gt; ï¼Œ &lt;code&gt;Reset&lt;/code&gt; åªèƒ½åœ¨é€šé“è€—å°½çš„è®¡æ—¶å™¨åœæ­¢æˆ–è¿‡æœŸæ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;Go â‰¥ 1.23ï¼šå¯¹äºä½¿ç”¨ &lt;code&gt;NewTimer&lt;/code&gt; åˆ›å»ºçš„ &lt;code&gt;Timer&lt;/code&gt; ï¼Œåœ¨ä»»ä½•çŠ¶æ€ï¼ˆæ´»åŠ¨ã€åœæ­¢æˆ–è¿‡æœŸï¼‰çš„è®¡æ—¶å™¨ä¸Šè°ƒç”¨ &lt;code&gt;Reset&lt;/code&gt; éƒ½æ˜¯å®‰å…¨çš„ã€‚ä¸éœ€è¦é€šé“è€—å°½ï¼Œå› ä¸ºè®¡æ—¶å™¨é€šé“ï¼ˆæŸç§ç¨‹åº¦ä¸Šï¼‰ä¸å†è¢«ç¼“å†²ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºä½¿ç”¨ &lt;code&gt;AfterFunc&lt;/code&gt; åˆ›å»ºçš„ &lt;code&gt;Timer&lt;/code&gt; ï¼Œ &lt;code&gt;Reset&lt;/code&gt; è¦ä¹ˆé‡æ–°å®‰æ’è¯¥å‡½æ•°ï¼ˆå¦‚æœè®¡æ—¶å™¨ä»ç„¶å¤„äºæ´»åŠ¨çŠ¶æ€ï¼‰ï¼Œè¦ä¹ˆå®‰æ’è¯¥å‡½æ•°å†æ¬¡è¿è¡Œï¼ˆå¦‚æœè®¡æ—¶å™¨å·²å·²åœæ­¢æˆ–å·²è¿‡æœŸï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[Documentation &lt;a class=&#34;link&#34; href=&#34;https://pkg.go.dev/time@go1.22#Timer.Reset&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;pre-1.23]&lt;/a&gt; â€¢ [Documentation &lt;a class=&#34;link&#34; href=&#34;https://pkg.go.dev/time@master#Timer.Reset&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1.23+]&lt;/a&gt; â€¢ &lt;a class=&#34;link&#34; href=&#34;https://100go.co/#timeafter-and-memory-leaks-76&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;100 Go Mistakes&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®šæ—¶å™¨å¹¶ä¸æ˜¯ Go ä¸­æœ€æ˜æ˜¾çš„ä¸œè¥¿ï¼Œä¸æ˜¯å—ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://antonz.org/timer-reset/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Resetting timers in Go&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>é€šè¿‡é…ç½®æ–‡ä»¶å¼•å¯¼ä¼˜åŒ–æå‡ Go åº”ç”¨ç¨‹åºçš„æ€§èƒ½</title>
        <link>https://blog.golang.space/p/%E9%80%9A%E8%BF%87%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%BC%95%E5%AF%BC%E4%BC%98%E5%8C%96%E6%8F%90%E5%8D%87-go-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%80%A7%E8%83%BD/</link>
        <pubDate>Fri, 12 Jul 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E9%80%9A%E8%BF%87%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%BC%95%E5%AF%BC%E4%BC%98%E5%8C%96%E6%8F%90%E5%8D%87-go-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%80%A7%E8%83%BD/</guid>
        <description>&lt;p&gt;2023 å¹´ï¼ŒGo 1.21 å¼•å…¥äº†é…ç½®æ–‡ä»¶å¼•å¯¼ä¼˜åŒ–ï¼ˆPGOï¼‰ã€‚ä½¿ç”¨ PGOï¼Œæ‚¨å¯ä»¥åœ¨è¿è¡Œæ—¶å‘ Go ç¼–è¯‘å™¨æä¾›åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶ï¼Œç„¶å Go ç¼–è¯‘å™¨ä½¿ç”¨è¯¥é…ç½®æ–‡ä»¶å°±å¦‚ä½•åœ¨ä¸‹ä¸€ä¸ªæ„å»ºä¸­ä¼˜åŒ–ä»£ç åšå‡ºæ›´æ˜æ™ºçš„å†³ç­–ã€‚&lt;/p&gt;
&lt;p&gt;Google å’Œ Uber çš„å›¢é˜Ÿä» 2021 å¹´å¼€å§‹åˆä½œæ„å»º PGOã€‚æˆ‘ä»¬ä¸€èµ·å°è¯•äº†å„ç§ä¼˜åŒ–ï¼Œä»¥æé«˜è®¡ç®—æ•ˆç‡å¹¶é™ä½æˆæœ¬ã€‚å¦‚ä»Šï¼ŒUber å·²åœ¨æ•´ä¸ªè½¦é˜ŸèŒƒå›´å†…æ¨å‡ºäº† PGOï¼Œé™ä½äº†è®¸å¤šæœåŠ¡çš„ CPU åˆ©ç”¨ç‡ã€‚é˜…è¯»æ›´å¤šå†…å®¹ï¼Œäº†è§£å¦‚ä½•åœ¨ Go åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ PGOã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯pgo&#34;&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯PGOï¼Ÿ&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;å½“æ‚¨æ„å»º Go äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼ŒGo ç¼–è¯‘å™¨ä¼šæ‰§è¡Œä¼˜åŒ–ï¼Œå°è¯•ç”Ÿæˆæ€§èƒ½æœ€ä½³çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ä½†è¿™å¹¶ä¸æ€»æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼šåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿‡åº¦æ¿€è¿›çš„ä¼˜åŒ–å®é™…ä¸Šå¯èƒ½ä¼šæŸå®³æ€§èƒ½æˆ–å¯¼è‡´æ„å»ºæ—¶é—´è¿‡é•¿ï¼Œéœ€è¦æƒè¡¡å–èˆã€‚åœ¨ä¸çŸ¥é“ä»£ç åœ¨è¿è¡Œæ—¶å¦‚ä½•ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä½¿ç”¨é™æ€å¯å‘å¼æ–¹æ³•æ¥å¯¹ä»£ç æœ€å¸¸è°ƒç”¨çš„è·¯å¾„è¿›è¡Œæœ€ä½³çŒœæµ‹ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å¯ä»¥å‡†ç¡®åœ°å‘Šè¯‰ç¼–è¯‘å™¨æ‚¨çš„ä»£ç åœ¨è¿è¡Œæ—¶å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿæœ‰äº† PGOï¼Œæ‚¨å°±å¯ä»¥åšåˆ°ã€‚å¦‚æœæ‚¨åœ¨ç”Ÿäº§ä¸­æ”¶é›†åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨ä¸‹ä¸€ä¸ªæ„å»ºä¸­ä½¿ç”¨æ­¤é…ç½®æ–‡ä»¶ï¼Œç¼–è¯‘å™¨å¯ä»¥åšå‡ºæ›´æ˜æ™ºçš„å†³ç­–ï¼Œä¾‹å¦‚æ›´ç§¯æåœ°ä¼˜åŒ–æœ€å¸¸ç”¨çš„å‡½æ•°ï¼Œæˆ–æ›´å‡†ç¡®åœ°é€‰æ‹©å‡½æ•°å†…çš„å¸¸è§æƒ…å†µã€‚&lt;/p&gt;
&lt;h2 id=&#34;åœ¨-go-åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨-pgo&#34;&gt;&lt;strong&gt;åœ¨ Go åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ PGO&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ PGO éå¸¸ç®€å•ã€‚åªéœ€åœ¨è¿è¡Œæ—¶æ”¶é›†åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨ä¸‹ä¸€æ¬¡æ„å»ºæ—¶å‘ç¼–è¯‘å™¨æä¾›é…ç½®æ–‡ä»¶å³å¯ã€‚å…·ä½“åšæ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å¯¼å…¥å¹¶å¯ç”¨åˆ†æï¼šåœ¨ &lt;code&gt;main&lt;/code&gt; åŒ…ä¸­ï¼Œå¯¼å…¥ &lt;code&gt;net/http/pprof&lt;/code&gt; åŒ…ã€‚è¿™ä¼šè‡ªåŠ¨å°† &lt;code&gt;/debug/pprof/profile&lt;/code&gt; ç«¯ç‚¹æ·»åŠ åˆ°æœåŠ¡å™¨ä»¥è·å– CPU é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ”¶é›†é…ç½®æ–‡ä»¶ï¼šç…§å¸¸æ„å»ºæ‚¨çš„é¡¹ç›®ï¼Œç„¶ååœ¨ä»£è¡¨æ€§ç¯å¢ƒï¼ˆä¾‹å¦‚ç”Ÿäº§ã€ç™»å°ï¼‰æˆ–å®é™…æµ‹è¯•æ¡ä»¶ä¸‹è¿è¡Œæ‚¨çš„åº”ç”¨ç¨‹åºã€‚å½“æ‚¨çš„åº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œå¹¶ç»å†å…¸å‹è´Ÿè½½æ—¶ï¼Œä»æ‚¨åœ¨ä¸Šä¸€æ­¥ä¸­åˆ›å»ºçš„æœåŠ¡å™¨ç«¯ç‚¹ä¸‹è½½é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºåœ¨æœ¬åœ°è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl -o cpu.pprof &lt;span class=&#34;s2&#34;&gt;&amp;#34;http://localhost:8080/debug/pprof/profile?seconds=30&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨é…ç½®æ–‡ä»¶ä¼˜åŒ–æ‚¨çš„ä¸‹ä¸€ä¸ªæ„å»ºï¼šç°åœ¨æ‚¨æœ‰äº†é…ç½®æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨ä¸‹ä¸€ä¸ªæ„å»ºä¸­ä½¿ç”¨å®ƒã€‚å½“ Go å·¥å…·é“¾åœ¨ä¸»åŒ…ç›®å½•ä¸­æ‰¾åˆ°åä¸º &lt;code&gt;default.pgo&lt;/code&gt; çš„é…ç½®æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å¯ç”¨ PGOã€‚æˆ–è€…ï¼Œ &lt;code&gt;go build&lt;/code&gt; çš„ &lt;code&gt;-pgo&lt;/code&gt; æ ‡å¿—é‡‡ç”¨ç”¨äº PGO çš„é…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚æˆ‘ä»¬å»ºè®®å°† &lt;code&gt;default.pgo&lt;/code&gt; æ–‡ä»¶æäº¤åˆ°æ‚¨çš„å­˜å‚¨åº“ï¼Œä»¥ä¾¿ç”¨æˆ·è‡ªåŠ¨è®¿é—®è¯¥é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”æ‚¨çš„æ„å»ºä¿æŒå¯é‡ç°ï¼ˆå¹¶ä¸”é«˜æ€§èƒ½ï¼ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ mv cpu.pprof default.pgo
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ go build
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¡¡é‡æ”¹è¿›ï¼šå¦‚æœæ‚¨èƒ½å¤Ÿå¤åˆ¶åˆ›å»ºç¬¬ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„æ¡ä»¶ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨æ¯ç§’æä¾›æ’å®šæ•°é‡æŸ¥è¯¢çš„è´Ÿè½½æµ‹è¯•ï¼‰ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨ä¼˜åŒ–çš„æ„å»ºå’Œæ”¶é›†æ–°çš„é…ç½®æ–‡ä»¶ä½¿ç”¨ &lt;code&gt;go tool pprof&lt;/code&gt; å‘½ä»¤å°†å…¶ä¸ç¬¬ä¸€ä¸ªè¿›è¡Œæ¯”è¾ƒï¼Œä»¥æµ‹é‡ CPU ä½¿ç”¨ç‡çš„å‡å°‘æƒ…å†µï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ go tool pprof -diff_base nopgo.pprof yespgo.pprof
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æœ‰å…³å¦‚ä½•å¯¹æ€§èƒ½æ”¹è¿›è¿›è¡ŒåŸºå‡†æµ‹è¯•çš„è¯¦ç»†ç¤ºä¾‹ä»¥åŠæ›´å¤šä¿¡æ¯ï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹ Go åšå®¢ä¸­çš„&lt;a class=&#34;link&#34; href=&#34;https://go.dev/blog/pgo&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt; ã€‚æ‚¨è¿˜å¯ä»¥äº†è§£ PGO åœ¨å¹•åçš„å·¥ä½œåŸç†ä»¥åŠå¦‚ä½•åœ¨ &lt;a class=&#34;link&#34; href=&#34;https://go.dev/doc/pgo&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go docs&lt;/a&gt; ä¸­ç”Ÿæˆæ›´å¼ºå¤§çš„åˆ†æç­–ç•¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://cloud.google.com/blog/products/application-development/using-profile-guided-optimization-for-your-go-apps&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;strong&gt;Boost performance of Go applications with profile-guided optimization&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>é€šè¿‡ Go ç¤ºä¾‹æŒæ¡ SOLID åŸåˆ™</title>
        <link>https://blog.golang.space/p/%E9%80%9A%E8%BF%87-go-%E7%A4%BA%E4%BE%8B%E6%8E%8C%E6%8F%A1-solid-%E5%8E%9F%E5%88%99/</link>
        <pubDate>Wed, 10 Jul 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E9%80%9A%E8%BF%87-go-%E7%A4%BA%E4%BE%8B%E6%8E%8C%E6%8F%A1-solid-%E5%8E%9F%E5%88%99/</guid>
        <description>&lt;p&gt;SOLID åŸåˆ™æ˜¯ä¸€ç»„è®¾è®¡æŒ‡å—ï¼Œå¯å¸®åŠ©å¼€å‘äººå‘˜ç¼–å†™æ›´å¯ç»´æŠ¤ã€å¯æ‰©å±•å’Œå¯æµ‹è¯•çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;æ„å»ºè½¯ä»¶æ˜¯ä¸€ä¸ªä¸æ–­å˜åŒ–çš„æŒ‘æˆ˜ã€‚ä¸ºäº†åº”å¯¹è¿™ç§å¤æ‚æ€§ï¼Œå¼€å‘äººå‘˜ä¾é ç»è¿‡éªŒè¯çš„è®¾è®¡åŸåˆ™æ¥ç¼–å†™å¥å£®ã€é€‚åº”æ€§å¼ºä¸”æ˜“äºç®¡ç†çš„ä»£ç ã€‚å…¶ä¸­ä¸€ç»„åŸåˆ™æ˜¯ SOLIDï¼ˆç”± Robert C. Martin é¦–å…ˆæå‡ºï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;SOLID ä»£è¡¨ï¼šå•ä¸€èŒè´£ã€å¼€é—­å¼ã€é‡Œæ°æ›¿æ¢ã€æ¥å£éš”ç¦»å’Œä¾èµ–å€’ç½®ã€‚æ¯æ¡åŸåˆ™åœ¨æé«˜ç¨‹åºçš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¯æµ‹è¯•æ€§æ–¹é¢éƒ½å‘æŒ¥ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1721291513669.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20240718163153573&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å°½ç®¡Golangä¸æ˜¯çº¯ç²¹çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¯ä»¥åº”ç”¨SOLIDåŸåˆ™æ¥æ”¹è¿›æˆ‘ä»¬çš„Goä»£ç ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥ç ”ç©¶æ¯ä¸ªåŸåˆ™ï¼Œæ¢ç´¢å…¶å«ä¹‰ï¼Œå¹¶å‘ç°å¦‚ä½•åœ¨ Go ä¸­æœ‰æ•ˆåœ°åˆ©ç”¨å®ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;s---å•ä¸€è´£ä»»åŸåˆ™&#34;&gt;S - å•ä¸€è´£ä»»åŸåˆ™&lt;/h2&gt;
&lt;p&gt;å•ä¸€èŒè´£åŸåˆ™ (Single Responsibility Principle) è§„å®šç»“æ„/åŒ…åº”ä¸“æ³¨äºå•ä¸ªæ˜ç¡®å®šä¹‰çš„åŠŸèƒ½åŒºåŸŸã€‚å°†æ¯ä¸ªç»“æ„æƒ³è±¡æˆå…·æœ‰ç‰¹å®šä¸“ä¸šçŸ¥è¯†çš„ä¸“å®¶ã€‚è¿™å¯ä»¥ä½¿æ‚¨çš„ä»£ç ä¿æŒäº•äº•æœ‰æ¡å¹¶é™ä½å¤æ‚æ€§ã€‚å¯¹ç»“æ„åŠŸèƒ½çš„æ›´æ”¹æ˜¯éš”ç¦»çš„ï¼Œä½¿ç»´æŠ¤å’Œæœªæ¥çš„æ›´æ–°å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;A class should have one, and only one, reason to change.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Robert C. Martin&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Go æ“…é•¿ç»“æ„ä½“ï¼Œè€Œä¸æ˜¯ç±»ã€‚ä½†ä¸ç”¨æ‹…å¿ƒï¼ŒSRP å»ºè®®åœ¨è¿™é‡Œä»ç„¶é€‚ç”¨ã€‚å°†æ¯ä¸ªç»“æ„æƒ³è±¡ä¸ºä¸€ä¸ªç´§å¯†ç»“åˆçš„æ¨¡å—ï¼Œè´Ÿè´£ä¸€ä¸ªæ˜ç¡®å®šä¹‰çš„ä»»åŠ¡ã€‚è¿™ç§æ¨¡å—åŒ–æ–¹æ³•å¯ä»¥ä¿æŒä»£ç æ•´æ´ã€é™ä½å¤æ‚æ€§å¹¶æé«˜å¯ç»´æŠ¤æ€§ã€‚&lt;/p&gt;
&lt;p&gt;SRP çš„é­”åŠ›ä¹Ÿå»¶ä¼¸åˆ°äº† Go åŒ…ä¸­ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼ŒåŒ…åº”è¯¥ä¸“æ³¨äºå•ä¸€åŠŸèƒ½é¢†åŸŸã€‚è¿™å¯ä»¥æœ€å¤§é™åº¦åœ°å‡å°‘ä¾èµ–æ€§å¹¶ä½¿äº‹æƒ…äº•äº•æœ‰æ¡ã€‚é€šè¿‡åœ¨ç»“æ„å’ŒåŒ…ä¸­é‡‡ç”¨ SRPï¼Œæ‚¨å¯ä»¥ä¸ºå¹²å‡€ã€å¯ç»´æŠ¤å’Œå¯æ‰©å±•çš„ Go åº”ç”¨ç¨‹åºå¥ å®šåŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€äº›å¥½çš„åŒ…çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;coding/json - æä¾› JSON çš„ç¼–ç /è§£ç ã€‚&lt;/li&gt;
&lt;li&gt;net/url - è§£æ URLã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸å¤ªå¥½çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;utils - æ‚é¡¹åƒåœ¾åœºï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®©æˆ‘ä»¬çœ‹ä¸€ä¸ª Go ä¸­çš„ç¤ºä¾‹ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª struct Surveyï¼Œå…¶ä¸­åŒ…å«ä¸€äº›å±æ€§å’Œå‡ ä¸ªæ–¹æ³•ï¼šGetTitle()ã€Validate() å’Œ Save()ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Questions&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Validate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Questions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// saves the survey to the database
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å½“å‰çš„ Survey ç»“æ„ä¼¼ä¹è®¾è®¡å¾—å¾ˆå¥½ï¼Œé™¤äº† Save() æ–¹æ³•ä¹‹å¤–ã€‚å®ƒçš„å­˜åœ¨è¿åäº† SRPã€‚ç”±äºæ•°æ®å­˜å‚¨å’Œè°ƒæŸ¥é€»è¾‘ä½äºåŒä¸€ç»“æ„ä¸­ï¼Œç»´æŠ¤ã€æµ‹è¯•å’Œæ‰©å±•å˜å¾—æ›´å…·æŒ‘æˆ˜æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†éµå®ˆ SRPï¼Œæˆ‘ä»¬åº”è¯¥åŒºåˆ†è¿™äº›é—®é¢˜ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Questions&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Validate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Questions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Repository&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;Save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// One of many possible implementations
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;InMemoryRepository&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;surveys&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;InMemoryRepository&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;surveys&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;surveys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;SaveSurvey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;repo&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Repository&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;repo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç°åœ¨ï¼ŒSurvey ç»“æ„åªè´Ÿè´£ç®¡ç†è°ƒæŸ¥æ•°æ®ï¼Œè€Œ Repository æ¥å£å’Œ InMemoryRepository ç»“æ„åˆ™å¤„ç†æ•°æ®åº“æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;oå¼€é—­åŸåˆ™&#34;&gt;Oâ€”â€”å¼€é—­åŸåˆ™&lt;/h2&gt;
&lt;p&gt;å¼€é—­åŸåˆ™ (Open-Closed Principle) æ˜¯è‰¯å¥½è½¯ä»¶è®¾è®¡çš„åŸºçŸ³ã€‚å®ƒè§„å®šè½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€åŠŸèƒ½ç­‰ï¼‰çš„è®¾è®¡åº”è€ƒè™‘åˆ°æœªæ¥çš„å¢é•¿ã€‚è¿™æ„å‘³ç€å®ƒä»¬åº”è¯¥å¼€æ”¾æ‰©å±•ï¼Œå…è®¸æ·»åŠ æ–°ç‰¹æ€§å’ŒåŠŸèƒ½ï¼ŒåŒæ—¶ä¿æŒå…³é—­ä¿®æ”¹ã€‚ä¿®æ”¹ç°æœ‰ä»£ç æ¥é€‚åº”æ–°çš„éœ€æ±‚æ˜¯æœ‰é£é™©çš„ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šå¼•å…¥é”™è¯¯å¹¶ä½¿æœªæ¥çš„ç»´æŠ¤æˆä¸ºä¸€åœºå™©æ¢¦ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;A module should be open for extension but closed for modification.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Robert C. Martin&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å›åˆ°æˆ‘ä»¬çš„è°ƒæŸ¥ç¤ºä¾‹ã€‚è®©æˆ‘ä»¬å‘ç»“æ„ä½“æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³• - Export()ï¼Œå®ƒå¯ä»¥å°†è°ƒæŸ¥æ•°æ®å¯¼å‡ºåˆ°æŸäº›å¤–éƒ¨æœåŠ¡/å­˜å‚¨ä¸­ã€‚ç”±äºå¯èƒ½æœ‰å¤šä¸ªå¯¼å‡ºç›®æ ‡ï¼Œå› æ­¤ Export() æ–¹æ³•æœ‰ä¸€ä¸ª switch å—ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ExportSurvey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dst&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dst&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;s3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// export to s3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;gcs&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// export to gcs
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœæˆ‘ä»¬éœ€è¦æ·»åŠ å¯¹å…¶ä»–æœåŠ¡çš„æ”¯æŒï¼Œåˆ™å½“å‰çš„å®ç°éœ€è¦ä¿®æ”¹ï¼Œè¿™è¿åäº† OCPã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†éµå®ˆ OCPï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª Exporter æ¥å£ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸ºä¸åŒçš„ç›®æ ‡æ·»åŠ æ–°çš„å¯¼å‡ºå™¨ï¼Œè€Œæ— éœ€ä¿®æ”¹ç°æœ‰çš„ä»£ç åº“ã€‚&lt;/p&gt;
&lt;p&gt;è¿™éµå¾ª OCPï¼Œæé«˜äº†ä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚æˆ‘ä»¬çš„ä»£ç å¯¹æ‰©å±•å¼€æ”¾ï¼ˆæˆ‘ä»¬å¯ä»¥æ·»åŠ æ–°çš„å¯¼å‡ºå™¨ï¼‰ï¼Œä½†å¯¹ä¿®æ”¹å…³é—­ï¼ˆæˆ‘ä»¬ä¸éœ€è¦æ›´æ”¹ Export() å‡½æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;l---é‡Œæ°æ›¿æ¢åŸç†&#34;&gt;L - é‡Œæ°æ›¿æ¢åŸç†&lt;/h2&gt;
&lt;p&gt;é‡Œæ°æ›¿æ¢åŸåˆ™ (Liskov Substitution Principle) ç¡®ä¿å¯ä»¥åœ¨ä¸ç ´åç¨‹åºçš„æƒ…å†µä¸‹äº¤æ¢å¯¹è±¡ã€‚è™½ç„¶ Go ç¼ºä¹ä¼ ç»Ÿçš„ç»§æ‰¿ï¼Œä½†æ¥å£å®ç°äº†è¿™ä¸€ç‚¹ã€‚ä»»ä½•ç±»å‹éƒ½å¯ä»¥é€šè¿‡å…·æœ‰ä¸å…¶ç­¾åç›¸åŒ¹é…çš„æ–¹æ³•æ¥â€œå®ç°â€æ¥å£ã€‚è¿™æé«˜äº†çµæ´»æ€§â€”â€”ä½¿ç”¨æ¥å£çš„ä»£ç å¯ä»¥ä¸å„ç§ç±»å‹ä¸€èµ·å·¥ä½œï¼Œåªè¦å®ƒä»¬å±¥è¡ŒåˆåŒã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;If S is a subtype of T, then objects of type T may be replaced with objects of type S, without breaking the program&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;B. Liskov&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ Go ä¸­ï¼ŒLSP çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯ io.Writer æ¥å£ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Writer&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;io.Writer çš„ç¥å¥‡ä¹‹å¤„åœ¨äºå®ƒèƒ½å¤Ÿå°†å­—èŠ‚åˆ‡ç‰‡å†™å…¥ä»»ä½•æµï¼šæ–‡ä»¶ã€HTTP å“åº”ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨å›åˆ°æˆ‘ä»¬çš„ Survey ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–¹æ³• Write() æ¥å°†è°ƒæŸ¥å¯¹è±¡å†™å…¥æŸå¤„ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•åœ°è®©å®ƒæ¥å— io.Writerï¼Œè¿™æ ·å®ç°å°±å¯ä»¥å†³å®šå°†å…¶å†™å…¥ä½•å¤„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå‡½æ•°çš„ç”¨æˆ·ç°åœ¨æœ‰å¾ˆå¤§çš„çµæ´»æ€§ï¼Œå› ä¸ºä»–ä»¬åªéœ€è¦ä½¿ç”¨ä¸€äº›å®ç° io.Writer çš„ç»“æ„ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;file.go&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Feedback Form&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;WriteSurvey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;iæ¥å£éš”ç¦»åŸåˆ™&#34;&gt;Iâ€”â€”æ¥å£éš”ç¦»åŸåˆ™&lt;/h2&gt;
&lt;p&gt;æ¥å£éš”ç¦»åŸåˆ™ (Interface Segregation Principle) è§„å®šå®¢æˆ·ç«¯ä¸åº”è¢«è¿«ä¾èµ–äºä»–ä»¬ä¸ä½¿ç”¨çš„æ¥å£ã€‚è¿™ä¸€åŸåˆ™é¼“åŠ±åˆ›å»ºæ›´å°ã€æ›´é›†ä¸­çš„ç•Œé¢ï¼Œè€Œä¸æ˜¯å¤§å‹ã€å•ä¸€çš„ç•Œé¢ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Clients should not be forced to depend on methods they do not use.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Robert C. Martin&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åŒæ ·ï¼ŒGo çš„ io åŒ…å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚å®ƒæœ‰å¤šä¸ªå°æ¥å£åŠå…¶ç»„åˆï¼Œä¾‹å¦‚ io.Readerã€io.ReadWriterã€io.ReadCloserã€io.ReadWriteCloser ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„è°ƒæŸ¥ç¤ºä¾‹ä¸­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å¤šç§é—®é¢˜ç±»å‹ï¼šæ–‡æœ¬å’Œä¸‹æ‹‰åˆ—è¡¨ã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªé€šç”¨çš„ Question æ¥å£ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Question&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;SetTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;AddOption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TextQuestion&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TextQuestion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;SetTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TextQuestion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;AddOption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;option&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// not supported as text fields don&amp;#39;t have options
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DropdownQuestion&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Options&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DropdownQuestion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;SetTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DropdownQuestion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;AddOption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;option&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Options&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;option&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Question ç•Œé¢ä¸­çš„ AddOption() æ–¹æ³•å¾ˆçªå‡ºã€‚è¿™å¯¹äº TextQuestion æ¥è¯´æ²¡æœ‰æ„ä¹‰å¹¶ä¸”è¿åäº† ISPã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬å¦‚ä½•éµå¾ª ISP å¹¶æ”¹è¿›è®¾è®¡ï¼šå°†é—®é¢˜ç•Œé¢æ‹†åˆ†ä¸ºæ›´å°ã€æ›´é›†ä¸­çš„ç•Œé¢ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Question&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;SetTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;QuestionWithOptions&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Question&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;AddOption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TextQuestion&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TextQuestion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;SetTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DropdownQuestion&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Options&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DropdownQuestion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;SetTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DropdownQuestion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;AddOption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;option&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Options&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;q&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;option&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;d---ä¾èµ–å€’ç½®åŸåˆ™&#34;&gt;D - ä¾èµ–å€’ç½®åŸåˆ™&lt;/h2&gt;
&lt;p&gt;ä¾èµ–å€’ç½®åŸåˆ™ (Dependency Inversion Principle) è§„å®šé«˜çº§æ¨¡å—ä¸åº”ä¾èµ–äºä½çº§æ¨¡å—ã€‚ä¸¤è€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒDIP å»ºè®®æ‚¨çš„ä»£ç åº”è¯¥ä¾èµ–äºæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ç±»æˆ–å‡½æ•°ã€‚è¿™ç§æ§åˆ¶åè½¬å‡å°‘äº†è½¯ä»¶ä¸åŒéƒ¨åˆ†ä¹‹é—´çš„è€¦åˆï¼Œä½¿å…¶æ›´åŠ æ¨¡å—åŒ–ã€å¯æ‰©å±•ä¸”æ˜“äºæµ‹è¯•ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Abstractions should not depend on details. Details should depend on abstractions.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Robert C. Martin&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½œä¸ºç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä¸ªå¤„ç†è°ƒæŸ¥åˆ›å»ºçš„ SurveyManager ç»“æ„ï¼Œæ‚¨å¯ä»¥æƒ³è±¡å®ƒä¾èµ–äºæ•°æ®åº“ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;InMemoryRepository&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;surveys&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;SurveyManager&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;InMemoryRepository&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewSurveyManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SurveyManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SurveyManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;InMemoryRepository&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SurveyManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™é‡Œç³Ÿç³•çš„è®¾è®¡æ˜¯å®ƒä¸¥é‡ä¾èµ–InMemoryRepositoryï¼Œè¿åäº†é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—çš„åŸåˆ™ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·ï¼Œæ¥å£å’Œæ„é€ å‡½æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£è€¦äº‹ç‰©ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Repository&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;Save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;SurveyManager&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Repository&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewSurveyManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Repository&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SurveyManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SurveyManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SurveyManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;survey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;SOLID åŸåˆ™æ˜¯æ„å»ºå¹²å‡€ã€å¯ç»´æŠ¤å’Œå¯æ‰©å±•è½¯ä»¶çš„åŸºçŸ³ã€‚è™½ç„¶å…·ä½“çš„å®ç°ç»†èŠ‚å¯èƒ½ä¼šå› ç¼–ç¨‹è¯­è¨€çš„ä¸åŒè€Œæœ‰æ‰€ä¸åŒï¼ˆä¾‹å¦‚åœ¨ Go ä¸­ä½¿ç”¨æ¥å£ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ï¼‰ï¼Œä½† SOLID çš„æ ¸å¿ƒåŸåˆ™ä»ç„¶æ™®éé€‚ç”¨ã€‚é€šè¿‡éµå¾ªè¿™äº›åŸåˆ™ï¼Œå¼€å‘äººå‘˜å¯ä»¥ç¼–å†™æ›´å…·é€‚åº”æ€§ã€æ›´å®¹æ˜“æµ‹è¯•å¹¶æœ€ç»ˆæ›´èƒ½é€‚åº”å˜åŒ–çš„ä»£ç ï¼Œæ— è®ºä»–ä»¬é€‰æ‹©å“ªç§è¯­è¨€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://packagemain.tech/p/mastering-solid-principles-with-go&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Mastering SOLID Principles with Go Examples &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>çŸ¥é“ä½•æ—¶ Go çš„ http.DefaultClient æ–­å¼€</title>
        <link>https://blog.golang.space/p/%E7%9F%A5%E9%81%93%E4%BD%95%E6%97%B6-go-%E7%9A%84-http.defaultclient-%E6%96%AD%E5%BC%80/</link>
        <pubDate>Tue, 09 Jul 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E7%9F%A5%E9%81%93%E4%BD%95%E6%97%B6-go-%E7%9A%84-http.defaultclient-%E6%96%AD%E5%BC%80/</guid>
        <description>&lt;p&gt;è¿™äº›å¯èƒ½æ˜¯æ‚¨åœ¨å°è¯•ä½¿ç”¨ Go çš„ HTTP å®¢æˆ·ç«¯æ—¶çœ‹åˆ°çš„ç¬¬ä¸€ç»„ä»£ç ç‰‡æ®µã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://example.com/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://example.com/upload&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;image/jpeg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç±»ä¼¼çš„ä»£ç å¯èƒ½å¯¼è‡´ä½ çš„ç¬¬ä¸€æ¬¡ç”Ÿäº§ä¸­æ–­ã€‚è¿™æ˜¯éå¸¸å¥½çš„ä»£ç ï¼Œå½“å°†ä»¥ä¸‹å†…å®¹å¼•å…¥å…¶ä¸­æ—¶ï¼Œäº‹æƒ…å¼€å§‹å˜å¾—å¤æ‚ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ç¨‹åºå¼€å§‹å¤§é‡ HTTP è°ƒç”¨æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;å½“ç¨‹åºå¯¹å¤šä¸ªæœåŠ¡ä¸»æœºè¿›è¡Œ HTTP è°ƒç”¨æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶èƒŒåçš„åŸå› æ˜¯ &lt;code&gt;net/http&lt;/code&gt; åŒ…ä¸­å£°æ˜çš„è¿™ä¸ªå˜é‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è®¤è¯†-defaultclient&#34;&gt;è®¤è¯† DefaultClient&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;DefaultClient&lt;/code&gt; çš„ç±»å‹æ˜¯ &lt;code&gt;*http.Client&lt;/code&gt;ï¼Œ&lt;code&gt;http.Client&lt;/code&gt; æ˜¯åŒ…å«æ‰§è¡Œ HTTP è°ƒç”¨çš„æ‰€æœ‰æ–¹æ³•ç»“æ„ã€‚&lt;code&gt;DefaultClient&lt;/code&gt; æ˜¯ä¸€ä¸ª HTTP å®¢æˆ·ç«¯ï¼Œæ‰€æœ‰åº•å±‚è®¾ç½®éƒ½æŒ‡å‘é»˜è®¤å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ‚¨å°è¯•è°ƒç”¨è¿™äº›åŒ…çº§ HTTP æ–¹æ³•ï¼ˆä¾‹å¦‚ &lt;code&gt;http.Get&lt;/code&gt; ã€ &lt;code&gt;http.Post&lt;/code&gt; ã€ &lt;code&gt;http.Do&lt;/code&gt; ç­‰ï¼‰æ—¶ï¼Œå°†ä½¿ç”¨ &lt;code&gt;DefaultClient&lt;/code&gt; å˜é‡ã€‚ &lt;code&gt;http.Client&lt;/code&gt; ç»“æ„ä¸­çš„ä¸¤ä¸ªå­—æ®µå¯èƒ½ä¼šå°† &lt;code&gt;http.DefaultClient&lt;/code&gt; çš„â€œé»˜è®¤â€å’Œâ€œå…±äº«â€è¡Œä¸ºè½¬åŒ–ä¸ºæ½œåœ¨é—®é¢˜ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Client&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Transport&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;RoundTripper&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Timeout&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Duration&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;Timeout&lt;/code&gt; çš„é»˜è®¤å€¼ä¸ºé›¶ï¼Œå› æ­¤ &lt;code&gt;http.DefaultClient&lt;/code&gt; é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šè¶…æ—¶ï¼Œå¹¶ä¸”åªè¦è¿æ¥å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œå°±ä¼šå°è¯•ä¿ç•™æœ¬åœ°ç«¯å£/å¥—æ¥å­—ã€‚å¦‚æœè¯·æ±‚å¤ªå¤šæ€ä¹ˆåŠï¼Ÿç­”æ¡ˆæ˜¯å‘ç”Ÿäº†ç”Ÿäº§ä¸­æ–­ï¼Œä½ å°†è€—å°½ç«¯å£ï¼Œå¹¶ä¸”ä¸ä¼šæœ‰å¯ç”¨çš„ç«¯å£è¿›è¡Œè¿›ä¸€æ­¥çš„ HTTP è°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æ˜¯ &lt;code&gt;http.Client&lt;/code&gt; ä¸­çš„ &lt;code&gt;Transport&lt;/code&gt; å­—æ®µã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä»¥ä¸‹ &lt;code&gt;DefaultTransport&lt;/code&gt; å°†åœ¨ &lt;code&gt;DefaultClient&lt;/code&gt; ä¸­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DefaultTransport&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;RoundTripper&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Transport&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Proxy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ProxyFromEnvironment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;DialContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;defaultTransportDialContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Dialer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;Timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;   &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;KeepAlive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;ForceAttemptHTTP2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;     &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;MaxIdleConns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;          &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;IdleConnTimeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;       &lt;span class=&#34;mi&#34;&gt;90&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;TLSHandshakeTimeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;   &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;ExpectContinueTimeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ï¼ˆé‡Œé¢æœ‰å¾ˆå¤šä¸œè¥¿ï¼Œä½†æ˜¯æŠŠä½ çš„æ³¨æ„åŠ›è½¬å‘ &lt;code&gt;MaxIdleConns&lt;/code&gt; ï¼‰&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å…³äºå®ƒçš„ä½œç”¨çš„æ–‡æ¡£ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// MaxIdleConns controls the maximum number of idle (keep-alive)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// connections across all hosts. Zero means no limit.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MaxIdleConns&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç”±äº &lt;code&gt;DefaultClient&lt;/code&gt; æ˜¯å…±äº«çš„ï¼Œå› æ­¤æ‚¨æœ€ç»ˆå¯èƒ½ä¼šä»ä¸­è°ƒç”¨å¤šä¸ªæœåŠ¡ï¼ˆä¸»æœºåï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé»˜è®¤å®¢æˆ·ç«¯ä¸ºç»™å®šä¸»æœºé›†ç»´æŠ¤çš„ &lt;code&gt;MaxIdleConns&lt;/code&gt; å¯èƒ½å­˜åœ¨ä¸å…¬å¹³çš„åˆ†é…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸€ä¸ªå°ä¾‹å­&#34;&gt;ä¸€ä¸ªå°ä¾‹å­&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬åœ¨è¿™é‡Œä¸¾ä¸ªæ —å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;LoanAPIClient&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;l&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;LoanAPIClient&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Loan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// ....
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;https://loan.api.example.com/v1/loans&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// ....
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PaymentAPIClient&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PaymentAPIClient&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Pay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;amount&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// ....
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;https://payment.api.example.com/v1/card&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;application/json&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// ....
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;LoanAPIClient&lt;/code&gt; å’Œ &lt;code&gt;PaymentAPIClient&lt;/code&gt; éƒ½é€šè¿‡è°ƒç”¨ &lt;code&gt;http.Get&lt;/code&gt; å’Œ &lt;code&gt;http.Post&lt;/code&gt; æ¥ä½¿ç”¨ &lt;code&gt;http.DefaultClient&lt;/code&gt; ã€‚å‡è®¾æˆ‘ä»¬çš„ç¨‹åºæœ€åˆä» &lt;code&gt;LoanAPIClient&lt;/code&gt; è¿›è¡Œ 80 æ¬¡è°ƒç”¨ï¼Œç„¶åä» &lt;code&gt;PaymentAPIClient&lt;/code&gt; è¿›è¡Œ 200 æ¬¡è°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ &lt;code&gt;DefaultClient&lt;/code&gt; ä»…ç»´æŠ¤æœ€å¤§100ä¸ªç©ºé—²è¿æ¥ã€‚å› æ­¤ï¼Œ &lt;code&gt;LoadAPIClient&lt;/code&gt; å°†å é¢†è¿™ 100 ä¸ªä½ç½®ä¸­çš„ 80 ä¸ªä½ç½®ï¼Œè€Œ &lt;code&gt;PaymentAPIClient&lt;/code&gt; å°†ä»…è·å¾— 20 ä¸ªå‰©ä½™ä½ç½®ã€‚è¿™æ„å‘³ç€å¯¹äºæ¥è‡ª &lt;code&gt;PaymentAPIClient&lt;/code&gt; çš„å…¶ä½™ 60 ä¸ªè°ƒç”¨ï¼Œéœ€è¦æ‰“å¼€å’Œå…³é—­ä¸€ä¸ªæ–°è¿æ¥ã€‚è¿™ä¼šå¯¹æ”¯ä»˜APIæœåŠ¡å™¨é€ æˆä¸å¿…è¦çš„å‹åŠ›ã€‚è¿™äº› MaxIdleConns çš„åˆ†é…å¾ˆå¿«å°±ä¼šè„±ç¦»ä½ çš„æŒæ§ï¼ ï¼ˆç›¸ä¿¡æˆ‘ğŸ˜…ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;æˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜&#34;&gt;æˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¢åŠ  &lt;code&gt;MaxIdleConns&lt;/code&gt; ï¼Ÿæ˜¯çš„ï¼Œæ‚¨å¯ä»¥ï¼Œä½†å¦‚æœå®¢æˆ·ç«¯ä»ç„¶åœ¨ &lt;code&gt;LoanAPIClient&lt;/code&gt; å’Œ &lt;code&gt;PaymentAPIClient&lt;/code&gt; ä¹‹é—´å…±äº«ï¼Œé‚£ä¹ˆè¿™ä¹Ÿä¼šåœ¨æŸç§ç¨‹åº¦ä¸Šå¤±æ§ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å‘ç°äº† &lt;code&gt;MaxIdleConns&lt;/code&gt; çš„å…„å¼Ÿï¼Œé‚£å°±æ˜¯ &lt;code&gt;MaxIdleConnsPerHost&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æœ‰åŠ©äºä¸ºæ¯ä¸ªç«¯ç‚¹ï¼ˆä¸»æœºåï¼‰ç»´æŠ¤å¯é¢„æµ‹æ•°é‡çš„ç©ºé—²è¿æ¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¥½å§æˆ‘ä¼šå¦‚ä½•ä¿®å¤å®ƒ&#34;&gt;å¥½å§ï¼Œæˆ‘ä¼šå¦‚ä½•ä¿®å¤å®ƒ?&lt;/h2&gt;
&lt;p&gt;å¦‚æœæ‚¨çš„ç¨‹åºæ­£åœ¨è°ƒç”¨å¤šä¸ª HTTP æœåŠ¡ï¼Œé‚£ä¹ˆæ‚¨å¾ˆå¯èƒ½è¿˜æƒ³è°ƒæ•´å®¢æˆ·ç«¯çš„å…¶ä»–è®¾ç½®ã€‚å› æ­¤ï¼Œä¸ºè¿™äº›æœåŠ¡æä¾›å•ç‹¬çš„ &lt;code&gt;http.Client&lt;/code&gt; å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å°†æ¥éœ€è¦æ—¶å¯¹å®ƒä»¬è¿›è¡Œå¾®è°ƒã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;LoanAPIClient&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Client&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PaymentAPIClient&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Client&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;åˆ«æ‹…å¿ƒ&#34;&gt;åˆ«æ‹…å¿ƒ&lt;/h2&gt;
&lt;p&gt;ç»“è®ºæ˜¯è¿™æ ·çš„ï¼šä½¿ç”¨ &lt;code&gt;http.DefaultClient&lt;/code&gt; å¼€å§‹æ˜¯å¯ä»¥çš„ã€‚ä½†å¦‚æœæ‚¨è®¤ä¸ºæ‚¨å°†æ‹¥æœ‰æ›´å¤šå®¢æˆ·ç«¯å¹¶ä¸”ä¼šè¿›è¡Œæ›´å¤š API è°ƒç”¨ï¼Œè¯·é¿å…è¿™æ ·åšã€‚&lt;/p&gt;
&lt;p&gt;æé†’ï¼šå¦‚æœæ‚¨æ­£åœ¨ç¼–å†™å…·æœ‰ API å®¢æˆ·ç«¯çš„åº“ï¼Œè¯·ä¸ºæ‚¨çš„ç”¨æˆ·æä¾›ä¸€ä¸ªå¸®åŠ©ï¼šæä¾›ä¸€ç§è‡ªå®šä¹‰ç”¨äºè¿›è¡Œ API è°ƒç”¨çš„ &lt;code&gt;http.Client&lt;/code&gt; çš„æ–¹æ³•ã€‚è¿™æ ·ï¼Œæ‚¨çš„ç”¨æˆ·å°±å¯ä»¥å®Œå…¨æ§åˆ¶ä»–ä»¬åœ¨ä½¿ç”¨æ‚¨çš„å®¢æˆ·ç«¯æ—¶æƒ³è¦å®ç°çš„ç›®æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;HTTP æœåŠ¡å™¨å†…çš„ HTTP å®¢æˆ·ç«¯ä¸å¦ä¸€ä¸ªå…·æœ‰ HTTP å®¢æˆ·ç«¯çš„ HTTP æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œæ‰€æœ‰è¿™äº›éƒ½ç”±æ‚¨ç¼–å†™ã€‚é‚£å°†æ˜¯ä½ çš„æç¤ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº&lt;a class=&#34;link&#34; href=&#34;https://vishnubharathi.codes/blog/know-when-to-break-up-with-go-http-defaultclient/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Know when to break up with Go&amp;rsquo;s http.DefaultClient&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>å®æ—¶è¯Šæ–­æ—¥å¿—è®°å½•ï¼Œå¦‚ä½•ç›‘è§† Go Web åº”ç”¨</title>
        <link>https://blog.golang.space/p/%E5%AE%9E%E6%97%B6%E8%AF%8A%E6%96%AD%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E7%9B%91%E8%A7%86-go-web-%E5%BA%94%E7%94%A8/</link>
        <pubDate>Thu, 04 Jul 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E5%AE%9E%E6%97%B6%E8%AF%8A%E6%96%AD%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E7%9B%91%E8%A7%86-go-web-%E5%BA%94%E7%94%A8/</guid>
        <description>&lt;p&gt;æ—¥å¿—è®°å½•å¯¹äºä»»ä½•é‡è›®ç”Ÿé•¿çš„åº”ç”¨å¿…ä¸å¯å°‘ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šå›é¡¾æ€§çš„æŸ¥é˜…æ—¥å¿—ä»¥äº†è§£è¿‡å»ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®æ—¶è®¿é—®æœ‰å…³ç‰¹å®šç”¨æˆ·æ“ä½œçš„è¯¦ç»†æµç¨‹æ˜¯è¯†åˆ«é—®é¢˜çš„æœ€ä½³(æœ‰æ—¶æ˜¯å”¯ä¸€)æ–¹æ³•ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ Go åŠ Slog åŒ…å®ç°è¿™ç§æ—¥å¿—è®°å½•åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç”¨æˆ·å¼€å§‹æŠ±æ€¨åº”ç”¨ä¸­çš„ç‰¹å®šåŠŸèƒ½ä¸èµ·ä½œç”¨æ—¶ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿé¦–å…ˆï¼Œä½ å¯èƒ½ä¼šè¯„ä¼°ç—‡çŠ¶å¹¶éªŒè¯ç”¨æˆ·æ˜¯å¦å­˜åœ¨æ„æ–™ä¹‹å¤–çš„è¡Œä¸ºã€‚ç„¶åï¼Œä½ å¯ä»¥æ£€æŸ¥ä½ çš„é”™è¯¯è·Ÿè¸ªæœåŠ¡ï¼ˆè¿™é‡Œæ²¡ä»€ä¹ˆå¯çœ‹çš„ï¼‰ã€æ­£å¸¸è¿è¡Œæ—¶é—´å’Œé‡è¦æŒ‡æ ‡ï¼ˆä¸€åˆ‡æ­£å¸¸ï¼‰ã€‚æœ€åï¼Œä»»ä½•æ½œåœ¨æœ‰ç”¨ä¿¡æ¯çš„æœ€åä¸€ä¸ªæ¥æºéƒ½éšè—åœ¨æ—¥å¿—ä¸­çš„æŸä¸ªåœ°æ–¹ã€‚ä½†æ˜¯ï¼Œé»˜è®¤ç”Ÿäº§æ—¥å¿—çº§åˆ«ä¸ºâ€œINFOâ€ï¼ˆå¯¹å—ï¼Ÿï¼‰ï¼Œå› æ­¤ï¼Œå°½ç®¡å¯èƒ½å­˜åœ¨ä¸€äº›è­¦å‘Šå’Œé”™è¯¯ï¼Œä½†è¿™äº›æ—¥å¿—ä¸å¤ªå¯èƒ½åŒ…å«æœ‰å…³é—®é¢˜çš„è¶³å¤Ÿä¿¡æ¯ã€‚ä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆåšï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³æ¢è®¨ä¸åŒçš„é€‰é¡¹ï¼ŒåŒ…æ‹¬å¦‚ä½•ä¸´æ—¶å¯ç”¨è¯¦ç»†ï¼ˆé€šå¸¸æ˜¯é€‰æ‹©æ€§ï¼‰æ—¥å¿—è®°å½•ä»¥è¿›è¡Œæ•…éšœæ’é™¤ï¼Œä»¥åŠå¦‚ä½•ä½¿è¿™äº›ç±»å‹çš„æ—¥å¿—èƒ½å¤Ÿéšæ—¶éšåœ°å®æ—¶è½»æ¾è®¿é—®ã€‚è¿™ç§æ—¥å¿—è®°å½•æœ‰æ—¶ç§°ä¸ºè¯Šæ–­æ—¥å¿—è®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸€äº›ä¸åŒçš„ç­–ç•¥ï¼Œç”¨äºå°†è¯Šæ–­æ—¥å¿—è®°å½•å¼•å…¥ç”± slog åŒ…æ”¯æŒçš„ Go åº”ç”¨ç¨‹åºï¼Œå¹¶æ¶µç›–è¯¥è¿‡ç¨‹ä¸­çš„ä»¥ä¸‹ä¸»é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ›´æ–°å…¨å±€æ—¥å¿—çº§åˆ« (æ— è®ºæ˜¯å¦é‡å¯)&lt;/li&gt;
&lt;li&gt;Slog æ˜¯å¤§é“ï¼Œå¤§é“è‡³ç®€&lt;/li&gt;
&lt;li&gt;å¤š handler Slogging&lt;/li&gt;
&lt;li&gt;æé«˜æ€§èƒ½çš„æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ›´æ–°å…¨å±€æ—¥å¿—çº§åˆ«-æ— è®ºæ˜¯å¦é‡å¯&#34;&gt;æ›´æ–°å…¨å±€æ—¥å¿—çº§åˆ« (æ— è®ºæ˜¯å¦é‡å¯)&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬ä»ä¸€äº›ç®€å•æ˜äº†ä¸”é€‚ç”¨äºä»»ä½•åº”ç”¨ç¨‹åºçš„ä¸œè¥¿å¼€å§‹ï¼Œè€Œä¸ä»…ä»…æ˜¯é‚£äº›ç”¨ Go ç¼–å†™çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥æš‚æ—¶å°†åº”ç”¨ç¨‹åºæ—¥å¿—çº§åˆ«æ›´æ–°ä¸ºâ€œDEBUGâ€å¹¶é‡æ–°å¯åŠ¨å®ƒã€‚ç°åœ¨ï¼Œä½ å·²ç»è®°å½•äº†å¤§é‡æ—¥å¿—ï¼Œå¹¶ä¸”ï¼ˆæˆ‘å¸Œæœ›ï¼‰æœ‰ä¸€ä¸ªä¸é”™çš„æ—¥å¿—æ”¶é›†å’ŒæŸ¥çœ‹æœåŠ¡ï¼ˆå³ä¸æ˜¯æ™®é€šæ–‡ä»¶ï¼‰æ¥æœç´¢ç›¸å…³äº‹ä»¶ã€‚é—®é¢˜è§£å†³äº†ï¼Œç‰›é€¼ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹å—? ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ä¸èƒ½ä»…ä»…ä¸ºäº†è°ƒè¯•è€Œé‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åºæ€ä¹ˆåŠ? è¿™æ­£æ˜¯ AnyCable æˆ–ä»»ä½•å…¶ä»–æœåŠ¡äºæ•°åƒä¸ªæŒä¹…è¿æ¥çš„åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ï¼Œåœ¨çº¿æ´»åŠ¨å¹³å°ï¼‰çš„æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé‡æ–°å¯åŠ¨æœåŠ¡å™¨å°†éœ€è¦é‡æ–°åˆå§‹åŒ–æ‰€æœ‰æ´»åŠ¨å®¢æˆ·ç«¯ï¼ˆé‡æ–°å»ºç«‹è¿æ¥å¹¶æ¢å¤çŠ¶æ€ï¼‰ã€‚ä»ç”¨æˆ·ä½“éªŒçš„è§’åº¦æ¥çœ‹ï¼Œè¿™å¹¶ä¸å¥½ï¼Œä»æœåŠ¡å™¨çš„è§’åº¦æ¥çœ‹ä¹Ÿä¸å¥½ï¼Œè€Œä¸”å¤§è§„æ¨¡çš„é‡æ–°è¿æ¥ï¼ˆä¹Ÿç§°ä¸ºè¿æ¥é›ªå´©ï¼‰å¯èƒ½ä¼šå¯¼è‡´ä¸¥é‡çš„è´Ÿè½½å³°å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œé‡æ–°å¯åŠ¨æœåŠ¡å™¨ä¸æ˜¯ä¸€ç§é€‰æ‹©ã€‚å› æ­¤æˆ‘ä»¬æ›´æ”¹æ—¥å¿—è®°å½•è®¾ç½®çš„å”¯ä¸€æ–¹æ³•æ˜¯å‘åº”ç”¨ç¨‹åºæ·»åŠ ä¸€äº›è‡ªå®šä¹‰é€»è¾‘ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬å¼€å§‹å†™ä¸€äº› Goã€‚&lt;/p&gt;
&lt;h2 id=&#34;slog-æ˜¯å¤§é“å¤§é“è‡³ç®€&#34;&gt;Slog æ˜¯å¤§é“ï¼Œå¤§é“è‡³ç®€&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬æ³¨æ„ slog åŒ…çš„ä¸¤ä¸ªä¸»è¦æ¦‚å¿µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;slog.Logger&lt;/code&gt; æ˜¯æ—¥å¿—è®°å½•å…¥å£ç‚¹ï¼Œæ˜¯è°ƒç”¨ &lt;code&gt;Info()&lt;/code&gt; ã€ &lt;code&gt;Debug()&lt;/code&gt; ç­‰å‡½æ•°çš„ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;slog.Handler&lt;/code&gt; æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè´Ÿè´£å¤„ç†æ—¥å¿—æ¡ç›®ï¼ˆæˆ–è®°å½•ï¼‰å¹¶æ‰§è¡Œå¯¹æ—¥å¿—è®°å½•è®¾å¤‡çš„å†™å…¥ã€çº§åˆ«è¿‡æ»¤ã€æ ¼å¼åŒ–ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨çš„åŸºæœ¬ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;log/slog&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;opts&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HandlerOptions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;LevelInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewTextHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stdout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;opts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¯·æ³¨æ„ï¼Œæ—¥å¿—è®°å½•çº§åˆ«æ˜¯ handler çš„ç‰¹å¾ï¼Œè€Œä¸æ˜¯ logger å®ä¾‹çš„ç‰¹å¾ã€‚æ²¡æœ‰ &lt;code&gt;logger.SetLogLevel(lvl)&lt;/code&gt; å‡½æ•°æˆ–ä»»ä½•ç±»ä¼¼çš„æœºåˆ¶ï¼ˆå¦‚åœ¨è®¸å¤šæ—¥å¿—è®°å½•åº“ä¸­ï¼‰æ¥æ›´æ”¹æ—¥å¿—çº§åˆ«ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•åŠ¨æ€åœ°æ›´æ”¹æ—¥å¿—çº§åˆ«å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æœ‰å¾ˆå¤šè§£å†³æ–¹æ³•ï¼Œä½†æˆ‘æ›´å–œæ¬¢çš„ä¸€ç§å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;log/slog&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;LOG_LEVEL&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;LevelVar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;LOG_LEVEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;LevelInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;opts&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HandlerOptions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;LOG_LEVEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewTextHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stdout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;opts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// SetLogLevel updates the application log level
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;SetLogLevel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lvl&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;LOG_LEVEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lvl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ç‰¹æ®Š &lt;code&gt;slog.LevelVar&lt;/code&gt; å˜é‡ä½œä¸ºå½“å‰æ—¥å¿—è®°å½•çº§åˆ«çš„å®¹å™¨ã€‚ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨ä¸ä¸­æ–­åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹æ›´æ”¹æ—¥å¿—è®°å½•çº§åˆ«ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨è¯¥ &lt;code&gt;SetLogLevel&lt;/code&gt; å‡½æ•°ã€‚ä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ª &lt;code&gt;SIGQUIT&lt;/code&gt; ä¿¡å·å¤„ç†ç¨‹åºæ¥åœ¨â€œDEBUGâ€å’Œâ€œINFOâ€ä¹‹é—´åˆ‡æ¢æ—¥å¿—å€¼ï¼ˆæ‚¨å¯ä»¥åœ¨æ­¤ &lt;a class=&#34;link&#34; href=&#34;https://gist.github.com/palkan/c735f7bb85b9950189ff56da9d9cd520&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;this gist&lt;/a&gt; æ‰¾åˆ°ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œç¤ºä¾‹ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿè½»æ¾è®¿é—®æ—¥å¿—ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ»¡è¶³ä¸æ–­å¤§æµ·æé’ˆçš„éœ€è¦ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•å°±è¶³å¤Ÿå¥½äº†ï¼Œå› ä¸ºåœ¨å…¨å±€èŒƒå›´å†…å¯ç”¨è¯¦ç»†æ—¥å¿—è®°å½•ä¼šäº§ç”Ÿå¤§é‡æ—¥å¿—ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨å¼€å‘æ•…éšœæ’é™¤æ—¥å¿—åŠŸèƒ½æ—¶è€ƒè™‘äº†ä¸¤ä¸ªç”¨ä¾‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºç”¨æˆ·æä¾›è½»æ¾çš„æ—¥å¿—è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡åå°ç®¡ç† UI è®¿é—®æ—¥å¿—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œéƒ½æ— æ³•å¯¹æ—¥å¿—çš„æ”¶é›†æ–¹å¼åšå‡ºä»»ä½•å‡è®¾ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§ç‹¬ç«‹äºåŸºç¡€è®¾æ–½çš„æ–¹å¼æ¥æŒ‰éœ€æµå¼ä¼ è¾“è¯¦ç»†æ—¥å¿—ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼€å§‹å¯»æ‰¾åŒæ—¶å°†æ—¥å¿—å†™å…¥å¤šä¸ªè¾“å‡ºçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ slog å®ç°å¤šè¾“å‡ºæ—¥å¿—è®°å½•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤š-handler-slogging&#34;&gt;å¤š handler Slogging&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‰‡å‡ºæ¨¡å¼æ„å»ºä¸€ä¸ªå¤šè¾“å‡ºè®°å½•å™¨ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;log/slog&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MultiHandler&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Handler&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Handler&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MultiHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;level&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MultiHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Record&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MultiHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;WithAttrs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;attrs&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Attr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Handler&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MultiHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WithAttrs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;attrs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WithAttrs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;attrs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MultiHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;WithGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Handler&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MultiHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WithGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WithGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;jsonHandler&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewJSONHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stdout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HandlerOptions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;LevelInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;textErrorHandler&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewTextHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stderr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HandlerOptions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;LevelError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MultiHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nx&#34;&gt;jsonHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nx&#34;&gt;textErrorHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬çš„ MultiHandler å¿…é¡»å®ç°ä»¥ä¸‹ &lt;code&gt;slog.Handler&lt;/code&gt; æ¥å£ï¼šè¯¥ &lt;code&gt;Enabled()&lt;/code&gt; å‡½æ•°æ˜¯è®°å½•å™¨ç”¨æ¥å†³å®šå¤„ç†ç¨‹åºæ˜¯å¦è¦å¤„ç†æ­¤æ¡ç›®çš„ä¿æŠ¤; å¦‚æœæ˜¯ï¼Œåˆ™ç”Ÿæˆ &lt;code&gt;slog.Record&lt;/code&gt; ç»“æ„å¹¶å°†å…¶ä¼ é€’ç»™ &lt;code&gt;Handle()&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;WithAttrs()&lt;/code&gt; and &lt;code&gt;WithGroup()&lt;/code&gt; å‡½æ•°ç”¨äºåˆ›å»ºé™„åŠ äº†ç»™å®šä¸Šä¸‹æ–‡çš„å¤„ç†ç¨‹åºçš„å‰¯æœ¬ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å¤„ç†ç¨‹åºï¼Œå³ &lt;em&gt;spy handler&lt;/em&gt; ï¼Œå½“ä¸”ä»…å½“è‡³å°‘æœ‰ä¸€ä¸ªç”¨æˆ·è¯·æ±‚æ—¥å¿—æ—¶ï¼Œå®ƒå°†ä½¿ç”¨æ‰€æœ‰æ—¥å¿—ã€‚ç”±äºè¯Šæ–­æ—¥å¿—è®°å½•å¯ä»¥åœ¨ç”Ÿäº§å’Œé«˜å³°æ—¶æ®µä½¿ç”¨ï¼Œå› æ­¤å­˜åœ¨ä¸æ€§èƒ½ç›¸å…³çš„é‡è¦æ³¨æ„äº‹é¡¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°† &lt;code&gt;spy handler &lt;/code&gt; é™„åŠ åˆ°è®°å½•å™¨æ—¶ï¼Œå½“å®ƒå¤„äºéæ´»åŠ¨çŠ¶æ€æ—¶ï¼Œä¸å¾—äº§ç”Ÿæ˜æ˜¾çš„æ€§èƒ½å¼€é”€ï¼ˆå³ï¼Œå®ƒä¸åº”è¯¥å‘ç”¨æˆ·å‘é€æ¶ˆæ¯ï¼‰&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦æ¿€æ´»ï¼Œ  &lt;code&gt;spy handler &lt;/code&gt;  ä¸å¾—å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;spy handler &lt;/code&gt;  å¿…é¡»æ˜¯éé˜»å¡çš„ï¼ˆå¯ä»¥è·³è¿‡ä¸€äº›æ¶ˆæ¯æ¥å®ç°è¿™ä¸€ç‚¹ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®©æˆ‘ä»¬åˆ†äº«ä¸€ä¸‹æˆ‘ä»¬ä¸ºè·å¾—ä»¤äººæ»¡æ„çš„æ•ˆæœè€Œé‡‡å–çš„æ­¥éª¤ï¼&lt;/p&gt;
&lt;h2 id=&#34;æé«˜æ€§èƒ½çš„æ–¹æ³•&#34;&gt;æé«˜æ€§èƒ½çš„æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;éé˜»å¡çš„è¦æ±‚ï¼Œæ„å‘³ç€åœ¨å•ç‹¬çš„ Go åç¨‹ä¸­å¤„ç†æ—¥å¿—æ¡ç›®ï¼Œå¹¶ä½¿ç”¨é€šé“ä½œä¸ºä¼ è¾“ã€‚æˆ‘ä»¬è¿˜éœ€è¦è·Ÿè¸ªå¤„ç†ç¨‹åºçŠ¶æ€ï¼Œæ— è®ºæ˜¯æ´»åŠ¨è¿˜æ˜¯éæ´»åŠ¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†è¿™ä¸ª &lt;code&gt;spy handler &lt;/code&gt; çš„åˆå§‹å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;SpyHandler&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;active&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;     &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Record&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewSpyHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;callback&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Record&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SpyHandler&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SpyHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Record&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2048&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nf&#34;&gt;callback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SpyHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;level&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SpyHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Record&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;active&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;enqueueRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SpyHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;enqueueRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Record&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸Šé¢ä»£ç æ®µä¸­çš„é‡è¦éƒ¨åˆ†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;è¯¥ &lt;code&gt;select { ... default:}&lt;/code&gt; æ¨¡å¼çš„ä½¿ç”¨é¿å…äº†å¯èƒ½é˜»å¡é€šé“å†™å…¥æ“ä½œï¼ˆå¦‚æœé€šé“çš„ç¼“å†²åŒºå·²æ»¡ï¼Œåˆ™é»˜è®¤å­å¥åªä¼šåˆ é™¤è®°å½•ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Enabled()&lt;/code&gt; å‡½æ•°ä¸­ &lt;code&gt;return true&lt;/code&gt; ï¼Œæˆ‘ä»¬çš„å¤„ç†ç¨‹åºåº”è¯¥æ¶ˆè´¹æ‰€æœ‰æ—¥å¿—ï¼Œå¯¹å§ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬ç»§ç»­å®Œå–„æ­¤å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬æœ€å¥½è¿è¡Œä¸€äº›æ€§èƒ½æµ‹è¯•å¹¶æ£€æŸ¥è¿™ç§æ–¹æ³•æ˜¯å¦å¯è¡Œã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨ Go ä¸­ç¼–å†™æ€§èƒ½æµ‹è¯•ï¼ˆæˆ–åŸºå‡†æµ‹è¯•ï¼‰æ˜¯ä¸€ä»¶è½»è€Œæ˜“ä¸¾çš„äº‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;BenchmarkSpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;handler&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewTextHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stderr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HandlerOptions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;LevelError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;callback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Record&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// Immitate some work to ensure that the spy is not blocking the logger
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;spy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewSpyHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;callback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;configs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;spy&lt;/span&gt;      &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SpyHandler&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;active&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;spy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;spy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;configs&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;desc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;no spy&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;spy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nx&#34;&gt;desc&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;active spy&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;active&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;nx&#34;&gt;desc&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;inactive spy&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;desc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Logger&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;spy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;nx&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;spy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;active&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;active&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;nx&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MultiHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;spy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;nx&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ResetTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;nx&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Debug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;test&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;key&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;key2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;key3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¾—åˆ°çš„ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;BenchmarkSpy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;BenchmarkSpy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;active_spy&lt;/span&gt;            &lt;span class=&#34;mf&#34;&gt;401.4&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ns&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;op&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;BenchmarkSpy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;inactive_spy&lt;/span&gt;          &lt;span class=&#34;mf&#34;&gt;266.0&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ns&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;op&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;BenchmarkSpy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;no_spy&lt;/span&gt;                &lt;span class=&#34;mf&#34;&gt;8.142&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ns&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;op&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å“‡ï¼ç›‘è§†è°ƒè¯•æ—¥å¿—æ¯”æ²¡æœ‰ç›‘è§†æ…¢ 40 å€ã€‚ä½†è¿™å¹¶ä¸å¥‡æ€ªï¼šå¦‚æœæˆ‘ä»¬å°†åŸºæœ¬å¤„ç†ç¨‹åºçš„æ—¥å¿—çº§åˆ«è®¾ç½®ä¸ºâ€œDEBUGâ€ï¼Œæˆ‘ä»¬å°†åœ¨â€œæ— ç›‘è§†â€åœºæ™¯ä¸­çœ‹åˆ°ç±»ä¼¼ï¼ˆç”šè‡³æ›´é«˜ï¼‰çš„æ•°å­—ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œé™„åŠ ä¸€ä¸ªæ´»è·ƒçš„ç›‘è§†å¤§è‡´ç­‰äºå…¨å±€å¯ç”¨è¯¦ç»†æ—¥å¿—ã€‚æ›´æœ‰è¶£çš„æ˜¯ï¼Œå³ä½¿ç›‘è§†å¤„äºéæ´»åŠ¨çŠ¶æ€ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è§‚å¯Ÿåˆ°æ˜æ˜¾çš„å¼€é”€ï¼šæ•°ç™¾çº³ç§’ vs çº¦åå‡ çº³ç§’ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶å½“æœ‰äººè¯»å–è¯Šæ–­æ—¥å¿—æ—¶ï¼Œæœ‰ä¸€äº›å¼€é”€æ˜¯å¯ä»¥çš„ï¼Œä½†æ€»æ˜¯æœ‰å¼€é”€æ˜¯ä¸å¯æ¥å—çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å†³å®šä»”ç»†ç ”ç©¶ä¸€ä¸‹ slog æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥ä¾¿å¼„æ¸…æ¥šè¿™ç§å¼€é”€å¯èƒ½æ¥è‡ªå“ªé‡Œã€‚ä¸‹é¢æ˜¯ç”± &lt;code&gt;Info()&lt;/code&gt; ã€ &lt;code&gt;Debug()&lt;/code&gt; ç­‰å‡½æ•°è°ƒç”¨çš„ &lt;code&gt;slog.Logger.log()&lt;/code&gt; å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;l&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Logger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;level&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;msg&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;args&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;any&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pc&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uintptr&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IgnorePC&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pcs&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uintptr&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// skip [runtime.Callers, this function, this function&amp;#39;s caller]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Callers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pcs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;pc&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pcs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Background&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒåšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯è°ƒç”¨ &lt;code&gt;Enabled()&lt;/code&gt; å‡½æ•°ï¼Œå®ƒä¾èµ–äºä¸å¤„ç†ç¨‹åºç›¸åŒçš„å‡½æ•°ã€‚ç„¶åï¼Œå¦‚æœå¤„ç†ç¨‹åºå“åº”â€œæ˜¯ï¼Œæˆ‘å·²å¯ç”¨â€ï¼Œæˆ‘ä»¬å°†åˆ†å¤šä¸ªé˜¶æ®µç”Ÿæˆæ—¥å¿—æ¡ç›®è®°å½•ã€‚çœ‹å®Œè¿™æ®µä»£ç åï¼Œæˆ‘æ„è¯†åˆ°äº†ä»€ä¹ˆï¼Ÿæˆ‘çŸ¥é“æœ‰ä¸¤ä¸ªå‡½æ•°ï¼ˆç‰¹åˆ«æ˜¯ &lt;code&gt;Enabled()&lt;/code&gt; å’Œ &lt;code&gt;Handle()&lt;/code&gt; ï¼‰çš„å­˜åœ¨æ˜¯æœ‰åŸå› çš„ï¼šæ„å»ºæ—¥å¿—è®°å½•ä¸æ˜¯ä¸€ä¸ªå…è´¹æ“ä½œ;ä»æ€§èƒ½çš„è§’åº¦æ¥çœ‹ï¼Œé¦–å…ˆæ„å»ºè®°å½•ï¼Œç„¶åæ‰æ£€æŸ¥æ—¥å¿—çº§åˆ«ï¼ˆå¦‚æœæˆ‘ä»¬åªæœ‰å‡½æ•° &lt;code&gt;Handle()&lt;/code&gt; ï¼‰å°†ä¸æ˜¯æœ€ä½³çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨å¯èƒ½å·²ç»æ„è¯†åˆ°æˆ‘ä»¬éœ€è¦åº”ç”¨çš„å¿«é€Ÿä¿®å¤ç¨‹åºï¼Œä»¥é¿å…åœ¨éæ´»åŠ¨çŠ¶æ€æœŸé—´è¿›è¡Œé—´è°å¼€é”€ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SpyHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;level&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;slog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;active&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è€Œè¿™ä¸ªå˜åŒ–ä¹‹åçš„åŸºå‡†æµ‹è¯•ç»“æœè¦å¥½å¾—å¤šï¼š&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¼€é”€ç°åœ¨åœ¨è¯¯å·®èŒƒå›´å†…ã€‚&lt;/p&gt;
&lt;p&gt;å½“æˆ‘ä»¬å°†è¿™ä¸ªæ¦‚å¿µéªŒè¯è½¬å˜ä¸ºæ›´å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆæ—¶ï¼Œè®©æˆ‘è·³è¿‡è¿™ä¸€éƒ¨åˆ†ï¼ˆé€šè¿‡ç”¨åŸå­æ›¿æ¢å¸ƒå°”æ´»åŠ¨å­—æ®µä»¥å®ç°å®‰å…¨çš„å¹¶å‘ï¼Œå¹¶åœ¨è¾“å‡ºä¸­å¼•å…¥ç¼“å†²åŒºï¼‰ã€‚ç›¸åï¼Œæˆ‘æƒ³è°ˆè°ˆæˆ‘ä»¬åœ¨æŸ¥çœ‹ slog æºä»£ç æ—¶å‘ç°çš„å¦ä¸€ä¸ªä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å˜¿ï¼Œæ‚¨å¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°å®Œæ•´ç‰ˆçš„ SpyHandlerï¼š&lt;a class=&#34;link&#34; href=&#34;https://github.com/palkan/slog-spy&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;palkan/slog-spy&lt;/a&gt;. ã€‚å®ƒæ˜¯ä» AnyCable+ ä¸­æå–çš„ï¼Œå¹¶ä¸”æ˜¯å¼€æºçš„ï¼Œå°½æƒ…äº«å—å§ï¼&lt;/p&gt;
&lt;h2 id=&#34;ignorepcçš„æ•…äº‹&#34;&gt;IgnorePCçš„æ•…äº‹&lt;/h2&gt;
&lt;p&gt;ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°è¿™ä¸ªå†…éƒ¨é…ç½®å‚æ•°ï¼Œ &lt;code&gt;internal.IgnorePC&lt;/code&gt; ï¼Ÿå®ƒè´Ÿè´£å°†è°ƒç”¨æ–¹æŒ‡é’ˆé™„åŠ åˆ°æ—¥å¿—è®°å½•ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†è¯¥ &lt;code&gt;AddSource: true&lt;/code&gt; é€‰é¡¹ä¸å†…ç½®å¤„ç†ç¨‹åºä¸€èµ·ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¼€å‘ä¸­å‘æ—¥å¿—æ·»åŠ æºä»£ç è¡Œæ˜¯ä¸€ä¸ªä¸é”™çš„åŠŸèƒ½ï¼Œä½†åœ¨ç”Ÿäº§ä¸­ä¸éœ€è¦ã€‚å› æ­¤ï¼Œæˆ‘å†³å®šçœ‹çœ‹ç¦ç”¨æ­¤åŠŸèƒ½æ˜¯å¦ä¼šå¸¦æ¥ä»»ä½•æ€§èƒ½æå‡ã€‚ä¸ºæ­¤ï¼Œæˆ‘è°ƒæ•´äº† slog æºä»£ç ï¼Œå°† &lt;code&gt;IgnorePC&lt;/code&gt; var è®¾ç½®ä¸º trueï¼Œç„¶åå†æ¬¡è¿è¡ŒåŸºå‡†æµ‹è¯•ï¼š&lt;/p&gt;
&lt;p&gt;The effect of removing the caller information from the log record turned out to be quite good. I wondered why there wasnâ€™t an option to disable this feature (or why we donâ€™t automatically disable it when the &lt;code&gt;AddSource&lt;/code&gt; option is set to false). There was an opportunity for a pull request and a contribution here butâ€¦ this fairy tale had no happy ending: this situation is already known to the Go team (and actually, thereâ€™s a &lt;a class=&#34;link&#34; href=&#34;https://github.com/golang/go/blob/44f18706661db8b865719d15a5cfa0515d1a4fca/src/log/slog/internal/benchmarks/benchmarks_test.go#L18&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;benchmark in the slog package&lt;/a&gt;) and &lt;a class=&#34;link&#34; href=&#34;https://github.com/rs/zerolog/issues/571#issuecomment-1697479194&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;they decided not to overoptimize&lt;/a&gt;. Maybe, that will change in the future. Weâ€™ll see.&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€äº›ç¼–è¯‘å™¨çº§åˆ«çš„ hacky æ¥æ›´æ”¹é¡¹ç›®ä¸­çš„å€¼ &lt;code&gt;IgnorePC&lt;/code&gt; ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//go:linkname IgnorePC log/slog/internal.IgnorePC
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;IgnorePC&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœä½ æƒ³è®©æ—¥å¿—è®°å½•æ›´å¿«ï¼Œè¯·å°†è¿™ä¸ªå’’è¯­æ”¾åœ¨ä»£ç ä¸­çš„æŸä¸ªä½ç½®ã€‚ï¼ˆä¸è¿‡ï¼Œå¯¹äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œslog è‚¯å®šå·²ç»è¶³å¤Ÿå¿«äº†â€”â€”æŠ•å…¥å…¶ä¸­çš„å·¥ä½œå’Œæƒ³æ³•éå¸¸å‡ºè‰²ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://evilmartians.com/chronicles/realtime-diagnostic-logging-or-how-to-really-spy-on-your-go-web-apps&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Realtime diagnostic logging, or how to really spy on your Go web apps&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Go ä¸­çš„ 7 ä¸ªå¸¸è§æ¥å£é”™è¯¯</title>
        <link>https://blog.golang.space/p/go-%E4%B8%AD%E7%9A%84-7-%E4%B8%AA%E5%B8%B8%E8%A7%81%E6%8E%A5%E5%8F%A3%E9%94%99%E8%AF%AF/</link>
        <pubDate>Mon, 01 Jul 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/go-%E4%B8%AD%E7%9A%84-7-%E4%B8%AA%E5%B8%B8%E8%A7%81%E6%8E%A5%E5%8F%A3%E9%94%99%E8%AF%AF/</guid>
        <description>&lt;p&gt;Go ä»ç„¶æ˜¯ä¸€é—¨æ–°è¯­è¨€ï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨å®ƒï¼Œå®ƒå¾ˆå¯èƒ½ä¸æ˜¯ä½ çš„ç¬¬ä¸€é—¨ç¼–ç¨‹è¯­è¨€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸åŒçš„è¯­è¨€ï¼Œæ—¢ä¸ºä½ å¸¦æ¥äº†ç»éªŒï¼Œä¹Ÿå¸¦æ¥äº†åè§ã€‚ä½ ç”¨ä»¥å‰çš„ä»»ä½•è¯­è¨€åšçš„äº‹æƒ…ï¼Œåœ¨ Go ä¸­ç”¨ç›¸åŒçš„æ–¹æ³•å¯èƒ½ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚&lt;/p&gt;
&lt;p&gt;å­¦ä¹  Go ä¸ä»…ä»…æ˜¯å­¦ä¹ ä¸€ç§æ–°çš„è¯­æ³•ã€‚è¿™ä¹Ÿæ˜¯å­¦ä¹ ä¸€ç§æ–°çš„æ€ç»´æ–¹å¼æ¥æ€è€ƒä½ çš„ç¨‹åºï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Go is a language for writing Go programs, not Java programs or Haskell programs or any other languageâ€™s programs. You need to think a different way to write good Go programs. But that takes time and effort, more than most will invest. So the usual story is to translate one program from another language into Go and see how it turns out. But translation misses idiom. A first attempt to write, for example, some Java construct in Go will likely fail, while a different Go-specific approach might succeed and illuminate. After 10 years of Java programming and 10 minutes of Go programming, any comparison of the languageâ€™s capabilities is unlikely to generate insight, yet here come the results, because thatâ€™s a modern programmerâ€™s job.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Rob Pike&lt;/strong&gt; &lt;em&gt;â€”&lt;/em&gt; &lt;a class=&#34;link&#34; href=&#34;https://commandcenter.blogspot.com/2011/12/esmereldas-imagination.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Esmereldaâ€™s Imagination&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ­£å¦‚ Rob Pike æ‰€å»ºè®®çš„é‚£æ ·ï¼Œå¦‚æœä½ æƒ³æé«˜å›´æ£‹æŠ€èƒ½ï¼Œéœ€è¦æŠ•å…¥æ—¶é—´å’Œç²¾åŠ›æ¥å­¦ä¹ è¿™é—¨è¯­è¨€çš„ä¹ è¯­ã€‚&lt;/p&gt;
&lt;p&gt;Go åœ¨å‡ ä»¶äº‹ä¸Šä¸å…¶ä»–ä¼ ç»Ÿè¯­è¨€ä¸åŒï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†é‡ç‚¹ä»‹ç»å…¶ä¸­ä¹‹ä¸€ï¼šæ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢åˆ—å‡ºäº†äººä»¬åœ¨ç¼–å†™ Go æ¥å£æ—¶å¸¸çŠ¯çš„é”™è¯¯ã€‚è¿™äº›åœ¨å…¶ä»–è¯­è¨€ä¸­å¯èƒ½ä¸æ˜¯é”™è¯¯ï¼Œä½†åœ¨ Go ä¸­ï¼Œä½ éœ€è¦å¿˜è®°å®ƒä»¬ã€‚æˆ–è€…è‡³å°‘ï¼Œç»™ä¸€ä¸ªæœºä¼šï¼Œæš‚æ—¶ä¸å’Œä»–ä»¬ä¸€èµ·å·¥ä½œï¼Œçœ‹çœ‹è¿™ä¼šæŠŠä½ å¼•å‘ä½•æ–¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½†åœ¨è¿™ä¹‹å‰&#34;&gt;ä½†åœ¨è¿™ä¹‹å‰&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯é˜…è¯»æœ¬æ–‡æ—¶è¦è®°ä½çš„äº‹é¡¹åˆ—è¡¨ã€‚å¦‚æœä½ å·²ç»ç†Ÿæ‚‰å®ƒä»¬ï¼Œè¯·éšæ„è·³è¿‡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ¥å£éš”ç¦»åŸåˆ™ï¼šä¸åº”å¼ºåˆ¶å®¢æˆ·ç«¯å®ç°å®ƒä¸ä½¿ç”¨çš„æ¥å£ï¼Œä¹Ÿä¸åº”å¼ºåˆ¶å®¢æˆ·ç«¯ä¾èµ–äºå®ƒä»¬ä¸ä½¿ç”¨çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤šæ€æ€§ï¼šä¸€æ®µä»£ç æ ¹æ®å®ƒæ”¶åˆ°çš„å…·ä½“æ•°æ®æ”¹å˜å…¶è¡Œä¸ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Liskov æ›¿æ¢åŸåˆ™ï¼šå¦‚æœä½ çš„ä»£ç ä¾èµ–äºæŠ½è±¡ï¼Œé‚£ä¹ˆä¸€ä¸ªå®ç°å¯ä»¥è¢«å¦ä¸€ä¸ªå®ç°æ›¿æ¢ï¼Œè€Œæ— éœ€æ›´æ”¹ä½ çš„ä»£ç ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;æŠ½è±¡çš„ç›®çš„ä¸æ˜¯æ¨¡ç³Šä¸æ¸…ï¼Œè€Œæ˜¯åˆ›é€ ä¸€ä¸ªæ–°çš„è¯­ä¹‰å±‚æ¬¡ï¼Œåœ¨è¿™ä¸ªå±‚æ¬¡ä¸Šå¯ä»¥ç»å¯¹ç²¾ç¡®ã€‚â€” E.W.è¿ªå…‹æ–¯ç‰¹æ‹‰&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥å£æ˜¯ç²¾ç¡®åŒ…å«ç”¨äºç¼–å†™ç¨‹åºçš„æƒ³æ³•çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;p&gt;ä»¥æ­£ç¡®çš„æ–¹å¼ä½¿ç”¨æ¥å£å¯ä»¥å¸¦æ¥ç®€å•æ€§ã€å¯è¯»æ€§å’Œ organic code è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;organic code æ˜¯ä»£ç ä¼šæ ¹æ®ä½ åœ¨æŸä¸ªæ—¶é—´ç‚¹æ‰€éœ€çš„è¡Œä¸ºè€Œå¢é•¿ã€‚å®ƒä¸ä¼šå¼ºè¿«ä½ æå‰è€ƒè™‘ä½ çš„ç±»å‹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå› ä¸ºä½ å¾ˆå¯èƒ½æ— æ³•æ­£ç¡®ç†è§£å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¯´ Go åçˆ±ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ã€‚ä½ æœ‰ä¸€å°ç»„è¡Œä¸ºï¼Œä½ å¯ä»¥ä»ä¸­ç¼–å†™ä»»ä½•ä½ æƒ³è¦çš„ï¼Œè€Œä¸æ˜¯é¢„å®šä¹‰ç”±å…¶ä»–ç±»å‹ç»§æ‰¿çš„ç±»å‹å¹¶å¸Œæœ›å®ƒä»¬é€‚åˆé—®é¢˜åŸŸã€‚&lt;/p&gt;
&lt;p&gt;Rob Pike åœ¨ golang-nuts è®ºå›ä¸Šè§£é‡Šäº†è¿™ç§æ–¹æ³•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1719847716977.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;Go çš„æ¥å£ä¸æ˜¯ Java æˆ– C# æ¥å£çš„å˜ä½“ï¼Œå®ƒä»¬è¿œä¸æ­¢äºæ­¤ã€‚å®ƒä»¬æ˜¯å¤§è§„æ¨¡ç¼–ç¨‹å’Œé€‚åº”æ€§å¼ºçš„æ¼”è¿›è®¾è®¡çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;æ— è®ºå¦‚ä½•ï¼Œç†è®ºå·²ç»è¶³å¤Ÿäº†ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æœ€å¸¸è§çš„é”™è¯¯ï¼š&lt;/p&gt;
&lt;h2 id=&#34;1-ä½ åˆ›å»ºäº†å¤ªå¤šçš„æ¥å£&#34;&gt;1. ä½ åˆ›å»ºäº†å¤ªå¤šçš„æ¥å£&lt;/h2&gt;
&lt;p&gt;æ¥å£è¿‡å¤šçš„æœ¯è¯­ç§°ä¸ºæ¥å£æ±¡æŸ“ &lt;a class=&#34;link&#34; href=&#34;https://www.ardanlabs.com/blog/2016/10/avoid-interface-pollution.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;interface pollution&lt;/a&gt;.ã€‚å½“ä½ åœ¨ç¼–å†™å…·ä½“ç±»å‹ä¹‹å‰å¼€å§‹æŠ½è±¡æ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚ç”±äºä½ æ— æ³•é¢„è§ä½ éœ€è¦ä»€ä¹ˆæŠ½è±¡ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å†™å‡ºå¤ªå¤šçš„æ¥å£ï¼Œè¿™äº›æ¥å£åœ¨ä»¥åè¦ä¹ˆæ˜¯é”™è¯¯çš„ï¼Œè¦ä¹ˆæ˜¯æ— ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;Rob Pike æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æŒ‡å—ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…ç•Œé¢æ±¡æŸ“ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Donâ€™t design with interfaces, discover them.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Rob Pike&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Rob åœ¨è¿™é‡ŒæŒ‡å‡ºçš„æ˜¯ï¼Œä½ ä¸éœ€è¦æå‰è€ƒè™‘ä½ éœ€è¦ä»€ä¹ˆæŠ½è±¡ã€‚ä½ å¯ä»¥ä½¿ç”¨å…·ä½“ç»“æ„å¼€å§‹è®¾è®¡ï¼Œå¹¶ä»…åœ¨è®¾è®¡éœ€è¦æ—¶åˆ›å»ºæ¥å£ã€‚é€šè¿‡è¿™æ ·åšï¼Œä½ çš„ä»£ç ä¼šé¡ºå…¶è‡ªç„¶çš„å¢é•¿åˆ°é¢„æœŸçš„è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»ç„¶çœ‹åˆ°äººä»¬æå‰åˆ›å»ºæ¥å£ï¼Œå› ä¸ºä»–ä»¬è®¤ä¸ºä»–ä»¬å°†æ¥å¯èƒ½éœ€è¦å¤šä¸ªå®ç°ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å¯¹ä»–ä»¬è¯´ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1719848026883.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸€ç§å¥½çš„æ–¹å¼æ‡’æƒ°ã€‚åˆ›å»ºæ¥å£çš„æœ€ä½³æ—¶æœºæ˜¯ä½ çœŸæ­£éœ€è¦å®ƒçš„æ—¶å€™ï¼Œè€Œä¸æ˜¯ä½ é¢„æµ‹éœ€è¦å®ƒçš„æ—¶å€™ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªé€šè¿‡æå‰æ€è€ƒåˆ›å»ºæ¥å£çš„ç¤ºä¾‹ï¼Œä»¥åŠå®ƒå¯¼è‡´äº†ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;æ— ç”¨çš„æ¥å£å¾€å¾€åªæœ‰ä¸€ä¸ªå®ç°ã€‚å®ƒä»¬åªæ˜¯å¢åŠ äº†ä¸€ä¸ªé¢å¤–çš„é—´æ¥çº§åˆ«ï¼Œè¿«ä½¿ç¨‹åºå‘˜åœ¨çœŸæ­£æƒ³è¦å®ç°æ—¶æ€»æ˜¯é€šè¿‡å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;æ¥å£æ˜¯æœ‰ä»£ä»·çš„ï¼šè¿™æ˜¯æ‚¨åœ¨æ¨ç†ä»£ç æ—¶éœ€è¦è®°ä½çš„ä¸€ä¸ªæ–°æ¦‚å¿µã€‚æ­£å¦‚ Djikstra æ‰€è¯´ï¼Œç†æƒ³çš„ç•Œé¢å¿…é¡»æ˜¯â€œa new semantic level in which one can be absolutely precise.â€ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ çš„ä»£ç éœ€è¦ &lt;code&gt;Box&lt;/code&gt; çš„æ¦‚å¿µï¼Œä»…ç”± Box å®ç°çš„åä¸º Container çš„é¢å¤–æ¥å£æ²¡æœ‰å¸¦æ¥ä»»ä½•å¥½å¤„ï¼Œé™¤äº†æ··æ·†ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œåœ¨åˆ›å»ºæ¥å£ä¹‹å‰ï¼Œå…ˆé—®é—®è‡ªå·±ï¼šæ¥å£æœ‰å¤šä¸ªå®ç°å—ï¼Ÿæˆ‘å¼ºè°ƒä½¿ç”¨äº†â€˜æœ‰â€™ï¼Œå› ä¸ºâ€˜å°†ä¼šæœ‰â€™å‡è®¾äº†ä½ èƒ½é¢„æµ‹æœªæ¥ï¼Œè€Œä½ ä¸èƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ä½ æœ‰å¤ªå¤šçš„æ–¹æ³•&#34;&gt;2. ä½ æœ‰å¤ªå¤šçš„æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;åœ¨ PHP é¡¹ç›®ä¸­ï¼Œçœ‹åˆ° 10 ç§æ–¹æ³•æ¥å£æ˜¯å¾ˆå¸¸è§çš„ã€‚åœ¨ Go ä¸­ï¼Œæ¥å£å¾ˆå°ï¼Œæ ‡å‡†åº“ä¸­æ‰€æœ‰æ¥å£ä¸Šçš„å¹³å‡æ–¹æ³•æ•°ä¸º 2ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The bigger the interface the weaker the abstraction&lt;/strong&gt;ï¼Œè¿™æ˜¯ Go è°šè¯­ä¹‹ä¸€ã€‚æ­£å¦‚ Rob Pike æ‰€è¯´ï¼Œè¿™æ˜¯æ¥å£æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œè¿™æ„å‘³ç€æ¥å£è¶Šå°ï¼Œå®ƒå°±è¶Šæœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ¥å£å¯ä»¥æ‹¥æœ‰çš„å®ç°è¶Šå¤šï¼Œå®ƒçš„é€šç”¨æ€§å°±è¶Šå¼ºã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªåŒ…å«å¤§é‡æ–¹æ³•çš„æ¥å£ï¼Œåˆ™å¾ˆéš¾æœ‰å®ƒçš„å¤šä¸ªå®ç°ã€‚æ‚¨æ‹¥æœ‰çš„æ–¹æ³•è¶Šå¤šï¼Œæ¥å£å°±è¶Šå…·ä½“ã€‚å®ƒè¶Šå…·ä½“ï¼Œä¸åŒç±»å‹æ˜¾ç¤ºç›¸åŒè¡Œä¸ºçš„å¯èƒ½æ€§å°±è¶Šä½ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ç”¨æ¥å£çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯ io.Reader å’Œ io.Writerï¼Œå®ƒä»¬å…·æœ‰æ•°ç™¾ä¸ªå®ç°ã€‚æˆ–è€… error æ¥å£ï¼Œå®ƒéå¸¸å¼ºå¤§ï¼Œå¯ä»¥åœ¨ Go ä¸­å®ç°æ•´ä¸ªé”™è¯¯å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;è¯·è®°ä½ï¼Œä½ å¯ä»¥ç¨åç”¨å…¶ä»–æ¥å£ç»„åˆæ¥å£ã€‚ä¾‹å¦‚ï¼Œ &lt;code&gt;ReadWriteCloser&lt;/code&gt; ä¸‹é¢æ˜¯ç”± 3 ä¸ªè¾ƒå°çš„æ¥å£ç»„æˆçš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ReadWriteCloser&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Writer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Closer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;3-ä½ ä¸ç¼–å†™è¡Œä¸ºé©±åŠ¨çš„æ¥å£&#34;&gt;3. ä½ ä¸ç¼–å†™è¡Œä¸ºé©±åŠ¨çš„æ¥å£&lt;/h2&gt;
&lt;p&gt;åœ¨ä¼ ç»Ÿè¯­è¨€ä¸­ï¼Œåè¯æ¥å£å¦‚ Userã€Requestã€ç­‰ç­‰éƒ½æ˜¯å¾ˆå¸¸è§çš„ã€‚åœ¨ Go ä¸­ï¼Œå¤§å¤šæ•°æ¥å£éƒ½æœ‰ä¸€ä¸ª &lt;code&gt;er&lt;/code&gt; åç¼€ï¼š &lt;code&gt;Reader&lt;/code&gt;  &lt;code&gt;Writer&lt;/code&gt; &lt;code&gt;Closer&lt;/code&gt; ç­‰ã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨ Go ä¸­ï¼Œæ¥å£å…¬å¼€äº†è¡Œä¸ºï¼Œå®ƒä»¬çš„åç§°æŒ‡å‘äº†è¯¥è¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¦‚æˆ‘ä¹‹å‰åœ¨ IO åŸºç¡€ä¸­æ‰€å†™çš„ï¼Œåœ¨ Go ä¸­å®šä¹‰æ¥å£æ—¶ï¼Œä½ å®šä¹‰çš„ä¸æ˜¯æŸç‰©æ˜¯ä»€ä¹ˆï¼Œè€Œæ˜¯å®ƒæä¾›äº†ä»€ä¹ˆâ€”â€”è¡Œä¸ºï¼Œè€Œä¸æ˜¯äº‹ç‰©ï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Go ä¸­æ²¡æœ‰ &lt;code&gt;File&lt;/code&gt; æ¥å£ï¼Œè€Œæ˜¯  &lt;code&gt;Reader&lt;/code&gt; å’Œ  &lt;code&gt;Writer&lt;/code&gt; ï¼š è¿™äº›æ˜¯è¡Œä¸ºï¼Œå¹¶ä¸”æ˜¯ &lt;code&gt;File&lt;/code&gt; å®ç° &lt;code&gt;Reader&lt;/code&gt; å’Œ &lt;code&gt;Writer&lt;/code&gt; çš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®˜æ–¹æŒ‡å—ã€ŠEffective Goã€‹ä¸­ä¹Ÿæåˆ°äº†åŒæ ·çš„æƒ³æ³•ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Go ä¸­çš„æ¥å£æä¾›äº†ä¸€ç§æŒ‡å®šå¯¹è±¡è¡Œä¸ºçš„æ–¹æ³•ï¼šå¦‚æœæŸäº›ä¸œè¥¿å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ç¼–å†™æ¥å£æ—¶ï¼Œè¯·å°è¯•è€ƒè™‘æ“ä½œæˆ–è¡Œä¸ºã€‚å¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ªåä¸ºçš„ &lt;code&gt;Thing&lt;/code&gt; æ¥å£ï¼Œé—®é—®è‡ªå·±ä¸ºä»€ä¹ˆ &lt;code&gt;Thing&lt;/code&gt; ä¸æ˜¯ä¸€ä¸ªç»“æ„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-ä½ åœ¨ç”Ÿäº§è€…ç«¯ç¼–å†™æ¥å£&#34;&gt;4. ä½ åœ¨ç”Ÿäº§è€…ç«¯ç¼–å†™æ¥å£&lt;/h2&gt;
&lt;p&gt;æˆ‘ç»å¸¸åœ¨ä»£ç å®¡æŸ¥ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ï¼šäººä»¬åœ¨ç¼–å†™å…·ä½“å®ç°çš„åŒä¸€åŒ…ä¸­å®šä¹‰æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œä¹Ÿè®¸å®¢æˆ·ç«¯ä¸æƒ³ä½¿ç”¨ç”Ÿäº§è€…ç•Œé¢ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€‚è¯·è®°ä½ï¼Œä»æ¥å£éš”ç¦»åŸåˆ™ä¸­ï¼Œâ€œä¸åº”å¼ºè¿«å®¢æˆ·ç«¯å®ç°å®ƒä¸ä½¿ç”¨çš„æ–¹æ³•â€ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ====== producer side
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// This interface is not needed
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;UsersRepository&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;GetAllUsers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;GetUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;UserRepository&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;UserRepository&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetAllUsers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;      &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;UserRepository&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ====== client side
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Client only needs GetUser and
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// can create this interface implicitly implemented
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// by concrete UserRepository on his side 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;UserGetter&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;GetUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœå®¢æˆ·æƒ³ä½¿ç”¨ producer çš„æ‰€æœ‰æ–¹æ³•ï¼Œä»–å¯ä»¥ä½¿ç”¨å…·ä½“ç»“æ„ã€‚è¯¥è¡Œä¸ºå·²é€šè¿‡ struct æ–¹æ³•æä¾›ã€‚&lt;/p&gt;
&lt;p&gt;å³ä½¿å®¢æˆ·ç«¯æƒ³è¦è§£è€¦å…¶ä»£ç å¹¶ä½¿ç”¨å¤šä¸ªå®ç°ï¼Œä»–ä»ç„¶å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«ä»–è¿™è¾¹æ‰€æœ‰æ–¹æ³•çš„æ¥å£ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1719849001610.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;è¿™äº›ä¸œè¥¿æ˜¯é€šè¿‡ Go ä¸­çš„æ¥å£éšå¼æ»¡è¶³è¿™ä¸€äº‹å®æ¥å®ç°çš„ã€‚å®¢æˆ·ç«¯ä»£ç ä¸å†éœ€è¦å¯¼å…¥æŸäº›æ¥å£å¹¶å†™å…¥ &lt;code&gt;implements&lt;/code&gt; ï¼Œå› ä¸º Go ä¸­æ²¡æœ‰è¿™æ ·çš„å…³é”®å­—ã€‚å¦‚æœ &lt;code&gt;Implementation&lt;/code&gt; å…·æœ‰ä¸ &lt;code&gt;Interface&lt;/code&gt; ç›¸åŒçš„æ–¹æ³•ï¼Œåˆ™ &lt;code&gt;Implementation&lt;/code&gt; å·²æ»¡è¶³è¯¥æ¥å£ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;5-ä½ çš„æ–¹æ³•è¿”å›æ¥å£&#34;&gt;5. ä½ çš„æ–¹æ³•è¿”å›æ¥å£&lt;/h2&gt;
&lt;p&gt;å¦‚æœæ–¹æ³•è¿”å›æ¥å£è€Œä¸æ˜¯å…·ä½“ç»“æ„ï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•çš„æ‰€æœ‰å®¢æˆ·ç«¯éƒ½å°†å¼ºåˆ¶ä½¿ç”¨ç›¸åŒçš„æŠ½è±¡ã€‚ä½ éœ€è¦è®©å®¢æˆ·å†³å®šä»–ä»¬éœ€è¦ä»€ä¹ˆæŠ½è±¡ï¼Œå› ä¸ºä»£ç æ˜¯ä»–ä»¬çš„åº­é™¢ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ æƒ³ä½¿ç”¨ç»“æ„ä¸­çš„æŸäº›å†…å®¹ä½†ä¸èƒ½ä½¿ç”¨æ—¶ï¼Œè¿™å¾ˆçƒ¦äººï¼Œå› ä¸ºæ¥å£æ²¡æœ‰å…¬å¼€å®ƒã€‚è¿™ç§é™åˆ¶å¯èƒ½æœ‰åŸå› ï¼Œä½†å¹¶éæ€»æ˜¯å¦‚æ­¤ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªäººä¸ºçš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;math&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Shape&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;Area&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;Perimeter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Circle&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Radius&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Circle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Area&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pi&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Radius&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Radius&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Circle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Perimeter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pi&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Radius&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// NewCircle returns an interface instead of struct
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewCircle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;radius&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Shape&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Circle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Radius&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;radius&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;circle&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewCircle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// we lose access to circle.Radius
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…å¤±å»äº†å¯¹ &lt;code&gt;circle.Radius&lt;/code&gt; çš„è®¿é—®æƒé™ï¼Œè€Œä¸”æ¯æ¬¡æˆ‘ä»¬æƒ³è¦è®¿é—®å®ƒæ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ç”¨ç±»å‹æ–­è¨€å¡«å……æˆ‘ä»¬çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;shape&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewCircle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;circle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Circle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;circle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Radius&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¦éµå¾ªæ³¢æ–¯ç‰¹å°”å®šå¾‹ï¼Œâ€œ&lt;strong&gt;ä½ æ¥å—ä»€ä¹ˆæ˜¯è‡ªç”±çš„ï¼Œè€Œä½ å‘é€ä»€ä¹ˆæ˜¯ä¿å®ˆçš„&lt;/strong&gt;â€ï¼Œä»ä½ çš„æ–¹æ³•ä¸­è¿”å›å…·ä½“çš„ç»“æ„ï¼Œå¹¶é€‰æ‹©ç”¨æ¥å£æ¥æ”¶ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Dave Cheney çš„ Practical Go ä¸­ï¼Œæœ‰ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç«   &lt;a class=&#34;link&#34; href=&#34;https://dave.cheney.net/practical-go/presentations/qcon-china.html#_let_functions_define_the_behaviour_they_requires&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;a nice write-up&lt;/a&gt;  è§£é‡Šäº†ä¸ºä»€ä¹ˆä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Save writes the contents of doc to the file f.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;File&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;doc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡æ¥å—æ¥å£è¿›è¡Œæ”¹è¿›ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// Save writes the contents of doc to the supplied
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// Writer.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;func Save(w io.Writer, doc *Document) error
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;6-ä½ åˆ›å»ºæ¥å£çº¯ç²¹æ˜¯ä¸ºäº†æµ‹è¯•&#34;&gt;6. ä½ åˆ›å»ºæ¥å£çº¯ç²¹æ˜¯ä¸ºäº†æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯æ¥å£æ±¡æŸ“çš„å¦ä¸€ä¸ªåŸå› ï¼šåˆ›å»ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªå®ç°çš„æ¥å£ï¼Œåªæ˜¯å› ä¸ºä½ æƒ³æ¨¡æ‹Ÿè¿™ä¸ªå®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœé€šè¿‡åˆ›å»ºè®¸å¤šæ¨¡æ‹Ÿæ¥æ»¥ç”¨æ¥å£ï¼Œåˆ™æœ€ç»ˆä¼šæµ‹è¯•ä»æœªåœ¨ç”Ÿäº§ä¸­ä½¿ç”¨è¿‡çš„æ¨¡æ‹Ÿï¼Œè€Œä¸æ˜¯åº”ç”¨ç¨‹åºçš„å®é™…é€»è¾‘ã€‚åœ¨ä½ çš„å®é™…ä»£ç ä¸­ï¼Œä½ ç°åœ¨æœ‰ 2 ä¸ªæ¦‚å¿µï¼ˆæ­£å¦‚ Djikstra æ‰€è¯´ï¼Œè¯­ä¹‰çº§åˆ«ï¼‰å¯ä»¥åœ¨å…¶ä¸­æ‰§è¡Œã€‚è¿™åªæ˜¯ä¸ºäº†ä½ æƒ³è¦æµ‹è¯•çš„ä¸œè¥¿ã€‚ä½ æƒ³åœ¨æ¯æ¬¡åˆ›å»ºæ–°æµ‹è¯•æ—¶å°†è¯­ä¹‰çº§åˆ«æé«˜ä¸€å€å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä½ å§‹ç»ˆå¯ä»¥ä½¿ç”¨ testcontainers è€Œä¸æ˜¯æ¨¡æ‹Ÿä½ çš„æ•°æ®åº“ã€‚æˆ–è€…ï¼Œå¦‚æœ &lt;code&gt;testcontainers&lt;/code&gt; å°šä¸æ”¯æŒï¼Œåˆ™åªéœ€æ‹¥æœ‰è‡ªå·±çš„å®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;æˆ–è€…ï¼Œä¹Ÿè®¸ä½ éœ€è¦ mock ä¸€äº›ä¸œè¥¿ï¼Œä½†ä¸æ˜¯æ•´ä¸ªäº‹æƒ…ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªåŒ…å« 10 ç§æ–¹æ³•çš„ç»“æ„ï¼Œä¹Ÿè®¸ä½ ä¸éœ€è¦æ¨¡æ‹Ÿæ•´ä¸ªç»“æ„ã€‚ä¹Ÿè®¸ä½ åªèƒ½æ¨¡æ‹Ÿä¸€å°éƒ¨åˆ†ï¼Œä½ å¯ä»¥åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ä½ çš„å…·ä½“ç»“æ„ã€‚æ¨¡æ‹Ÿæ•´ä¸ªç»“æ„ä½“æ˜¯ä¸€ç§éå¸¸æ‡’æƒ°çš„æµ‹è¯•è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ç¼–å†™ä¸€ä¸ª APIï¼Œä½ ä¸éœ€è¦å‘ä½ çš„å®¢æˆ·ç«¯æä¾›ä¸€ä¸ªæ¥å£ï¼Œè¿™æ ·ä»–ä»¬å°±å¯ä»¥ç”¨å®ƒæ¥æ¨¡æ‹Ÿã€‚å¦‚æœä»–ä»¬æƒ³ç¼–å†™æ¨¡æ‹Ÿï¼Œä»–ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šè‡ªå·±çš„æ¥å£æ¥è‡ªå·±å®Œæˆï¼ˆå‚è§ç¬¬ 4 ç‚¹ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;7-æ‚¨ä¸éªŒè¯æ¥å£åˆè§„æ€§&#34;&gt;7. æ‚¨ä¸éªŒè¯æ¥å£åˆè§„æ€§&lt;/h2&gt;
&lt;p&gt;å‡è®¾ä½ æœ‰ä¸€ä¸ªåŒ…ï¼Œè¯¥åŒ…å¯¼å‡ºäº†åä¸º &lt;code&gt;User&lt;/code&gt; çš„ç±»å‹ï¼Œå¹¶ä¸”nä½ å®ç°äº†è¯¥ &lt;code&gt;Stringer&lt;/code&gt; æ¥å£ï¼Œå› ä¸ºå‡ºäºæŸç§åŸå› ï¼Œå½“ä½ æ‰“å°å®ƒæ—¶ï¼Œä½ ä¸å¸Œæœ›æ˜¾ç¤ºç”µå­é‚®ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;User&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Email&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®¢æˆ·ç«¯å…·æœ‰ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;pkg/users&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       &lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;John Doe&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       &lt;span class=&#34;nx&#34;&gt;Email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;john.doe@gmail.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™å°†æ­£ç¡®è¾“å‡ºï¼š &lt;code&gt;John Doe&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œå‡è®¾æ‚¨é‡æ„ï¼Œå¹¶ä¸”é”™è¯¯åœ°åˆ é™¤æˆ–æ³¨é‡Šäº† &lt;code&gt;String()&lt;/code&gt; å®ç°ï¼Œå¹¶ä¸”æ‚¨çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;User&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Email&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»£ç ä»å°†ç¼–è¯‘å¹¶è¿è¡Œï¼Œä½†è¾“å‡ºç°åœ¨å°†ä¸º &lt;code&gt;{John Doe john.doe@gmail.com}&lt;/code&gt; â€œæ²¡æœ‰åé¦ˆå¼ºåˆ¶æ‰§è¡Œä¹‹å‰çš„æ„å›¾â€ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ‚¨æœ‰æ¥å— User çš„æ–¹æ³•æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¸ºæ‚¨æä¾›å¸®åŠ©ï¼Œä½†åœ¨ä¸Šè¿°æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¸ä¼šã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¼ºåˆ¶æ‰§è¡ŒæŸä¸ªç±»å‹å®ç°æ¥å£çš„äº‹å®ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;User&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Email&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stringer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// User implements the fmt.Stringer
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬åˆ é™¤è¯¥ &lt;code&gt;String()&lt;/code&gt; æ–¹æ³•ï¼Œæˆ‘ä»¬å°†åœ¨æ„å»ºæ—¶å¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cannot use User{} (value of type User) as fmt.Stringer value in variable declaration: User does not implement fmt.Stringer (missing method String)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬åœ¨é‚£ä¸€è¡Œä¸­æ‰€åšçš„æ˜¯ï¼Œå°è¯•å°†ä¸€ä¸ªç©º &lt;code&gt;User{}&lt;/code&gt; åˆ†é…ç»™ç±»å‹ &lt;code&gt;fmt.Stringer&lt;/code&gt; ã€‚ç”±äºåœæ­¢å®ç° &lt;code&gt;fmt.Stringer&lt;/code&gt; ï¼Œ &lt;code&gt;User{}&lt;/code&gt; æ”¶åˆ°äº†æŠ•è¯‰ã€‚æˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;_&lt;/code&gt; ä½œä¸ºå˜é‡åç§°ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰çœŸæ­£ä½¿ç”¨å®ƒæ‰€ä»¥ä¸ä¼šæ‰§è¡Œä»»ä½•åˆ†é…ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬æœ‰ &lt;code&gt;User&lt;/code&gt; å®ç°æ¥å£ã€‚ &lt;code&gt;User&lt;/code&gt; å¹¶ä¸”æ˜¯ &lt;code&gt;*User&lt;/code&gt; ä¸åŒçš„ç±»å‹ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³å®ç°å®ƒï¼Œ &lt;code&gt;*User&lt;/code&gt; ä½ å¯ä»¥åšè¿™æ ·çš„äº‹æƒ…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stringer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// *User implements the fmt.Stringer
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ‘ä¹Ÿå–œæ¬¢åœ¨è¿™æ ·åšæ—¶ï¼Œæˆ‘çš„Goland IDEä¼šå‘æˆ‘æ˜¾ç¤ºä¸€ä¸ªâ€œå®ç°ç¼ºå°‘çš„æ–¹æ³•â€é€‰é¡¹ï¼š&lt;/p&gt;
&lt;p&gt;å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·æŸ¥çœ‹ &lt;a class=&#34;link&#34; href=&#34;https://medium.com/@matryer/golang-tip-compile-time-checks-to-ensure-your-type-satisfies-an-interface-c167afed3aae&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;article from Mat Ryer&lt;/a&gt; æˆ–  &lt;a class=&#34;link&#34; href=&#34;https://github.com/uber-go/guide/blob/master/style.md#verify-interface-compliance&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Uber Go Style&lt;/a&gt; çš„æŒ‡å—ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶è¿™æ˜¯ä¸€ä¸ªå¾ˆé…·çš„æŠ€å·§ï¼Œä½†ä½ ä¸éœ€è¦å¯¹æ¯ä¸ªå®ç°æ¥å£çš„ç±»å‹éƒ½è¿™æ ·åšï¼Œå¦‚æœæˆ‘ä»¬æœ‰éœ€è¦æ¥å£çš„å‡½æ•°ï¼Œå¦‚æœä½ å°è¯•ä½¿ç”¨ä¸å®ç°å®ƒä»¬çš„ç±»å‹ï¼Œç¼–è¯‘å™¨å·²ç»æŠ±æ€¨äº†ã€‚æˆ‘è‡ªå·±ä¸å¾—ä¸æ€è€ƒä¸€æ®µæ—¶é—´æ‰èƒ½ä¸ºæœ¬æ–‡æƒ³å‡ºä¸€ä¸ªä¾‹å­ï¼Œæ‰€ä»¥çœŸçš„ï¼Œè¿™æ˜¯ä¸€ä¸ªç½•è§çš„æ¡ˆä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¦‚æˆ‘ä»¬åœ¨ Effective Go ä¸­è¢«è­¦å‘Šçš„é‚£æ ·ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;The appearance of the blank identifier in this construct indicates that the declaration exists only for the type checking, not to create a variable. Donâ€™t do this for every type that satisfies an interface, though. By convention, such declarations are only used when there are no static conversions already present in the code, which is a rare event.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å°±è¿™äº›äº†!&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘äº&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@andreiboar/7-common-interface-mistakes-in-go-1d3f8e58be60&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt; &amp;lt;7 Common Interface Mistakes in Go&amp;gt;&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Golang Context å®Œæ•´æŒ‡å—</title>
        <link>https://blog.golang.space/p/golang-context-%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/</link>
        <pubDate>Sat, 02 Dec 2023 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/golang-context-%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/</guid>
        <description>&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-context&#34;&gt;ä»€ä¹ˆæ˜¯ Context?&lt;/h2&gt;
&lt;p&gt;context æ˜¯ Go æ ‡å‡†åº“ä¸­çš„&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬ç¯‡æ–‡ç« ç¿»è¯‘äº &lt;a class=&#34;link&#34; href=&#34;https://medium.com/@jamal.kaksouri/the-complete-guide-to-context-in-golang-efficient-concurrency-management-43d722f6eaea&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;The Complete Guide to Context in Golang: Efficient Concurrency Management&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ChatGPT å¦‚ä½•å†™å¥½æç¤ºè¯?</title>
        <link>https://blog.golang.space/p/chatgpt-%E5%A6%82%E4%BD%95%E5%86%99%E5%A5%BD%E6%8F%90%E7%A4%BA%E8%AF%8D/</link>
        <pubDate>Tue, 09 May 2023 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/chatgpt-%E5%A6%82%E4%BD%95%E5%86%99%E5%A5%BD%E6%8F%90%E7%A4%BA%E8%AF%8D/</guid>
        <description>&lt;h2 id=&#34;chatgpt&#34;&gt;ChatGPT&lt;/h2&gt;
&lt;h3 id=&#34;ç¼–å†™æ˜ç¡®å’Œå…·ä½“çš„æŒ‡ä»¤&#34;&gt;ç¼–å†™æ˜ç¡®å’Œå…·ä½“çš„æŒ‡ä»¤ã€‚&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨åˆ†éš”ç¬¦æ¸…æ¥šåœ°æŒ‡ç¤ºè¾“å…¥çš„ä¸åŒéƒ¨åˆ†ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿æ¨¡å‹æ¸…æ¥šçš„çŸ¥é“ï¼Œè¿™æ˜¯ç‹¬ç«‹çš„éƒ¨åˆ†ã€‚å°±åƒæ˜¯äººç‰©è¯´è¯çš„å†…å®¹æ”¾åœ¨åŒå¼•å·å†…ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å¯ä»¥é¿å…é€ æˆæ­§ä¹‰ï¼Œä¾‹å¦‚æŸäº›æ–‡å­—å¹¶ä¸æ˜¯å¯¹ gpt çš„æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸‰å¼•å·&lt;/li&gt;
&lt;li&gt;ä¸‰ä¸ªåå¼•å·&lt;/li&gt;
&lt;li&gt;ä¸‰ä¸ªç ´æŠ˜å·&lt;/li&gt;
&lt;li&gt;å°–æ‹¬å·&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;è¦æ±‚ç»“æ„åŒ–è¾“å‡º&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥è¯·æ±‚ HTML æˆ– JSON è¾“å‡ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Provide them in JSON format with the following keys: title,author&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ†æ­¥éª¤æ‰§è¡Œä»»åŠ¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;**ç»™å‡ºæ˜ç¡®è€Œå…·ä½“çš„æŒ‡ç¤ºï¼Œå‡ºç¤ºç»“æœæ¨¡æ¿&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ä½ çš„ä»»åŠ¡æ˜¯ä»¥ä¸€è‡´çš„é£æ ¼å›ç­”é—®é¢˜ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;child&amp;gt;:....
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;grandparent&amp;gt;:....
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;ç»™æ¨¡å‹æ—¶é—´å»æ€è€ƒå› çŠ¯äº†æ¨ç†é”™è¯¯åœ¨æ¨¡å‹æä¾›æœ€ç»ˆç­”æ¡ˆå‰è¯·æ±‚ä¸€ç³»åˆ—ç›¸å…³çš„æ¨ç†&#34;&gt;ç»™æ¨¡å‹æ—¶é—´å»æ€è€ƒï¼Œå› çŠ¯äº†æ¨ç†é”™è¯¯ï¼Œåœ¨æ¨¡å‹æä¾›æœ€ç»ˆç­”æ¡ˆå‰è¯·æ±‚ä¸€ç³»åˆ—ç›¸å…³çš„æ¨ç†&lt;/h3&gt;
&lt;p&gt;å¦‚æœç»™æ¨¡å‹ä¸€ä¸ªä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡å¤ªå¤æ‚äº†ï¼Œå®ƒä¸èƒ½åœ¨çŸ­æ—¶é—´å†…æˆ–ç”¨å°‘é‡çš„å•è¯å®Œæˆï¼Œå®ƒå¯èƒ½ä¼šåšå‡ºä¸€ä¸ªå¯èƒ½ä¸æ­£ç¡®çš„çŒœæµ‹ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå¯ä»¥æŒ‡ç¤ºæ¨¡å‹æ›´é•¿æ—¶é—´åœ°æ€è€ƒé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å°±åƒå’Œä¼™ä¼´äº¤æµé‚£æ ·ï¼Œä¹Ÿå¯ä»¥ç»™å‡ºè‡ªå·±æ¨ç†çš„è§£å†³æ–¹æ¡ˆä¾›æ¨¡å‹å‚è€ƒï¼Œè¿™æ ·æ¨¡å‹ä¼šç»™å‡ºæ›´æ¥è¿‘æ­£ç¡®çš„ç­”å¤ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ä½ çš„è®¤ä¸ºæ˜¯ç¡®å®šå­¦ç”Ÿçš„è§£å†³æ–¹æ¡ˆæ˜¯å¦æ­£ç¡®ã€‚è¦è§£å†³é—®é¢˜ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œ:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- é¦–å…ˆåˆ¶å®šå‡ºè‡ªå·±çš„è§£å†³æ€è·¯ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- ç„¶åå°†è‡ªå·±çš„è§£é¢˜æ€è·¯ä¸å­¦ç”Ÿè§£é¢˜æ€è·¯è¿›è¡Œå¯¹æ¯”ï¼Œè¯„ä¼°å­¦ç”Ÿè§£é¢˜æ€è·¯æ­£ç¡®ä¸å¦ã€‚åœ¨ä½ è‡ªå·±åšé¢˜ä¹‹å‰ï¼Œä¸è¦å†³å®šå­¦ç”Ÿçš„ç­”æ¡ˆæ˜¯å¦æ­£ç¡®ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ä½¿ç”¨ä»¥ä¸‹æ ¼å¼:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;é—®é¢˜: &amp;lt;é—®é¢˜&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;å­¦ç”Ÿ: &amp;lt;å­¦ç”Ÿçš„è§£é¢˜æ€è·¯&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;å‚è€ƒç­”æ¡ˆ: &amp;lt;æ­£ç¡®çš„è§£é¢˜æ€è·¯åŠæ­¥éª¤&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ç»“æœ: &amp;lt;å¦‚æœå­¦ç”Ÿçš„è§£é¢˜æ€è·¯æ˜¯æ­£ç¡®çš„ï¼Œæ­¤å¤„å†™ YESï¼Œå¦åˆ™å†™ NO&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;é—®é¢˜:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sb&#34;&gt;```&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;13-8&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;?
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sb&#34;&gt;```&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;å­¦ç”Ÿçš„è§£é¢˜æ€è·¯:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sb&#34;&gt;```&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;13-&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;3+5&lt;span class=&#34;o&#34;&gt;)=&lt;/span&gt;13-3-5&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;10-5&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;5ï¼Œç»“æœä¸º &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sb&#34;&gt;```&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;æ¨¡å‹çš„é™åˆ¶&#34;&gt;æ¨¡å‹çš„é™åˆ¶&lt;/h3&gt;
&lt;p&gt;å°½ç®¡è¯­è¨€æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ¥è§¦äº†å¤§é‡çŸ¥è¯†ï¼Œä½†å®ƒå¹¶æ²¡æœ‰å®Œç¾çš„è®°ä½å®ƒæ‰€çœ‹åˆ°çš„ä¿¡æ¯ã€‚æ¨¡å‹å¯¹äºæ™¦æ¶©éš¾æ‡‚çš„é—®é¢˜é€šå¸¸ä¼šç»™å‡ºæé€ çš„æƒ³æ³•ï¼Œé€šå¸¸æˆä¸ºæ¨¡å‹çš„å¹»è§‰ã€‚&lt;/p&gt;
&lt;p&gt;å‡å°‘å¹»è§‰çš„ç­–ç•¥æ˜¯ä½¿ç”¨ä»¥ä¸Šå»ºè®®çš„æ–¹æ³•ï¼Œå¦ä¸€ä¸ªç­–ç•¥æ˜¯è¦æ±‚æ¨¡å‹é¦–å…ˆä»æ–‡æœ¬ä¸­æ‰¾åˆ°ç›¸å…³çš„å†…å®¹ã€‚ç„¶åè¦æ±‚å®ƒä½¿ç”¨è¿™äº›å¼•ç”¨å†…å®¹æ¥å›ç­”é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å°†ç­”æ¡ˆè¿½æº¯åˆ°æºæ–‡æ¡£çš„æ–¹æ³•é€šå¸¸å¯¹å‡å°‘æ¨¡å‹å¹»è§‰å¾ˆæœ‰å¸®åŠ©ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;%e6%9a%82%e6%97%a0&#34; &gt;ChatGPT æç¤ºå·¥ç¨‹å¸ˆ&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>é€‚é…å™¨æ¨¡å¼</title>
        <link>https://blog.golang.space/p/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/</link>
        <pubDate>Wed, 03 May 2023 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/</guid>
        <description>&lt;h2 id=&#34;é€‚é…å™¨æ¨¡å¼&#34;&gt;é€‚é…å™¨æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå…¶å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå¦ä¸€ä¸ªæŒ‡å®šçš„æ¥å£ï¼Œä»¥å®ç°åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œæ— æ³•ååŒå·¥ä½œçš„ç±»ä¹‹é—´çš„ååŒå·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;é€šå¸¸ï¼Œåœ¨å®ŒæˆæŸäº›ä»»åŠ¡æ—¶éœ€è¦ä¸å…¶ä»–ç¨‹åºè¿›è¡Œé€šä¿¡ï¼Œå¦‚è®¿é—®æ•°æ®åº“ã€è®¿é—®å¼€å‘æ¥å£ã€ç¬¬ä¸‰æ–¹æˆæƒç™»å½•æˆ–çŸ­ä¿¡é€šçŸ¥ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç ä¸­ä»»ä½•å¤–éƒ¨ä¾èµ–æ€§éƒ½ä¼šå¸¦æ¥è®¾è®¡å’Œæµ‹è¯•æ–¹é¢çš„é—®é¢˜ã€‚æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ï¼ŒåŒæ—¶è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•åœ°è¯´ï¼Œå¦‚æœç¨‹åºéœ€è¦æ¥å…¥ MySQLã€PostgreSQLã€SQLite ç­‰æ•°æ®åº“ï¼Œç›´æ¥é’ˆå¯¹æ¯ç§æ•°æ®åº“ç¼–å†™ CURD æ“ä½œå°†å¯¼è‡´è®¾è®¡éš¾åº¦åŠ å¤§ï¼Œä¸ä¾¿äºæµ‹è¯•ã€‚ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ï¼Œåˆ™åªéœ€äº†è§£å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œå…·ä½“å®ç°ç”±åŒ…å«ä¾èµ–å…³ç³»çš„ç»„ä»¶è´Ÿè´£å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å°†ç‰¹å®šäºä¾èµ–å…³ç³»çš„å†…å®¹å°è£…åœ¨ä¸€ä¸ªç»„ä»¶ä¸­ï¼Œè¿›è¡Œæ ¸å¿ƒæµç¨‹æµ‹è¯•æ—¶ï¼Œå¯æ›¿æ¢ä¸º mock ç»„ä»¶ï¼Œæ¨¡æ‹Ÿå®Œæˆä¾èµ–å¯¹è±¡çš„æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç ç¤ºä¾‹&#34;&gt;ä»£ç ç¤ºä¾‹&lt;/h2&gt;
&lt;h3 id=&#34;åœºæ™¯&#34;&gt;åœºæ™¯&lt;/h3&gt;
&lt;p&gt;ç›®å‰ï¼Œè¯¥ç¨‹åºå·²æ¥å…¥å¾®ä¿¡æ”¯ä»˜åŠŸèƒ½ï¼Œç°æ¬²åŠ å…¥ PayPal æ”¯ä»˜åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// å¾®ä¿¡æ”¯ä»˜
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;WeChatPay&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WeChatPay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Pay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;money&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å¾®ä¿¡æ”¯ä»˜&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Payer&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;Pay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;payer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Payer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WeChatPay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;payer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ç­‰å¾…æ¥å…¥çš„ PayPal æ”¯ä»˜
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PayPal&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PayPal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Consume&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;money&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;PayPal æ”¯ä»˜&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;ä¸ä½¿ç”¨è®¾è®¡æ¨¡å¼&#34;&gt;ä¸ä½¿ç”¨è®¾è®¡æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;å°†ä¼šåœ¨ä»£ç å—é‡Œï¼Œç›´æ¥ä¾èµ–ç¬¬ä¸‰æ–¹åº“ï¼Œæ²¡æœ‰è§£è€¦ï¼Œéš¾ä»¥æµ‹è¯•ï¼Œåˆ‡ä»£ç å—è¯»èµ·æ¥å¤æ‚ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;payType&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;PayPal&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;payType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;PayPal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    	 &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;payer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Payer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WeChatPay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  			&lt;span class=&#34;nx&#34;&gt;payer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Wechat&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		    &lt;span class=&#34;nx&#34;&gt;pp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PayPal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		    &lt;span class=&#34;nx&#34;&gt;pp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Consume&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;12.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;è´­ä¹°ä¼šå‘˜&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ä¸æ”¯æŒçš„æ”¯ä»˜æ–¹å¼&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;ä½¿ç”¨é€‚é…å™¨æ¨¡å¼&#34;&gt;ä½¿ç”¨é€‚é…å™¨æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;å½“ PayPal çš„æ”¯ä»˜ç»„ä»¶ç”±åˆ«äººæä¾›æ—¶ï¼Œä¸èƒ½ä¿®æ”¹ä»£ç ã€‚æ­¤æ—¶ç”±æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªé€‚é…å™¨å®ç°æ¥å£ï¼Œå†…éƒ¨å®ç°è°ƒç”¨ PayPalã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// å®šä¹‰ PayPal å¯¹ Payer çš„é€‚é…å™¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PayPalAdopter&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;payPal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PayPal&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PayPalAdopter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Pay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;money&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;payPal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Consume&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è´­ä¹°ä¼šå‘˜&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;payType&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;PayPal&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;payer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Payer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;payType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;PayPal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    	 &lt;span class=&#34;nx&#34;&gt;payer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WeChatPay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Wechat&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    	 &lt;span class=&#34;nx&#34;&gt;payer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PayPalAdopter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PayPal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ä¸æ”¯æŒçš„æ”¯ä»˜æ–¹å¼&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;payer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡ä»¥ä¸Šçš„æ–¹å¼ä½¿æµ‹è¯•æ›´å®¹æ˜“ï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“æ¨ç†ï¼Œä¸å¿…æ‹…å¿ƒä¸¤ä¸ªä¸åŒä¸”ä¸ç›¸å…³çš„è¡Œä¸ºä¼šäº’ç›¸å¹²æ‰°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…¶ä»–ç»“æ„å‹æ¨¡å¼&#34;&gt;å…¶ä»–ç»“æ„å‹æ¨¡å¼&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‚é…å™¨æ¨¡å¼&lt;/strong&gt;é€šå¸¸åœ¨å·²æœ‰ç¨‹åºä¸­ä½¿ç”¨ï¼Œè®©äº’ç›¸ä¸å…¼å®¹çš„ç±»å‹å¥½åˆä½œï¼Œå…ˆæœ‰ä¸¤ç«¯çš„ä¸œè¥¿ï¼Œæ‰æœ‰é€‚é…å™¨ã€‚&lt;strong&gt;æ¡¥æ¥æ¨¡å¼&lt;/strong&gt;ï¼Œé€šå¸¸å¼€å‘å‰æœŸè¿›è¡Œè®¾è®¡ï¼Œä½¿å„ä¸ªéƒ¨åˆ†ç‹¬ç«‹å¼€å‘ä¾¿äºå¼€å‘ï¼Œå…ˆæœ‰æ¡¥æ‰æœ‰ä¸¤ç«¯çš„ä¸œè¥¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://bitfieldconsulting.com/golang/adapter&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;The adapter pattern in Go&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://refactoringguru.cn/design-patterns/adapter&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;é€‚é…å™¨æ¨¡å¼&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>æ•æ·ä¹‹é“ (ä¸‹)</title>
        <link>https://blog.golang.space/p/%E6%95%8F%E6%8D%B7%E4%B9%8B%E9%81%93-%E4%B8%8B/</link>
        <pubDate>Fri, 10 Feb 2023 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E6%95%8F%E6%8D%B7%E4%B9%8B%E9%81%93-%E4%B8%8B/</guid>
        <description>&lt;h1 id=&#34;æ•æ·ä¹‹é“&#34;&gt;æ•æ·ä¹‹é“&lt;/h1&gt;
&lt;p&gt;&amp;lt;é«˜æ•ˆç¨‹åºå‘˜çš„ 45 ä¸ªä¹ æƒ¯&amp;gt; è¯»ä¹¦ç¬”è®°&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»»ä½•ä¸€ä¸ªæ„šè€…éƒ½èƒ½å¤Ÿè®©äº‹æƒ…å˜å¾—è¶Šæ¥è¶Šç¬¨é‡ï¼Œè¶Šæ¥è¶Šå¤æ‚ï¼Œè¶Šæ¥è¶Šæç«¯ï¼Œéœ€è¦æ—è§‚è€…çš„æŒ‡ç‚¹ä»¥åŠæå¤§çš„å‹‡æ°”ï¼Œæ‰èƒ½å¾—åˆ°è±ç„¶å¼€æœ—çš„å±€é¢ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ–°é¡¹ç›®åˆšå¼€å§‹ï¼Œä»£ç å¾ˆå®¹æ˜“ç†è§£å’Œä¸Šæ‰‹ï¼Œéšç€å¼€å‘è¿‡ç¨‹çš„æ¨è¿›ï¼Œé¡¹ç›®ä¸çŸ¥ä¸è§‰æ¼”å˜æˆä¸€ä¸ªåºç„¶æ€ªç‰©ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯ä¸ºä»€ä¹ˆè®©å®ƒæœ€ç»ˆå˜å¾—éš¾ä»¥æŒæ§? å¼€å‘äººå‘˜åœ¨å®Œæˆä»»åŠ¡æ—¶ï¼Œå¯èƒ½ä¼šéš¾æŒ¡è¯±æƒ‘ä¸ºèŠ‚çœæ—¶é—´è€Œèµ°ã€Œæ·å¾„ã€ã€‚è¿™äº›ã€Œæ·å¾„ã€å¾€å¾€åªä¼šæ¨è¿Ÿé—®é¢˜çš„çˆ†å‘æ—¶é—´ï¼Œè€Œä¸æ˜¯æŠŠå®ƒå½»åº•è§£å†³æ‰ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç®€å•çš„è§£å†³æ–¹å¼ï¼Œå°±æ˜¯å¼€å‘è¿‡ç¨‹ä¸­æ¯å¤©ä»˜å‡ºä¸€ç‚¹å°çš„åŠªåŠ›ï¼Œé¿å…ä»£ç ã€Œè…çƒ‚ã€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç è¦æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾&#34;&gt;ä»£ç è¦æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾&lt;/h2&gt;
&lt;p&gt;ä»£ç é˜…è¯»çš„æ¬¡æ•°è¦è¿œè¿œè¶…è¿‡ç¼–å†™çš„æ¬¡æ•°ï¼Œæ‰€ä»¥åœ¨ç¼–å†™çš„æ—¶å€™å€¼å¾—èŠ±ç‚¹åŠŸå¤«è®©å®ƒè¯»èµ·æ¥æ›´åŠ ç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é»˜è®¤å‚æ•°æˆ–å¯é€‰å‚æ•°ä¼šå½±å“ä»£ç å¯è¯»æ€§ï¼Œä½¿å…¶éš¾ä»¥ç†è§£å’Œè°ƒè¯•ï¼Œæœ€å¥½æ˜ç¡®åœ°æŒ‡æ˜å‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;æ”¹åŠ¨ä»£ç ä»¥ä¿®å¤ bug æˆ–æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œåº”æœ‰æ¡ä¸ç´Šï¼Œå…ˆç†è§£ä»£ç åšäº†ä»€ä¹ˆï¼Œå¦‚ä½•åšçš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çœ‹çœ‹ä»£ç ä¾‹å­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;coffeeShop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;PlaceOrder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä¸ªå¤§æ¦‚å¯ä»¥ç†è§£æ˜¯åœ¨å’–å•¡åº—ä¸‹äº†è®¢å•ï¼Œ2 æ˜¯ä»€ä¹ˆæ„æ€å‘¢?&lt;/p&gt;
&lt;p&gt;ä¸ä»¿æ·»åŠ ä¸€äº›æ³¨é‡Šã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;coffeeShop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;PlaceOrder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 2: large cup
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æœ‰æ—¶å€™ï¼Œæ³¨é‡Šæ˜¯ä¸ºäº†å¸®å†™çš„ä¸å¥½çš„ä»£ç è¡¥æ¼ï¼Œä¸ä»¿è€ƒè™‘ç”¨æšä¸¾å€¼æ¥è¡¨è¾¾æ¦‚å¿µã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Small&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;iota&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;Medium&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;Large&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;coffeeShop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;PlaceOrder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Large&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ®µä»£ç å°±å¾ˆæ˜ç™½ï¼Œæ˜¯è¦ä¸€ä¸ªå¤§æ¯çš„å’–å•¡ã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ªä¼˜é›…çš„å¼€å‘è€…ï¼Œåº”è¯¥æ—¶é•¿æé†’è‡ªå·±æ˜¯å¦æœ‰ç‰ˆæœ¬å•Šè®©å†™å‡ºçš„ä»£ç æ›´å®¹æ˜“ç†è§£ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœä½ æ“…é•¿ä½è¿ç®—ï¼Œå°±ä¼šæ˜ç™½åªæ˜¯æŠŠ val çš„å€¼ä¹˜ä»¥ 2ã€‚ä½†å¯¹äºæ²¡æœ‰ç±»ä¼¼èƒŒæ™¯çš„äººæ¥è¯´ï¼Œä»–ä»¬èƒ½æ˜ç™½å—? å¯¹äºå›¢é˜Ÿä¸­çš„æ–°äººï¼Œå¯èƒ½ä¼šæŒ å¤´ä¸å·²ï¼ŒæŠ“è€³æŒ è…®ï¼Œç™¾æ€ä¸å¾—ã€Œçªå§ã€ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç”¨ä½ç§»åšä¹˜æ³•æ˜¯åœ¨å †ä»£ç è¿›è¡Œä¸å¿…è¦ä¸”å±é™©çš„æ€§èƒ½ä¼˜åŒ–ï¼Œç›´æ¥ä¹˜æ³•çœ‹èµ·æ¥æ›´æ¸…æ™°ï¼Œä¸è¦è¡¨ç°å¾—å¥½åƒå¾ˆèªæ˜ä¼¼çš„ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰æ„å›¾çš„ç¼–ç¨‹å¹¶ä¸æ˜¯æ„å‘³ç€åˆ›å»ºæ›´å¤šçš„ç±»å’Œç±»å‹ï¼Œè¿™ä¸æ˜¯è¿›è¡Œè¿‡åˆ†æŠ½è±¡çš„ç†ç”±ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¢é‡å¼ç¼–ç¨‹&#34;&gt;å¢é‡å¼ç¼–ç¨‹&lt;/h2&gt;
&lt;p&gt;å¼€è½¦è¿›è¡Œé•¿å›¾æ—…è¡Œæ—¶ï¼Œä¸¤æ‰‹æŠŠæˆ‘æ–¹å‘ç›˜ï¼Œå›ºå®šåœ¨ä¸€ä¸ªä½ç½®ï¼Œä¸¤çœ¼ç›´ç›¯å‰æ–¹ï¼Œæ²¹é—¨ä¸€è¸©åˆ°åº•å‡ ä¸ªå°æ—¶ï¼Œè¿™æ ·å¯èƒ½å—?&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸å¯¹è‡ªå·±ç¼–å†™çš„ä»£ç è¿›è¡Œæµ‹è¯•ï¼Œå¹¶ä¸”ä¿è¯æ²¡æœ‰é—®é¢˜ï¼Œå°±ä¸è¦è¿ç»­é•¿æ—¶é—´è¿›è¡Œç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸åï¼Œåº”è¯¥é‡‡ç”¨å¢é‡å¼çš„ç¼–ç¨‹æ–¹å¼ï¼Œå¢é‡å¼ç¼–ç¨‹å¯ä»¥ç²¾ç®€å¹¶ç»“æ„åŒ–ä½ çš„ä»£ç ã€‚æ‰€å¼€å‘çš„ä»£ç åŸºäºå³ä½¿çš„åé¦ˆï¼Œè¿™äº›åé¦ˆæ¥è‡ªå°æ­¥å¹…æ–¹å¼ç¼–å†™ä»£ç å’Œæµ‹è¯•çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;é‡‡å–å¢é‡å¼ç¼–ç¨‹å’Œæµ‹è¯•ï¼Œä¼šå€¾å‘äºåˆ›å»ºæ›´å°çš„æ–¹æ³•å’Œæ›´å…·å†…èšæ€§çš„ç±»ï¼Œåœ¨ç¼–å†™ä»£ç æ—¶ï¼Œè¦ç»å¸¸ç•™å¿ƒå¯ä»¥æ”¹è¿›çš„å¾®å°æ–¹é¢ï¼Œè¿™å¯èƒ½ä¼šæ”¹å–„ä»£ç çš„å¯è¯»æ€§ã€‚å°†é•¿å‡½æ•°æ‹†åˆ†æˆçŸ­å‡½æ•°ï¼Œä½¿å…¶å˜å¾—æ›´æ˜“äºæµ‹è¯•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ„å»ºå’Œæµ‹è¯•å¾ªç¯èŠ±è´¹çš„æ—¶é—´è¿‡é•¿ï¼Œä½ å°±ä¸ä¼šå¸Œæœ›ç»å¸¸è¿è¡Œå®ƒä»¬äº†ã€‚è¦ä¿è¯æµ‹è¯•å¯ä»¥å¿«é€Ÿè¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ç¼–è¯‘å’Œæµ‹è¯•è¿è¡Œä¸­ï¼Œåœä¸‹æ¥æƒ³ä¸€æƒ³ï¼Œå¹¶æš‚æ—¶è¿œç¦»ä»£ç ç»†èŠ‚ï¼Œè¿™æ˜¯ä¿è¯ä¸ä¼šåç¦»æ­£ç¡®æ–¹å‘çš„å¥½æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;è¦ä¼‘æ¯çš„è¯ï¼Œå°±è¦å¥½å¥½ä¼‘æ¯ï¼Œä¼‘æ¯æ—¶è¿œç¦»é”®ç›˜&lt;/li&gt;
&lt;li&gt;è¦åƒé‡æ„ä¸šåŠ¡ä»£ç é‚£æ ·ï¼Œé‡æ„æµ‹è¯•ï¼Œè€Œä¸”è¦ç»å¸¸é‡æ„æµ‹è¯•&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¿æŒç®€å•&#34;&gt;ä¿æŒç®€å•&lt;/h2&gt;
&lt;p&gt;ä¹Ÿè®¸ä½ çœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œå…¶ä¸­æåˆ°äº†ä¸€ä¸ªè®¾è®¡æƒ³æ³•ï¼Œæ”¾ä¸‹æ–‡ç« ï¼Œçœ¼å‰çš„ä»£ç ä¼¼ä¹é©¬ä¸Šå°±å¯ä»¥ç”¨åˆ°è¿™æ ·çš„æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½ çœŸçš„éœ€è¦ç”¨å®ƒå—?&lt;/p&gt;
&lt;p&gt;æ˜¯ä¸æ˜¯ç‰¹å®šçš„é—®é¢˜å¼ºè¿«ä½ ä½¿ç”¨è¿™ä¸ªè§£å†³æ–¹æ¡ˆ ? ä¸è¦è®©è¿‡åº¦è®¾è®¡ï¼Œä¹Ÿä¸è¦å°†ä»£ç è¿‡åº¦å¤æ‚åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å‘äººå‘˜æ›´åº”è¯¥ä¸ºè‡ªå·±èƒ½å¤Ÿåˆ›å»ºå‡ºä¸€å¥—ç®€å•å¹¶å¯ç”¨çš„è®¾è®¡è€Œéª„å‚²ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•ä¸æ˜¯ç®€é™‹! ç›¸æ¯”ä¸€ä¸ªè¿‡åº¦å¤æ‚ï¼Œæ‹™åŠ£çš„è§£å†³æ–¹æ¡ˆï¼Œç®€å•çš„æ–¹æ¡ˆ é€šå¸¸æ›´éš¾ä»¥è·å¾—ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜é›…çš„ä»£ç ç¬¬ä¸€çœ¼çœ‹ä¸Šå»ï¼Œå°±çŸ¥é“å®ƒçš„ç”¨å¤„ï¼Œè€Œä¸”å¾ˆç®€æ´ã€‚è¿™æ ·çš„è§£å†³æ–¹æ¡ˆä¸æ˜¯é‚£ä¹ˆå®¹æ˜“æƒ³å‡ºæ¥çš„ã€‚ä¼˜é›…æ˜¯æ˜“äºç†è§£å’Œè¾¨è¯†çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç å‡ ä¹æ€»æ˜¯å¯ä»¥è¿›ä¸€æ­¥ç²¾ç‚¼ï¼Œä½†åˆ°äº†æŸä¸ªç‚¹ä¹‹åï¼Œå†ä½œæ”¹è¿›å°±ä¸ä¼šå¸¦æ¥ä»»ä½•å®è´¨æ€§çš„å¥½å¤„äº†ã€‚&lt;/li&gt;
&lt;li&gt;ç®€å•ï¼Œå¯è¯»æ€§é«˜çš„ä»£ç ã€‚å¼ºè¡Œè®©ä»£ç å˜å¾—ä¼˜é›…ä¸è¿‡æ—©ä¼˜åŒ–ç±»ä¼¼ï¼ŒåŒæ ·ä¼šäº§ç”Ÿæ¶åŠ£çš„å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;ç®€å•çš„è§£å†³æ–¹æ¡ˆå¿…é¡»æ»¡è¶³åŠŸèƒ½éœ€æ±‚ï¼Œä¸ºäº†ç®€å•è€Œåœ¨åŠŸèƒ½ä¸Šå¦¥åï¼Œå°±æ˜¯è¿‡åº¦ç®€åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªäººè®¤ä¸ºç®€å•çš„ä¸œè¥¿ï¼Œå¯èƒ½å¯¹å¦ä¸€ä¸ªäººæ„å‘³ç€å¤æ‚ã€‚&lt;/li&gt;
&lt;li&gt;å¼€å‘å¯ä»¥å·¥ä½œï¼Œæœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆã€‚é™¤éæœ‰ä¸å¯è¾©é©³çš„åŸå› ï¼Œå¦åˆ™ä¸è¦ä¹±ç”¨è®¾è®¡æ¨¡å¼ï¼Œé«˜éš¾åº¦æŠ€æœ¯ä¹‹ç±»çš„ä¸œè¥¿ï¼Œé€ æˆä¸€å¤§é”…é»ç³Šç³Šï¼Œä¹±ä¸ƒå…«ç³Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç¼–å†™é«˜å†…èšä½è€¦åˆçš„ä»£ç &#34;&gt;ç¼–å†™é«˜å†…èšï¼Œä½è€¦åˆçš„ä»£ç &lt;/h2&gt;
&lt;p&gt;å†…èšç¨‹åºé«˜ï¼Œè¡¨æ˜å„ä¸ªæˆå‘˜å…±åŒå®Œæˆäº†ä¸€ä¸ªåŠŸèƒ½ç‰¹æ€§æˆ–æ˜¯ä¸€ç»„åŠŸèƒ½ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å‡å®šæŠŠæ‰€æœ‰è¡£æœéƒ½æ‰”åˆ°ä¸€ä¸ªè¡£æŸœï¼Œå½“éœ€è¦æ‰¾ä¸€åŒè¢œå­æ—¶ï¼Œå¾—ç¿»éé‡Œé¢æ‰€æœ‰çš„è¡£æœã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ¯ä¸ªé¡µé¢åŒ…å«å±•ç¤ºé€»è¾‘ï¼Œä¸šåŠ¡é€»è¾‘å’Œè®¿é—®æ•°æ®çš„ä»£ç ï¼Œè‡ƒè‚¿çš„å †ç§¯åœ¨ä¸€èµ·ï¼Œå¦‚æœè¦å¯¹æ•°æ®åº“çš„è¡¨ç»“æ„è¿›è¡Œä¸€æ¬¡å¾®è°ƒï¼Œè¿™ä¸ªå¾®å°çš„å˜åŒ–ä¼šå¯¼è‡´åº”ç”¨ä¸­æ‰€æœ‰çš„é¡µé¢å‘ç”Ÿå˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªç±»ï¼Œå®ç°äº† 5 ç§å®Œå…¨ä¸ç›¸å¹²çš„åŠŸèƒ½ï¼Œå½“ 5 ä¸ªåŠŸèƒ½çš„éœ€æ±‚æˆ–ç»†èŠ‚å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¸ªç±»ä¹Ÿå¿…é¡»è·Ÿç€æ”¹å˜ã€‚å¦‚æœä¸€ä¸ªç±»å˜åŒ–å¾—è¿‡äºé¢‘ç¹ï¼Œè¿™æ ·çš„æ”¹å˜ä¼šå¯¹æ•´ä¸ªç³»ç»Ÿäº§ç”Ÿæ¶Ÿæ¼ªæ•ˆåº”ï¼Œå¯¼è‡´æ›´å¤šçš„ç»´æŠ¤å’Œæˆæœ¬ã€‚æ¨ä¹¦ã€Œæ•æ·è½¯ä»¶å¼€å‘: åŸåˆ™,æ¨¡å¼ä¸å®æˆ˜ã€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€äº›ä¸œè¥¿æ‹†åˆ†æˆå¾ˆå¤šå¾®å°çš„éƒ¨åˆ†ï¼Œå¯èƒ½ä¼šå¤±å»ä½¿ç”¨ä»·å€¼ï¼Œå½“ä½ éœ€è¦è¢œå­çš„æ—¶å€™ï¼Œä¸€ç›’æ¯›çº¿æ˜¯ä¸å¤Ÿç”¨çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‘ŠçŸ¥è€Œéè¯¢é—®&#34;&gt;å‘ŠçŸ¥ï¼Œè€Œéè¯¢é—®&lt;/h2&gt;
&lt;p&gt;æœ‰ä¸ªã€Œé€æŠ¥ç”·å­©å’Œé’±åŒ…çš„æ•…äº‹ã€ï¼Œç”·å­©å°†æŠ¥çº¸é€åˆ°ä½ çš„é—¨å‰ï¼Œè¦æ±‚ä»˜æŠ¥é…¬ï¼Œä½ è½¬è¿‡èº«è®©ç”·å­©ä»ä½ çš„åå±è‚¡å…œæå‡ºé’±åŒ…ï¼Œå¹¶ä¸”ä»ä¸­æ‹¿åˆ°ä¸¤ç¾å…ƒï¼Œå†æŠŠé’±åŒ…æ”¾å›å»ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç”·å­©æ‹¿åˆ°é’±åŒ…çš„æ—¶å€™ï¼Œä»–æ‹¿èµ°çš„æ•°é¢ä¸æ˜¯ä½ èƒ½æ§åˆ¶çš„ã€‚é€æŠ¥ç”·å­©ä½œä¸ºè°ƒç”¨è€…ï¼Œåº”è¯¥å‘Šè¯‰å®¢æˆ·éœ€è¦ä»˜å¤šå°‘é’±ï¼Œç”·å­©ä¸èƒ½æ¢å¯»å®¢æˆ·çš„è´¢åŠ¡çŠ¶å†µï¼Œä¹Ÿä¸èƒ½ä»£æ›¿åšä»»ä½•å†³ç­–ã€‚&lt;/p&gt;
&lt;p&gt;å‘ŠçŸ¥ï¼Œä¸è¦è¯¢é—®æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æŠ€æœ¯ï¼Œå°†åŠŸèƒ½å’Œæ–¹æ³•åˆ†ä¸ºã€Œå‘½ä»¤ã€å’Œã€ŒæŸ¥è¯¢ã€ä¸¤ç±»ï¼Œä¸€ä¸ªå¸¸è§„çš„å‘½ä»¤å¯èƒ½ä¼šæ”¹å˜å¯¹è±¡çš„çŠ¶æ€ï¼Œä¸€ä¸ªæŸ¥è¯¢ä»…ä»…æä¾›çŠ¶æ€ï¼Œä¸æä¾›ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ•æ·è°ƒè¯•&#34;&gt;æ•æ·è°ƒè¯•&lt;/h2&gt;
&lt;p&gt;å³ä½¿æ˜¯è¿ä½œå¾—æœ€å¥½çš„æ•æ·é¡¹ç›®ï¼Œä¹Ÿä¼šå‘ç”Ÿé”™è¯¯ã€‚bugï¼Œé”™è¯¯ï¼Œç¼ºé™·&amp;mdash;ä¸ç®¡è¢«ç§°ä½œä»€ä¹ˆï¼Œå®ƒä»¬æ€»ä¼šå‘ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;è¦æƒ³æ›´åŠ æœ‰æ•ˆåœ°é‡ç”¨ä½ çš„çŸ¥è¯†å’ŒåŠªåŠ›ï¼Œè®°å½•é—®é¢˜è§£å†³æ—¥å¿—æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¦åœ¨åŒä¸€å¤„è·Œå€’ä¸¤æ¬¡ï¼Œå¯ä»¥é€‰æ‹©ç¬¦åˆéœ€æ±‚çš„ä»»ä½•æ ¼å¼ï¼Œå¦‚ä¸‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é—®é¢˜å‘ç”Ÿæ—¥æœŸ&lt;/li&gt;
&lt;li&gt;é—®é¢˜ç®€è¿°&lt;/li&gt;
&lt;li&gt;è§£å†³æ–¹æ¡ˆè¯¦ç»†æè¿°&lt;/li&gt;
&lt;li&gt;å¼•ç”¨æ–‡ç« æˆ–ç½‘å€&lt;/li&gt;
&lt;li&gt;ä»»ä½•ä»£ç ç‰‡æ®µï¼Œè®¾ç½®æˆ–å¯¹è¯æ¡†æˆªå±&lt;/li&gt;
&lt;li&gt;åŠ©è®°æ ‡ç­¾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;2023&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mo&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;golang&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;æ›´æ–°&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.20&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;å&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;golangci&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lint&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;åœ¨ç»ˆç«¯æç¤ºäº†å¾ˆå¤šé”™è¯¯&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;åœ¨&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;github&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;çš„&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;golangci&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lint&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;æœç´¢ç›¸å…³&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;issus&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;å‘ç°&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;brew&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;vscode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;å‘è¡Œçš„&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;golangci&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lint&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;éƒ½æ˜¯æ—§ç‰ˆ&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.50.1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;è€Œæ­¤å·¥å…·å·²æ›´æ–°è‡³&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.51&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ä¿®å¤äº†ç›¸å…³é—®é¢˜&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ç›´æ¥ä¸‹è½½æ›¿æ¢å³å¯&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœé¢ä¸´çš„é—®é¢˜æ— æ³•åœ¨æ—¥å¿—ä¸­æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œåœ¨é—®é¢˜è§£å†³ä¹‹åï¼Œè¦è®°å¾—é©¬ä¸Šæ›´æ–°ç»†èŠ‚è®°å½•åˆ°æ—¥å¿—ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆæ—¥å¿—åº”è¯¥ä½œä¸ºæ€è€ƒçš„ä¸€ä¸ªæ¥æºï¼Œå¯ä»¥åœ¨å…¶ä¸­å‘ç°æŸäº›ç‰¹å®šé—®é¢˜çš„ç»†èŠ‚ï¼Œå¯¹äºæŸäº›ç±»ä¼¼ä½†æ˜¯æœ‰å·®å¼‚çš„é—®é¢˜ï¼Œä¹Ÿèƒ½ä»ä¸­è·å¾—ä¿®å¤çš„æŒ‡å¼•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®°å½•é—®é¢˜çš„æ—¶é—´ä¸èƒ½è¶…è¿‡åœ¨è§£å†³é—®é¢˜ä¸ŠèŠ±è´¹çš„äº‹æƒ…ï¼Œè¦ä¿æŒè½»é‡çº§å’Œç®€å•ï¼Œä¸å¿…è¾¾åˆ°å¯¹å¤–å‘å¸ƒå¼çš„è´¨é‡&lt;/li&gt;
&lt;li&gt;æ‰¾åˆ°ä»¥å‰çš„è§£å†³æ–¹æ³•éå¸¸å…³é”®ï¼Œä½¿ç”¨è¶³å¤Ÿçš„å…³é”®å­—ï¼Œä»¥å¸®åŠ©æŸ¥æ‰¾&lt;/li&gt;
&lt;li&gt;å¦‚æœé€šè¿‡ web æœç´¢ï¼Œå‘ç°æ²¡äººæ›¾ç»é‡åˆ°åŒæ ·çš„é—®é¢˜ï¼Œä¹Ÿè®¸æ˜¯æœç´¢çš„æ–¹å¼æœ‰é—®é¢˜&lt;/li&gt;
&lt;li&gt;è¦è®°å½•å‘ç”Ÿé—®é¢˜æ—¶åº”ç”¨ç¨‹åºï¼Œåº”ç”¨æ¡†æ¶æˆ–å¹³å°çš„ç‰¹å®šç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;è®°å½•å›¢é˜Ÿåšå‡ºé‡è¦å†³ç­–çš„åŸå› ï¼Œå¦åˆ™ 6-9 ä¸ªæœˆä¹‹åï¼Œæƒ³å†é‡æ–°å›é¡¾å†³ç­–è¿‡ç¨‹ï¼Œè¿™äº›ç»†èŠ‚å°±å¾ˆéš¾å†è®°å¾—ï¼Œå®¹æ˜“å‘ç”Ÿäº’ç›¸æŒ‡è´£çš„æƒ…å½¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¯¹é—®é¢˜å„ä¸ªå‡»ç ´&#34;&gt;å¯¹é—®é¢˜å„ä¸ªå‡»ç ´&lt;/h2&gt;
&lt;p&gt;å•å…ƒæµ‹è¯•å¸¦æ¥çš„ç§¯ææ•ˆåº”ä¹‹ä¸€ï¼Œå°±æ˜¯å®ƒä¼šå¼ºè¿«å½¢æˆä»£ç çš„åˆ†å±‚ï¼Œè¦ä¿è¯ä»£ç å¯æµ‹è¯•ï¼Œå°±å¿…é¡»æŠŠå®ƒä»å‘¨è¾¹ä»£ç ä¸­è§£è„±å‡ºæ¥ï¼Œå¦‚æœä»£ç ä¾èµ–å…¶å®ƒæ¨¡å—ï¼Œå°±åº”è¯¥ä½¿ç”¨ mock å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;è¯†åˆ«å¤æ‚é—®é¢˜çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯å°†ä»–ä»¬åˆ†ç¦»å‡ºæ¥ã€‚ä¸å¯èƒ½åœ¨åŠç©ºä¸­è¯•å›¾ä¿®å¤é£æœºå¼•æ“ï¼Œå°†å…¶å–å‡ºæ¥æ”¾åœ¨å·¥ä½œå°ä¸Šä¹‹åæ›´å®¹æ˜“ä¿®å¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†ä»£ç ä¸­å…¶è¿è¡Œç¯å¢ƒä¸­åˆ†ç¦»åï¼Œé—®é¢˜æ¶ˆå¤±ä¸è§äº†ï¼Œæœ‰åŠ©äºéš”ç¦»é—®é¢˜ï¼Œç›¸åä¹Ÿæœ‰åŠ©äºéš”ç¦»é—®é¢˜&lt;/li&gt;
&lt;li&gt;ä»¥äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼å®šä½é—®é¢˜å¾ˆæœ‰ç”¨ï¼Œå°†é—®é¢˜ç©ºé—´åˆ†æˆä¸¤åŠï¼Œçœ‹å“ªä¸€åŠåŒ…å«é—®é¢˜ï¼Œå†å°†åŒ…å«é—®é¢˜çš„è¿›è¡ŒäºŒåˆ†ï¼Œå¹¶ä¸æ–­é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°å‘ç°é—®é¢˜æœ¬è´¨ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å¤„ç†é—®é¢˜ä¹‹å‰ï¼Œå…ˆæŸ¥æ‰¾é—®é¢˜è§£å†³æ—¥å¿—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æŠ¥å‘Šæ‰€æœ‰çš„å¼‚å¸¸&#34;&gt;æŠ¥å‘Šæ‰€æœ‰çš„å¼‚å¸¸&lt;/h2&gt;
&lt;p&gt;ç¼–ç¨‹ï¼Œä¸ä»…è¦è€ƒè™‘æ­£å¸¸çŠ¶æ€ä¸‹å¦‚ä½•è¿ä½œï¼Œæ›´è¦è€ƒè™‘å¼‚å¸¸æƒ…å†µä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº›å¼€å‘äººå‘˜ä¼šé‡‡ç”¨ä¸´æ—¶çš„åšæ³•ï¼Œæ•æ‰åˆ°å¼‚å¸¸åï¼Œä¸ºäº†ä¸çœ‹åˆ°ç¼–è¯‘å™¨çš„æç¤ºï¼Œå°±æŠŠå¼‚å¸¸å¿½ç•¥æ‰ã€‚&lt;/p&gt;
&lt;p&gt;å¿…é¡»å¤„ç†æˆ–å‘ä¸Šä¼ æ’­æ‰€æœ‰çš„å¼‚å¸¸ï¼Œä¸è¦å°†å®ƒä»¬å‹åˆ¶ä¸ç®¡ï¼Œå°±ç®—æ˜¯ä¸´æ—¶åšä¹Ÿä¸è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸æ˜¯æ‰€æœ‰çš„é—®é¢˜éƒ½åº”è¯¥æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;æŠ¥å‘Šçš„å¼‚å¸¸åº”è¯¥åœ¨ä»£ç çš„ä¸Šä¸‹æ–‡ä¸­æœ‰å®é™…æ„ä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä»£ç ä¸­ä¼šè®°å½•è¿è¡Œæ—¶è°ƒè¯•æ—¥å¿—ï¼Œå½“æ•è·æˆ–æ˜¯æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œéƒ½è¦è®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œè¿™æ ·åšå¯¹ä»¥åçš„è·Ÿè¸ªå·¥ä½œå¾ˆæœ‰å¸®åŠ©ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥å¼‚å¸¸å¤„ç†èµ·æ¥å¾ˆéº»çƒ¦ï¼Œæ²¡äººæ„¿æ„è°ƒç”¨æŠ›å‡º 31 ç§ä¸åŒæ£€æŸ¥å¼‚å¸¸çš„æ–¹æ³•ã€‚è¿™æ˜¯è®¾è®¡ä¸Šçš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;è¦ä¼ æ’­ä¸èƒ½å¤„ç†çš„å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æä¾›æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯&#34;&gt;æä¾›æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯&lt;/h2&gt;
&lt;p&gt;å‘ç”Ÿé”™è¯¯æ—¶ï¼Œæ˜¾ç¤ºé€šç”¨çš„ä¿¡æ¯å‘Šè¯‰ç”¨æˆ·å‘ç”Ÿäº†é—®é¢˜ï¼Œè¦å¥½è¿‡äºç³»ç»Ÿå´©æºƒé€ æˆåº”ç”¨æ‰§è¡Œé”™è¯¯çš„åŠ¨ä½œã€‚ç„¶è€Œç±»ä¼¼ã€Œå‡ºé”™äº†ã€è¿™æ ·çš„æ¶ˆæ¯ï¼Œæ— æ³•å¸®åŠ©å›¢é˜Ÿé’ˆå¯¹é—®é¢˜åšå‡ºè¯Šæ–­ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·åœ¨ç»™æ”¯æŒå›¢é˜Ÿæ‰“ç”µè¯æŠ¥å‘Šé—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ä»–ä»¬æä¾›è¶³å¤Ÿå¤šä¸”å¥½çš„ä¿¡æ¯ï¼Œä»¥å¸®åŠ©å°½å¿«è¯†åˆ«é—®é¢˜æ‰€åœ¨ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è®°å½•æ—¥å¿—&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å±•ç¤ºåŒ…è£…çš„é”™è¯¯ï¼Œå°†é”™è¯¯ç»†èŠ‚éšè—åœ¨ã€Œè¯¦æƒ…ã€æŒ‰é’®ä¸­ï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥å°†é”™è¯¯ç»†èŠ‚ä»¥é‚®ä»¶å‘ç»™æŠ€æœ¯æ”¯æŒï¼Œæˆ–ç›´æ¥å±•ç¤ºé”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;æ—¥å¿—ä¸­è®°å½•çš„ä¿¡æ¯å¯èƒ½åº”è¯¥åŒ…å«å½“æ—¶çš„ç³»ç»ŸçŠ¶æ€ï¼Œç‰ˆæœ¬ç­‰å¿«ç…§&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åŒºåˆ†é”™è¯¯ç±»å‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¨‹åºç¼ºé™·: è¿™æ˜¯çœŸæ­£çš„ bugï¼Œç”¨æˆ·æˆ–æŠ€æœ¯æ”¯æŒå¯¹æ­¤æŸæ‰‹æ— ç­–ï¼Œåªèƒ½ç ”å‘å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;ç¯å¢ƒé—®é¢˜: å¦‚æœèƒ½æä¾›è¶³å¤Ÿè¯¦ç»†çš„é”™è¯¯ï¼ŒæŠ€æœ¯æ”¯æŒå¯ä»¥è§£å†³ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·é”™è¯¯: ç”±ç”¨æˆ·çš„è¾“å…¥é€ æˆçš„é—®é¢˜ï¼Œç”¨æˆ·å¯ä»¥é‡è¯•ã€‚é€šè¿‡è¿½è¸ªè®°å½•æŠ¥å‘Šçš„é”™è¯¯ç±»å‹ï¼Œå¯ä»¥ä¸ºå—ä¼—æä¾›æ›´ä½³åˆé€‚çš„å»ºè®®ï¼Œä¸ºç ”å‘æä¾›ç¨‹åºä¼˜åŒ–ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åƒæ— æ³•æ‰¾åˆ°æ–‡ä»¶è¿™æ ·çš„é”™è¯¯ï¼Œæœ¬èº«è€Œè¨€æ— åŠ©äºé—®é¢˜çš„è§£å†³ã€‚ ã€Œæ— æ³•æ‰¾åˆ° /home/app/main.yaml æ–‡ä»¶ ã€è¿™æ ·çš„ä¿¡æ¯æ›´æœ‰æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æä¾›æ›´å¤šä¿¡æ¯çš„åŒæ—¶ï¼Œä¸è¦æ³„éœ²å®‰å…¨ä¿¡æ¯ï¼Œä¸ªäººéšç§ï¼Œå•†ä¸šæœºå¯†ã€‚&lt;/li&gt;
&lt;li&gt;æä¾›ç»™ç”¨æˆ·çš„ä¿¡æ¯å¯ä»¥åŒ…å«ä¸€ä¸ªä¸»é”®ï¼Œä»¥ä¾¿äºåœ¨æ—¥å¿—æ–‡ä»¶æˆ–æ˜¯å®¡æ ¸è®°å½•ä¸­å®šä½ç›¸å…³å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ•æ·åä½œ&#34;&gt;æ•æ·åä½œ&lt;/h2&gt;
&lt;p&gt;é«˜æ•ˆçš„åä½œæ˜¯æ•æ·å¼€å‘çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;å›¢é˜Ÿä¸­ä¸€ä¸ªäººçš„çŸ¥è¯†ï¼Œç»å¸¸å¯ä»¥è§£å†³å¦å¤–ä¸€åæˆå‘˜çš„é—®é¢˜ã€‚åªè¦å…è®¸å¤§å®¶è‡ªå·±æƒ³åŠæ³•ï¼Œå°±å¯ä»¥å¸®åŠ©å›¢é˜Ÿä¸æ–­æˆé•¿ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡†å¤‡å¥½å†å…±äº«ä»£ç &lt;/li&gt;
&lt;li&gt;code review&lt;/li&gt;
&lt;li&gt;ä¸æ–­å®Œæˆæ—§ä»»åŠ¡ï¼Œé¢†å–æ–°ä»»åŠ¡ï¼ŒåŠæ—¶é€šæŠ¥è¿›å±•ä¸é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®šæ—¶å®‰æ’ä¼šé¢æ—¶é—´ï¼Œè¦ä¿è¯ä¼šè®®è®®é¢˜ä¸ä¼šå‘æ•£ï¼Œæ¯ä¸ªäººéƒ½åº”è¯¥åªå›ç­” 3 ä¸ªé—®é¢˜ï¼Œå¦‚æœè¦è¯¦ç»†è®¨è®ºæŸäº›é—®é¢˜ï¼Œå¯ä»¥åœ¨ä¼šè®®ç»“æŸåï¼Œå†ä¸“é—¨å¬é›†ç›¸å…³äººå‘˜ç§èŠã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¨å¤©æœ‰ä»€ä¹ˆæ”¶è·?&lt;/li&gt;
&lt;li&gt;ä»Šå¤©è®¡åˆ’åšå“ªäº›å·¥ä½œ?&lt;/li&gt;
&lt;li&gt;é¢ä¸´å“ªäº›éšœç¢?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æˆä¸ºæŒ‡å¯¼è€…&#34;&gt;æˆä¸ºæŒ‡å¯¼è€…&lt;/h2&gt;
&lt;p&gt;å¥½çš„æƒ³æ³•ä¸ä¼šå› ä¸ºè¢«è®¸å¤šäººäº†è§£è€Œå‰Šå¼±ï¼Œå¥½ä¸»æ„å°±åƒç«ï¼Œå¯ä»¥å¼•é¢†è¿™ä¸ªä¸–ç•Œã€‚&lt;/p&gt;
&lt;p&gt;ä¸åˆ«äººå…±äº‹ï¼Œæ¿€åŠ±ä»–ä»¬å˜å¾—æ›´å‡ºè‰²ï¼ŒåŒæ—¶å¯ä»¥æå‡å›¢é˜Ÿçš„æ•´ä½“å®åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;æˆä¸ºæŒ‡å¯¼è€…ï¼Œå¹¶ä¸æ„å‘³ç€è¦æ‰‹æŠŠæ‰‹æ•™æˆå‘˜æ€ä¹ˆåšï¼Œä¹Ÿä¸æ˜¯åœ¨ç™½æ¿å‰è®²åº§ã€‚å¤šæ•°æ—¶å€™ï¼Œæˆä¸ºæŒ‡å¯¼è€…ï¼Œæ˜¯æŒ‡åœ¨å¸®åŠ©å›¢é˜Ÿæˆå‘˜æå‡æ°´å¹³çš„åŒæ—¶ä¹Ÿæé«˜è‡ªå·±ã€‚&lt;/p&gt;
&lt;p&gt;æˆä¸ºæŒ‡å¯¼è€…æ„å‘³ç€è¦åˆ†äº«ï¼Œè€Œä¸æ˜¯å›ºå®ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ€»æ˜¯è¢«ä¸€äº›æ‡’äºè‡ªå·±å¯»æ‰¾ç­”æ¡ˆçš„äººæ‰“æ‰°&amp;hellip;&lt;/li&gt;
&lt;li&gt;ä¸ºå›¢é˜Ÿæˆå‘˜åœ¨å¯»æ±‚å¸®åŠ©ä¹‹å‰ï¼Œè®¾å®šä¸€ä¸ªé™·å…¥æ—¶é—´ï¼Œ1 å°æ—¶åº”è¯¥ä¸é”™&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åš-code-review&#34;&gt;åš code review&lt;/h2&gt;
&lt;p&gt;ä»£ç åˆšåˆšå®Œæˆæ—¶ï¼Œæ˜¯å¯»æ‰¾é—®é¢˜çš„æœ€ä½³æ—¶æœºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸è¿›è¡Œæ€è€ƒçš„ code review æ²¡æœ‰ä»»ä½•ä»·å€¼&lt;/li&gt;
&lt;li&gt;ä»£ç å¤æ‚éœ€è¦ç§¯æè¯„ä¼°ä»£ç çš„è®¾è®¡å’Œæ¸…æ™°ç¨‹åºï¼Œå¸¦ç€é—®é¢˜å»å¤æŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;èµ°å‘æ•æ·&#34;&gt;èµ°å‘æ•æ·&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€ç¯èƒ½é™¤åƒå¹´æš—ï¼Œä¸€æ™ºèƒ½ç­ä¸‡å¹´æ„šã€‚  &amp;mdash;- æ…§èƒ½ï¼Œä¸­å›½ç¦…å®—ç¬¬å…­ä»£ç¥–å¸ˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1676551358871.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230216173903886&#34;
	
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>æ•æ·ä¹‹é“ (ä¸Š)</title>
        <link>https://blog.golang.space/p/%E6%95%8F%E6%8D%B7%E4%B9%8B%E9%81%93-%E4%B8%8A/</link>
        <pubDate>Thu, 19 Jan 2023 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/%E6%95%8F%E6%8D%B7%E4%B9%8B%E9%81%93-%E4%B8%8A/</guid>
        <description>&lt;h1 id=&#34;æ•æ·ä¹‹é“ä¸Š&#34;&gt;æ•æ·ä¹‹é“(ä¸Š)&lt;/h1&gt;
&lt;p&gt;&amp;lt;é«˜æ•ˆç¨‹åºå‘˜çš„ 45 ä¸ªä¹ æƒ¯&amp;gt; è¯»ä¹¦ç¬”è®°&lt;/p&gt;
&lt;h2 id=&#34;æ€åº¦å†³å®šä¸€åˆ‡&#34;&gt;æ€åº¦å†³å®šä¸€åˆ‡&lt;/h2&gt;
&lt;p&gt;å‘ç”Ÿé—®é¢˜åï¼Œæœ€é«˜çš„ä¼˜å…ˆçº§æ˜¯æ‰¾å‡ºç½ªé­ç¥¸é¦–å¯¹å—?&lt;/p&gt;
&lt;p&gt;è‚¯å®šçš„ç­”æ¡ˆæ˜¯: ä¼˜å…ˆè§£å†³é—®é¢˜!&lt;/p&gt;
&lt;p&gt;å¦‚æœè¯´å‡ºæ¥çš„è¯åªæ˜¯è®©äº‹æ€æ›´å¤æ‚ï¼Œæˆ–ä¸€å‘³åœ°æŠ±æ€¨ï¼Œæˆ–è€…ä¼¤å®³ä»–äººçš„æ„Ÿæƒ…ï¼Œæ— æ„ä¸­åœ¨ç»™é—®é¢˜ç«ä¸Šæµ‡æ²¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³æˆ–ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåšäº›ä»€ä¹ˆ?&lt;/p&gt;
&lt;p&gt;æ•æ·å¼€å‘å›¢é˜Ÿä¸­æ¯ä¸ªäººéƒ½åº”è¯¥æŠ±ç€è¿™æ ·çš„è§‚ç‚¹ï¼Œå’±ä»¬å¯ä»¥ä»è‡ªå·±åšèµ·ã€‚ä¾‹å¦‚ä¸€ä¸ªå¼€å‘è€…å¸¦ç€æŠ±æ€¨æˆ–é—®é¢˜æ¥è¿‡æ¥ï¼Œå’±ä»¬è¦äº†è§£å…·ä½“çš„é—®é¢˜ï¼Œè¯¢é—®ä»–éœ€è¦ä»€ä¹ˆæ ·çš„å¸®åŠ©ã€‚è¿™æ ·ä¸€ä¸ªç®€å•çš„è¡Œä¸ºè¡¨æ˜ç›®çš„æ˜¯è§£å†³é—®é¢˜ï¼Œè€Œä¸æ˜¯è¿½ç©¶è´£ä»»ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸åå’±ä»¬æ‰¾äººå¸®å¿™ï¼Œå´æ²¡äººç§¯æå“åº”ï¼Œé‚£ä¹ˆåº”è¯¥ä¸»åŠ¨å¼•å¯¼å¯¹è¯ï¼Œè§£é‡Šæ¸…æ¥šæƒ³è¦ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªé‡å¤§çš„é”™è¯¯åº”è¯¥è¢«å½“åšæ˜¯ä¸€æ¬¡å­¦ä¹ ï¼Œè€Œä¸æ˜¯æŒ‡è´£ä»–äººçš„æœºä¼šã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æŒ‡è´£ä¸èƒ½ä¿®å¤é—®é¢˜.&lt;/p&gt;
&lt;p&gt;Vlame doesn&amp;rsquo;t fix bugs.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ã€Œè¿™ä¸æ˜¯æˆ‘çš„é”™ã€è¿™å¥è¯ä¸å¯¹ï¼Œã€Œè¿™éƒ½æ˜¯ä½ /ä»–çš„é”™ã€è¿™å¥è¯æ›´ä¸å¯¹&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰çŠ¯è¿‡ä»»ä½•é”™è¯¯ï¼Œè¯´æ˜å¯èƒ½æ²¡æœ‰åŠªåŠ›å»å·¥ä½œ&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€ä¸ªå›¢é˜Ÿæˆå‘˜è¯¯è§£äº†éœ€æ±‚/API/ä¼šè®®å†³ç­–ï¼Œé‚£ä¹ˆï¼Œæ„å‘³ç€å…¶ä»–æˆå‘˜ä¹Ÿæœ‰ç›¸åŒçš„è¯¯è§£ï¼Œè¦ç¡®ä¿æ•´ä¸ªå›¢é˜Ÿå°½å¿«æ¶ˆé™¤è¯¯è§£ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæŸä¸ªå›¢é˜Ÿæˆå‘˜ä¸æ˜¯åœ¨å¸®åŠ©å›¢é˜Ÿè§£å†³é—®é¢˜çš„æ–¹å‘å‰è¿›ï¼Œåˆ™åº”è¯¥è¦æ±‚ä»–ç¦»å¼€å½“å‰é¡¹ç›®ä¸Šçš„ä¸»è¦å·¥ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ¬²é€Ÿåˆ™ä¸è¾¾&#34;&gt;æ¬²é€Ÿåˆ™ä¸è¾¾&lt;/h2&gt;
&lt;p&gt;æ‹™åŠ£çš„ç å†œä¼šä¸å‡æ€ç´¢çš„æ”¹å®Œä»£ç ï¼Œå¿«é€Ÿè½¬å‘ä¸‹ä¸€ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å“è¶Šçš„ç å†œä¼šæŒ–æ˜æ›´æ·±ä¸€å±‚ï¼Œå»ç†è§£è¿™ä¸ªå‡½æ•°çš„æ„ä¹‰ï¼Œæ€è€ƒä¿®æ”¹å‡½æ•°çš„å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;å¦åˆ™ï¼Œåœ¨ç»å¹´ç´¯æœˆçš„å±å±±ä¸­æ·»åŠ æ–°åŠŸèƒ½æˆ–ä¿®å¤ bugï¼Œéš¾é€ƒè„±å‘çš„å„è¿ã€‚&lt;/p&gt;
&lt;p&gt;åƒé‡Œä¹‹å ¤æºƒäºèšç©´ã€‚å¿«é€Ÿä¿®å¤çš„è¯±æƒ‘å¾ˆå®¹æ˜“ä»¤äººæŠŠæŒä¸ä½ï¼Œæ²»æ ‡ä¸æ²»æœ¬å•Š!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é˜²å¾®æœæ¸.&lt;/p&gt;
&lt;p&gt;Beware of land mines.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¾ˆå¯èƒ½åœ¨å…¬å¸é‡Œï¼Œæœ‰äººå‘Šè¯‰ä½ :&amp;ldquo;æ— è®ºå¦‚ä½•åƒä¸‡ä¸èƒ½ç¢°é‚£ä¸ªå‡½æ•°ï¼Œå†™ä»£ç é‚£å“¥ä»¬æ—©å°±ä¸åœ¨äº†ï¼Œæ²¡æœ‰äººèƒ½çœ‹æ‡‚ä»–çš„ä»£ç &amp;rdquo;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å»ºè®®&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸è¦å­¤ç«‹åœ°ç¼–ç .&lt;/p&gt;
&lt;p&gt;å›¢é˜Ÿæˆå‘˜åº”è¯¥èŠ±æ—¶é—´é˜…è¯»å…¶ä»–åŒæ—¶çš„ä»£ç ï¼Œç¡®ä¿ä»£ç æ˜¯å¯è¯»å¯ç†è§£çš„ã€‚&lt;/p&gt;
&lt;p&gt;Don&amp;rsquo;t code in isolation.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;å•å…ƒæµ‹è¯•.&lt;/p&gt;
&lt;p&gt;å•å…ƒæµ‹è¯•å¾ˆè‡ªç„¶å°±ä¼šå¸®åŠ©ä½ æŠŠä»£ç åˆ†å±‚ï¼Œè§£è€¦æˆå°çš„æ¨¡å—ã€‚&lt;/p&gt;
&lt;p&gt;Use unit tests.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¿…é¡»ç†è§£ä»£ç æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä½†ä¸ä¸€å®šè¦æˆä¸ºä¸“å®¶ï¼Œèƒ½å¤Ÿä½¿ç”¨å®ƒè¿›è¡Œæœ‰æ•ˆå·¥ä½œå³å¯ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ‰ä¸€å—ä»£ç å…¶ä»–äººå¾ˆéš¾çœ‹æ‡‚ï¼Œæ„å‘³ç€ä»»ä½•äººåŒ…æ‹¬åŸä½œè€…éƒ½å¾ˆéš¾ç»´æŠ¤å®ƒ&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰çš„å¤§å‹ç³»ç»Ÿéƒ½éå¸¸å¤æ‚ï¼Œæ²¡æœ‰ä¸€ä¸ªäººèƒ½å¤Ÿå®Œå…¨æ˜ç™½æ‰€æœ‰ä»£ç ã€‚å’±ä»¬é™¤äº†æ·±å…¥å¼€å‘çš„éƒ¨åˆ†ä»£ç ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä»æ›´é«˜å±‚é¢äº†è§£ç³»ç»Ÿæ¶æ„ï¼Œå„ä¸ªåŠŸèƒ½æ¨¡å—æ˜¯å¦‚ä½•äº¤äº’çš„ã€‚&lt;/li&gt;
&lt;li&gt;ä¸è¦æ€¥äºä¿®å¤ä¸€æ®µæ²¡èƒ½ç†è§£çš„ä»£ç ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¯¹äº‹ä¸å¯¹äºº&#34;&gt;å¯¹äº‹ä¸å¯¹äºº&lt;/h2&gt;
&lt;p&gt;&amp;ldquo;é‚£æ ·å¾ˆè ¢!&amp;rdquo; è¿™å¥è¯æƒ³è¡¨è¾¾è®¾è®¡ä¸Šçš„é—®é¢˜ï¼Œä½†æ— æ„ä¸­å´é‡ä¼¤äº†ä»–äººï¼Œæœ‰æ˜ç¤ºè®¾è®¡è€…å¾ˆè ¢ä¹‹æ„ã€‚&lt;/p&gt;
&lt;p&gt;æ›´æœ‰æ•ˆä¼˜é›…çš„æ–¹å¼åº”è¯¥æ˜¯: ã€Œæ„Ÿè°¢ï¼Œæˆ‘æƒ³çŸ¥é“ï¼Œå¦‚æœä¸¤ä¸ªç”¨æˆ·åŒæ—¶ç™»å½•ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µ?ã€&lt;/p&gt;
&lt;p&gt;é€šå¸¸å¯¹ä¸€ä¸ªæ˜æ˜¾é”™è¯¯æœ‰å“ªäº›ååº”?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦å®šä¸ªäººèƒ½åŠ›&lt;/li&gt;
&lt;li&gt;æŒ‡å‡ºç¼ºç‚¹ï¼Œå¦åˆ™å…¶è§‚ç‚¹&lt;/li&gt;
&lt;li&gt;é—®è¯¢å¹¶æå‡ºé¡¾è™‘&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¬¬ä¸‰ç§æ–¹æ³•ï¼Œæ²¡æœ‰è°´è´£ï¼Œæ²¡æœ‰æ‰¹åˆ¤ï¼Œç”±æ­¤ç”±æµ…å…¥æ·±çš„äº¤è°ˆï¼Œè€Œéé¢çº¢è€³èµ¤çš„äº‰è¾©ã€‚&lt;/p&gt;
&lt;p&gt;å°è¯•å¼•å¯¼æ€§çš„æå‡ºé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¯ä¸ªäººéƒ½æœ‰ä¸€äº›æå¥½çš„åˆ›æ–°æƒ³æ³•ï¼ŒåŒæ ·ä¹Ÿä¼šèŒç”Ÿä¸€äº›å¾ˆæ„šè ¢çš„æƒ³æ³•ã€‚å¥½çš„ä½œå“å’Œè®¾è®¡éƒ½éœ€è¦å¤§é‡çš„åˆ›é€ åŠ›å’Œæ´å¯ŸåŠ›ï¼Œåˆ†äº«å¹¶èåˆå„ç§ä¸åŒçš„æƒ³æ³•å’Œè§‚ç‚¹ï¼Œè¿œèƒœäºå•ä¸ªæƒ³æ³•ä¸ºé¡¹ç›®å¸¦æ¥çš„ä»·å€¼ã€‚&lt;/p&gt;
&lt;p&gt;é‡ç‚¹è¦æ”¾åœ¨è§£å†³é—®é¢˜ä¸Šï¼Œè€Œä¸æ˜¯æåŠ›è¯æ˜è°çš„ä¸»æ„æ›´å¥½ã€‚å›¢é˜Ÿä¸­ä¸€ä¸ªäººçš„æ™ºå•†é«˜æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå¦‚ä½•å¾ˆé¡½å›ºå¹¶ä¸”æ‹’ç»åˆä½œï¼Œé‚£å°±æ›´ç³Ÿç³•ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªäººéƒ½éƒ½ä¼šæœ‰å¥½çš„æƒ³æ³•ï¼Œä¹Ÿä¼šæœ‰ä¸å¯¹çš„æƒ³æ³•ï¼Œæ¯ä¸ªäººéƒ½éœ€è¦è‡ªç”±è¡¨è¾¾è§‚ç‚¹ã€‚ä½ ä¸éœ€è¦å¾ˆå‡ºè‰²æ‰èƒ½èµ·æ­¥ï¼Œä½†æ˜¯ä½ å¿…é¡»èµ·æ­¥æ‰èƒ½å˜å¾—å¾ˆå‡ºè‰²ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å…³äºå›¢é˜Ÿå†³ç­–çš„æœ‰æ•ˆæ–¹æ³•è®º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è®¾å®šæœ€ç»ˆæœŸé™ï¼Œä»¥é˜²æ­¢é™·å…¥æ— ä¼‘æ­¢çš„ç†è®ºäº‰è¾©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€†å‘æ€ç»´ï¼Œå…ˆç§¯æçœ‹åˆ°å®ƒçš„æ­£é¢ï¼Œç„¶ååŠªåŠ›ä»åé¢è®¤è¯†å®ƒã€‚ç›®çš„æ˜¯æ‰¾å‡ºä¼˜ç‚¹æœ€å¤šç¼ºç‚¹æœ€å°‘çš„æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è®¾ç«‹ä»²è£äººï¼Œé€‰ä¸€ä¸ªä»²è£äººä½œä¸ºæœ¬æ¬¡ä¼šè®®çš„å†³ç­–è€…ã€‚ä»²è£äººåº”è¯¥ä¸“æ³¨äºè°ƒåœï¼Œè€Œä¸æ˜¯å‘è¡¨è‡ªå·±çš„è§‚ç‚¹ï¼Œç†æƒ³æƒ…å†µä¸‹ä¸åº”åœ¨é¡¹ç›®ä¸­æœ‰æ—¢å¾—åˆ©ç›Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ”¯æŒå·²ç»åšå‡ºçš„å†³å®šï¼Œä¸€æ—¦æ–¹æ¡ˆè¢«ç¡®å®šï¼Œå›¢é˜Ÿæˆå‘˜å¿…é¡»é€šåŠ›åˆä½œã€‚ç›®æ ‡æ˜¯è®©é¡¹ç›®æˆåŠŸæ»¡è¶³ç”¨æˆ·éœ€æ±‚ï¼Œå®¢æˆ·å¹¶ä¸å…³å¿ƒè¿™æ˜¯è°çš„ä¸»æ„ï¼Œåªå…³å¿ƒäº§å“æ˜¯å¦ç¬¦åˆä»–ä»¬çš„æœŸæœ›ã€‚&lt;/p&gt;
&lt;p&gt;è®¾è®¡å……æ»¡äº†å¦¥åï¼Œå·¥ä½œè€…ä¸æ„Ÿæƒ…ç”¨äº‹æ˜¯éœ€è¦å…‹åˆ¶åŠ›çš„ï¼Œè‹¥å’±ä»¬èƒ½å±•ç°å‡ºæˆç†Ÿå¤§åº¦æ¥ï¼Œå¤§å®¶ä¸€å®šä¸ä¼šè§†è€Œä¸è§ï¼Œè¿™éœ€è¦æœ‰äººå¸¦å¤´ï¼Œèº«ä½“åŠ›è¡Œï¼Œå»æ„ŸæŸ“å¦ä¸€éƒ¨åˆ†äººã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å°½åŠ›è´¡çŒ®è‡ªå·±çš„å¥½æƒ³æ³•ï¼Œæ²¡æœ‰è¢«é‡‡çº³ä¹Ÿæ— éœ€è¿‡å¤šæƒ…ç»ªï¼Œä¸è¦å› ä¸ºè¡¨ç°è‡ªå·±çš„æƒ³æ³•è€Œç”»è›‡æ·»è¶³ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è„±ç¦»å®é™…çš„åæ–¹è§‚ç‚¹ä¼šä½¿äº‰è®ºå˜å‘³ï¼Œä½ å¾ˆå®¹æ˜“æå‡ºä¸€å †ä¸å¤ªå¯èƒ½å‘ç”Ÿçš„æƒ…å½¢å»æ‰¹é©³å®ƒï¼Œè¿™æ—¶éœ€è¦æ‰ªå¿ƒè‡ªé—®: ç±»å‹é—®é¢˜ä»¥å‰å‘ç”Ÿè¿‡å—? æ˜¯å¦ç»å¸¸å‘ç”Ÿå‘¢?&lt;/p&gt;
&lt;p&gt;ã€Œæˆ‘ä»¬ä¸èƒ½é‡‡ç”¨è¿™ä¸ªæ–¹æ¡ˆï¼Œä¸‡ä¸€æ•°æ®åº“å‚å•†å€’é—­.ã€ã€Œç”²æ–¹ç»ä¸å¯¹æ¥æ”¶è¿™ä¸ªæ–¹æ¡ˆã€ï¼Œä¸èƒ½å‡­ç©ºæƒ³è±¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ’é™¤ä¸‡èƒ½å¥‹å‹‡å‰è¿›&#34;&gt;æ’é™¤ä¸‡èƒ½ï¼Œå¥‹å‹‡å‰è¿›&lt;/h2&gt;
&lt;p&gt;è°å»ç»™çŒ«ç³»é“ƒé“›?&lt;/p&gt;
&lt;p&gt;è€é¼ ä»¬æ‰“ç®—åœ¨çŒ«çš„è„–å­ä¸Šç³»ä¸€ä¸ªé“ƒé”€ï¼Œè¿™æ ·çŒ«å·¡é€»é è¿‘çš„æ—¶å€™ï¼Œå°±èƒ½é¢„å…ˆå¾—åˆ°è­¦æŠ¥ã€‚æ¯åªè€é¼ éƒ½ç‚¹å¤´ï¼Œè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªç»å¦™çš„æƒ³æ³•ã€‚è¿™æ—¶ä¸€åªå¹´è€çš„è€é¼ é—®é“ï¼šâ€œé‚£ä¹ˆï¼Œè°æ„¿æ„æŒºèº«è€Œå‡ºå»ç³»é“ƒé“›å‘¢ï¼Ÿâ€æ¯«æ— ç–‘é—®ï¼Œæ²¡æœ‰ä¸€åªè€é¼ ç«™å‡ºæ¥ã€‚å½“ç„¶ï¼Œè®¡åˆ’ä¹Ÿå°±è¿™æ ·æ³¡æ±¤äº†ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰æ—¶ï¼Œç»å¦™çš„è®¡åˆ’ä¼šå› ä¸ºå‹‡æ°”ä¸è¶³è€Œæœ€ç»ˆå¤±è´¥ã€‚å°½ç®¡å‰æ–¹å¾ˆå±é™©â€”ä¸ç®¡æ˜¯çœŸçš„é±¼é›·æˆ–è€…åªæ˜¯ä¸€ä¸ªæ¯”å–»â€”â€”ä½ å¿…é¡»æœ‰å‹‡æ°”å‘å‰å†²é”‹ï¼Œåšä½ è®¤ä¸ºå¯¹çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;å‡å¦‚è¦ä¿®å¤å…¶ä»–äººç¼–å†™çš„ä»£ç ï¼Œå¾ˆè„ä¹±ï¼Œå¾ˆéš¾ç†è§£ï¼Œè¿™æ—¶æ€ä¹ˆåŠ?&lt;/p&gt;
&lt;p&gt;ä¹Ÿè®¸ä¼šè·³èµ·æ¥å‘Šè¯‰å‘¨å›´äººï¼Œä»£ç æ˜¯å¤šä¹ˆç³Ÿç³•ï¼Œä½†é‚£åªæ˜¯æŠ±æ€¨å’Œå‘æ³„ï¼Œå¹¶ä¸èƒ½è§£å†³é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸åï¼Œå’±ä»¬åº”è¯¥é‡å†™è¿™äº›ä»£ç ï¼Œå¹¶æ¯”è¾ƒé‡å†™å‰åçš„ä¼˜ç¼ºç‚¹ï¼ŒåŠ¨æ‰‹è¯æ˜æ˜¯æœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®¾è®¡æˆ–ä»£ç ä¸­å‡ºç°äº†å¥‡æ€ªçš„é—®é¢˜ï¼ŒèŠ±æ—¶é—´å»ç†è§£ä¸ºä»€ä¹ˆï¼Œå¦‚æœæ¸…æ™°æ˜æœ—éœ€è¦é‡æ„ä»£ç å°±å»åšã€‚ä½†å¦‚æœæ²¡æœ‰é©¬ä¸Šç†è§£é‚£æ®µä»£ç ï¼Œä¸è¦è½»æ˜“åœ°å¦å®šå’Œé‡å†™å®ƒä»¬ï¼Œé‚£ä¸æ˜¯å‹‡æ°”æ˜¯é²è½ã€‚&lt;/li&gt;
&lt;li&gt;ã€Œæ›´æ¸…æ™°çš„ä»£ç ã€æ˜¯æ— æ³•æ‰“åŠ¨ç”Ÿæ„äººçš„ï¼ŒèŠ‚çº¦èµ„é‡‘ï¼Œè·å¾—æ›´å¥½çš„æŠ•èµ„å›æŠ¥ç­‰ä¼šè®©è®ºç‚¹æ›´æœ‰è¯´æœåŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å­¦æ— æ­¢å¢ƒ&#34;&gt;å­¦æ— æ­¢å¢ƒ&lt;/h2&gt;
&lt;p&gt;é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ã€‚&lt;/p&gt;
&lt;p&gt;è®¸å¤šæ–°æŠ€æœ¯éƒ½åŸºäºç°æœ‰çš„æŠ€æœ¯å’Œæ€æƒ³ï¼Œå®ƒä»¬ä¼šåŠ å…¥ä¸€äº›æ–°çš„ä¸œè¥¿ï¼Œè¿™äº›æ–°ä¸œè¥¿æ˜¯é€æ­¥åŠ çš„é‡ï¼Œå¦‚æœè·Ÿè¸ªæŠ€æœ¯å˜åŒ–ï¼Œé‚£ä¹ˆå­¦ä¹ è¿™äº›æ–°ä¸œè¥¿å°±æ˜¯å¢é‡å˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æ•æ·çš„æ ¹æœ¬ä¹‹ä¸€æ˜¯æ‹¥æŠ±å˜åŒ–ï¼Œæ›¾ç»éå¸¸æœ‰ç”¨çš„ä¸œè¥¿å¾€å¾€ä¼šé è¾¹ç«™ï¼Œè¿˜ä¼šé™ä½æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å­¦ä¹ æ–°çš„ä¸œè¥¿ï¼Œè¦ä¸¢å¼ƒé˜»æ­¢ä½ å‰è¿›çš„æ—§ä¹ æƒ¯ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä½•æ‰èƒ½è·Ÿä¸ŠæŠ€æœ¯å˜åŒ–çš„æ­¥ä¼å‘¢?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿­ä»£å’Œå¢é‡å¼çš„å­¦ä¹ ï¼Œæ¯å¤©è®¡åˆ’ç”¨ä¸€ç‚¹æ—¶é—´æ¥å­¦ä¹ æ–°æŠ€æœ¯ã€‚å¬åˆ°ä¸ç†Ÿæ‚‰çš„æœ¯è¯­æˆ–çŸ­è¯­ï¼Œè®°å½•ä¸‹æ¥ï¼Œåœ¨è®¡åˆ’æ—¶é—´æ·±å…¥ç ”ç©¶ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡é‚®ä»¶/æŠ€æœ¯åšå®¢/ç¤¾åŒºäº†è§£è¡Œæƒ…&lt;/li&gt;
&lt;li&gt;é˜…è¯»&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½ ä¸å¯èƒ½ç²¾é€šæ¯ä¸€é¡¹æŠ€æœ¯ï¼Œæ²¡æœ‰å¿…è¦å»åšè¿™æ ·çš„å°è¯•ï¼Œåªè¦åœ¨æŸäº›æ–¹é¢æˆä¸ºä¸“å®¶ï¼Œå°±èƒ½ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œå¾ˆå®¹æ˜“æˆä¸ºæ–°é¢†åŸŸçš„ä¸“å®¶ã€‚&lt;/li&gt;
&lt;li&gt;ä½ è¦æ˜ç™½ä¸ºä»€ä¹ˆéœ€è¦è¿™é¡¹æ–°æŠ€æœ¯ï¼Œå®ƒè¯•å›¾è§£å†³ä»€ä¹ˆæ ·çš„é—®é¢˜?&lt;/li&gt;
&lt;li&gt;é¿å…ä¸€æ—¶å†²åŠ¨çš„æƒ…å†µä¸‹ï¼Œåªæ˜¯å› ä¸ºæƒ³å­¦ä¹ è€Œå°†åº”ç”¨åˆ‡æ¢åˆ°æ–°çš„æŠ€æœ¯ã€‚åœ¨å†³ç­–æ—¶ï¼Œå¿…é¡»è¯„ä¼°æ–°æŠ€æœ¯çš„ä¼˜åŠ¿ï¼Œå¼€å‘ä¸€ä¸ªå°çš„åŸå‹ç³»ç»Ÿæ˜¯å¯¹ä»˜æŠ€æœ¯ç‹‚çƒ­è€…çš„ä¸€å‰‚è‰¯è¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ‰“ç ´ç ‚é”…é—®åˆ°åº•&#34;&gt;æ‰“ç ´ç ‚é”…é—®åˆ°åº•&lt;/h2&gt;
&lt;p&gt;åœ¨è®¡ç®—æœºä¸–ç•Œï¼Œå¾ˆå¤šé—®é¢˜ä¼šå½±å“åº”ç”¨ï¼Œä¸ºäº†è§£å†³é—®é¢˜ï¼Œéœ€è¦çŸ¥é“è®¸å¤šå½±å“çš„å› ç´ ã€‚å½“æ‰¾äººè¯¢é—®ä»»ä½•ç›¸å…³é—®é¢˜æ—¶ï¼Œè®©ä»–ä»¬è€å¿ƒå›ç­”ï¼Œè¿™æ˜¯ä½ çš„èŒè´£ã€‚&lt;/p&gt;
&lt;p&gt;ä½ çš„é—®é¢˜ç”šè‡³ä¼šå¸®åŠ©ä»–ä»¬ç†æ¸…æ€è·¯ï¼Œä»ä¸€ä¸ªæ–°äººçš„è§’åº¦æå‡ºçš„é—®é¢˜ï¼Œç»™ä»–ä»¬æä¾›äº†ä¸€ä¸ªæ–°çš„è§†è§’ï¼Œä¹Ÿè®¸å°±å¸®åŠ©ä»–ä»¬è§£å†³äº†ä¸€ç›´ä»¤äººå›°æ‰°çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ã€Œå“å‘€ï¼Œåªè¦æ¯å‘¨é‡å¯ä¸€æ¬¡ç³»ç»Ÿï¼Œå°±æ²¡é—®é¢˜äº†ã€&lt;/p&gt;
&lt;p&gt;ã€Œä½ å¿…é¡»ä¾æ¬¡æ‰§è¡Œ 3 æ¬¡æ„å»ºæ‰èƒ½å®Œæˆæ„å»ºã€&lt;/p&gt;
&lt;p&gt;ã€Œæˆ‘ä»¬çš„ç”¨æˆ·æ ¹æœ¬ä¸æƒ³è¦é‚£ä¸ªåŠŸèƒ½ã€&lt;/p&gt;
&lt;p&gt;çœŸçš„å—? ä¸ºä»€ä¹ˆå‘€?  ä¸èƒ½åªæ»¡è¶³äºåˆ«äººå‘Šè¯‰ä½ çš„è¡¨é¢ç°è±¡ï¼Œè¦ä¸åœåœ°æé—®ç›´åˆ°ä½ æ˜ç™½é—®é¢˜çš„æ ¹æºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å’±ä»¬å¯èƒ½è·‘é¢˜ï¼Œé—®ä¸€äº›ä¸ä¸»é¢˜æ— å…³çš„é—®é¢˜ï¼Œè¦é—®åˆ°ç‚¹å­ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;å½“é—®ä¸ºä»€ä¹ˆçš„æ—¶å€™ï¼Œä¹Ÿè®¸ä¼šè¢«åé—®ï¼Œã€Œä¸ºä»€ä¹ˆä½ é—®è¿™ä¸ªé—®é¢˜ã€ï¼Œåœ¨æé—®ä¹‹å‰ï¼Œæƒ³å¥½æé—®çš„ç†ç”±ï¼Œä¹Ÿè®¸æœ‰åŠ©äºé—®å‡ºæ°å½“çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;ã€Œè¿™ä¸ªï¼Œæˆ‘ä¸çŸ¥é“ã€æ˜¯ä¸€ä¸ªå¥½çš„èµ·ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æŠŠæ¡å¼€å‘èŠ‚å¥&#34;&gt;æŠŠæ¡å¼€å‘èŠ‚å¥&lt;/h2&gt;
&lt;p&gt;åœ¨è®¸å¤šä¸æˆåŠŸçš„é¡¹ç›®ä¸­ï¼ŒåŸºæœ¬éƒ½æ˜¯éšæ„å®‰æ’å·¥ä½œè®¡åˆ’ï¼Œé‚£æ ·éšæœºå®‰æ’å¾ˆéš¾å¤„ç†ï¼Œæ ¹æœ¬ä¸çŸ¥é“æ˜å¤©å°†ä¼šå‘ç”Ÿä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¯å¤©ç»“æŸçš„æ—¶å€™ï¼Œæµ‹è¯•ä»£ç ï¼Œæäº¤ä»£ç ï¼Œæ²¡æœ‰æ®‹ç•™çš„ä»£ç &lt;/li&gt;
&lt;li&gt;ä¸è¦æå¾—ç»å¸¸åŠ ç­&lt;/li&gt;
&lt;li&gt;å¦‚æœå¼€å‘èŠ‚å¥è¿‡äºå¯†é›†ï¼Œä¼šç²¾ç–²åŠ›ç«­&lt;/li&gt;
&lt;li&gt;æœ‰è§„å¾‹çš„å¼€å‘èŠ‚å¥ä¼šæš´éœ²å¾ˆå¤šé—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;äº¤ä»˜ç”¨æˆ·æƒ³è¦çš„è½¯ä»¶&#34;&gt;äº¤ä»˜ç”¨æˆ·æƒ³è¦çš„è½¯ä»¶&lt;/h2&gt;
&lt;p&gt;è®©å®¢æˆ·åšå†³å®šã€‚&lt;/p&gt;
&lt;p&gt;å¼€å‘è€…èƒ½åšçš„ä¸€ä¸ªæœ€é‡è¦çš„å†³å®šå°±æ˜¯ï¼Œåˆ¤æ–­å“ªäº›æ˜¯è‡ªå·±å†³å®šä¸äº†çš„ã€‚&lt;/p&gt;
&lt;p&gt;åº”è¯¥è®©ä¸šä¸»åšå†³å®šï¼Œä½ ä¸éœ€è¦è‡ªå·±ç»™ä¸šåŠ¡ä¸Šçš„å…³é”®é—®é¢˜åšå†³å®šã€‚æ¯•ç«Ÿï¼Œé‚£ä¸æ˜¯ä½ çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®°å½•å®¢æˆ·åšå‡ºçš„å†³å®šï¼Œå¹¶æ³¨æ˜åŸå› ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´&lt;/li&gt;
&lt;li&gt;ä¸è¦ç”¨ä½çº§åˆ«å’Œæ²¡æœ‰ä»·å€¼çš„é—®é¢˜æ‰“æ‰°ç¹å¿™çš„ä¸šåŠ¡äººå‘˜&lt;/li&gt;
&lt;li&gt;ä¸è¦å‡è®¾ä½çº§åˆ«çš„é—®é¢˜ä¸ä¼šå½±å“ä»–ä»¬çš„ä¸šåŠ¡&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸šåŠ¡è´Ÿè´£äººå›ç­”æˆ‘ä¸çŸ¥é“ï¼Œå°½ä½ æ‰€èƒ½æä¾›å»ºè®®&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¿æŒå¯ä»¥å‘å¸ƒ&#34;&gt;ä¿æŒå¯ä»¥å‘å¸ƒ&lt;/h2&gt;
&lt;p&gt;åœ¨å›¢é˜Ÿå·¥ä½œï¼Œä¿®æ”¹ä¸€äº›ä¸œè¥¿çš„æ—¶å€™å¿…é¡»å¾ˆè°¨æ…ï¼Œæ—¶åˆ»è­¦æƒ•ï¼Œæ¯æ¬¡æ”¹åŠ¨éƒ½ä¼šå½±å“ç³»ç»Ÿçš„çŠ¶æ€å’Œæ•´ä¸ªå›¢é˜Ÿçš„å·¥ä½œæ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨åŠå…¬å®¤ä¸èƒ½å®¹å¿ä»»ä½•äººä¹±ä¸¢åƒåœ¾ï¼Œä¸ºä»€ä¹ˆå°±å¯ä»¥å®¹å¿ä¸€äº›äººç»™é¡¹ç›®å¸¦æ¥åƒåœ¾ä»£ç å‘¢?&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å·¥ä½œæµç¨‹ï¼Œå¯ä»¥é˜²æ­¢ä½ æäº¤ç ´åç³»ç»Ÿçš„ä»£ç ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æœ¬åœ°è¿è¡Œæµ‹è¯•&lt;/li&gt;
&lt;li&gt;æ£€å‡ºæœ€æ–°çš„ä»£ç  git pull&lt;/li&gt;
&lt;li&gt;æäº¤ä»£ç &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ææ—©é›†æˆé¢‘ç¹é›†æˆ&#34;&gt;ææ—©é›†æˆï¼Œé¢‘ç¹é›†æˆ&lt;/h2&gt;
&lt;p&gt;ç»ä¸è¦åšå¤§çˆ†ç‚¸å¼çš„é›†æˆã€‚è¶Šæ—©è§£å†³å®ƒä»¬ï¼Œå·¥ä½œé‡å°±è¶Šå°ã€‚å¦‚æœæ¨è¿Ÿé›†æˆçš„æ—¶é—´ï¼Œè§£å†³è¿™äº›é—®é¢˜å°±ä¼šå˜å¾—å¾ˆéš¾ï¼Œéœ€è¦å¤§é‡å’Œå¤§èŒƒå›´åœ°ä¿®æ”¹ä»£ç ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å›ºå®šçš„ä»·æ ¼å°±æ˜¯ä¿è¯è¦èƒŒå›æ‰¿è¯º&#34;&gt;å›ºå®šçš„ä»·æ ¼å°±æ˜¯ä¿è¯è¦èƒŒå›æ‰¿è¯º&lt;/h2&gt;
&lt;p&gt;è½¯ä»¶é¡¹ç›®å¤©ç”Ÿå°±æ˜¯å˜åŒ–æ— å¸¸çš„ï¼Œå¦‚æœè¦æå‰ç»™å‡ºä¸€ä¸ªå›ºå®šçš„å¼€å‘æ—¶é—´ï¼Œå°±å‡ ä¹è‚¯å®šä¸èƒ½éµå®ˆå¼€å‘ä¸Šçš„æ‰¿è¯ºã€‚&lt;/p&gt;
&lt;p&gt;é‚£å¦‚ä½•åšåˆ°æ›´ç²¾ç¡®çš„è¯„ä¼°å‘¢? å¯ä»¥è¯•è¯•è¿™æ ·çš„æ–¹æ³•:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸»åŠ¨æè®®å…ˆæ„å»ºç³»ç»Ÿæœ€åˆï¼Œæœ‰ç”¨çš„éƒ¨åˆ†ï¼Œè¿™æ—¶å€™ä¸æ˜¯è¦å®Œæˆæ‰€æœ‰çš„åŠŸèƒ½ï¼Œè€Œæ˜¯è¶³å¤Ÿä¸€æ¬¡äº¤ä»˜ï¼Œå¹¶èƒ½è®©ç”¨æˆ·çœŸæ­£ä½¿ç”¨ï¼Œé€šå¸¸åœ¨ 6~8 å‘¨ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸€æ¬¡è¿­ä»£ç»“æŸï¼Œå®¢æˆ·æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œå¯ä»¥æ–°å¢åŠŸèƒ½ç»§ç»­ä¸‹ä¸€ä¸ªäº¤ä»˜ï¼Œè¦ä¹ˆå–æ¶ˆåˆåŒï¼Œä»…éœ€æ”¯ä»˜ç¬¬ä¸€ä¸ªè¿­ä»£çš„è´¹ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚ä½•ç»§ç»­å‰è¿›ï¼Œè¿™æ—¶æ ¹æ®æå‡ºçš„å¢é‡åŠŸèƒ½ï¼Œåº”è¯¥å°±å¯ä»¥å¾ˆå¥½é¢„æµ‹ä¸‹ä¸€ä¸ªè¿­ä»£å·¥ä½œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ•æ·åé¦ˆ&#34;&gt;æ•æ·åé¦ˆ&lt;/h2&gt;
&lt;p&gt;ç¼–å†™èƒ½äº§ç”Ÿåé¦ˆçš„ä»£ç ï¼Œé€šè¿‡å•å…ƒæµ‹è¯•æ¥è·å–åé¦ˆã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¡®ä¿æµ‹è¯•æ˜¯å¯é‡å¤çš„ï¼Œä½¿ç”¨å½“å‰æ—¶é—´/æœºå™¨å›ºå®š IP ç­‰éƒ½æ˜¯ä½¿å…¶ä¾èµ–è¿è¡Œæ—¶çš„æœºå™¨&lt;/li&gt;
&lt;li&gt;æµ‹è¯•è¾¹ç•Œæ¡ä»¶ï¼Œæ¯”å¦‚æ—¥æœŸ 11:59:59/0:00:00ï¼Œæ¯”å¦‚æœˆä»½ 0 / 13 / -1&lt;/li&gt;
&lt;li&gt;ä¸è¦æ”¾è¿‡ä»»ä½•å¤±è´¥çš„æµ‹è¯•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€æ—¦å•å…ƒæµ‹è¯•åˆ°ä½ï¼Œé‡‡ç”¨è¿™æ ·çš„å›å½’æµ‹è¯•ï¼Œå°±å¯ä»¥éšæ„é‡æ„ä»£ç ã€‚å•å…ƒæµ‹è¯•ä¼šç¡®ä¿ä½ ä¸ä¼šæ„å¤–åœ°ç ´åä»»ä½•åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä»ç„¶åœ¨å¯»æ‰¾å¼€å§‹å•å…ƒæµ‹è¯•çš„ç†ç”±ï¼Œä¸‹é¢æœ‰å¾ˆå¤š:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•å…ƒæµ‹è¯•èƒ½åŠæ—¶æä¾›åé¦ˆ&lt;/li&gt;
&lt;li&gt;å•å…ƒæµ‹è¯•è®©ä½ çš„ä»£ç æ›´ä½³å¥å£®&lt;/li&gt;
&lt;li&gt;å•å…ƒæµ‹è¯•æ˜¯æœ‰ç”¨çš„è®¾è®¡å·¥å…·&lt;/li&gt;
&lt;li&gt;å•å…ƒæµ‹è¯•æ˜¯è®©ä½ è‡ªä¿¡çš„åå°&lt;/li&gt;
&lt;li&gt;å•å…ƒæµ‹è¯•æ˜¯è§£å†³é—®é¢˜æ—¶çš„æ¢æµ‹å™¨&lt;/li&gt;
&lt;li&gt;å•å…ƒæµ‹è¯•æ˜¯å¯ä¿¡çš„æ–‡æ¡£&lt;/li&gt;
&lt;li&gt;å•å…ƒæµ‹è¯•æ˜¯å­¦ä¹ å·¥å…·&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å…ˆç”¨å®ƒå†å®ç°å®ƒ&#34;&gt;å…ˆç”¨å®ƒå†å®ç°å®ƒ&lt;/h2&gt;
&lt;p&gt;åœ¨è¯´æœä»–äººä½¿ç”¨å®ƒä¹‹å‰ï¼Œå…ˆå¾—è®©è‡ªå·±åˆ‡å®çš„ä½¿ç”¨äº§å“ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆå†™æµ‹è¯•ï¼Œä½ å°±ä¼šç«™åœ¨ä»£ç ç”¨æˆ·çš„è§’åº¦æ¥æ€è€ƒï¼Œè€Œä¸ä»…ä»…æ˜¯å•çº¯çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä½ ä¼šå‘ç°å› ä¸ºä½ è‡ªå·±è¦ä½¿ç”¨å®ƒä»¬ï¼Œæ‰€ä»¥èƒ½è®¾è®¡ä¸€ä¸ªæ›´æœ‰ç”¨ï¼Œæ›´ä¸€è‡´çš„æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆå†™æµ‹è¯•æœ‰åŠ©äºæ¶ˆé™¤å¤æ‚çš„è®¾è®¡ï¼Œè®©ä½ å¯ä»¥ä¸“æ³¨äºçœŸæ­£éœ€è¦å®Œæˆçš„å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸€ä¸ªç¼–ç¨‹ä¾‹å­ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ä¸¤ä¸ªäººç©çš„ã€Œäº•å­—æ——ã€ æ¸¸æˆ:&lt;/p&gt;
&lt;p&gt;å¼€å§‹ï¼Œä¼šæ€è€ƒå¦‚ä½•ä¸ºè¿™ä¸ªæ¸¸æˆåšä»£ç è®¾è®¡ï¼Œä¹Ÿè®¸ä¼šè€ƒè™‘åˆ°éœ€è¦è¿™äº›ç±»ï¼Œæ£‹ç›˜/è¡Œåˆ—/ç”¨æˆ·/è§„åˆ™/ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå†™æ£‹ç›˜çš„æµ‹è¯•ï¼Œç±»ä¼¼äºè¿™æ ·&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestBoard&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewBoard&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NoNil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;IsFalse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;GameOver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤æ—¶æ‰§è¡Œæµ‹è¯•åº”è¯¥æ˜¯å¤±è´¥çš„ï¼Œå› ä¸ºç»“æ„ä½“ board è¿˜ä¸å­˜åœ¨ï¼Œéœ€è¦å®ç°è¿™ä¸ªç»“æ„ä½“ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Board&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;GameOver&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewBoard&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Board&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Board&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤æ—¶å†æ‰§è¡Œæµ‹è¯•ï¼Œä»¥ä¿è¯æµ‹è¯•é€šè¿‡ï¼Œä¸é€šè¿‡è¯çš„ä¿®æ”¹ç›´åˆ°é€šè¿‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹ä¸€æ­¥ï¼Œå¿…é¡»å†³å®šè°å…ˆå¼€å§‹èµ°ç¬¬ä¸€æ­¥æ£‹ï¼Œéœ€è¦è®¾ç¬¬ä¸€ä¸ªæ¯”èµ›è€…ï¼Œå†™ä¸‹ç›¸å…³æµ‹è¯•&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestSetFirstPlayer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// test content
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ—¶ï¼Œæµ‹è¯•ä¼šè¿«ä½¿ä½ å†³å®šå¦‚ä½•åœ¨ä»£ç ä¸­è¡¨ç¤ºæ¯”èµ›è€…ï¼Œå¹¶åˆ†é…åˆ°æ£‹ç›˜ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å¯èƒ½æ˜¯è¿™æ ·çš„&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç©å®¶ mark ä½¿ç”¨ X&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;board.SetFirstPlayer&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;new Player&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Mark&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;#34;X&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½†çœŸçš„éœ€è¦ player è¿™ä¸ªç»“æ„ä½“å—? æˆ–è€…éœ€è¦ç©å®¶çš„åå­—å—? æ­¤æ—¶è¿˜æ²¡æœ‰å®ç° SetFirstPlayer æ–¹æ³•ï¼ŒåˆæœŸè®©æˆ‘ä»¬çš„æµ‹è¯•æ›´ç®€å•ä¸€äº›ï¼Œæ¯”å¦‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;board.SetFirstPlayer&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;X&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä¸ªç‰ˆæœ¬éšè—ç€é£é™©ï¼Œå¯ä»¥ä¼ é€’ä»»ä½•å­—æ¯ç»™ SetFirstPlayerï¼Œæ„å‘³ç€éœ€è¦æ·»åŠ ä»£ç æ¥æ£€æŸ¥å‚æ•°çš„æ­£ç¡®æ€§ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ï¼Œç”¨ä¸€ä¸ª bool æ¥è¡¨ç¤ºç¬¬ä¸€ä¸ªç©å®¶æ˜¯ O è¿˜æ˜¯ xã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚è¿™æ ·&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestSetFirstPlayer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;board&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;FirstPlayerPegIsX&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;IsTrue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;board&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;FirstPlayerPegIsX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬çš„æ€è€ƒæ˜¯ä» player ç±»å¼€å§‹ï¼Œæœ€åå®ç°åªç”¨äº†ç®€å•çš„å¸ƒå°”ç±»å‹å±æ€§ï¼Œæˆ‘ä»¬ä¸æ˜¯è¦æ‰”æ‰å¥½çš„è®¾è®¡ï¼Œä»…ä»…ç”¨å¤§é‡çš„å¸ƒå°”ç±»å‹æ¥ç¼–ç æ‰€æœ‰ä¸œè¥¿ï¼Œè€Œæ˜¯æˆåŠŸåœ°å®ç°ç‰¹å®šåŠŸèƒ½çš„æœ€ä½æˆæœ¬ã€‚ç¨‹åºå‘˜å¾ˆå®¹æ˜“èµ°å‘å¦ä¸€ä¸ªæç«¯ï¼Œä¸€äº›ä¸å¿…è¦è¿‡äºå¤æ‚çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;æ¶ˆé™¤è¿˜æ²¡æœ‰ç¼–å†™å¥½çš„ç±»ï¼Œè¿™ä¼šå¾ˆå®¹æ˜“ç®€åŒ–ä»£ç ï¼Œç›¸åï¼Œä¸€æ—¦å·²ç»ç¼–å†™äº†ä»£ç ï¼Œä¹Ÿè®¸ä¼šå¼ºè¿«è‡ªå·±ä¿ç•™è¿™äº›ä»£ç ï¼Œå¹¶ç»§ç»­ä½¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¥½çš„è®¾è®¡å¹¶ä¸æ„å‘³ç€éœ€è¦æ›´å¤šçš„ç±»&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ·»åŠ æ— ç”¨çš„ä»£ç æ€»æ˜¯ä¸å¥½çš„æƒ³æ³•ï¼Œä¸ç®¡ä»–ä»¬æ˜¯å¦çœŸçš„éœ€è¦ï¼ŒTDD æœ‰æœºä¼šè®©ä½ ç¼–å†™ä»£ç ä¹‹å‰ï¼Œå¯ä»¥æ·±æ€ç†Ÿè™‘å°†å¦‚ä½•ä½¿ç”¨å®ƒã€‚è¿™ä¼šè¿«ä½¿ä½ å»æ€è€ƒå®ƒçš„å¯ç”¨æ€§å’Œä¾¿åˆ©æ€§ï¼Œè®©ä½ çš„è®¾è®¡æ›´æ³¨é‡å®æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;è®¾è®¡å¹¶ä¸æ˜¯å¼€å§‹ç¼–ç çš„æ—¶å€™å°±ç»“æŸäº†ï¼Œéœ€è¦åœ¨äº§å“çš„ç”Ÿå‘½å‘¨æœŸä¸­æŒç»­æ·»åŠ æµ‹è¯•ï¼Œæ·»åŠ ä»£ç ï¼Œé‡æ–°è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­åº¸ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸è¦æŠŠæµ‹è¯•ä»£ç å’Œæäº¤ä»£ç ä¹‹å‰çš„æµ‹è¯•ç­‰åŒï¼Œå•å…ƒæµ‹è¯•å¯ä»¥ä¿è¯ä»£ç çš„å¥å£®æ€§ï¼Œæäº¤ä»£ç å‰çš„åŠŸèƒ½æµ‹è¯•å¯ä»¥ä¿è¯äº§å“çš„ç¨³å®šæ€§ã€‚&lt;/li&gt;
&lt;li&gt;ä»»ä½•ä¸€ä¸ªè®¾è®¡éƒ½å¯ä»¥è¢«æ”¹è¿›&lt;/li&gt;
&lt;li&gt;å•çº¯çš„å•å…ƒæµ‹è¯•æ— æ³•ä¿è¯å¥½çš„è®¾è®¡ï¼Œä½†ä»–ä»¬å›åˆ°è®¾è®¡æœ‰æ‰€å¸®åŠ©ï¼Œä½¿è®¾è®¡æ›´ä½³ç®€å•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¸åŒç¯å¢ƒå°±æœ‰ä¸åŒé—®é¢˜&#34;&gt;ä¸åŒç¯å¢ƒï¼Œå°±æœ‰ä¸åŒé—®é¢˜&lt;/h2&gt;
&lt;p&gt;ä½ çš„åº”ç”¨ç¨‹åºè¦åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼Œæˆ–è€…ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„ä¸åŒç‰ˆæœ¬ï¼Œå°±éœ€è¦æµ‹è¯•æ‰€æœ‰çš„æ“ä½œç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;ä¸åŒç¯å¢ƒå°±æœ‰ä¸åŒçš„é—®é¢˜ï¼Œä½¿ç”¨æŒç»­é›†æˆå·¥å…·ï¼Œåœ¨æ¯ä¸€ç§æ”¯æŒçš„å¹³å°å’Œç¯å¢ƒä¸­è¿è¡Œå•å…ƒæµ‹è¯•ã€‚è¦ç§¯æåœ°å¯»æ‰¾é—®é¢˜ï¼Œè€Œä¸æ˜¯ç­‰é—®é¢˜æ¥æ‰¾ä½ ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>JSON</title>
        <link>https://blog.golang.space/p/json/</link>
        <pubDate>Thu, 12 Jan 2023 16:11:45 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/json/</guid>
        <description>&lt;h1 id=&#34;json&#34;&gt;JSON&lt;/h1&gt;
&lt;h3 id=&#34;json-charset&#34;&gt;JSON charset&lt;/h3&gt;
&lt;p&gt;web å“åº”è¦æŒ‡å®š &lt;code&gt;Content-Type&lt;/code&gt;ï¼Œä½ å¯èƒ½è§è¿‡ &lt;code&gt;Content-Type: application/json; charset=utf-8&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;a class=&#34;link&#34; href=&#34;https://tools.ietf.org/html/rfc8259#section-8.1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;RFC&lt;/a&gt; ä¸­æŒ‡å‡º:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;JSON text exchanged between systems that are not part of a closed ecosystem MUST be
encoded using UTF-8.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é¢å‘å…¬ä¼—çš„åº”ç”¨ç¨‹åºå¿…é¡»å§‹ç»ˆé‡‡ç”¨ UTF-8 ç¼–ç ï¼Œæ‰€ä»¥ä¸éœ€è¦æ ‡æ³¨å­—ç¬¦é›†ï¼Œ&lt;code&gt;Content-Type: application/json&lt;/code&gt; å³å¯&lt;/p&gt;
&lt;h3 id=&#34;json-encode&#34;&gt;JSON encode&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1673425569748.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230111162609606&#34;
	
	
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;time.Time å€¼å°†ä¼šè¢«ç¼–ç ä¸º RFC 3339 æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚&lt;code&gt;&amp;quot;2020-11-08T06:27:59+01:00&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;[]byte åˆ‡ç‰‡å°†è¢«ç¼–ç ä¸º base64 å­—ç¬¦ä¸²&lt;/li&gt;
&lt;li&gt;æ— æ³•å¯¹ channel/function/complex è¿›è¡Œç¼–ç ï¼Œå¦‚æœè¿™æ ·åšï¼Œåœ¨è¿è¡Œæ—¶å°†ä¼šå¾—åˆ° &lt;code&gt;json.UnsupportedTypeError&lt;/code&gt;çš„é”™è¯¯&lt;/li&gt;
&lt;li&gt;ä»»æ„æŒ‡é’ˆéƒ½ç¼–ç ä¸ºæŒ‡å‘çš„å€¼&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœä½ æœ‰ä¸€ä¸ª &lt;code&gt;io.Writer&lt;/code&gt; ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;err := json.NewEncoder(w).Encode(data) &lt;/code&gt;ç›´æ¥å†™å…¥ã€‚&lt;/p&gt;
&lt;h3 id=&#34;jsonencoder-å’Œ-jsonmarshal-æ€§èƒ½å·®å¼‚&#34;&gt;&lt;code&gt;json.Encoder&lt;/code&gt; å’Œ &lt;code&gt;json.Marshal()&lt;/code&gt; æ€§èƒ½å·®å¼‚&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1673430820853.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230111175340730&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;json.Marshal()  æ¯” json.Encoder å¤šä¸€æ¬¡å †å†…å­˜åˆ†é…ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åµŒå¥—ç»“æ„ä½“åºåˆ—åŒ–ä¸ä¼š-omitempty&#34;&gt;åµŒå¥—ç»“æ„ä½“åºåˆ—åŒ–ä¸ä¼š omitempty&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Bar&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;,omitempty&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;,omitempty&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æ„ä½“ä¸ºå€¼ç±»å‹ï¼Œä¸å­˜åœ¨ nil çš„æƒ…å†µï¼Œæ‰€ä»¥ä¸ä¼š omitemptyã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœéœ€è¦çœç•¥ï¼Œå»ºè®®æ›¿æ¢æˆ pointerã€‚&lt;/p&gt;
&lt;h2 id=&#34;è½¬ä¹‰å­—ç¬¦&#34;&gt;è½¬ä¹‰å­—ç¬¦&lt;/h2&gt;
&lt;p&gt;å¦‚æœå­—ç¬¦ä¸²ä¸­åŒ…å« &lt;code&gt;&amp;lt;&amp;gt;&amp;amp;&lt;/code&gt; å­—ç¬¦ï¼Œå°†ä¼šè½¬ä¹‰æˆ unicodeï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢æŸäº› web æµè§ˆå™¨æ„å¤–è§£é‡Š JSON å“åº”ä¸º HTMLï¼Œå¦‚æœä¸éœ€è¦è½¬ä¹‰ï¼Œä½¿ç”¨ &lt;code&gt;json.Encoder&lt;/code&gt;  &lt;code&gt;SetEscapeHTML(false)&lt;/code&gt; æ‰§è¡Œç¼–ç ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è½¬ä¹‰å­—ç¬¦&lt;/th&gt;
&lt;th&gt;unicode&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt;&lt;/td&gt;
&lt;td&gt;\u003c&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;gt;&lt;/td&gt;
&lt;td&gt;\u003e&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;amp;&lt;/td&gt;
&lt;td&gt;\u0026&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;åˆ é™¤-float-å°æ•°ç‚¹æœ«å°¾çš„-0&#34;&gt;åˆ é™¤ float å°æ•°ç‚¹æœ«å°¾çš„ 0&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;123.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;456.100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;789.990&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¼–ç åå°†å¾—åˆ°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;123&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;456.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;789.99&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;é¢„ç¼–ç -json&#34;&gt;é¢„ç¼–ç  JSON&lt;/h3&gt;
&lt;p&gt;å¦‚æœä½ æœ‰ä¸€ä¸ªåŒ…å«é¢„ç¼–ç çš„ string æˆ–è€… []byteï¼Œä½¿ç”¨ JSON tag å°†ä¼šè¢«è½¬ä¹‰å¹¶ç¼–ç ä¸º json å­—ç¬¦ä¸²&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Person&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Person&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`{&amp;#34;name&amp;#34;: &amp;#34;Alice&amp;#34;, &amp;#34;age&amp;#34;: 21}`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¼–ç åå¾—åˆ°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Person&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{\&amp;#34;name\&amp;#34;: \&amp;#34;Alice\&amp;#34;, \&amp;#34;age\&amp;#34;: 21}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœæƒ³æ’å…¥ JSON è€Œé JSON å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;json.RawMessage&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Person&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RawMessage&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;Person&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RawMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;`{&amp;#34;name&amp;#34;: &amp;#34;Alice&amp;#34;, &amp;#34;age&amp;#34;: 21}`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¼–ç åå¾—åˆ°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Person&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:{&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Alice&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;age&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;json.RawMessage&lt;/code&gt; è¦ç¡®ä¿é¢„ç¼–ç çš„å€¼æ˜¯æœ‰æ•ˆçš„ JSONï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚å¦‚æœéœ€è¦åœ¨è¿è¡Œæ—¶æ£€æŸ¥ JSON  æ˜¯å¦æœ‰æ•ˆï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;json.Valid()&lt;/code&gt; å‡½æ•°&lt;/p&gt;
&lt;h3 id=&#34;marshaltext&#34;&gt;MarshalText&lt;/h3&gt;
&lt;p&gt;å¦‚æœç±»å‹æœ‰æ²¡æœ‰ &lt;code&gt;MarshalJSON()&lt;/code&gt; æ–¹æ³•ï¼Œä½†æ˜¯æœ‰ &lt;code&gt;MarshalText()&lt;/code&gt; æ–¹æ³•ï¼Œä»¥å®ç° &lt;code&gt; encoding.TextMarshaler&lt;/code&gt; æ¥å£ï¼Œä½¿ç”¨ JSON ç¼–ç å°†ä¼šæ˜¾ç¤º json å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;myFloat&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;myFloat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;MarshalText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%.2f&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;myFloat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;3.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;js&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Marshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;js&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®ƒå°†ä¼šæ‰“å°ç”± &lt;code&gt;MarshalText()&lt;/code&gt; å‡½æ•°è¿”å›çš„ JSON å­—ç¬¦ä¸²&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;0.33&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;marshaljson-çš„æ¥æ”¶å™¨&#34;&gt;MarshalJSON çš„æ¥æ”¶å™¨&lt;/h3&gt;
&lt;p&gt;å½“è‡ªå®šä¹‰ç±»å‹å®ç°äº† MarshalJSON()ï¼Œå¹¶ä½¿ç”¨ pointer æ¥æ”¶å™¨æ—¶ï¼Œä»…ä¼ é€’æŒ‡é’ˆæ—¶å‡½æ•°æœ‰æ•ˆã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å…³äºæ¥æ”¶å™¨çš„æŒ‡é’ˆä¸å€¼çš„è§„åˆ™æ˜¯:&lt;/p&gt;
&lt;p&gt;å€¼æ–¹æ³•å¯ä»¥ç”¨æŒ‡é’ˆæˆ–å€¼è°ƒç”¨ï¼Œä½†æŒ‡é’ˆæ–¹æ³•åªèƒ½åœ¨æŒ‡é’ˆä¸Šè°ƒç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt; myFloat float64
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// This has a pointer receiver.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;func &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;f *myFloat&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; MarshalJSON&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;([]&lt;/span&gt;byte, error&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt;byte&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;fmt.Sprintf&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%.2f&amp;#34;&lt;/span&gt;, *f&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;, nil
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;func main&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	f :&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; myFloat&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;1.0 / 3.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	// When encoding a value, the MarshalJSON method is used.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	// å¾—åˆ° 0.33
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	js, err :&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; json.Marshal&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;f&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; err !&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; nil &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		log.Fatal&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;err&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	fmt.Printf&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%s\n&amp;#34;&lt;/span&gt;, js&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	// When encoding a value, the MarshalJSON method is ignored.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	// å¾—åˆ°é»˜è®¤çš„ 0.3333333333333333
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	js, &lt;span class=&#34;nv&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; json.Marshal&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;f&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; err !&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; nil &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		log.Fatal&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;err&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	fmt.Printf&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%s&amp;#34;&lt;/span&gt;, js&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;éƒ¨åˆ†-json-è§£ç &#34;&gt;éƒ¨åˆ† JSON è§£ç &lt;/h3&gt;
&lt;p&gt;å¦‚æœä½ åªéœ€è¦å¤„ç† JSON ä¸­çš„ä¸€å°éƒ¨åˆ†&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Let&amp;#39;s say that the only thing we&amp;#39;re interested in is processing the &amp;#34;genres&amp;#34; array in 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// the following JSON object
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;js&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`{&amp;#34;title&amp;#34;: &amp;#34;Top Gun&amp;#34;, &amp;#34;genres&amp;#34;: [&amp;#34;action&amp;#34;, &amp;#34;romance&amp;#34;], &amp;#34;year&amp;#34;: 1986}`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Decode the JSON object to a map[string]json.RawMessage type. The json.RawMessage 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// values in the map will retain their original, un-decoded, JSON values.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RawMessage&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewDecoder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;js&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Decode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// We can then access the JSON &amp;#34;genres&amp;#34; value from the map and decode it as normal using 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// the json.Unmarshal() function.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;genres&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;genres&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;genres&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;genres: %v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;genres&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è§£ç åå¾—åˆ°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;genres: &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;action romance&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;è§£ç æˆä»»æ„ç±»å‹&#34;&gt;è§£ç æˆä»»æ„ç±»å‹&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/img-1673490129979.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230112102209838&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;è§£ç æˆä»»æ„ç±»å‹åœ¨ä»¥ä¸‹æƒ…å†µå¾ˆæœ‰ç”¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;äº‹å…ˆä¸çŸ¥é“è§£ç çš„æ˜¯ä»€ä¹ˆ&lt;/li&gt;
&lt;li&gt;éœ€è¦è§£ç åŒ…å«ä¸åŒç±»å‹çš„çš„ array/map&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ•°å­—è§£ç åˆ°ä»»æ„ç±»å‹æ—¶ï¼Œä¸º float64 ï¼Œå³ä½¿å®ƒæ˜¯æ•´æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæƒ³è·å¾—æ•´æ•°å½¢å¼(è€Œé float64)ï¼Œåº”è¯¥åœ¨ &lt;code&gt;json.Decoder&lt;/code&gt; å®ä¾‹ä½¿ç”¨ &lt;code&gt;UseNumber()&lt;/code&gt; æ–¹æ³•ï¼Œå°†ä¼šå¯¼è‡´è§£ç ä¸º &lt;code&gt;json.Number&lt;/code&gt; ç±»å‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;js&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`10`&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;any&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;dec&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewDecoder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;js&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;dec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;UseNumber&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// Call the UseNumber() method on the decoder before using it. 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Decode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Type assert the any value to a json.Number, and then call the Int64() method 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// to get the number as a Go int64.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;nInt64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Likewise, you can use the String() method to get the number as a Go string. 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;nString&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;type: %T; value: %v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;type: %T; value: %v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nInt64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nInt64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;type: %T; value: %v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;out:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;type: json.Number&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; value: &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;type: int64&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; value: &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;type: string&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; value: &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;struct-tag-æŒ‡ä»¤&#34;&gt;struct tag æŒ‡ä»¤&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŒ‡ä»¤&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;json:&amp;quot;-&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è§£ç æ—¶å¿½ç•¥( å±æ€§åé¦–å­—æ¯å°å†™ä¹Ÿå¯ä»¥å¿½ç•¥ )&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;json:&amp;quot;,omitempty&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è§£ç æ—¶ä¸ºé›¶å€¼åˆ™å¿½ç•¥&lt;/td&gt;
&lt;td&gt;åµŒå¥—ç»“æ„ä½“æ— æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;json:&amp;quot;,omitempty,string&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä»¥å­—ç¬¦ä¸²ç±»å‹ç¼–è§£ç &lt;/td&gt;
&lt;td&gt;é€‚ç”¨äºæ•°å­—/å¸ƒå°”/æ•°å­—æŒ‡é’ˆç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;è‡ªå®šä¹‰ç¼–ç &#34;&gt;è‡ªå®šä¹‰ç¼–ç &lt;/h3&gt;
&lt;p&gt;æ–¹æ³•ä¸€&lt;/p&gt;
&lt;p&gt;åœ¨ MarshalJSON ä¸­å®šä¹‰ä¸ªæ–°çš„ç»“æ„ä½“ï¼Œå¯¹å…¶ç¼–ç &lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// Note that there are no struct tags on the Movie struct itself. 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt; Movie struct &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  ID        int64 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  CreatedAt time.Time 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  Title     string 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  Year      int32 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  Runtime   int32 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  Genres    &lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt;string 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  Version   int32
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// Implement a MarshalJSON&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; method on the Movie struct, so that it satisfies the 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// json.Marshaler interface.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;func &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;m Movie&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; MarshalJSON&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;([]&lt;/span&gt;byte, error&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // Declare a variable to hold the custom runtime string &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;this will be the empty 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // string &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; by default&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  var runtime string
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // If the value of the Runtime field is not zero, &lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; the runtime variable to be a 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // string in the format &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;runtime&amp;gt; mins&amp;#34;&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; m.Runtime !&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;nv&#34;&gt;runtime&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; fmt.Sprintf&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%d mins&amp;#34;&lt;/span&gt;, m.Runtime&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // Create an anonymous struct to hold the data &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; JSON encoding. This has exactly 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // the same fields, types and tags as our Movie struct, except that the Runtime 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // field here is a string, instead of an int32. Also notice that we don&lt;span class=&#34;s1&#34;&gt;&amp;#39;t include 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  // a CreatedAt field at all (there&amp;#39;&lt;/span&gt;s no point including one, because we don&lt;span class=&#34;err&#34;&gt;&amp;#39;&lt;/span&gt;t want 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // it to appear in the JSON output&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  aux :&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; struct &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ID      int64    &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;json:&lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Title   string   &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;json:&lt;span class=&#34;s2&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Year    int32    &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;json:&lt;span class=&#34;s2&#34;&gt;&amp;#34;year,omitempty&amp;#34;&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Runtime string   &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;json:&lt;span class=&#34;s2&#34;&gt;&amp;#34;runtime,omitempty&amp;#34;&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt; // This is a string. 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Genres  &lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt;string &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;json:&lt;span class=&#34;s2&#34;&gt;&amp;#34;genres,omitempty&amp;#34;&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Version int32    &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;json:&lt;span class=&#34;s2&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;}{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    // Set the values &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; the anonymous struct.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ID:      m.ID,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Title:   m.Title,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Year:    m.Year,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Runtime: runtime, // Note that we assign the value from the runtime variable here. 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Genres:  m.Genres,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Version: m.Version, 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; json.Marshal&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;aux&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ–¹æ³•äºŒ&lt;/p&gt;
&lt;p&gt;åµŒå…¥åˆ«åï¼Œä¸ºç»“æ„ä½“è®¾ç½®åˆ«åï¼Œä»¥é¿å…åºåˆ—åŒ–æ­»å¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨ä¸€ä¸ªæ–°çš„ç»“æ„ä½“ï¼ŒåŒ¿ååµŒå¥—ä¸Šé¢çš„åˆ«åï¼Œå¹¶åœ¨æ–°ç»“æ„ä½“é‡Œè®¾ç½®åŒåå‚æ•°ä»¥è¦†ç›–ã€‚&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†å¤±å»ç¼–ç åçš„é¡ºåºï¼Œå¦‚æœä½ çš„åº”ç”¨åœºæ™¯éœ€è¦å›ºå®šé¡ºåºï¼Œå¦‚å¯¹ JSON æ±‚ MD5ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Notice that we use the - directive on the Runtime field, so that it never appears 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// in the JSON output.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Movie&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;ID&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kt&#34;&gt;int64&lt;/span&gt;     &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;id&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;CreatedAt&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Time&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;Title&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;title&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;Year&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;     &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;year,omitempty&amp;#34;`&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;Runtime&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;     &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;Genres&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;genres,omitempty&amp;#34;`&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;Version&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;     &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;version&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Movie&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;MarshalJSON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// Create a variable holding the custom runtime string, just like before. 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Runtime&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%d mins&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// Define a MovieAlias type which has the underlying type Movie. Due to the way that 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// Go handles type definitions (https://golang.org/ref/spec#Type_definitions) the 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// MovieAlias type will contain all the fields that our Movie struct has but,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// importantly, none of the methods. 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MovieAlias&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Movie&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// Embed the MovieAlias type inside the anonymous struct, along with a Runtime field 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// that has the type string and the necessary struct tags. It&amp;#39;s important that we 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// embed the MovieAlias type here, rather than the Movie type directly, to avoid
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// inheriting the MarshalJSON() method of the Movie type (which would result in an 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// infinite loop during encoding).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;aux&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MovieAlias&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Runtime&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;runtime,omitempty&amp;#34;`&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;MovieAlias&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;MovieAlias&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Marshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;aux&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;è§£ç ç±»å‹&#34;&gt;è§£ç ç±»å‹&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;JSON type&lt;/th&gt;
&lt;th&gt;Supported Go types&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;bool&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;number&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int*,uint*,float*,rune&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;array&lt;/td&gt;
&lt;td&gt;array,slice&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;object&lt;/td&gt;
&lt;td&gt;struct, map&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;json-é”™è¯¯åˆ†ç±»&#34;&gt;JSON é”™è¯¯åˆ†ç±»&lt;/h3&gt;
&lt;p&gt;å¯¹äºé¢å‘å…¬ä¼—çš„ APIï¼Œé”™è¯¯æ¶ˆæ¯æœ¬èº«å¹¶ä¸ç†æƒ³ã€‚æœ‰äº›ä»¤äººå›°æƒ‘ä¸”éš¾ä»¥ç†è§£ï¼Œæˆ–æš´éœ²äº†åº•å±‚ API ç»†èŠ‚ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;Decode æ–¹æ³•ï¼Œå¯èƒ½ä¼šè¿”å› 5 ç§ç±»å‹çš„é”™è¯¯&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Error types&lt;/th&gt;
&lt;th&gt;åŸå› &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;json.SyntaxError&lt;/td&gt;
&lt;td&gt;json è¯­æ³•å­˜åœ¨é—®é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;io.ErrUnexpectedEOF&lt;/td&gt;
&lt;td&gt;json è¯­æ³•å­˜åœ¨é—®é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;json.UnmarshalTypeError&lt;/td&gt;
&lt;td&gt;JSON å€¼ä¸é€‚ç”¨äºç›®æ ‡ Go ç±»å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;json.InvalidUnmarshalError&lt;/td&gt;
&lt;td&gt;è§£ç ç›®æ ‡æ— æ•ˆï¼Œé€šå¸¸å› ä¸ºå®ƒä¸æ˜¯æŒ‡é’ˆï¼Œè¿™å®é™…ä¸Šæ˜¯ç¨‹åºä»£ç çš„é—®é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;io.EOF&lt;/td&gt;
&lt;td&gt;json ä¸ºç©º&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;ååºåˆ—æ—¶æƒ³å¯¹éƒ¨åˆ†å­—æ®µä¸èµ‹å€¼&#34;&gt;ååºåˆ—æ—¶æƒ³å¯¹éƒ¨åˆ†å­—æ®µä¸èµ‹å€¼&lt;/h3&gt;
&lt;p&gt;å®¢æˆ·ç«¯ä¼ é€’çš„ json æ˜¯æ— æ³•æ§åˆ¶çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨ååºåˆ—åŒ–åå¯¹æŒ‡å®šå­—æ®µç½®é›¶ï¼Œä½†è¿™æ˜¾å¾—æœ‰ç‚¹ç¬¨æ‹™ï¼Œå¦‚æœç»“æ„ä½“å¢åŠ äº†å­—æ®µä½†å¿˜è®°ååºåˆ—åŒ–åç½®é›¶ï¼Œè¿™æ ·çš„å†™æ³•ä¼šç»™æœªæ¥ç•™ä¸‹æŠ€æœ¯æ ˆã€‚&lt;/p&gt;
&lt;p&gt;å»ºè®®æ–°å»ºä¸€ä¸ªç»“æ„ä½“ç”¨äºåºåˆ—åŒ–ï¼Œæ—¶å€™èµ‹å€¼ç»™æŒ‡å®šç»“æ„ä½“ã€‚å¦‚:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;User&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;Age&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;input&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`{&amp;#34;name&amp;#34;:&amp;#34;Nacy&amp;#34;}`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;UnmarshalJSON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 	&lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;æ­¤æ–‡ç« å†…å®¹ä¸º Let&amp;rsquo;s Go Further è¯»ä¹¦ç¬”è®°&lt;/p&gt;
</description>
        </item>
        <item>
        <title>&lt;Redis æ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜&gt;è¯»ä¹¦ç¬”è®°</title>
        <link>https://blog.golang.space/p/redis-%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%AE%9E%E6%88%98%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Sat, 22 Jan 2022 15:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/redis-%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%AE%9E%E6%88%98%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h1 id=&#34;redis-æ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜è¯»ä¹¦ç¬”è®°&#34;&gt;&amp;lt;Redis æ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜&amp;gt;è¯»ä¹¦ç¬”è®°&lt;/h1&gt;
&lt;h2 id=&#34;åŸºç¡€&#34;&gt;åŸºç¡€&lt;/h2&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œåº•å±‚æ•°æ®ç»“æ„ä¸€å…±æœ‰ 6 ç§ï¼Œåˆ†åˆ«æ˜¯ç®€å•åŠ¨æ€å­—ç¬¦ä¸²ã€åŒå‘é“¾è¡¨ã€å‹ç¼©åˆ—è¡¨ã€å“ˆå¸Œè¡¨ã€è·³è¡¨å’Œæ•´æ•°æ•°ç»„ã€‚å®ƒä»¬å’Œæ•°æ®ç±»å‹çš„å¯¹åº”å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653566560556.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å®ç°ä»é”®åˆ°å€¼çš„å¿«é€Ÿè®¿é—®ï¼ŒRedis ä½¿ç”¨äº†ä¸€ä¸ªå“ˆå¸Œè¡¨æ¥ä¿å­˜æ‰€æœ‰é”®å€¼å¯¹ã€‚&lt;/p&gt;
&lt;p&gt;å“ˆå¸Œè¡¨çš„æœ€å¤§å¥½å¤„å¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯è®©æˆ‘ä»¬å¯ä»¥ç”¨ O(1) çš„æ—¶é—´å¤æ‚åº¦æ¥å¿«é€ŸæŸ¥æ‰¾åˆ°é”®å€¼å¯¹&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653567032596.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆå“ˆå¸Œè¡¨æ“ä½œå˜æ…¢äº†ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å½“ä½ å¾€å“ˆå¸Œè¡¨ä¸­å†™å…¥æ›´å¤šæ•°æ®æ—¶ï¼Œå“ˆå¸Œå†²çªæ˜¯ä¸å¯é¿å…çš„é—®é¢˜ã€‚è¿™é‡Œçš„å“ˆå¸Œå†²çªï¼Œä¹Ÿå°±æ˜¯æŒ‡ï¼Œä¸¤ä¸ª key çš„å“ˆå¸Œå€¼å’Œå“ˆå¸Œæ¡¶è®¡ç®—å¯¹åº”å…³ç³»æ—¶ï¼Œæ­£å¥½è½åœ¨äº†åŒä¸€ä¸ªå“ˆå¸Œæ¡¶ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;Redis è§£å†³å“ˆå¸Œå†²çªçš„æ–¹å¼ï¼Œå°±æ˜¯é“¾å¼å“ˆå¸Œã€‚å°±æ˜¯æŒ‡åŒä¸€ä¸ªå“ˆå¸Œæ¡¶ä¸­çš„å¤šä¸ªå…ƒç´ ç”¨ä¸€ä¸ªé“¾è¡¨æ¥ä¿å­˜ï¼Œå®ƒä»¬ä¹‹é—´ä¾æ¬¡ç”¨æŒ‡é’ˆè¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;å“ˆå¸Œå†²çªé“¾ä¸Šçš„å…ƒç´ åªèƒ½é€šè¿‡æŒ‡é’ˆé€ä¸€æŸ¥æ‰¾å†æ“ä½œã€‚å¦‚æœå“ˆå¸Œè¡¨é‡Œå†™å…¥çš„æ•°æ®è¶Šæ¥è¶Šå¤šï¼Œå“ˆå¸Œå†²çªå¯èƒ½ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œè¿™å°±ä¼šå¯¼è‡´æŸäº›å“ˆå¸Œå†²çªé“¾è¿‡é•¿ï¼Œè¿›è€Œå¯¼è‡´è¿™ä¸ªé“¾ä¸Šçš„å…ƒç´ æŸ¥æ‰¾è€—æ—¶é•¿ï¼Œæ•ˆç‡é™ä½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653567220995.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äº String ç±»å‹æ¥è¯´ï¼Œæ‰¾åˆ°å“ˆå¸Œæ¡¶å°±èƒ½ç›´æ¥å¢åˆ æ”¹æŸ¥äº†ï¼Œæ‰€ä»¥ï¼Œå“ˆå¸Œè¡¨çš„ O(1) æ“ä½œå¤æ‚åº¦ä¹Ÿå°±æ˜¯å®ƒçš„å¤æ‚åº¦äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºé›†åˆç±»å‹æ¥è¯´ï¼Œå³ä½¿æ‰¾åˆ°å“ˆå¸Œæ¡¶äº†ï¼Œè¿˜è¦åœ¨é›†åˆä¸­å†è¿›ä¸€æ­¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653567373705.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å•å…ƒç´ æ“ä½œï¼Œæ˜¯æŒ‡æ¯ä¸€ç§é›†åˆç±»å‹å¯¹å•ä¸ªæ•°æ®å®ç°çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚ä¾‹å¦‚ï¼ŒHash ç±»å‹çš„ HGETã€HSET å’Œ HDELï¼ŒSet ç±»å‹çš„ SADDã€SREMã€SRANDMEMBER ç­‰ã€‚è¿™äº›æ“ä½œçš„å¤æ‚åº¦ç”±é›†åˆé‡‡ç”¨çš„æ•°æ®ç»“æ„å†³å®šï¼Œä¾‹å¦‚ï¼ŒHGETã€HSET å’Œ HDEL æ˜¯å¯¹å“ˆå¸Œè¡¨åšæ“ä½œï¼Œæ‰€ä»¥å®ƒä»¬çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ï¼›Set ç±»å‹ç”¨å“ˆå¸Œè¡¨ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„æ—¶ï¼Œå®ƒçš„ SADDã€SREMã€SRANDMEMBER å¤æ‚åº¦ä¹Ÿæ˜¯ O(1)ã€‚&lt;/p&gt;
&lt;p&gt;èŒƒå›´æ“ä½œï¼Œæ˜¯æŒ‡é›†åˆç±»å‹ä¸­çš„éå†æ“ä½œï¼Œå¯ä»¥è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œæ¯”å¦‚ Hash ç±»å‹çš„ HGETALL å’Œ Set ç±»å‹çš„ SMEMBERSï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªèŒƒå›´å†…çš„éƒ¨åˆ†æ•°æ®ï¼Œæ¯”å¦‚ List ç±»å‹çš„ LRANGE å’Œ ZSet ç±»å‹çš„ ZRANGEã€‚è¿™ç±»æ“ä½œçš„å¤æ‚åº¦ä¸€èˆ¬æ˜¯ O(N)ï¼Œæ¯”è¾ƒè€—æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡é¿å…ã€‚&lt;/p&gt;
&lt;p&gt;ç»Ÿè®¡æ“ä½œï¼Œæ˜¯æŒ‡é›†åˆç±»å‹å¯¹é›†åˆä¸­æ‰€æœ‰å…ƒç´ ä¸ªæ•°çš„è®°å½•ï¼Œä¾‹å¦‚ LLEN å’Œ SCARDã€‚è¿™ç±»æ“ä½œå¤æ‚åº¦åªæœ‰ O(1)ï¼Œè¿™æ˜¯å› ä¸ºå½“é›†åˆç±»å‹é‡‡ç”¨å‹ç¼©åˆ—è¡¨ã€åŒå‘é“¾è¡¨ã€æ•´æ•°æ•°ç»„è¿™äº›æ•°æ®ç»“æ„æ—¶ï¼Œè¿™äº›ç»“æ„ä¸­ä¸“é—¨è®°å½•äº†å…ƒç´ çš„ä¸ªæ•°ç»Ÿè®¡ï¼Œå› æ­¤å¯ä»¥é«˜æ•ˆåœ°å®Œæˆç›¸å…³æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¤–æƒ…å†µï¼Œæ˜¯æŒ‡æŸäº›æ•°æ®ç»“æ„çš„ç‰¹æ®Šè®°å½•ï¼Œä¾‹å¦‚å‹ç¼©åˆ—è¡¨å’ŒåŒå‘é“¾è¡¨éƒ½ä¼šè®°å½•è¡¨å¤´å’Œè¡¨å°¾çš„åç§»é‡ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¯¹äº List ç±»å‹çš„ LPOPã€RPOPã€LPUSHã€RPUSH è¿™å››ä¸ªæ“ä½œæ¥è¯´ï¼Œå®ƒä»¬æ˜¯åœ¨åˆ—è¡¨çš„å¤´å°¾å¢åˆ å…ƒç´ ï¼Œè¿™å°±å¯ä»¥é€šè¿‡åç§»é‡ç›´æ¥å®šä½ï¼Œæ‰€ä»¥å®ƒä»¬çš„å¤æ‚åº¦ä¹Ÿåªæœ‰ O(1)ï¼Œå¯ä»¥å®ç°å¿«é€Ÿæ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®•æœºäº†å¦‚ä½•é¿å…æ•°æ®ä¸¢å¤±&#34;&gt;å®•æœºäº†ï¼Œå¦‚ä½•é¿å…æ•°æ®ä¸¢å¤±&lt;/h2&gt;
&lt;p&gt;ä¸€æ—¦æœåŠ¡å™¨å®•æœºï¼Œå†…å­˜ä¸­çš„æ•°æ®å°†å…¨éƒ¨ä¸¢å¤±ã€‚&lt;/p&gt;
&lt;p&gt;Redis çš„æŒä¹…åŒ–ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AOFï¼ˆAppend Only Fileï¼‰æ—¥å¿—&lt;/li&gt;
&lt;li&gt;RDB (Redis DataBase) å¿«ç…§&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;aof&#34;&gt;AOF&lt;/h3&gt;
&lt;p&gt;Redis æ˜¯å…ˆæ‰§è¡Œå‘½ä»¤ï¼ŒæŠŠæ•°æ®å†™å…¥å†…å­˜ï¼Œç„¶åæ‰è®°å½•æ—¥å¿—ã€‚&lt;/p&gt;
&lt;p&gt;ä¼ ç»Ÿæ•°æ®åº“( å¦‚ Mysql )çš„æ—¥å¿—ï¼Œä¾‹å¦‚ redo logï¼ˆé‡åšæ—¥å¿—ï¼‰ï¼Œè®°å½•çš„æ˜¯ä¿®æ”¹åçš„æ•°æ®ï¼Œè€Œ AOF é‡Œè®°å½•çš„æ˜¯ Redis æ”¶åˆ°çš„æ¯ä¸€æ¡å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤æ˜¯ä»¥æ–‡æœ¬å½¢å¼ä¿å­˜çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»¥ Redis æ”¶åˆ°â€œset testkey â€å‘½ä»¤åè®°å½•çš„æ—¥å¿—ä¸ºä¾‹ï¼Œçœ‹çœ‹ AOF æ—¥å¿—çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;â€œ*3â€è¡¨ç¤ºå½“å‰å‘½ä»¤æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†éƒ½æ˜¯ç”±â€œ$+æ•°å­—â€å¼€å¤´ï¼Œåé¢ç´§è·Ÿç€å…·ä½“çš„å‘½ä»¤ã€é”®æˆ–å€¼ã€‚è¿™é‡Œï¼Œâ€œæ•°å­—â€è¡¨ç¤ºè¿™éƒ¨åˆ†ä¸­çš„å‘½ä»¤ã€é”®æˆ–å€¼ä¸€å…±æœ‰å¤šå°‘å­—èŠ‚ã€‚ä¾‹å¦‚ï¼Œâ€œ$3 setâ€è¡¨ç¤ºè¿™éƒ¨åˆ†æœ‰ 3 ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯â€œsetâ€å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653572640406.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œä¸ºäº†é¿å…é¢å¤–çš„æ£€æŸ¥å¼€é”€ï¼ŒRedis åœ¨å‘ AOF é‡Œé¢è®°å½•æ—¥å¿—çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šå…ˆå»å¯¹è¿™äº›å‘½ä»¤è¿›è¡Œè¯­æ³•æ£€æŸ¥ã€‚æ‰€ä»¥ï¼Œå¦‚æœå…ˆè®°æ—¥å¿—å†æ‰§è¡Œå‘½ä»¤çš„è¯ï¼Œæ—¥å¿—ä¸­å°±æœ‰å¯èƒ½è®°å½•äº†é”™è¯¯çš„å‘½ä»¤ï¼ŒRedis åœ¨ä½¿ç”¨æ—¥å¿—æ¢å¤æ•°æ®æ—¶ï¼Œå°±å¯èƒ½ä¼šå‡ºé”™ã€‚&lt;/p&gt;
&lt;p&gt;è€Œå†™åæ—¥å¿—è¿™ç§æ–¹å¼ï¼Œå°±æ˜¯å…ˆè®©ç³»ç»Ÿæ‰§è¡Œå‘½ä»¤ï¼Œåªæœ‰å‘½ä»¤èƒ½æ‰§è¡ŒæˆåŠŸï¼Œæ‰ä¼šè¢«è®°å½•åˆ°æ—¥å¿—ä¸­ï¼Œå¦åˆ™ï¼Œç³»ç»Ÿå°±ä¼šç›´æ¥å‘å®¢æˆ·ç«¯æŠ¥é”™ã€‚æ‰€ä»¥ï¼ŒRedis ä½¿ç”¨å†™åæ—¥å¿—è¿™ä¸€æ–¹å¼çš„ä¸€å¤§å¥½å¤„æ˜¯ï¼Œå¯ä»¥é¿å…å‡ºç°è®°å½•é”™è¯¯å‘½ä»¤çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ï¼ŒAOF ä¹Ÿæœ‰ä¸¤ä¸ªæ½œåœ¨çš„é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œå¦‚æœåˆšæ‰§è¡Œå®Œä¸€ä¸ªå‘½ä»¤ï¼Œè¿˜æ²¡æœ‰æ¥å¾—åŠè®°æ—¥å¿—å°±å®•æœºäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘½ä»¤å’Œç›¸åº”çš„æ•°æ®å°±æœ‰ä¸¢å¤±çš„é£é™©ã€‚å¦‚æœæ­¤æ—¶ Redis æ˜¯ç”¨ä½œç¼“å­˜ï¼Œè¿˜å¯ä»¥ä»åç«¯æ•°æ®åº“é‡æ–°è¯»å…¥æ•°æ®è¿›è¡Œæ¢å¤ï¼Œä½†æ˜¯ï¼Œå¦‚æœ Redis æ˜¯ç›´æ¥ç”¨ä½œæ•°æ®åº“çš„è¯ï¼Œæ­¤æ—¶ï¼Œå› ä¸ºå‘½ä»¤æ²¡æœ‰è®°å…¥æ—¥å¿—ï¼Œæ‰€ä»¥å°±æ— æ³•ç”¨æ—¥å¿—è¿›è¡Œæ¢å¤äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡ï¼ŒAOF è™½ç„¶é¿å…äº†å¯¹å½“å‰å‘½ä»¤çš„é˜»å¡ï¼Œä½†å¯èƒ½ä¼šç»™ä¸‹ä¸€ä¸ªæ“ä½œå¸¦æ¥é˜»å¡é£é™©ã€‚è¿™æ˜¯å› ä¸ºï¼ŒAOF æ—¥å¿—ä¹Ÿæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå¦‚æœåœ¨æŠŠæ—¥å¿—æ–‡ä»¶å†™å…¥ç£ç›˜æ—¶ï¼Œç£ç›˜å†™å‹åŠ›å¤§ï¼Œå°±ä¼šå¯¼è‡´å†™ç›˜å¾ˆæ…¢ï¼Œè¿›è€Œå¯¼è‡´åç»­çš„æ“ä½œä¹Ÿæ— æ³•æ‰§è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªé£é™©éƒ½æ˜¯å’Œ AOF å†™å›ç£ç›˜çš„æ—¶æœºç›¸å…³çš„ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶ä¸€ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œå AOF æ—¥å¿—å†™å›ç£ç›˜çš„æ—¶æœºï¼Œè¿™ä¸¤ä¸ªé£é™©å°±è§£é™¤äº†ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;-&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;é£é™©&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;AOF&lt;/td&gt;
&lt;td&gt;é¿å…é¢å¤–çš„æ£€æŸ¥å¼€é”€ï¼Œé¿å…å‡ºç°è®°å½•é”™è¯¯å‘½ä»¤çš„æƒ…å†µ&lt;/td&gt;
&lt;td&gt;ä¼šå‡ºç°æ²¡æœ‰æ¥å¾—åŠè®°æ—¥å¿—å°±å®•æœºçš„æƒ…å†µï¼Œå¯èƒ½ä¼šç»™ä¸‹ä¸€ä¸ªæ“ä½œå¸¦æ¥é˜»å¡é£é™©&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;ä¸‰ç§å†™å›ç­–ç•¥&#34;&gt;ä¸‰ç§å†™å›ç­–ç•¥&lt;/h3&gt;
&lt;p&gt;AOF æœºåˆ¶ç»™æˆ‘ä»¬æä¾›äº†ä¸‰ä¸ªé€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯ AOF é…ç½®é¡¹ appendfsync çš„ä¸‰ä¸ªå¯é€‰å€¼ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;-&lt;/th&gt;
&lt;th&gt;-&lt;/th&gt;
&lt;th&gt;å¯é æ€§&lt;/th&gt;
&lt;th&gt;é«˜æ€§èƒ½&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Always&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒæ­¥å†™å›&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Everysec&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ¯ç§’å†™å›ï¼Œå…ˆæ”¾ç¼“å†²åŒº&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;No&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›ï¼Œå…ˆæ”¾ç¼“å†²åŒº&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æˆ‘ä»¬ä¸€å®šè¦å°å¿ƒ AOF æ–‡ä»¶è¿‡å¤§å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚è¿™é‡Œçš„â€œæ€§èƒ½é—®é¢˜â€ï¼Œä¸»è¦åœ¨äºä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼šä¸€æ˜¯ï¼Œæ–‡ä»¶ç³»ç»Ÿæœ¬èº«å¯¹æ–‡ä»¶å¤§å°æœ‰é™åˆ¶ï¼Œæ— æ³•ä¿å­˜è¿‡å¤§çš„æ–‡ä»¶ï¼›äºŒæ˜¯ï¼Œå¦‚æœæ–‡ä»¶å¤ªå¤§ï¼Œä¹‹åå†å¾€é‡Œé¢è¿½åŠ å‘½ä»¤è®°å½•çš„è¯ï¼Œæ•ˆç‡ä¹Ÿä¼šå˜ä½ï¼›ä¸‰æ˜¯ï¼Œå¦‚æœå‘ç”Ÿå®•æœºï¼ŒAOF ä¸­è®°å½•çš„å‘½ä»¤è¦ä¸€ä¸ªä¸ªè¢«é‡æ–°æ‰§è¡Œï¼Œç”¨äºæ•…éšœæ¢å¤ï¼Œå¦‚æœæ—¥å¿—æ–‡ä»¶å¤ªå¤§ï¼Œæ•´ä¸ªæ¢å¤è¿‡ç¨‹å°±ä¼šéå¸¸ç¼“æ…¢ï¼Œè¿™å°±ä¼šå½±å“åˆ° Redis çš„æ­£å¸¸ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ—¥å¿—æ–‡ä»¶å¤ªå¤§äº†æ€ä¹ˆåŠ&#34;&gt;æ—¥å¿—æ–‡ä»¶å¤ªå¤§äº†æ€ä¹ˆåŠï¼Ÿ&lt;/h3&gt;
&lt;p&gt;AOF é‡å†™æœºåˆ¶ï¼Œåœ¨é‡å†™æ—¶ï¼ŒRedis æ ¹æ®æ•°æ®åº“çš„ç°çŠ¶åˆ›å»ºä¸€ä¸ªæ–°çš„ AOF æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;é‡å†™æœºåˆ¶å…·æœ‰â€œå¤šå˜ä¸€â€åŠŸèƒ½ã€‚æ‰€è°“çš„â€œå¤šå˜ä¸€â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ—§æ—¥å¿—æ–‡ä»¶ä¸­çš„å¤šæ¡å‘½ä»¤ï¼Œåœ¨é‡å†™åçš„æ–°æ—¥å¿—ä¸­å˜æˆäº†ä¸€æ¡å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä¸€ä¸ªé”®å€¼å¯¹è¢«å¤šæ¡å†™å‘½ä»¤åå¤ä¿®æ”¹æ—¶ï¼ŒAOF æ–‡ä»¶ä¼šè®°å½•ç›¸åº”çš„å¤šæ¡å‘½ä»¤ã€‚ä½†æ˜¯ï¼Œåœ¨é‡å†™çš„æ—¶å€™ï¼Œæ˜¯æ ¹æ®è¿™ä¸ªé”®å€¼å¯¹å½“å‰çš„æœ€æ–°çŠ¶æ€ï¼Œä¸ºå®ƒç”Ÿæˆå¯¹åº”çš„å†™å…¥å‘½ä»¤ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸€ä¸ªé”®å€¼å¯¹åœ¨é‡å†™æ—¥å¿—ä¸­åªç”¨ä¸€æ¡å‘½ä»¤å°±è¡Œäº†ï¼Œè€Œä¸”ï¼Œåœ¨æ—¥å¿—æ¢å¤æ—¶ï¼Œåªç”¨æ‰§è¡Œè¿™æ¡å‘½ä»¤ï¼Œå°±å¯ä»¥ç›´æ¥å®Œæˆè¿™ä¸ªé”®å€¼å¯¹çš„å†™å…¥äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;aof-é‡å†™ä¼šé˜»å¡å—&#34;&gt;AOF é‡å†™ä¼šé˜»å¡å—?&lt;/h3&gt;
&lt;p&gt;ä¸ä¼š! å’Œ AOF æ—¥å¿—ç”±ä¸»çº¿ç¨‹å†™å›ä¸åŒï¼Œé‡å†™è¿‡ç¨‹æ˜¯ç”±åå°å­è¿›ç¨‹ bgrewriteaof æ¥å®Œæˆçš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºäº†é¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œå¯¼è‡´æ•°æ®åº“æ€§èƒ½ä¸‹é™ã€‚&lt;/p&gt;
&lt;p&gt;forkå­è¿›ç¨‹æ—¶ï¼Œå­è¿›ç¨‹æ˜¯ä¼šæ‹·è´çˆ¶è¿›ç¨‹çš„é¡µè¡¨ï¼Œå³è™šå®æ˜ å°„å…³ç³»ï¼Œè€Œä¸ä¼šæ‹·è´ç‰©ç†å†…å­˜ã€‚bgrewriteaof å­è¿›ç¨‹å°±å¯ä»¥åœ¨ä¸å½±å“ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œé€ä¸€æŠŠæ‹·è´çš„æ•°æ®å†™æˆæ“ä½œï¼Œè®°å…¥é‡å†™æ—¥å¿—ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºä¸»çº¿ç¨‹æœªé˜»å¡ï¼Œä»ç„¶å¯ä»¥å¤„ç†æ–°æ¥çš„æ“ä½œã€‚æ­¤æ—¶ï¼Œå¦‚æœæœ‰å†™æ“ä½œï¼Œç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚è€Œç¬¬äºŒå¤„æ—¥å¿—ï¼Œå°±æ˜¯æŒ‡æ–°çš„ AOF é‡å†™æ—¥å¿—ã€‚è¿™ä¸ªæ“ä½œä¹Ÿä¼šè¢«å†™åˆ°é‡å†™æ—¥å¿—çš„ç¼“å†²åŒºã€‚è¿™æ ·ï¼Œé‡å†™æ—¥å¿—ä¹Ÿä¸ä¼šä¸¢å¤±æœ€æ–°çš„æ“ä½œã€‚ç­‰åˆ°æ‹·è´æ•°æ®çš„æ‰€æœ‰æ“ä½œè®°å½•é‡å†™å®Œæˆåï¼Œé‡å†™æ—¥å¿—è®°å½•çš„è¿™äº›æœ€æ–°æ“ä½œä¹Ÿä¼šå†™å…¥æ–°çš„ AOF æ–‡ä»¶ï¼Œä»¥ä¿è¯æ•°æ®åº“æœ€æ–°çŠ¶æ€çš„è®°å½•ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æ–°çš„ AOF æ–‡ä»¶æ›¿ä»£æ—§æ–‡ä»¶äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653575257969.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;rdb-å¿«ç…§&#34;&gt;RDB å¿«ç…§&lt;/h3&gt;
&lt;p&gt;æ‰€è°“å†…å­˜å¿«ç…§ï¼Œå°±æ˜¯æŒ‡å†…å­˜ä¸­çš„æ•°æ®åœ¨æŸä¸€ä¸ªæ—¶åˆ»çš„çŠ¶æ€è®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;å…¨é‡æ•°æ®è¶Šå¤šï¼ŒRDB æ–‡ä»¶å°±è¶Šå¤§ï¼Œå¾€ç£ç›˜ä¸Šå†™æ•°æ®çš„æ—¶é—´å¼€é”€å°±è¶Šå¤§ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº Redis è€Œè¨€ï¼Œå®ƒçš„å•çº¿ç¨‹æ¨¡å‹å°±å†³å®šäº†ï¼Œæˆ‘ä»¬è¦å°½é‡é¿å…æ‰€æœ‰ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„æ“ä½œï¼Œæ‰€ä»¥ï¼Œé’ˆå¯¹ä»»ä½•æ“ä½œï¼Œæˆ‘ä»¬éƒ½ä¼šæä¸€ä¸ªçµé­‚ä¹‹é—®ï¼šâ€œå®ƒä¼šé˜»å¡ä¸»çº¿ç¨‹å—?â€RDB æ–‡ä»¶çš„ç”Ÿæˆæ˜¯å¦ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œè¿™å°±å…³ç³»åˆ°æ˜¯å¦ä¼šé™ä½ Redis çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;Redis æä¾›äº†ä¸¤ä¸ªå‘½ä»¤æ¥ç”Ÿæˆ RDB æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ save å’Œ bgsaveã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;-&lt;/th&gt;
&lt;th&gt;-&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;save&lt;/td&gt;
&lt;td&gt;ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œä¼šå¯¼è‡´é˜»å¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;bgsave(é»˜è®¤)&lt;/td&gt;
&lt;td&gt;åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œä¸“é—¨ç”¨äºå†™å…¥ RDB æ–‡ä»¶ï¼Œé¿å…ä¸»çº¿ç¨‹é˜»å¡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;å¿«ç…§æ—¶æ•°æ®èƒ½ä¿®æ”¹å—&#34;&gt;å¿«ç…§æ—¶æ•°æ®èƒ½ä¿®æ”¹å—?&lt;/h4&gt;
&lt;p&gt;ç»™åˆ«äººæ‹ç…§æ—¶ï¼Œä¸€æ—¦å¯¹æ–¹åŠ¨äº†ï¼Œé‚£ä¹ˆè¿™å¼ ç…§ç‰‡å°±æ‹ç³Šäº†ï¼Œæˆ‘ä»¬å°±éœ€è¦é‡æ‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å½“ç„¶å¸Œæœ›å¯¹æ–¹ä¿æŒä¸åŠ¨ã€‚å¯¹äºå†…å­˜å¿«ç…§è€Œè¨€ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›æ•°æ®â€œåŠ¨â€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¿«ç…§è€Œæš‚åœå†™æ“ä½œï¼Œè‚¯å®šæ˜¯ä¸èƒ½æ¥å—çš„ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼ŒRedis å°±ä¼šå€ŸåŠ©æ“ä½œç³»ç»Ÿæä¾›çš„å†™æ—¶å¤åˆ¶æŠ€æœ¯ï¼ˆCopy-On-Write, COWï¼‰ï¼Œåœ¨æ‰§è¡Œå¿«ç…§çš„åŒæ—¶ï¼Œæ­£å¸¸å¤„ç†å†™æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸»çº¿ç¨‹è¦ä¿®æ”¹ä¸€å—æ•°æ®ï¼Œé‚£ä¹ˆï¼Œè¿™å—æ•°æ®å°±ä¼šè¢«å¤åˆ¶ä¸€ä»½ï¼Œç”Ÿæˆè¯¥æ•°æ®çš„å‰¯æœ¬ã€‚ç„¶åï¼Œä¸»çº¿ç¨‹åœ¨è¿™ä¸ªæ•°æ®å‰¯æœ¬ä¸Šè¿›è¡Œä¿®æ”¹ã€‚åŒæ—¶ï¼Œbgsave å­è¿›ç¨‹å¯ä»¥ç»§ç»­æŠŠåŸæ¥çš„æ•°æ®å†™å…¥ RDB æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ··åˆ-aofrdb&#34;&gt;æ··åˆ AOF/RDB&lt;/h4&gt;
&lt;p&gt;Redis 4.0 ä¸­æå‡ºäº†ä¸€ä¸ªæ··åˆä½¿ç”¨ AOF æ—¥å¿—å’Œå†…å­˜å¿«ç…§çš„æ–¹æ³•ã€‚å†…å­˜å¿«ç…§ä»¥ä¸€å®šçš„é¢‘ç‡æ‰§è¡Œï¼Œåœ¨ä¸¤æ¬¡å¿«ç…§ä¹‹é—´ï¼Œä½¿ç”¨ AOF æ—¥å¿—è®°å½•è¿™æœŸé—´çš„æ‰€æœ‰å‘½ä»¤æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ–¹æ³•æ—¢èƒ½äº«å—åˆ° RDB æ–‡ä»¶å¿«é€Ÿæ¢å¤çš„å¥½å¤„ï¼Œåˆèƒ½äº«å—åˆ° AOF åªè®°å½•æ“ä½œå‘½ä»¤çš„ç®€å•ä¼˜åŠ¿ï¼Œé¢‡æœ‰ç‚¹â€œé±¼å’Œç†ŠæŒå¯ä»¥å…¼å¾—â€çš„æ„Ÿè§‰ï¼Œå»ºè®®ä½ åœ¨å®è·µä¸­ç”¨èµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;å…³äº AOF å’Œ RDB çš„é€‰æ‹©é—®é¢˜ï¼Œæˆ‘æƒ³å†ç»™ä½ æä¸‰ç‚¹å»ºè®®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®ä¸èƒ½ä¸¢å¤±æ—¶ï¼Œå†…å­˜å¿«ç…§å’Œ AOF çš„æ··åˆä½¿ç”¨æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœå…è®¸åˆ†é’Ÿçº§åˆ«çš„æ•°æ®ä¸¢å¤±ï¼Œå¯ä»¥åªä½¿ç”¨ RDBï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœåªç”¨ AOFï¼Œä¼˜å…ˆä½¿ç”¨ everysec çš„é…ç½®é€‰é¡¹ï¼Œå› ä¸ºå®ƒåœ¨å¯é æ€§å’Œæ€§èƒ½ä¹‹é—´å–äº†ä¸€ä¸ªå¹³è¡¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ³¨æ„: å†™æ¯”è¯»å¤šæ—¶ï¼ŒRDB çš„æ€§èƒ½é—®é¢˜ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# å¼€å¯ RDB æŒä¹…åŒ–&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;save 60 10000 &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 60 ç§’å†…æ‰§è¡Œ 1000 æ¬¡æ“ä½œï¼ŒæŒä¹…åŒ– &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;save 300 10   &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 300 ç§’å†…æ‰§è¡Œ 10 æ¬¡æ“æ“ä½œï¼ŒæŒä¹…åŒ–&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;save 600 1    &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 600 ç§’å†…æ‰§è¡Œ 1 æ¬¡æ“ä½œï¼ŒæŒä¹…åŒ–&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å¼€å¯ AOF æŒä¹…åŒ–&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;appendonly yes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;appendfilename &amp;#34;appendonly.aof&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;appenddirname &amp;#34;appendonlydir&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;appendfsync everysec&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;ä¸»ä»åº“å®ç°æ•°æ®ä¸€è‡´&#34;&gt;ä¸»ä»åº“å®ç°æ•°æ®ä¸€è‡´&lt;/h2&gt;
&lt;p&gt;ç°åœ¨æœ‰å®ä¾‹ 1ï¼ˆipï¼š172.16.19.3ï¼‰å’Œå®ä¾‹ 2ï¼ˆipï¼š172.16.19.5ï¼‰ï¼Œæˆ‘ä»¬åœ¨å®ä¾‹ 2 ä¸Šæ‰§è¡Œä»¥ä¸‹è¿™ä¸ªå‘½ä»¤åï¼Œå®ä¾‹ 2 å°±å˜æˆäº†å®ä¾‹ 1 çš„ä»åº“ï¼Œå¹¶ä»å®ä¾‹ 1 ä¸Šå¤åˆ¶æ•°æ®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;replicaof 172.16.19.3 &lt;span class=&#34;m&#34;&gt;6379&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653707925873.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€é˜¶æ®µï¼Œä»åº“å‘ä¸»åº“å‘é€ psync å‘½ä»¤ï¼Œå…¶ä¸­åŒ…å« runID (ä¸»åº“å”¯ä¸€æ ‡è¯†) å’Œ offset (å¤åˆ¶è¿›åº¦) ä¸¤ä¸ªå‚æ•°ï¼Œé¦–æ¬¡åŒæ­¥ï¼Œ&lt;code&gt;runID=?&lt;/code&gt;ï¼Œ&lt;code&gt;offset=-1&lt;/code&gt;ã€‚ä¸»åº“è¿”å›æ­£ç¡®çš„ runID å’Œ offsetã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒé˜¶æ®µï¼Œä¸»åº“æ‰§è¡Œ bgsave ç”Ÿæˆ RDB æ–‡ä»¶ï¼Œå‘ç»™ä»åº“ã€‚ä»åº“æ”¶åˆ°åæ¸…ç©ºå½“å‰æ•°æ®åº“ï¼ŒåŠ è½½ RDB æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰é˜¶æ®µï¼Œä¸»åº“åœ¨åŒæ­¥è¿‡ç¨‹ä¸­æ–°å¢çš„å‘½ä»¤ï¼Œä¸“é—¨è®°å½•åˆ° replication bufferï¼Œæ­¤æ—¶å‘ç»™ä»åº“ã€‚ä»åº“æ‰§è¡Œè¿™äº›æ“ä½œå®Œæˆæ•°æ®åŒæ­¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦ä¸»ä»åº“å®Œæˆäº†å…¨é‡å¤åˆ¶ï¼Œå®ƒä»¬ä¹‹é—´å°±ä¼šä¸€ç›´ç»´æŠ¤ä¸€ä¸ªç½‘ç»œè¿æ¥ï¼Œä¸»åº“ä¼šé€šè¿‡è¿™ä¸ªè¿æ¥å°†åç»­é™†ç»­æ”¶åˆ°çš„å‘½ä»¤æ“ä½œå†åŒæ­¥ç»™ä»åº“ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿç§°ä¸ºåŸºäºé•¿è¿æ¥çš„å‘½ä»¤ä¼ æ’­ï¼Œå¯ä»¥é¿å…é¢‘ç¹å»ºç«‹è¿æ¥çš„å¼€é”€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸»ä»çº§è”æ¨¡å¼åˆ†æ‹…å…¨é‡å¤åˆ¶æ—¶çš„ä¸»åº“å‹åŠ›&#34;&gt;ä¸»ä»çº§è”æ¨¡å¼åˆ†æ‹…å…¨é‡å¤åˆ¶æ—¶çš„ä¸»åº“å‹åŠ›&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸»å¤šä»æ¨¡å¼ä¸­ï¼ŒåŒæ­¥æ•°æ®ï¼Œä¸»åº“ç”Ÿæˆ RDB å’Œ å‘é€ RDB ä¼šæ¶ˆè€—æ€§èƒ½å’Œå¸¦å®½ã€‚å¯ä»¥é€šè¿‡çº§è”ï¼Œå°†å‹åŠ›åˆ†æ‹…åˆ°ä»åº“ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653708919832.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;ä¸»ä»åº“é—´ç½‘ç»œæ–­äº†æ€ä¹ˆåŠ&#34;&gt;ä¸»ä»åº“é—´ç½‘ç»œæ–­äº†æ€ä¹ˆåŠï¼Ÿ&lt;/h2&gt;
&lt;p&gt;åŸºäºé•¿è¿æ¥çš„å‘½ä»¤ä¼ æ’­è¿™ä¸ªè¿‡ç¨‹ä¸­å­˜åœ¨ç€é£é™©ç‚¹ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ç½‘ç»œæ–­è¿æˆ–é˜»å¡ã€‚&lt;/p&gt;
&lt;p&gt;ä» Redis 2.8 å¼€å§‹ï¼Œç½‘ç»œæ–­äº†ä¹‹åï¼Œä¸»ä»åº“ä¼šé‡‡ç”¨å¢é‡å¤åˆ¶çš„æ–¹å¼ç»§ç»­åŒæ­¥ã€‚å½“ä¸»ä»åº“æ–­è¿åï¼Œä¸»åº“ä¼šæŠŠæ–­è¿æœŸé—´æ”¶åˆ°çš„å†™æ“ä½œå‘½ä»¤ï¼Œå†™å…¥ replication bufferï¼ŒåŒæ—¶ä¹Ÿä¼šæŠŠè¿™äº›æ“ä½œå‘½ä»¤ä¹Ÿå†™å…¥ repl_backlog_buffer è¿™ä¸ªç¼“å†²åŒºã€‚&lt;/p&gt;
&lt;p&gt;repl_backlog_buffer æ˜¯ä¸€ä¸ªç¯å½¢ç¼“å†²åŒºï¼Œä¸»åº“ä¼šè®°å½•è‡ªå·±å†™åˆ°çš„ä½ç½®ï¼Œä»åº“åˆ™ä¼šè®°å½•è‡ªå·±å·²ç»è¯»åˆ°çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ç½‘ç»œæ–­äº†åï¼Œå°†ä¸»åº“å†™ä½ç½®å’Œä»åº“è¯»ä½ç½®çš„ä¹‹é—´çš„å‘½ä»¤åŒæ­¥ç»™ä»åº“ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸º repl_backlog_buffer æ˜¯ä¸€ä¸ªç¯å½¢ç¼“å†²åŒºï¼Œæ‰€ä»¥åœ¨ç¼“å†²åŒºå†™æ»¡åï¼Œä¸»åº“ä¼šç»§ç»­å†™å…¥ï¼Œæ­¤æ—¶ï¼Œå°±ä¼šè¦†ç›–æ‰ä¹‹å‰å†™å…¥çš„æ“ä½œã€‚å¦‚æœä»åº“çš„è¯»å–é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´ä»åº“è¿˜æœªè¯»å–çš„æ“ä½œè¢«ä¸»åº“æ–°å†™çš„æ“ä½œè¦†ç›–äº†ï¼Œè¿™ä¼šå¯¼è‡´ä¸»ä»åº“é—´çš„æ•°æ®ä¸ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•é¿å…è¿™ä¸€æƒ…å†µï¼Œä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒæ•´ repl_backlog_size è¿™ä¸ªå‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªä»åº“å¦‚æœå’Œä¸»åº“æ–­è¿æ—¶é—´è¿‡é•¿ï¼Œé€ æˆå®ƒåœ¨ä¸»åº“repl_backlog_bufferçš„slave_repl_offsetä½ç½®ä¸Šçš„æ•°æ®å·²ç»è¢«è¦†ç›–æ‰äº†ï¼Œæ­¤æ—¶ä»åº“å’Œä¸»åº“é—´å°†è¿›è¡Œå…¨é‡å¤åˆ¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å“¨å…µæœºåˆ¶-ä¸»åº“æŒ‚äº†ä¸é—´æ–­æœåŠ¡&#34;&gt;å“¨å…µæœºåˆ¶: ä¸»åº“æŒ‚äº†ï¼Œä¸é—´æ–­æœåŠ¡&lt;/h2&gt;
&lt;h3 id=&#34;åŸºæœ¬æµç¨‹&#34;&gt;åŸºæœ¬æµç¨‹&lt;/h3&gt;
&lt;p&gt;å“¨å…µå…¶å®å°±æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ç‰¹æ®Šæ¨¡å¼ä¸‹çš„ Redis è¿›ç¨‹ï¼Œä¸»ä»åº“å®ä¾‹è¿è¡Œçš„åŒæ—¶ï¼Œå®ƒä¹Ÿåœ¨è¿è¡Œã€‚å“¨å…µä¸»è¦è´Ÿè´£çš„å°±æ˜¯ä¸‰ä¸ªä»»åŠ¡ï¼šç›‘æ§ã€é€‰ä¸»ï¼ˆé€‰æ‹©ä¸»åº“ï¼‰å’Œé€šçŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;ç›‘æ§æ˜¯æŒ‡å“¨å…µè¿›ç¨‹åœ¨è¿è¡Œæ—¶ï¼Œå‘¨æœŸæ€§åœ°ç»™æ‰€æœ‰çš„ä¸»ä»åº“å‘é€ PING å‘½ä»¤ï¼Œæ£€æµ‹å®ƒä»¬æ˜¯å¦ä»ç„¶åœ¨çº¿è¿è¡Œã€‚å¦‚æœä»åº“æ²¡æœ‰åœ¨è§„å®šæ—¶é—´å†…å“åº”å“¨å…µçš„ PING å‘½ä»¤ï¼Œå“¨å…µå°±ä¼šæŠŠå®ƒæ ‡è®°ä¸ºâ€œä¸‹çº¿çŠ¶æ€â€ï¼›åŒæ ·ï¼Œå¦‚æœä¸»åº“ä¹Ÿæ²¡æœ‰åœ¨è§„å®šæ—¶é—´å†…å“åº”å“¨å…µçš„ PING å‘½ä»¤ï¼Œå“¨å…µå°±ä¼šåˆ¤å®šä¸»åº“ä¸‹çº¿ï¼Œç„¶åå¼€å§‹è‡ªåŠ¨åˆ‡æ¢ä¸»åº“çš„æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»åº“æŒ‚äº†ä»¥åï¼Œå“¨å…µå°±éœ€è¦ä»å¾ˆå¤šä¸ªä»åº“é‡Œï¼ŒæŒ‰ç…§ä¸€å®šçš„è§„åˆ™é€‰æ‹©ä¸€ä¸ªä»åº“å®ä¾‹ï¼ŒæŠŠå®ƒä½œä¸ºæ–°çš„ä¸»åº“ã€‚è¿™ä¸€æ­¥å®Œæˆåï¼Œç°åœ¨çš„é›†ç¾¤é‡Œå°±æœ‰äº†æ–°ä¸»åº“ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå“¨å…µä¼šæ‰§è¡Œæœ€åä¸€ä¸ªä»»åŠ¡ï¼šé€šçŸ¥ã€‚åœ¨æ‰§è¡Œé€šçŸ¥ä»»åŠ¡æ—¶ï¼Œå“¨å…µä¼šæŠŠæ–°ä¸»åº“çš„è¿æ¥ä¿¡æ¯å‘ç»™å…¶ä»–ä»åº“ï¼Œè®©å®ƒä»¬æ‰§è¡Œ replicaof å‘½ä»¤ï¼Œå’Œæ–°ä¸»åº“å»ºç«‹è¿æ¥ï¼Œå¹¶è¿›è¡Œæ•°æ®å¤åˆ¶ã€‚åŒæ—¶ï¼Œå“¨å…µä¼šæŠŠæ–°ä¸»åº“çš„è¿æ¥ä¿¡æ¯é€šçŸ¥ç»™å®¢æˆ·ç«¯ï¼Œè®©å®ƒä»¬æŠŠè¯·æ±‚æ“ä½œå‘åˆ°æ–°ä¸»åº“ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653710992310.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å“¨å…µæœºåˆ¶é€šå¸¸ä¼šé‡‡ç”¨å¤šå®ä¾‹ç»„æˆçš„é›†ç¾¤æ¨¡å¼è¿›è¡Œéƒ¨ç½²ï¼Œè¿™ä¹Ÿè¢«ç§°ä¸ºå“¨å…µé›†ç¾¤ã€‚å¼•å…¥å¤šä¸ªå“¨å…µå®ä¾‹ä¸€èµ·æ¥åˆ¤æ–­ï¼Œå°±å¯ä»¥é¿å…å•ä¸ªå“¨å…µå› ä¸ºè‡ªèº«ç½‘ç»œçŠ¶å†µä¸å¥½ï¼Œè€Œè¯¯åˆ¤ä¸»åº“ä¸‹çº¿çš„æƒ…å†µã€‚åŒæ—¶ï¼Œå¤šä¸ªå“¨å…µçš„ç½‘ç»œåŒæ—¶ä¸ç¨³å®šçš„æ¦‚ç‡è¾ƒå°ï¼Œç”±å®ƒä»¬ä¸€èµ·åšå†³ç­–ï¼Œè¯¯åˆ¤ç‡ä¹Ÿèƒ½é™ä½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653712116209.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;â€œå®¢è§‚ä¸‹çº¿â€çš„æ ‡å‡†å°±æ˜¯ï¼Œå½“æœ‰ N ä¸ªå“¨å…µå®ä¾‹æ—¶ï¼Œæœ€å¥½è¦æœ‰ N/2 + 1 ä¸ªå®ä¾‹åˆ¤æ–­ä¸»åº“ä¸ºâ€œä¸»è§‚ä¸‹çº¿â€ï¼Œæ‰èƒ½æœ€ç»ˆåˆ¤å®šä¸»åº“ä¸ºâ€œå®¢è§‚ä¸‹çº¿â€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚ä½•é€‰å®šæ–°ä¸»åº“&#34;&gt;å¦‚ä½•é€‰å®šæ–°ä¸»åº“ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1653712343768.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„ï¼Œå¦‚æœåœ¨é€‰ä¸»æ—¶ï¼Œä¸€ä¸ªä»åº“æ­£å¸¸è¿è¡Œï¼Œæˆ‘ä»¬æŠŠå®ƒé€‰ä¸ºæ–°ä¸»åº“å¼€å§‹ä½¿ç”¨äº†ã€‚å¯æ˜¯ï¼Œå¾ˆå¿«å®ƒçš„ç½‘ç»œå‡ºäº†æ•…éšœï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å¾—é‡æ–°é€‰ä¸»äº†ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä»åº“æ€»æ˜¯å’Œä¸»åº“æ–­è¿ï¼Œè€Œä¸”æ–­è¿æ¬¡æ•°è¶…å‡ºäº†ä¸€å®šçš„é˜ˆå€¼ï¼Œæˆ‘ä»¬å°±æœ‰ç†ç”±ç›¸ä¿¡ï¼Œè¿™ä¸ªä»åº“çš„ç½‘ç»œçŠ¶å†µå¹¶ä¸æ˜¯å¤ªå¥½ï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªä»åº“ç­›æ‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±è¦ç»™å‰©ä½™çš„ä»åº“æ‰“åˆ†ã€‚æˆ‘ä»¬å¯ä»¥åˆ†åˆ«æŒ‰ç…§ä¸‰ä¸ªè§„åˆ™ä¾æ¬¡è¿›è¡Œä¸‰è½®æ‰“åˆ†ï¼Œè¿™ä¸‰ä¸ªè§„åˆ™åˆ†åˆ«æ˜¯ä»åº“ä¼˜å…ˆçº§ã€ä»åº“å¤åˆ¶è¿›åº¦ä»¥åŠä»åº“ ID å·ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€è½®ï¼šä¼˜å…ˆçº§æœ€é«˜çš„ä»åº“å¾—åˆ†é«˜ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ slave-priority é…ç½®é¡¹ï¼Œç»™ä¸åŒçš„ä»åº“è®¾ç½®ä¸åŒä¼˜å…ˆçº§ã€‚å¦‚æœä»åº“çš„ä¼˜å…ˆçº§éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆå“¨å…µå¼€å§‹ç¬¬äºŒè½®æ‰“åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒè½®ï¼šå’Œæ—§ä¸»åº“åŒæ­¥ç¨‹åº¦æœ€æ¥è¿‘çš„ä»åº“å¾—åˆ†é«˜ã€‚å¦‚æœä»åº“çš„ä¼˜å…ˆçº§éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆå“¨å…µå¼€å§‹ç¬¬ä¸‰è½®æ‰“åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰è½®ï¼šID å·å°çš„ä»åº“å¾—åˆ†é«˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚æœæœ‰å“¨å…µå®ä¾‹åœ¨è¿è¡Œæ—¶å‘ç”Ÿäº†æ•…éšœä¸»ä»åº“è¿˜èƒ½æ­£å¸¸åˆ‡æ¢å—&#34;&gt;å¦‚æœæœ‰å“¨å…µå®ä¾‹åœ¨è¿è¡Œæ—¶å‘ç”Ÿäº†æ•…éšœï¼Œä¸»ä»åº“è¿˜èƒ½æ­£å¸¸åˆ‡æ¢å—ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;åœ¨é…ç½®å“¨å…µçš„ä¿¡æ¯æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨åˆ°ä¸‹é¢çš„è¿™ä¸ªé…ç½®é¡¹ï¼Œè®¾ç½®ä¸»åº“çš„ IP å’Œç«¯å£ï¼Œå¹¶æ²¡æœ‰é…ç½®å…¶ä»–å“¨å…µçš„è¿æ¥ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sentinel monitor &amp;lt;master-name&amp;gt; &amp;lt;ip&amp;gt; &amp;lt;redis-port&amp;gt; &amp;lt;quorum&amp;gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™äº›å“¨å…µå®ä¾‹æ—¢ç„¶éƒ½ä¸çŸ¥é“å½¼æ­¤çš„åœ°å€ï¼Œåˆæ˜¯æ€ä¹ˆç»„æˆé›†ç¾¤çš„å‘¢ï¼Ÿè¦å¼„æ˜ç™½è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦å­¦ä¹ ä¸€ä¸‹å“¨å…µé›†ç¾¤çš„ç»„æˆå’Œè¿è¡Œæœºåˆ¶äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŸºäº-pubsub-æœºåˆ¶çš„å“¨å…µé›†ç¾¤&#34;&gt;åŸºäº pub/sub æœºåˆ¶çš„å“¨å…µé›†ç¾¤&lt;/h3&gt;
&lt;p&gt;å“¨å…µå®ä¾‹ä¹‹é—´å¯ä»¥ç›¸äº’å‘ç°ï¼Œè¦å½’åŠŸäº Redis æä¾›çš„ pub/sub æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯å‘å¸ƒ / è®¢é˜…æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;å“¨å…µåªè¦å’Œä¸»åº“å»ºç«‹èµ·äº†è¿æ¥ï¼Œå°±å¯ä»¥åœ¨ä¸»åº“ä¸Šå‘å¸ƒæ¶ˆæ¯äº†ï¼Œæ¯”å¦‚è¯´å‘å¸ƒå®ƒè‡ªå·±çš„è¿æ¥ä¿¡æ¯ï¼ˆIP å’Œç«¯å£ï¼‰ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥ä»ä¸»åº“ä¸Šè®¢é˜…æ¶ˆæ¯ï¼Œè·å¾—å…¶ä»–å“¨å…µå‘å¸ƒçš„è¿æ¥ä¿¡æ¯ã€‚å½“å¤šä¸ªå“¨å…µå®ä¾‹éƒ½åœ¨ä¸»åº“ä¸Šåšäº†å‘å¸ƒå’Œè®¢é˜…æ“ä½œåï¼Œå®ƒä»¬ä¹‹é—´å°±èƒ½çŸ¥é“å½¼æ­¤çš„ IP åœ°å€å’Œç«¯å£ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸»ä»é›†ç¾¤ä¸­ï¼Œä¸»åº“ä¸Šæœ‰ä¸€ä¸ªåä¸ºâ€œ&lt;strong&gt;sentinel&lt;/strong&gt;:helloâ€çš„é¢‘é“ï¼Œä¸åŒå“¨å…µå°±æ˜¯é€šè¿‡å®ƒæ¥ç›¸äº’å‘ç°ï¼Œå®ç°äº’ç›¸é€šä¿¡çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®æˆ˜ç¯‡&#34;&gt;å®æˆ˜ç¯‡&lt;/h2&gt;
&lt;h3 id=&#34;redis-åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸Šçš„åº”ç”¨&#34;&gt;Redis åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸Šçš„åº”ç”¨&lt;/h3&gt;
&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—åœ¨å­˜å–æ¶ˆæ¯æ—¶ï¼Œå¿…é¡»è¦æ»¡è¶³ä¸‰ä¸ªéœ€æ±‚ï¼Œåˆ†åˆ«æ˜¯æ¶ˆæ¯ä¿åºã€å¤„ç†é‡å¤çš„æ¶ˆæ¯å’Œä¿è¯æ¶ˆæ¯å¯é æ€§ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ¶ˆæ¯ä¿åº&lt;/p&gt;
&lt;p&gt;å‡è®¾æœ‰ 3 ä¸ªæ¶ˆæ¯&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‡åº“å­˜ 5&lt;/li&gt;
&lt;li&gt;è¯»åº“å­˜&lt;/li&gt;
&lt;li&gt;å‡åº“å­˜ 2&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœå‘ç”Ÿä¹±åºå¤„ç†ä»»åŠ¡ï¼Œä¼˜å…ˆæ‰§è¡Œäº† 321ï¼Œæ­¤æ—¶ 2 è¯»åˆ°çš„åº“å­˜æ˜¯é”™è¯¯çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é‡å¤æ¶ˆæ¯å¤„ç†&lt;/p&gt;
&lt;p&gt;å› ä¸ºç½‘ç»œå µå¡è€Œå‡ºç°æ¶ˆæ¯é‡ä¼ çš„æƒ…å†µï¼Œå¯èƒ½åˆ°æ”¶åˆ°å¤šæ¡é‡å¤æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªä»»åŠ¡æ‰£ 1 ä¸ªåº“å­˜ï¼Œå› ä¸ºé‡å¤æ¶ˆæ¯ï¼Œå´æ‰£äº† 5 æ¬¡å°±ä¸å¯¹äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¶ˆæ¯å¯é æ€§ä¿è¯&lt;/p&gt;
&lt;p&gt;å› ä¸ºæ•…éšœæˆ–å®•æœºå¯¼è‡´æ¶ˆæ¯æ²¡æœ‰å¤„ç†å®Œæˆã€‚å½“æ¶ˆè´¹è€…é‡å¯åï¼Œå¯ä»¥é‡æ–°è¯»å–æ¶ˆæ¯å¤„ç†&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Redis çš„ List å’Œ Streams ä¸¤ç§æ•°æ®ç±»å‹ï¼Œå°±å¯ä»¥æ»¡è¶³æ¶ˆæ¯é˜Ÿåˆ—çš„è¿™ä¸‰ä¸ªéœ€æ±‚&lt;/p&gt;
&lt;h4 id=&#34;åŸºäº-list-çš„æ¶ˆæ¯é˜Ÿåˆ—è§£å†³æ–¹æ¡ˆ&#34;&gt;åŸºäº List çš„æ¶ˆæ¯é˜Ÿåˆ—è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;p&gt;List æœ¬èº«å°±æ˜¯æŒ‰å…ˆè¿›å…ˆå‡ºçš„é¡ºåºå¯¹æ•°æ®è¿›è¡Œå­˜å–çš„ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨ List ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—ä¿å­˜æ¶ˆæ¯çš„è¯ï¼Œå°±å·²ç»èƒ½æ»¡è¶³æ¶ˆæ¯ä¿åºçš„éœ€æ±‚äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1655050082707.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å½“ List ä¸­æ²¡æœ‰å€¼ï¼ŒRPOP å‘½ä»¤ä¼šè¯»åˆ°ç©ºå€¼ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒRedis æä¾›äº† BRPOP å‘½ä»¤ï¼ŒBRPOP å‘½ä»¤ä¹Ÿç§°ä¸ºé˜»å¡å¼è¯»å–ï¼Œå®¢æˆ·ç«¯åœ¨æ²¡æœ‰è¯»åˆ°é˜Ÿåˆ—æ•°æ®æ—¶ï¼Œè‡ªåŠ¨é˜»å¡ï¼Œç›´åˆ°æœ‰æ–°çš„æ•°æ®å†™å…¥é˜Ÿåˆ—ï¼Œå†å¼€å§‹è¯»å–æ–°æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;List æœ¬èº«æ˜¯ä¸ä¼šä¸ºæ¯ä¸ªæ¶ˆæ¯ç”Ÿæˆ ID å·çš„ï¼Œæ‰€ä»¥ï¼Œæ¶ˆæ¯çš„å…¨å±€å”¯ä¸€ ID å·å°±éœ€è¦ç”Ÿäº§è€…ç¨‹åºåœ¨å‘é€æ¶ˆæ¯å‰è‡ªè¡Œç”Ÿæˆã€‚ç”Ÿæˆä¹‹åï¼Œæˆ‘ä»¬åœ¨ç”¨ LPUSH å‘½ä»¤æŠŠæ¶ˆæ¯æ’å…¥ List æ—¶ï¼Œéœ€è¦åœ¨æ¶ˆæ¯ä¸­åŒ…å«è¿™ä¸ªå…¨å±€å”¯ä¸€ IDã€‚&lt;/p&gt;
&lt;p&gt;å½“æ¶ˆè´¹è€…ç¨‹åºä» List ä¸­è¯»å–ä¸€æ¡æ¶ˆæ¯åï¼ŒList å°±ä¸ä¼šå†ç•™å­˜è¿™æ¡æ¶ˆæ¯äº†ã€‚æ‰€ä»¥ï¼Œå¦‚æœæ¶ˆè´¹è€…ç¨‹åºåœ¨å¤„ç†æ¶ˆæ¯çš„è¿‡ç¨‹å‡ºç°äº†æ•…éšœæˆ–å®•æœºï¼Œå°±ä¼šå¯¼è‡´æ¶ˆæ¯æ²¡æœ‰å¤„ç†å®Œæˆï¼Œé‚£ä¹ˆï¼Œæ¶ˆè´¹è€…ç¨‹åºå†æ¬¡å¯åŠ¨åï¼Œå°±æ²¡æ³•å†æ¬¡ä» List ä¸­è¯»å–æ¶ˆæ¯äº†ã€‚ä¸ºäº†ç•™å­˜æ¶ˆæ¯ï¼ŒList ç±»å‹æä¾›äº† BRPOPLPUSH å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯è®©æ¶ˆè´¹è€…ç¨‹åºä»ä¸€ä¸ª List ä¸­è¯»å–æ¶ˆæ¯ï¼ŒåŒæ—¶ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ¶ˆæ¯å†æ’å…¥åˆ°å¦ä¸€ä¸ª Listï¼ˆå¯ä»¥å«ä½œå¤‡ä»½ Listï¼‰ç•™å­˜ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœæ¶ˆè´¹è€…ç¨‹åºè¯»äº†æ¶ˆæ¯ä½†æ²¡èƒ½æ­£å¸¸å¤„ç†ï¼Œç­‰å®ƒé‡å¯åï¼Œå°±å¯ä»¥ä»å¤‡ä»½ List ä¸­é‡æ–°è¯»å–æ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç†äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1655050887922.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åŸºäº List ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥æ»¡è¶³åˆ†å¸ƒå¼ç»„ä»¶å¯¹æ¶ˆæ¯é˜Ÿåˆ—çš„ä¸‰å¤§éœ€æ±‚ã€‚ä½†æ˜¯ï¼Œåœ¨ç”¨ List åšæ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯èƒ½é‡åˆ°è¿‡ä¸€ä¸ªé—®é¢˜ï¼šç”Ÿäº§è€…æ¶ˆæ¯å‘é€å¾ˆå¿«ï¼Œè€Œæ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯çš„é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œè¿™å°±å¯¼è‡´ List ä¸­çš„æ¶ˆæ¯è¶Šç§¯è¶Šå¤šï¼Œç»™ Redis çš„å†…å­˜å¸¦æ¥å¾ˆå¤§å‹åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¸Œæœ›å¯åŠ¨å¤šä¸ªæ¶ˆè´¹è€…ç¨‹åºç»„æˆä¸€ä¸ªæ¶ˆè´¹ç»„ï¼Œä¸€èµ·åˆ†æ‹…å¤„ç† List ä¸­çš„æ¶ˆæ¯ã€‚ä½†æ˜¯ï¼ŒList ç±»å‹å¹¶ä¸æ”¯æŒæ¶ˆè´¹ç»„çš„å®ç°ã€‚é‚£ä¹ˆï¼Œè¿˜æœ‰æ²¡æœ‰æ›´åˆé€‚çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿè¿™å°±è¦è¯´åˆ° Redis ä» 5.0 ç‰ˆæœ¬å¼€å§‹æä¾›çš„ Streams æ•°æ®ç±»å‹äº†ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åŸºäº-streams-çš„æ¶ˆæ¯é˜Ÿåˆ—è§£å†³æ–¹æ¡ˆ&#34;&gt;åŸºäº Streams çš„æ¶ˆæ¯é˜Ÿåˆ—è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1655091098148.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20220613113138049&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¾€ mqstream é˜Ÿåˆ—æ’å…¥ {resp:5}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ˜Ÿå·è¡¨ç¤ºè‡ªåŠ¨ç”Ÿæˆå…¨å±€å”¯ä¸€çš„ ID&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;XADD mqstream * resp &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://time.geekbang.org/column/article/268253&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Redis æ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Git å·¥ä½œæµ</title>
        <link>https://blog.golang.space/p/git-%E5%B7%A5%E4%BD%9C%E6%B5%81/</link>
        <pubDate>Wed, 22 Jul 2020 15:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/git-%E5%B7%A5%E4%BD%9C%E6%B5%81/</guid>
        <description>&lt;h1 id=&#34;å·¥ä½œæµ&#34;&gt;å·¥ä½œæµ&lt;/h1&gt;
&lt;p&gt;æœ‰ 4 ç§å¸¸ç”¨å·¥ä½œæµ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é›†ä¸­å¼&lt;/li&gt;
&lt;li&gt;åŠŸèƒ½åˆ†æ”¯&lt;/li&gt;
&lt;li&gt;Git Flow&lt;/li&gt;
&lt;li&gt;Forking&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é›†ä¸­å¼&#34;&gt;é›†ä¸­å¼&lt;/h2&gt;
&lt;p&gt;æœ¬åœ°ä¿®æ”¹åç›´æ¥æäº¤åˆ°è¿œç¨‹ masterï¼Œæœ‰å†²çªè§£å†³å†²çªã€‚&lt;/p&gt;
&lt;p&gt;å›¢é˜Ÿä¸å»ºè®®ä½¿ç”¨ï¼Œä»£ç æ··ä¹±ï¼Œå®¹æ˜“å‡ºé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1650977135936.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1650977394648.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;åŠŸèƒ½åˆ†æ”¯&#34;&gt;åŠŸèƒ½åˆ†æ”¯&lt;/h2&gt;
&lt;p&gt;åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµåŸºäºé›†ä¸­å¼å·¥ä½œæµæ¼”è¿›è€Œæ¥ã€‚é€‚åˆå¼€å‘å›¢é˜Ÿç›¸å¯¹å›ºå®šï¼Œè§„æ¨¡è¾ƒå°çš„é¡¹ç›®ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å‘æ–°åŠŸèƒ½æ—¶ï¼ŒåŸºäº master åˆ†æ”¯åˆ›å»ºä¸€ä¸ªä¸´æ—¶åŠŸèƒ½åˆ†æ”¯ï¼Œåœ¨åˆ†æ”¯ä¸Šå¼€å‘ï¼Œå¼€å‘å®Œæˆååˆå¹¶åˆ° masterã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»…åœ¨æœ€åä¸€æ­¥åˆå¹¶åˆ° master åˆ†æ”¯ï¼Œä½¿æäº¤å†å²æ›´ç®€æ´&lt;/li&gt;
&lt;li&gt;ä¸åŒçš„åŠŸèƒ½åˆ†é…ç»™ä¸åŒçš„å¼€å‘äººå‘˜ï¼Œé¿å…å†²çª&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1650977416117.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;å…·ä½“æµç¨‹&#34;&gt;å…·ä½“æµç¨‹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åŸºäº master åˆ›å»ºåŠŸèƒ½åˆ†æ”¯&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git checkout -b feature/xxx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨åˆ†æ”¯å¼€å‘ï¼Œæ¨é€åˆ°è¿œç¨‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git add xxx.go
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git commit -m &lt;span class=&#34;s2&#34;&gt;&amp;#34;add xxx&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git push origin feature/xxx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»º PR&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://static001.geekbang.org/resource/image/db/ac/dbcd25542515788c7f4f2f592d0029ac.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»£ç ç®¡ç†å‘˜å¯¹ä»£ç åš Code Reviewï¼Œå®¡æŸ¥å®Œæˆåˆå¹¶åˆ° master&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1650978105353.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;merge æœ‰ä¸‰ç§æ–¹æ³•&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create a merge commitï¼Œ&lt;code&gt;git merge --no-ff&lt;/code&gt;ï¼Œæ‰€æœ‰ commit åˆå¹¶æˆä¸€ä¸ªï¼Œæ·»åŠ åˆ° masterã€‚è¯¥å‘½ä»¤æ˜¯æŒ‡å¼ºè¡Œå…³é—­ &lt;code&gt;fast-forward&lt;/code&gt;ï¼Œä½†ä¼šä¿å­˜ç‰¹æ€§åˆ†æ”¯å†å²ï¼Œæ¨èè¿™ç§ã€‚&lt;/li&gt;
&lt;li&gt;Squash and mergeï¼Œ&lt;code&gt;git merge --squash&lt;/code&gt;ï¼Œå°†ä¸å¿…è¦çš„åˆ†æ”¯ä¸Šå…¶ commit å‹ç¼©åˆå¹¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤æ·»åŠ åˆ° masterã€‚&lt;/li&gt;
&lt;li&gt;Rebase and mergeï¼Œ&lt;code&gt;git rebase&lt;/code&gt;ï¼Œå°†åˆ†æ”¯æ‰€æœ‰ commit ä¾æ¬¡æ·»åŠ åˆ° masterï¼Œå±äº &lt;code&gt;fast_forward&lt;/code&gt;æ–¹å¼åˆå¹¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1650978903201.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20220426211503065&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1650979015721.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20220426211655586&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1650979066836.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20220426211746722&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;git-flow&#34;&gt;Git Flow&lt;/h2&gt;
&lt;p&gt;Git Flow å·¥ä½œæµæ˜¯ä¸€ä¸ªéå¸¸æˆç†Ÿçš„æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯éå¼€æºé¡¹ç›®ä¸­æœ€å¸¸ç”¨åˆ°çš„å·¥ä½œæµã€‚é€‚åˆå¤§å‹çš„é¡¹ç›®æˆ–è€…è¿­ä»£é€Ÿåº¦å¿«çš„é¡¹ç›®ã€‚&lt;/p&gt;
&lt;p&gt;5 ç§åˆ†æ”¯&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åˆ†æ”¯å&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;master&lt;/td&gt;
&lt;td&gt;å‘å¸ƒçŠ¶æ€ï¼Œç¦æ­¢å¼€å‘ï¼Œæ¯æ¬¡åˆå¹¶ hotfix/release è¦æ‰“ç‰ˆæœ¬æ ‡ç­¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;develop&lt;/td&gt;
&lt;td&gt;æœ€æ–°ä»£ç ï¼Œç¦æ­¢å¼€å‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;feature&lt;/td&gt;
&lt;td&gt;ç ”å‘åŠŸèƒ½åˆ†æ”¯ï¼ŒåŸºäº developï¼Œå¼€å‘å®Œæˆååˆå¹¶åˆ° develop å¹¶åˆ é™¤è¯¥åˆ†æ”¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;release&lt;/td&gt;
&lt;td&gt;é¢„å‘å¸ƒåˆ†æ”¯ï¼ŒåŸºäº developï¼Œé€šè¿‡æµ‹è¯•ååˆå¹¶åˆ° master å’Œ developï¼Œå¹¶åˆ é™¤è¯¥åˆ†æ”¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;hotfix&lt;/td&gt;
&lt;td&gt;ç»´æŠ¤é˜¶æ®µåˆ†æ”¯ï¼Œç´§æ€¥ bug ä¿®å¤ï¼ŒåŸºäº master åˆ†æ”¯åˆ›å»ºï¼Œå®Œæˆååˆå¹¶åˆ° master å’Œ develop å¹¶åˆ é™¤&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1650980272427.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;forking&#34;&gt;Forking&lt;/h2&gt;
&lt;p&gt;å¼€æºé¡¹ç›®ä¸­ï¼Œæœ€å¸¸ç”¨åˆ°çš„æ˜¯ Forking å·¥ä½œæµã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾å¼€å‘è€… A æ‹¥æœ‰ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œå¦‚æœå¼€å‘è€… B ä¹Ÿæƒ³å‚ä¸ A é¡¹ç›®çš„å¼€å‘ï¼ŒB å¯ä»¥ fork ä¸€ä»½ A çš„è¿œç¨‹ä»“åº“åˆ°è‡ªå·±çš„ GitHub è´¦å·ä¸‹ï¼Œåœ¨è‡ªå·±çš„ä»“åº“ä¸­ä¿®æ”¹ï¼Œå®Œæˆåå‘ A çš„ä»“åº“æäº¤ PRã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://img.golang.space/shot-1650980499917.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;å…·ä½“æµç¨‹-1&#34;&gt;å…·ä½“æµç¨‹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;fork ä»“åº“&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…‹éš†ä»“åº“&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone https://github.com/xxx/kitx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; kitx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git remote add upstream https://github.com/ixugo/kitx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç¦æ­¢æ¨é€åˆ° upstream ï¼Œå®é™…ä¸Šä¸€èˆ¬ä¹Ÿæ²¡æœ‰æƒé™ï¼Œå› ä¸ºé‚£å¹¶ä¸æ˜¯ä½ çš„ä»“åº“&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git remote set-url --push upstream no_pus
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºåŠŸèƒ½åˆ†æ”¯&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è¦åŒæ­¥ master æœ€æ–°çŠ¶æ€&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git fetch upstream
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git checkout master &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; git rebase upstream/master
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºåˆ†æ”¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git checkout -b feature/files
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®Œæˆå¼€å‘ï¼Œæäº¤&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åœ¨ç‰¹æ€§åˆ†æ”¯ï¼ŒåŒæ­¥è¿œç¨‹ä»“åº“æœ€æ–°çŠ¶æ€&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git fetch upstream &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; git rebase upstream/master
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æäº¤ä»£ç &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git add file.go
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git commit -m &lt;span class=&#34;s2&#34;&gt;&amp;#34;xxx åŠŸèƒ½&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ¨é€åˆ°è‡ªå·±çš„è¿œç¨‹ä»“åº“&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git push origin feature/files
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ github è‡ªå·±çš„ä»“åº“é‚£ï¼Œåˆ›å»º Pull requestã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://time.geekbang.org/column/intro/100079601?tab=catalog&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go è¯­è¨€é¡¹ç›®å¼€å‘å®æˆ˜&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://nvie.com/posts/a-successful-git-branching-model/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;A successful Git branching model&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://juejin.cn/post/7047529253428002830&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Gitã€GitHubã€GitLab Flowï¼Œå‚»å‚»åˆ†ä¸æ¸…ï¼Ÿä¸€å›¾çœ‹æ‡‚å„ç§åˆ†æ”¯ç®¡ç†æ¨¡å‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://juejin.cn/post/7050008713003794469&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Git flow å¼€å‘æŒ‡å—&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://juejin.cn/post/6989145079667490847&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gitflow æ˜¯ä»€ä¹ˆï¼Œæœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/configuring-a-remote-for-a-fork&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github å®˜æ–¹æ–‡æ¡£ pull requests æµç¨‹&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>RESTful API è®¾è®¡æŒ‡å—</title>
        <link>https://blog.golang.space/p/restful-api-%E8%AE%BE%E8%AE%A1%E6%8C%87%E5%8D%97/</link>
        <pubDate>Thu, 21 May 2020 00:00:00 +0000</pubDate>
        
        <guid>https://blog.golang.space/p/restful-api-%E8%AE%BE%E8%AE%A1%E6%8C%87%E5%8D%97/</guid>
        <description>&lt;h1 id=&#34;api-design&#34;&gt;API design&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;*&lt;/code&gt; è¡¨ç¤ºå¿…é¡»éµå®ˆï¼Œæ²¡æœ‰åˆ™ä¸ºå»ºè®®&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è¯·æ±‚&#34;&gt;è¯·æ±‚&lt;/h2&gt;
&lt;h3 id=&#34;æä¾›ç”¨äºè‡ªæ£€çš„è¯·æ±‚-id&#34;&gt;æä¾›ç”¨äºè‡ªæ£€çš„è¯·æ±‚ ID&lt;/h3&gt;
&lt;p&gt;åœ¨æ¯ä¸ª API å“åº”ä¸­åŒ…å«ä¸€ä¸ª Request_ID æ ‡å¤´ï¼Œå¹¶é‡‡ç”¨ UUID å€¼å¡«å……ã€‚é€šè¿‡åœ¨å®¢æˆ·æœºã€æœåŠ¡å™¨å’Œä»»ä½•åå°æœåŠ¡ä¸Šè®°å½•è¿™äº›å€¼ï¼Œå®ƒæä¾›äº†ä¸€ç§è·Ÿè¸ªã€è¯Šæ–­å’Œè°ƒè¯•è¯·æ±‚çš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åœ¨è¯·æ±‚ä½“ä¸­æ¥æ”¶åºåˆ—åŒ–çš„-json&#34;&gt;*åœ¨è¯·æ±‚ä½“ä¸­æ¥æ”¶åºåˆ—åŒ–çš„ JSON&lt;/h3&gt;
&lt;p&gt;åœ¨ PUT/PATCH/POST è¯·æ±‚ä½“æ¥æ”¶åºåˆ—åŒ–çš„ JSONï¼Œè€Œä¸æ˜¯è¡¨å•ç¼–ç &lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl -X POST https://service.com/apps &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;Content-Type: application/json&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -d &lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;name&amp;#34;: &amp;#34;demoapp&amp;#34;}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;01234567-89ab-cdef-0123-456789abcdef&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;demoapp&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;owner&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;email&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;username@example.com&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;01234567-89ab-cdef-0123-456789abcdef&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  ...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;rest-api&#34;&gt;*REST API&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;èµ„æºå&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;èµ„æºåä½¿ç”¨å¤æ•°ç‰ˆæœ¬ï¼Œé™¤éæ‰€æ¶‰åŠçš„èµ„æºæ˜¯ç³»ç»Ÿä¸­çš„å•ä¾‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/user		 &lt;span class=&#34;c1&#34;&gt;# Bad&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/users   &lt;span class=&#34;c1&#34;&gt;# Good&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Request Method&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;èµ„æº&lt;/th&gt;
&lt;th&gt;POST&lt;/th&gt;
&lt;th&gt;GET&lt;/th&gt;
&lt;th&gt;PUT&lt;/th&gt;
&lt;th&gt;DELETE&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;/users&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ–°å®¢æˆ·&lt;/td&gt;
&lt;td&gt;æ£€ç´¢æ‰€æœ‰å®¢æˆ·&lt;/td&gt;
&lt;td&gt;æ‰¹é‡æ›´æ–°å®¢æˆ·&lt;/td&gt;
&lt;td&gt;åˆ é™¤æ‰€æœ‰å®¢æˆ·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/users/:id&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;æ£€ç´¢æŒ‡å®šå®¢æˆ·&lt;/td&gt;
&lt;td&gt;æ›´æ–°æŒ‡å®šå®¢æˆ·&lt;/td&gt;
&lt;td&gt;åˆ é™¤æŒ‡å®šå®¢æˆ·&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;POST åˆ›å»ºèµ„æºï¼Œä¸åº”å…·æœ‰ä¸ç›¸å…³çš„å‰¯ä½œç”¨&lt;/li&gt;
&lt;li&gt;PUT  æ›´æ–°èµ„æºï¼Œè¯¥è¯·æ±‚å¿…é¡»æ˜¯å¹‚ç­‰çš„ã€‚&lt;/li&gt;
&lt;li&gt;GET  è·å–èµ„æº&lt;/li&gt;
&lt;li&gt;DELETE åˆ é™¤èµ„æº&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¿å…å®ç°çç¢çš„ POST / PUT / DELETE æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®é™… API å¼€å‘ä¸­ï¼Œæœ‰äº›æ“ä½œå¯èƒ½ä¸èƒ½å¾ˆå¥½çš„æ˜ å°„ä¸º REST èµ„æºï¼Œå¦‚ç¦è¨€æŸç”¨æˆ·ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹åšæ³•:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†æ“ä½œå˜ä¸ºèµ„æºçš„å±æ€§ï¼Œ &lt;code&gt;/users/id?active=false&lt;/code&gt;ï¼Œç¼ºç‚¹æ˜¯ä¸€ä¸ªæ¥å£è¦å¤„ç†å¤šç§å‚æ•°ç»„åˆï¼Œå°½å¯èƒ½å°†å±æ€§ç›¸å…³çš„æ”¾åœ¨ä¸€èµ·ï¼Œä¸ç„¶å»ºè®®æ–°å¢ä¸€ä¸ªæ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;ä¸‹çº§èµ„æº &lt;code&gt;/users/id/active&lt;/code&gt;ï¼Œé€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼å†³å®šå¢åˆ ï¼Œä¼˜ç‚¹æ˜¯æ¥å£ä½œç”¨æ˜æ™°ï¼Œç¼ºç‚¹æ˜¯æ¥å£æ•°é‡ä¼šå¾ˆå¤§ï¼Œæˆ‘è®¤ä¸ºï¼Œæ¥å£æ˜æ™°æ›´é‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;ä»¥ä¸Šä¸èƒ½è§£å†³ï¼Œæœ‰æ—¶å¯ä»¥æ‰“ç ´è§„èŒƒï¼Œå¦‚ç™»å½•å°±&lt;code&gt;/login&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;åˆ†é¡µ--è¿‡æ»¤--æ’åº--æœç´¢&#34;&gt;åˆ†é¡µ / è¿‡æ»¤ / æ’åº / æœç´¢&lt;/h4&gt;
&lt;p&gt;å¦‚ &lt;code&gt;/users&lt;/code&gt;  åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·ï¼Œéœ€è¦æä¾›åˆ†é¡µåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ»šåŠ¨ç¿»é¡µï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;/users?limit=10&amp;amp;since=10000&lt;/code&gt; ï¼Œsince æ˜¯å‰ä¸€é¡µæœ€åä¸€æ¡æ•°æ®çš„ ID æˆ–åºå·ã€‚&lt;/p&gt;
&lt;p&gt;è·³è½¬åˆ†é¡µï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;/users?limit=10&amp;amp;page=1&lt;/code&gt;ï¼Œpage è¡¨ç¤ºç¬¬å‡ é¡µ&lt;/p&gt;
&lt;p&gt;è¿‡æ»¤å±æ€§ï¼Œå¦‚æœç”¨æˆ·ä¸éœ€è¦èµ„æºçš„å…¨éƒ¨å±æ€§ï¼Œå¯ä»¥åœ¨ uri å‚æ•°ä¸­æŒ‡å®šéœ€è¦å“ªäº›ï¼Œ&lt;code&gt;/users?fields=email,username,address&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ’åºï¼Œ&lt;code&gt;/users?sort=age desc&lt;/code&gt;ï¼Œ&lt;code&gt;/users?sort=id,age desc&lt;/code&gt; ï¼Œæ³¨æ„ &lt;code&gt;id ï¼Œage desc&lt;/code&gt;åº”è¯¥ä¸ä¾‹å­ä¸­ç­‰ä»·ï¼Œå¤šä½™çš„ç©ºæ ¼å¯ä»¥å¿½ç•¥&lt;/p&gt;
&lt;p&gt;æœç´¢ï¼Œ&lt;code&gt;/users?key=zhangsan&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å…³äºåˆ†é¡µçš„è¡¥å……&lt;/p&gt;
&lt;p&gt;é»˜è®¤ limit = 20 ï¼Œ limit &amp;lt; 100ï¼Œè¦æŒ‡å®šä¸Šé™é˜²æ­¢æ‹’ç»æœåŠ¡æ”»å‡»&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;type Response struct{
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  Data any  // åˆ†é¡µæ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  Next string // ä¸‹ä¸€é¡µçš„ sinceï¼Œåœ¨è¯·æ±‚ä¸‹ä¸€é¡µæ—¶åº”è¯¥å¸¦ä¸Šè¿™ä¸ªå‚æ•°
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;é‡å¤è¯·æ±‚&#34;&gt;é‡å¤è¯·æ±‚&lt;/h4&gt;
&lt;p&gt;æœåŠ¡ç«¯èƒ½å¤Ÿé€šè¿‡æ­¤IDæ¥æ£€æµ‹è¯·æ±‚æ˜¯å¦é‡å¤ï¼Œä¿è¯è¯·æ±‚åªè¢«å¤„ç†ä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ç”¨äºæ£€æµ‹å†—ä½™è¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ç¬¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// è¿™ä¸ªå­—æ®µåº”è¯¥å‘½åä¸º `request_id`
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request_id&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;å¼‚æ­¥æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ‰æ—¶ï¼ŒPOSTã€PUTã€PATCH æˆ– DELETE æ“ä½œå¯èƒ½éœ€è¦å¤„ç†æ“ä½œéœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½å®Œæˆã€‚ å¦‚æœéœ€è¦ç­‰å¾…è¯¥æ“ä½œå®Œæˆåæ‰èƒ½å‘å®¢æˆ·ç«¯å‘é€å“åº”ï¼Œå¯èƒ½ä¼šé€ æˆä¸å¯æ¥å—çš„å»¶è¿Ÿã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·è€ƒè™‘å°†è¯¥æ“ä½œè®¾ç½®ä¸ºå¼‚æ­¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;åº”å…¬å¼€ä¸€ä¸ªå¯è¿”å›å¼‚æ­¥è¯·æ±‚çŠ¶æ€çš„ç»ˆç»“ç‚¹ï¼Œä½¿å®¢æˆ·ç«¯èƒ½å¤Ÿé€šè¿‡è½®è¯¢çŠ¶æ€ç»ˆç»“ç‚¹æ¥ç›‘è§†çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;å¼‚æ­¥è¯·æ±‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;GET /service/restart
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;çŠ¶æ€ç  : &lt;span class=&#34;m&#34;&gt;201&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;s2&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt; : &lt;span class=&#34;s2&#34;&gt;&amp;#34;/service/status&amp;#34;&lt;/span&gt;   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡è®¿é—® URL å¯ä»¥çŸ¥é“å½“å‰å¼‚æ­¥æ‰§è¡Œçš„çŠ¶æ€&lt;/p&gt;
&lt;h4 id=&#34;action&#34;&gt;Action&lt;/h4&gt;
&lt;p&gt;æ˜ç¡®ä»¥è¡ŒåŠ¨å‰ç¼€è¯¦ç»†è¯´æ˜&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/resources/:resource/actions/:action
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¾‹å¦‚åœæ­¢æŸä¸€ç‰¹å®šçš„è¿è¡Œ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/runs/&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;run_id&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;/actions/stop
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯¹é›†åˆçš„æ“ä½œä¹Ÿåº”è¯¥æœ€å°åŒ–ã€‚å¦‚æœéœ€è¦ï¼Œåº”è¯¥ä½¿ç”¨ä¸€ä¸ªé¡¶çº§çš„åŠ¨ä½œå»¶é•¿æ¥é¿å…åç§°ç©ºé—´å†²çªï¼Œå¹¶æ¸…æ¥šåœ°æ˜¾ç¤ºåŠ¨ä½œçš„èŒƒå›´:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/actions/:action/resources
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¾‹å¦‚é‡å¯æ‰€æœ‰æœåŠ¡å™¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/actions/restart/servers
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;ä¸€è‡´çš„è·¯å¾„æ ¼å¼&#34;&gt;*ä¸€è‡´çš„è·¯å¾„æ ¼å¼&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨å°å†™å’Œç ´æŠ˜å·åˆ†éš”çš„è·¯å¾„å&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;service-api.com/users
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;service-api.com/app-setups
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æœ€å°åŒ–è·¯å¾„åµŒå¥—ï¼Œä¼˜å…ˆåœ¨èµ„æºçš„çˆ¶è·¯å¾„ä¸Šå®šä½èµ„æºæ¥é™åˆ¶åµŒå¥—æ·±åº¦&lt;/p&gt;
&lt;p&gt;é¿å…è¶…è¿‡ 2 å±‚çš„èµ„æºåµŒå¥—ï¼Œå»ºè®®å°†å…¶å®ƒèµ„æº è½¬æ¢ä¸º?å‚æ•°ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Bad&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/orgs/&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;org_id&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;/apps/&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;app_id&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;/dynos/&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;dyno_id&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Good&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/orgs/&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;org_id&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/orgs/&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;org_id&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;/apps
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/apps/&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;app_id&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/apps/&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;app_id&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;/dynos
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/dynos/&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;dyno_id&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;å“åº”&#34;&gt;å“åº”&lt;/h2&gt;
&lt;h4 id=&#34;è¿”å›é€‚å½“çš„çŠ¶æ€ä»£ç &#34;&gt;*è¿”å›é€‚å½“çš„çŠ¶æ€ä»£ç &lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;200 OK&lt;/code&gt; è¯·æ±‚æˆåŠŸ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;400 Bad Request&lt;/code&gt; è¯·æ±‚å‚æ•°æœ‰è¯¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;401 Unauthorized&lt;/code&gt; ç”¨æˆ·èº«ä»½æœªéªŒè¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;403 Forbidden&lt;/code&gt; ç”¨æˆ·æ²¡æœ‰è®¿é—®è¯¥èµ„æºæƒé™&lt;/li&gt;
&lt;li&gt;&lt;code&gt;500 Internal Server Error&lt;/code&gt; æœåŠ¡å™¨å¼‚å¸¸&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å“åº”æä¾›å…¨éƒ¨èµ„æº&#34;&gt;å“åº”æä¾›å…¨éƒ¨èµ„æº&lt;/h4&gt;
&lt;p&gt;åœ¨å“åº”ä¸­å°½å¯èƒ½æä¾›å®Œæ•´çš„èµ„æºè¡¨ç¤º(å³åŒ…å«æ‰€æœ‰å±æ€§çš„å¯¹è±¡)ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl -X DELETE &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  https://service.com/apps/1f9b/domains/0fd4
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;HTTP/1.1 &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Content-Type: application/json&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;charset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;utf-8
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;created_at&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;2012-01-01T12:00:00Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;hostname&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;subdomain.example.com&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;01234567-89ab-cdef-0123-456789abcdef&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;updated_at&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;2012-01-01T12:00:00Z&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;æä¾›èµ„æº-uuid&#34;&gt;æä¾›èµ„æº UUID&lt;/h4&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ä¸ºæ¯ä¸ªèµ„æºæä¾›ä¸€ä¸ª id å±æ€§ã€‚é™¤éæœ‰å……åˆ†çš„ç†ç”±ï¼Œå¦åˆ™è¯·ä½¿ç”¨ uuidã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;01234567-89ab-cdef-0123-456789abcdef&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;æä¾›æ ‡å‡†æ—¶é—´æˆ³&#34;&gt;æä¾›æ ‡å‡†æ—¶é—´æˆ³&lt;/h4&gt;
&lt;p&gt;åªæ¥å—å’Œè¿”å› UTC ( ä¸–ç•Œæ ‡å‡†æ—¶é—´ )æ—¶é—´ã€‚ä»¥ ISO8601æ ¼å¼å‘ˆç°æ—¶é—´ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // ...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;created_at&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;2012-01-01T12:00:00Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;updated_at&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;2012-01-01T13:00:00Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // ...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;æä¾›æ ‡å‡†çš„å“åº”ç±»å‹&#34;&gt;*æä¾›æ ‡å‡†çš„å“åº”ç±»å‹&lt;/h4&gt;
&lt;p&gt;å½“ä¸º &lt;code&gt;null&lt;/code&gt; æ—¶ï¼Œå¯ä»¥å¿½ç•¥è¯¥å‚æ•°&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­—ç¬¦ä¸² string || &lt;code&gt;null&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¸ƒå°”     false || true&lt;/li&gt;
&lt;li&gt;æ•°å­—     number || &lt;code&gt;null&lt;/code&gt;  ï¼Œæ³¨æ„:ä¸€äº› JSON è§£æå™¨å°†è¿”å›ç²¾åº¦è¶…è¿‡15ä½çš„æ•°å­—ä½œä¸ºå­—ç¬¦ä¸²ã€‚&lt;/li&gt;
&lt;li&gt;æ•°ç»„      [] ï¼Œ æ²¡æœ‰å€¼æ—¶è¿”å›ç©ºæ•°ç»„&lt;/li&gt;
&lt;li&gt;å¯¹è±¡     object || &lt;code&gt;null&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ä½¿ç”¨åµŒå¥—å¯¹è±¡åºåˆ—åŒ–&#34;&gt;*ä½¿ç”¨åµŒå¥—å¯¹è±¡åºåˆ—åŒ–&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Bad&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;service-production&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;owner_id&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;5d8201b0...&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // ...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Good&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;service-production&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;owner&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;5d8201b0...&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // ...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ç§æ–¹æ³•å¯ä»¥åœ¨ä¸æ”¹å˜å“åº”ç»“æ„æˆ–å¼•å…¥æ›´å¤šé¡¶çº§å“åº”å­—æ®µçš„æƒ…å†µä¸‹å†…è”æ›´å¤šå…³äºç›¸å…³èµ„æºçš„ä¿¡æ¯ï¼Œä¾‹å¦‚:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;service-production&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;owner&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;5d8201b0...&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;email&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;alice@heroku.com&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  // ...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ³¨æ„è¦ä¸ºå­é›†æä¾›å”¯ä¸€å€¼ï¼Œé¿å…ä¸ä¸€è‡´å’Œæ··æ·†ï¼Œå¦‚ &lt;code&gt;id&lt;/code&gt; å­—æ®µ&lt;/p&gt;
&lt;h4 id=&#34;ç”Ÿæˆç»“æ„åŒ–é”™è¯¯&#34;&gt;*ç”Ÿæˆç»“æ„åŒ–é”™è¯¯&lt;/h4&gt;
&lt;p&gt;å¯¹é”™è¯¯ç”Ÿæˆä¸€è‡´çš„ï¼Œç»“æ„åŒ–çš„å“åº”ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ…æ‹¬ä¸€ä¸ªæœºå™¨å¯è¯»çš„é”™è¯¯ IDï¼Œå¯ä»¥é€šè¿‡è¯¥ ID åˆ¤æ–­å‡ºå“ªç±»é”™è¯¯ï¼Œå­—æ®µç”¨ &lt;code&gt;code&lt;/code&gt; è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;åŒ…æ‹¬ä¸€ä¸ªç”¨æˆ·å¯è¯»çš„é”™è¯¯æ¶ˆæ¯ï¼Œä»¥åŠé”™è¯¯è¯¦æƒ…ï¼Œå¦‚æœ‰éœ€è¦å¯ä»¥å¢åŠ &lt;code&gt;URL&lt;/code&gt; ï¼Œå‘å®¢æˆ·ç«¯æç¤ºå¦‚ä½•è§£å†³é”™è¯¯çš„åœ°å€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;http çš„çŠ¶æ€ç ä¸è¦ä½¿ç”¨å¤ªå¤šï¼Œå»ºè®®éœ€è¦ä»¥ä¸‹3ä¸ª&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;200 - è¯·æ±‚æˆåŠŸ&lt;/li&gt;
&lt;li&gt;400 - å‘ç”Ÿé”™è¯¯&lt;/li&gt;
&lt;li&gt;401 - æœªç™»å½•æˆ–èº«ä»½ä»¤ç‰Œè¿‡æœŸ å¯¼è‡´çš„èº«ä»½éªŒè¯å¤±è´¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç»è¿‡æ›´å¤šçš„å®éªŒä¸å­¦ä¹ ï¼Œè®¤ä¸º è‹±æ–‡é”™è¯¯ç  æ¯” æ•°å­—é”™è¯¯ç  æ›´é€‚åˆå¤§å¤šæ•°åœºæ™¯ï¼Œä»¥ä¸‹æ–¹æ¡ˆä»…ä¾›äº†è§£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Code è®¾è®¡è§„èŒƒï¼Œçº¯æ•°å­—è¡¨ç¤ºï¼Œå¦‚&lt;code&gt;10101&lt;/code&gt;ï¼Œ1 å¼€å¤´çš„é€šç”¨æ¨¡å—é€‚åˆæ‰€æœ‰é¡¹ç›®ï¼Œå…¶å®ƒæ•°å­—å¼€å¤´çš„ä¸šåŠ¡é”™è¯¯é’ˆå¯¹ä¸šåŠ¡è®¾è®¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1ï¼Œé€šç”¨&lt;/li&gt;
&lt;li&gt;01ï¼Œèµ„æºæ¨¡å—&lt;/li&gt;
&lt;li&gt;01ï¼Œé”™è¯¯ç åºå·ï¼Œæ¯”å¦‚è¯¥åºå·è¡¨ç¤ºè¯·æ±‚é¢‘ç¹&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æœåŠ¡&lt;/th&gt;
&lt;th&gt;æ¨¡å—&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;01&lt;/td&gt;
&lt;td&gt;é€šç”¨ - åŸºæœ¬é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;02&lt;/td&gt;
&lt;td&gt;é€šç”¨ - æ•°æ®åº“ç±»é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;03&lt;/td&gt;
&lt;td&gt;é€šç”¨ - è®¤è¯æˆæƒç±»é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;04&lt;/td&gt;
&lt;td&gt;é€šç”¨ - ç¼–è§£ç ç±»é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;01&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·æœåŠ¡ - å†å²ç™»å½•æ¨¡å—&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;HTTP çŠ¶æ€ç &lt;/th&gt;
&lt;th&gt;é”™è¯¯ç &lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;200&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;å®é™…ä¸Šä¹Ÿæ— éœ€è¿”å› codeï¼Œæ­£å¸¸è¿”å›ä¸šåŠ¡æ•°æ®å³å¯&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;400&lt;/td&gt;
&lt;td&gt;10101&lt;/td&gt;
&lt;td&gt;æœªçŸ¥é”™è¯¯&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;400&lt;/td&gt;
&lt;td&gt;10102&lt;/td&gt;
&lt;td&gt;è¯·æ±‚å‚æ•°æœ‰è¯¯&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;400&lt;/td&gt;
&lt;td&gt;10201&lt;/td&gt;
&lt;td&gt;SQL è¯­æ³•é”™è¯¯&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;401&lt;/td&gt;
&lt;td&gt;10301&lt;/td&gt;
&lt;td&gt;token éªŒè¯å¤±è´¥&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;400&lt;/td&gt;
&lt;td&gt;10302&lt;/td&gt;
&lt;td&gt;æ“ä½œäº†ä¸å±äºè‡ªå·±çš„èµ„æº&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;400&lt;/td&gt;
&lt;td&gt;10401&lt;/td&gt;
&lt;td&gt;json ç¼–è§£ç å‡ºé”™&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;400&lt;/td&gt;
&lt;td&gt;20101&lt;/td&gt;
&lt;td&gt;è®°å½•ç”¨æˆ·ç™»å½•å‡ºé”™&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;é”™è¯¯ä¿¡æ¯è§„èŒƒ&#34;&gt;é”™è¯¯ä¿¡æ¯è§„èŒƒ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹å¤–æš´éœ²çš„é”™è¯¯è¦ç®€ä»‹ï¼Œèƒ½å‡†ç¡®è¯´æ˜é—®é¢˜&lt;/li&gt;
&lt;li&gt;é”™è¯¯è¯´æ˜ï¼Œåº”è¯¥æ˜¯è¯¥æ€ä¹ˆåšï¼Œè€Œä¸æ˜¯å“ªé‡Œé”™äº†ã€‚&lt;/li&gt;
&lt;li&gt;é”™è¯¯ä¸­ä¸èƒ½å‡ºç°æ•æ„Ÿçš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ•°æ®åº“çš„é”™è¯¯æç¤ºï¼Œç”¨æˆ·æŸæŸèµ„æºæç¤º&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.1&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;400&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Bad&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Requests&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;code&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;      &lt;span class=&#34;mi&#34;&gt;10101&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;msg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Account reached its API rate limit.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;details&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;é€Ÿç‡é™åˆ¶&#34;&gt;é€Ÿç‡é™åˆ¶&lt;/h4&gt;
&lt;p&gt;é€Ÿç‡é™åˆ¶æ¥è‡ªå®¢æˆ·çš„è¯·æ±‚ï¼Œä»¥ä¿æŠ¤æœåŠ¡çš„å¥åº·å’Œç»´æŠ¤å…¶ä»–å®¢æˆ·çš„é«˜æœåŠ¡è´¨é‡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¤ç‰Œæ¡¶ç®—æ³•æ¥é‡åŒ–è¯·æ±‚é™åˆ¶ã€‚å¯ä»¥åœ¨ RateLimit-Remaining response header ä¸­è¿”å›æ¯ä¸ªè¯·æ±‚çš„è¯·æ±‚æ ‡è®°çš„å‰©ä½™æ•°é‡ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åœ¨æ‰€æœ‰å›å¤ä¸­ä¿æŒ-json-çš„ç®€åŒ–&#34;&gt;åœ¨æ‰€æœ‰å›å¤ä¸­ä¿æŒ JSON çš„ç®€åŒ–&lt;/h4&gt;
&lt;p&gt;é¢å¤–çš„ç©ºç™½ä¸ºè¯·æ±‚å¢åŠ äº†ä¸å¿…è¦çš„å“åº”å¤§å°ï¼Œæœ€å¥½å°½é‡å‡å°‘ JSON å“åº”ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Bad&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;beta&amp;#34;&lt;/span&gt;: false,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;email&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;alice@heroku.com&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Good&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta&amp;#34;&lt;/span&gt;:false,&lt;span class=&#34;s2&#34;&gt;&amp;#34;email&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;alice@heroku.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;å¯¹äºé¡¹ç›®è¦æ±‚&#34;&gt;å¯¹äºé¡¹ç›®è¦æ±‚&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æä¾›å›¢é˜Ÿå¯è¯»çš„æ–‡æ¡£&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æä¾›å¯æ‰§è¡Œçš„ç¤ºä¾‹&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://google-cloud.gitbook.io/api-design-guide/standard_methods&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Google API è®¾è®¡æŒ‡å—&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;äº†è§£æ›´å¤š-restful-api-è®¾è®¡&#34;&gt;äº†è§£æ›´å¤š RESTful API è®¾è®¡&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://geemus.gitbooks.io/http-api-design/content/en/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Heroku RESTful API Design&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/zh-cn/azure/architecture/best-practices/api-design&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Microsoft RESTful API è®¾è®¡&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.github.com/cn/rest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github RESTful API è®¾è®¡&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
