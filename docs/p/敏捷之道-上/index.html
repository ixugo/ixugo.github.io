<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='对事不对人。防微杜渐。欲速则不达。敏捷反馈。测试驱动开发。'>
<title>敏捷之道 (上)</title>

<link rel='canonical' href='https://blog.golang.space/p/%E6%95%8F%E6%8D%B7%E4%B9%8B%E9%81%93-%E4%B8%8A/'>

<link rel="stylesheet" href="/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css"><meta property='og:title' content='敏捷之道 (上)'>
<meta property='og:description' content='对事不对人。防微杜渐。欲速则不达。敏捷反馈。测试驱动开发。'>
<meta property='og:url' content='https://blog.golang.space/p/%E6%95%8F%E6%8D%B7%E4%B9%8B%E9%81%93-%E4%B8%8A/'>
<meta property='og:site_name' content='ixugo'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='读书笔记' /><meta property='article:published_time' content='2023-01-19T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2023-01-19T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="敏捷之道 (上)">
<meta name="twitter:description" content="对事不对人。防微杜渐。欲速则不达。敏捷反馈。测试驱动开发。">
    <link rel="shortcut icon" href="img/favicon.ico" />

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-192125643-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu0b04ba6d7249c9f90c92db974439eb8c_208246_300x0_resize_box_3.png" width="300"
                            height="321" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🧐</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ixugo</a></h1>
            <h2 class="site-description">走出舒适区</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/ixugo'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#态度决定一切">态度决定一切</a></li>
    <li><a href="#欲速则不达">欲速则不达</a></li>
    <li><a href="#对事不对人">对事不对人</a></li>
    <li><a href="#排除万能奋勇前进">排除万能，奋勇前进</a></li>
    <li><a href="#学无止境">学无止境</a></li>
    <li><a href="#打破砂锅问到底">打破砂锅问到底</a></li>
    <li><a href="#把握开发节奏">把握开发节奏</a></li>
    <li><a href="#交付用户想要的软件">交付用户想要的软件</a></li>
    <li><a href="#保持可以发布">保持可以发布</a></li>
    <li><a href="#提早集成频繁集成">提早集成，频繁集成</a></li>
    <li><a href="#固定的价格就是保证要背叛承诺">固定的价格就是保证要背叛承诺</a></li>
    <li><a href="#敏捷反馈">敏捷反馈</a></li>
    <li><a href="#先用它再实现它">先用它再实现它</a></li>
    <li><a href="#不同环境就有不同问题">不同环境，就有不同问题</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/%E6%95%8F%E6%8D%B7%E4%B9%8B%E9%81%93-%E4%B8%8A/">敏捷之道 (上)</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            对事不对人。防微杜渐。欲速则不达。敏捷反馈。测试驱动开发。
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 19, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    2 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="敏捷之道上">敏捷之道(上)</h1>
<p>&lt;高效程序员的 45 个习惯&gt; 读书笔记</p>
<h2 id="态度决定一切">态度决定一切</h2>
<p>发生问题后，最高的优先级是找出罪魁祸首对吗?</p>
<p>肯定的答案是: 优先解决问题!</p>
<p>如果说出来的话只是让事态更复杂，或一味地抱怨，或者伤害他人的感情，无意中在给问题火上浇油。</p>
<p>为了解决或缓解这个问题，我们能够做些什么?</p>
<p>敏捷开发团队中每个人都应该抱着这样的观点，咱们可以从自己做起。例如一个开发者带着抱怨或问题来过来，咱们要了解具体的问题，询问他需要什么样的帮助。这样一个简单的行为表明目的是解决问题，而不是追究责任。</p>
<p>相反咱们找人帮忙，却没人积极响应，那么应该主动引导对话，解释清楚想要什么。</p>
<p>一个重大的错误应该被当做是一次学习，而不是指责他人的机会。</p>
<blockquote>
<p>指责不能修复问题.</p>
<p>Vlame doesn&rsquo;t fix bugs.</p>
</blockquote>
<p><strong>中庸之道</strong></p>
<ul>
<li>「这不是我的错」这句话不对，「这都是你/他的错」这句话更不对</li>
<li>如果没有犯过任何错误，说明可能没有努力去工作</li>
<li>如果一个团队成员误解了需求/API/会议决策，那么，意味着其他成员也有相同的误解，要确保整个团队尽快消除误解。</li>
<li>如果某个团队成员不是在帮助团队解决问题的方向前进，则应该要求他离开当前项目上的主要工作。</li>
</ul>
<h2 id="欲速则不达">欲速则不达</h2>
<p>拙劣的码农会不假思索的改完代码，快速转向下一个问题。</p>
<p>卓越的码农会挖掘更深一层，去理解这个函数的意义，思考修改函数的影响。</p>
<p>否则，在经年累月的屎山中添加新功能或修复 bug，难逃脱发的厄运。</p>
<p>千里之堤溃于蚁穴。快速修复的诱惑很容易令人把持不住，治标不治本啊!</p>
<blockquote>
<p>防微杜渐.</p>
<p>Beware of land mines.</p>
</blockquote>
<p>很可能在公司里，有人告诉你:&ldquo;无论如何千万不能碰那个函数，写代码那哥们早就不在了，没有人能看懂他的代码&rdquo;</p>
<p><strong>建议</strong>:</p>
<blockquote>
<p>不要孤立地编码.</p>
<p>团队成员应该花时间阅读其他同时的代码，确保代码是可读可理解的。</p>
<p>Don&rsquo;t code in isolation.</p>
</blockquote>
<blockquote>
<p>单元测试.</p>
<p>单元测试很自然就会帮助你把代码分层，解耦成小的模块。</p>
<p>Use unit tests.</p>
</blockquote>
<p><strong>中庸之道</strong></p>
<ul>
<li>必须理解代码是如何工作的，但不一定要成为专家，能够使用它进行有效工作即可。</li>
<li>如果有一块代码其他人很难看懂，意味着任何人包括原作者都很难维护它</li>
<li>所有的大型系统都非常复杂，没有一个人能够完全明白所有代码。咱们除了深入开发的部分代码之外，还需要从更高层面了解系统架构，各个功能模块是如何交互的。</li>
<li>不要急于修复一段没能理解的代码。</li>
</ul>
<h2 id="对事不对人">对事不对人</h2>
<p>&ldquo;那样很蠢!&rdquo; 这句话想表达设计上的问题，但无意中却重伤了他人，有明示设计者很蠢之意。</p>
<p>更有效优雅的方式应该是: 「感谢，我想知道，如果两个用户同时登录会发生什么情况?」</p>
<p>通常对一个明显错误有哪些反应?</p>
<ul>
<li>否定个人能力</li>
<li>指出缺点，否则其观点</li>
<li>问询并提出顾虑</li>
</ul>
<p>第三种方法，没有谴责，没有批判，由此由浅入深的交谈，而非面红耳赤的争辩。</p>
<p>尝试引导性的提出问题。</p>
<p>我们每个人都有一些极好的创新想法，同样也会萌生一些很愚蠢的想法。好的作品和设计都需要大量的创造力和洞察力，分享并融合各种不同的想法和观点，远胜于单个想法为项目带来的价值。</p>
<p>重点要放在解决问题上，而不是极力证明谁的主意更好。团队中一个人的智商高是没有用的，如何很顽固并且拒绝合作，那就更糟糕。</p>
<p>每个人都都会有好的想法，也会有不对的想法，每个人都需要自由表达观点。你不需要很出色才能起步，但是你必须起步才能变得很出色。</p>
<p>有关于团队决策的有效方法论:</p>
<ul>
<li>
<p>设定最终期限，以防止陷入无休止的理论争辩。</p>
</li>
<li>
<p>逆向思维，先积极看到它的正面，然后努力从反面认识它。目的是找出优点最多缺点最少的方案。</p>
</li>
<li>
<p>设立仲裁人，选一个仲裁人作为本次会议的决策者。仲裁人应该专注于调停，而不是发表自己的观点，理想情况下不应在项目中有既得利益。</p>
</li>
<li>
<p>支持已经做出的决定，一旦方案被确定，团队成员必须通力合作。目标是让项目成功满足用户需求，客户并不关心这是谁的主意，只关心产品是否符合他们的期望。</p>
<p>设计充满了妥协，工作者不感情用事是需要克制力的，若咱们能展现出成熟大度来，大家一定不会视而不见，这需要有人带头，身体力行，去感染另一部分人。</p>
</li>
</ul>
<p><strong>中庸之道</strong></p>
<ul>
<li>
<p>尽力贡献自己的好想法，没有被采纳也无需过多情绪，不要因为表现自己的想法而画蛇添足。</p>
</li>
<li>
<p>脱离实际的反方观点会使争论变味，你很容易提出一堆不太可能发生的情形去批驳它，这时需要扪心自问: 类型问题以前发生过吗? 是否经常发生呢?</p>
<p>「我们不能采用这个方案，万一数据库厂商倒闭.」「甲方绝不对接收这个方案」，不能凭空想象。</p>
</li>
</ul>
<h2 id="排除万能奋勇前进">排除万能，奋勇前进</h2>
<p>谁去给猫系铃铛?</p>
<p>老鼠们打算在猫的脖子上系一个铃销，这样猫巡逻靠近的时候，就能预先得到警报。每只老鼠都点头，认为这是一个绝妙的想法。这时一只年老的老鼠问道：“那么，谁愿意挺身而出去系铃铛呢？”毫无疑问，没有一只老鼠站出来。当然，计划也就这样泡汤了。</p>
<p>有时，绝妙的计划会因为勇气不足而最终失败。尽管前方很危险—不管是真的鱼雷或者只是一个比喻——你必须有勇气向前冲锋，做你认为对的事情。</p>
<p>假如要修复其他人编写的代码，很脏乱，很难理解，这时怎么办?</p>
<p>也许会跳起来告诉周围人，代码是多么糟糕，但那只是抱怨和发泄，并不能解决问题。</p>
<p>相反，咱们应该重写这些代码，并比较重写前后的优缺点，动手证明是最有效的方式。</p>
<p><strong>中庸之道</strong></p>
<ul>
<li>设计或代码中出现了奇怪的问题，花时间去理解为什么，如果清晰明朗需要重构代码就去做。但如果没有马上理解那段代码，不要轻易地否定和重写它们，那不是勇气是鲁莽。</li>
<li>「更清晰的代码」是无法打动生意人的，节约资金，获得更好的投资回报等会让论点更有说服力。</li>
</ul>
<h2 id="学无止境">学无止境</h2>
<p>逆水行舟，不进则退。</p>
<p>许多新技术都基于现有的技术和思想，它们会加入一些新的东西，这些新东西是逐步加的量，如果跟踪技术变化，那么学习这些新东西就是增量变化。</p>
<p>敏捷的根本之一是拥抱变化，曾经非常有用的东西往往会靠边站，还会降低效率。</p>
<p>在学习新的东西，要丢弃阻止你前进的旧习惯。</p>
<p>如何才能跟上技术变化的步伐呢?</p>
<ul>
<li>迭代和增量式的学习，每天计划用一点时间来学习新技术。听到不熟悉的术语或短语，记录下来，在计划时间深入研究。</li>
<li>通过邮件/技术博客/社区了解行情</li>
<li>阅读</li>
</ul>
<p><strong>中庸之道</strong></p>
<ul>
<li>你不可能精通每一项技术，没有必要去做这样的尝试，只要在某些方面成为专家，就能用同样的方法，很容易成为新领域的专家。</li>
<li>你要明白为什么需要这项新技术，它试图解决什么样的问题?</li>
<li>避免一时冲动的情况下，只是因为想学习而将应用切换到新的技术。在决策时，必须评估新技术的优势，开发一个小的原型系统是对付技术狂热者的一剂良药。</li>
</ul>
<h2 id="打破砂锅问到底">打破砂锅问到底</h2>
<p>在计算机世界，很多问题会影响应用，为了解决问题，需要知道许多影响的因素。当找人询问任何相关问题时，让他们耐心回答，这是你的职责。</p>
<p>你的问题甚至会帮助他们理清思路，从一个新人的角度提出的问题，给他们提供了一个新的视角，也许就帮助他们解决了一直令人困扰的问题。</p>
<p>「哎呀，只要每周重启一次系统，就没问题了」</p>
<p>「你必须依次执行 3 次构建才能完成构建」</p>
<p>「我们的用户根本不想要那个功能」</p>
<p>真的吗? 为什么呀?  不能只满足于别人告诉你的表面现象，要不停地提问直到你明白问题的根源。</p>
<p><strong>中庸之道</strong></p>
<ul>
<li>咱们可能跑题，问一些与主题无关的问题，要问到点子上。</li>
<li>当问为什么的时候，也许会被反问，「为什么你问这个问题」，在提问之前，想好提问的理由，也许有助于问出恰当的问题。</li>
<li>「这个，我不知道」是一个好的起点。</li>
</ul>
<h2 id="把握开发节奏">把握开发节奏</h2>
<p>在许多不成功的项目中，基本都是随意安排工作计划，那样随机安排很难处理，根本不知道明天将会发生什么。</p>
<p><strong>中庸之道</strong></p>
<ul>
<li>每天结束的时候，测试代码，提交代码，没有残留的代码</li>
<li>不要搞得经常加班</li>
<li>如果开发节奏过于密集，会精疲力竭</li>
<li>有规律的开发节奏会暴露很多问题</li>
</ul>
<h2 id="交付用户想要的软件">交付用户想要的软件</h2>
<p>让客户做决定。</p>
<p>开发者能做的一个最重要的决定就是，判断哪些是自己决定不了的。</p>
<p>应该让业主做决定，你不需要自己给业务上的关键问题做决定。毕竟，那不是你的事情。</p>
<p><strong>中庸之道</strong></p>
<ul>
<li>记录客户做出的决定，并注明原因，好记性不如烂笔头</li>
<li>不要用低级别和没有价值的问题打扰繁忙的业务人员</li>
<li>不要假设低级别的问题不会影响他们的业务</li>
<li>如果业务负责人回答我不知道，尽你所能提供建议</li>
</ul>
<h2 id="保持可以发布">保持可以发布</h2>
<p>在团队工作，修改一些东西的时候必须很谨慎，时刻警惕，每次改动都会影响系统的状态和整个团队的工作效率。</p>
<p>在办公室不能容忍任何人乱丢垃圾，为什么就可以容忍一些人给项目带来垃圾代码呢?</p>
<p>下面是一个简单的工作流程，可以防止你提交破坏系统的代码。</p>
<ul>
<li>在本地运行测试</li>
<li>检出最新的代码 git pull</li>
<li>提交代码</li>
</ul>
<h2 id="提早集成频繁集成">提早集成，频繁集成</h2>
<p>绝不要做大爆炸式的集成。越早解决它们，工作量就越小。如果推迟集成的时间，解决这些问题就会变得很难，需要大量和大范围地修改代码。</p>
<h2 id="固定的价格就是保证要背叛承诺">固定的价格就是保证要背叛承诺</h2>
<p>软件项目天生就是变化无常的，如果要提前给出一个固定的开发时间，就几乎肯定不能遵守开发上的承诺。</p>
<p>那如何做到更精确的评估呢? 可以试试这样的方法:</p>
<ol>
<li>主动提议先构建系统最初，有用的部分，这时候不是要完成所有的功能，而是足够一次交付，并能让用户真正使用，通常在 6~8 周。</li>
<li>第一次迭代结束，客户有两个选择，可以新增功能继续下一个交付，要么取消合同，仅需支付第一个迭代的费用。</li>
<li>如何继续前进，这时根据提出的增量功能，应该就可以很好预测下一个迭代工作。</li>
</ol>
<h2 id="敏捷反馈">敏捷反馈</h2>
<p>编写能产生反馈的代码，通过单元测试来获取反馈。</p>
<ul>
<li>确保测试是可重复的，使用当前时间/机器固定 IP 等都是使其依赖运行时的机器</li>
<li>测试边界条件，比如日期 11:59:59/0:00:00，比如月份 0 / 13 / -1</li>
<li>不要放过任何失败的测试</li>
</ul>
<p>一旦单元测试到位，采用这样的回归测试，就可以随意重构代码。单元测试会确保你不会意外地破坏任何功能。</p>
<p>如果你仍然在寻找开始单元测试的理由，下面有很多:</p>
<ul>
<li>单元测试能及时提供反馈</li>
<li>单元测试让你的代码更佳健壮</li>
<li>单元测试是有用的设计工具</li>
<li>单元测试是让你自信的后台</li>
<li>单元测试是解决问题时的探测器</li>
<li>单元测试是可信的文档</li>
<li>单元测试是学习工具</li>
</ul>
<h2 id="先用它再实现它">先用它再实现它</h2>
<p>在说服他人使用它之前，先得让自己切实的使用产品。</p>
<p>先写测试，你就会站在代码用户的角度来思考，而不仅仅是单纯的实现。</p>
<p>你会发现因为你自己要使用它们，所以能设计一个更有用，更一致的接口。</p>
<p>先写测试有助于消除复杂的设计，让你可以专注于真正需要完成的工作。</p>
<p>举一个编程例子，这是一个可以两个人玩的「井字旗」 游戏:</p>
<p>开始，会思考如何为这个游戏做代码设计，也许会考虑到需要这些类，棋盘/行列/用户/规则/等。</p>
<p>首先写棋盘的测试，类似于这样</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TestBoard</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testint</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">s</span> <span class="o">:=</span> <span class="nf">NewBoard</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">request</span><span class="p">.</span><span class="nf">NoNil</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">request</span><span class="p">.</span><span class="nf">IsFalse</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">s</span><span class="p">.</span><span class="nx">GameOver</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>此时执行测试应该是失败的，因为结构体 board 还不存在，需要实现这个结构体。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Board</span> <span class="kd">struct</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">GameOver</span> <span class="kt">bool</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">NewBoard</span><span class="p">()</span> <span class="o">*</span><span class="nx">Board</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="o">&amp;</span><span class="nx">Board</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>此时再执行测试，以保证测试通过，不通过话的修改直到通过。</p>
<p>下一步，必须决定谁先开始走第一步棋，需要设第一个比赛者，写下相关测试</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TestSetFirstPlayer</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// test content
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这时，测试会迫使你决定如何在代码中表示比赛者，并分配到棋盘上。</p>
<p>可能是这样的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 玩家 mark 使用 X</span>
</span></span><span class="line"><span class="cl">board.SetFirstPlayer<span class="o">(</span>new Player<span class="o">(</span><span class="s2">&#34;Mark&#34;</span><span class="o">)</span>, <span class="s2">&#34;X&#34;</span><span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>但真的需要 player 这个结构体吗? 或者需要玩家的名字吗? 此时还没有实现 SetFirstPlayer 方法，初期让我们的测试更简单一些，比如</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">board.SetFirstPlayer<span class="o">(</span><span class="s2">&#34;X&#34;</span><span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这个版本隐藏着风险，可以传递任何字母给 SetFirstPlayer，意味着需要添加代码来检查参数的正确性。因此我们可以进一步简化，用一个 bool 来表示第一个玩家是 O 还是 x。</p>
<p>例如这样</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TestSetFirstPlayer</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">  <span class="nx">board</span><span class="p">.</span><span class="nx">FirstPlayerPegIsX</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">requests</span><span class="p">.</span><span class="nf">IsTrue</span><span class="p">(</span><span class="nx">board</span><span class="p">.</span><span class="nx">FirstPlayerPegIsX</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>我们的思考是从 player 类开始，最后实现只用了简单的布尔类型属性，我们不是要扔掉好的设计，仅仅用大量的布尔类型来编码所有东西，而是成功地实现特定功能的最低成本。程序员很容易走向另一个极端，一些不必要过于复杂的事情。</p>
<p>消除还没有编写好的类，这会很容易简化代码，相反，一旦已经编写了代码，也许会强迫自己保留这些代码，并继续使用它。</p>
<blockquote>
<p>好的设计并不意味着需要更多的类</p>
</blockquote>
<p>添加无用的代码总是不好的想法，不管他们是否真的需要，TDD 有机会让你编写代码之前，可以深思熟虑将如何使用它。这会迫使你去思考它的可用性和便利性，让你的设计更注重实效。</p>
<p>设计并不是开始编码的时候就结束了，需要在产品的生命周期中持续添加测试，添加代码，重新设计。</p>
<p><strong>中庸之道</strong></p>
<ul>
<li>不要把测试代码和提交代码之前的测试等同，单元测试可以保证代码的健壮性，提交代码前的功能测试可以保证产品的稳定性。</li>
<li>任何一个设计都可以被改进</li>
<li>单纯的单元测试无法保证好的设计，但他们回到设计有所帮助，使设计更佳简单。</li>
</ul>
<h2 id="不同环境就有不同问题">不同环境，就有不同问题</h2>
<p>你的应用程序要在不同的操作系统上运行，或者一个操作系统的不同版本，就需要测试所有的操作系统。</p>
<p>不同环境就有不同的问题，使用持续集成工具，在每一种支持的平台和环境中运行单元测试。要积极地寻找问题，而不是等问题来找你。</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="ixugo/ixugo.github.io"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
  <section class="copyright">
    &copy;
    
    2018 -
    
    2023 ixugo
  </section>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <section class="powerby">

    
    <span id="busuanzi_container_page_pv">本文阅读量
      <span style="font-size: 14px" id="busuanzi_value_page_pv"></span>
      次，</span>
    <span id="busuanzi_container_site_pv">总访问量
      <span style="font-size: 14px" id="busuanzi_value_site_pv"></span>
      次 </span>，总访客数
    <span style="font-size: 14px" id="busuanzi_value_site_uv"></span> 人
    <br />


    Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> .&nbsp;&nbsp;
    Theme <a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener"
      data-version="3.16.0">Stack</a> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
  </section>




  <script>
    function count() {
      let href = window.location.href;
      let regexp = /^https?:\/\/blog.golang.space\/?(page\/[\d]+\/?)?$/;
      if (regexp.test(href)) {
        let e = document.getElementById("busuanzi_container_page_pv");
        e.innerText = "";
      }
    }
    window.onload = count;
  </script>
</footer>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
