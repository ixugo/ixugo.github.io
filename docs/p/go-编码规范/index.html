<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Go ÁºñÁ†ÅËßÑËåÉ ËΩ¨ËΩΩ‰∫é Uber Go ÁºñÁ†ÅËßÑËåÉ‰∏≠ÊñáÁøªËØëÔºåÂú®ÂÖ∂Âü∫Á°Ä‰∏äÂÅö‰∫Ü‰∏Ä‰∫õÈÄÇÂêàÊàëÁöÑË°•ÂÖÖ„ÄÇ
Âª∫ËÆÆÊü•ÁúãÂÆòÊñπ‰ªìÂ∫ìÔºåÂæàÂèØËÉΩÊòØÊúÄÊñ∞ÁöÑ„ÄÇ
ÊåáÂØºÂéüÂàô ÊåáÂêë interface ÁöÑÊåáÈíà interface Ê∫êÁ†Å
Ëã•Â≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÊåáÈíàÔºåÂàôÁõ¥Êé•Â≠òÂÇ®ÔºåËã•Â≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÂÄºÔºåÂàôÂ≠òÂÇ®ÊåáÂêëËØ•ÂÄºÁöÑÊåáÈíà„ÄÇ
1 2 3 4 5 6 type eface struct { // Á±ªÂûãÊåáÈíà _type *_type // Êï∞ÊçÆÊåáÈíà data unsafe.Pointer } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 type F interface { f() } type S1 struct{} func (s S1) f() {} type S2 struct{} func (s *S2) f() {} // f1.'>
<title>Go ÁºñÁ†ÅËßÑËåÉ</title>

<link rel='canonical' href='https://blog.golang.space/p/go-%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/'>

<link rel="stylesheet" href="/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css"><meta property='og:title' content='Go ÁºñÁ†ÅËßÑËåÉ'>
<meta property='og:description' content='Go ÁºñÁ†ÅËßÑËåÉ ËΩ¨ËΩΩ‰∫é Uber Go ÁºñÁ†ÅËßÑËåÉ‰∏≠ÊñáÁøªËØëÔºåÂú®ÂÖ∂Âü∫Á°Ä‰∏äÂÅö‰∫Ü‰∏Ä‰∫õÈÄÇÂêàÊàëÁöÑË°•ÂÖÖ„ÄÇ
Âª∫ËÆÆÊü•ÁúãÂÆòÊñπ‰ªìÂ∫ìÔºåÂæàÂèØËÉΩÊòØÊúÄÊñ∞ÁöÑ„ÄÇ
ÊåáÂØºÂéüÂàô ÊåáÂêë interface ÁöÑÊåáÈíà interface Ê∫êÁ†Å
Ëã•Â≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÊåáÈíàÔºåÂàôÁõ¥Êé•Â≠òÂÇ®ÔºåËã•Â≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÂÄºÔºåÂàôÂ≠òÂÇ®ÊåáÂêëËØ•ÂÄºÁöÑÊåáÈíà„ÄÇ
1 2 3 4 5 6 type eface struct { // Á±ªÂûãÊåáÈíà _type *_type // Êï∞ÊçÆÊåáÈíà data unsafe.Pointer } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 type F interface { f() } type S1 struct{} func (s S1) f() {} type S2 struct{} func (s *S2) f() {} // f1.'>
<meta property='og:url' content='https://blog.golang.space/p/go-%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/'>
<meta property='og:site_name' content='ixugo'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Go' /><meta property='article:published_time' content='2021-06-24T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2021-06-24T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="Go ÁºñÁ†ÅËßÑËåÉ">
<meta name="twitter:description" content="Go ÁºñÁ†ÅËßÑËåÉ ËΩ¨ËΩΩ‰∫é Uber Go ÁºñÁ†ÅËßÑËåÉ‰∏≠ÊñáÁøªËØëÔºåÂú®ÂÖ∂Âü∫Á°Ä‰∏äÂÅö‰∫Ü‰∏Ä‰∫õÈÄÇÂêàÊàëÁöÑË°•ÂÖÖ„ÄÇ
Âª∫ËÆÆÊü•ÁúãÂÆòÊñπ‰ªìÂ∫ìÔºåÂæàÂèØËÉΩÊòØÊúÄÊñ∞ÁöÑ„ÄÇ
ÊåáÂØºÂéüÂàô ÊåáÂêë interface ÁöÑÊåáÈíà interface Ê∫êÁ†Å
Ëã•Â≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÊåáÈíàÔºåÂàôÁõ¥Êé•Â≠òÂÇ®ÔºåËã•Â≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÂÄºÔºåÂàôÂ≠òÂÇ®ÊåáÂêëËØ•ÂÄºÁöÑÊåáÈíà„ÄÇ
1 2 3 4 5 6 type eface struct { // Á±ªÂûãÊåáÈíà _type *_type // Êï∞ÊçÆÊåáÈíà data unsafe.Pointer } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 type F interface { f() } type S1 struct{} func (s S1) f() {} type S2 struct{} func (s *S2) f() {} // f1.">
    <link rel="shortcut icon" href="img/favicon.ico" />

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-192125643-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu0b04ba6d7249c9f90c92db974439eb8c_208246_300x0_resize_box_3.png" width="300"
                            height="321" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üßê</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ixugo</a></h1>
            <h2 class="site-description">Ëµ∞Âá∫ËàíÈÄÇÂå∫</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/ixugo'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#ÊåáÂØºÂéüÂàô">ÊåáÂØºÂéüÂàô</a>
      <ol>
        <li><a href="#ÊåáÂêë-interface-ÁöÑÊåáÈíà">ÊåáÂêë interface ÁöÑÊåáÈíà</a></li>
        <li><a href="#interface-ÂêàÁêÜÊÄßÈ™åËØÅ">interface ÂêàÁêÜÊÄßÈ™åËØÅ</a></li>
        <li><a href="#Êé•Êî∂Âô®‰∏éÊé•Âè£">Êé•Êî∂Âô®‰∏éÊé•Âè£</a></li>
        <li><a href="#Èõ∂ÂÄº-mutex-ÊòØÊúâÊïàÁöÑ">Èõ∂ÂÄº Mutex ÊòØÊúâÊïàÁöÑ</a></li>
        <li><a href="#Âú®ËæπÁïåÂ§ÑÊã∑Ë¥ù-slices-Âíå-maps">Âú®ËæπÁïåÂ§ÑÊã∑Ë¥ù Slices Âíå Maps</a></li>
        <li><a href="#‰ΩøÁî®-defer-ÈáäÊîæËµÑÊ∫ê">‰ΩøÁî® defer ÈáäÊîæËµÑÊ∫ê</a></li>
        <li><a href="#channel-ÁöÑ-size-Ë¶Å‰πàÊòØ-1Ë¶Å‰πàÊòØÊó†ÁºìÂÜ≤ÁöÑ">Channel ÁöÑ size Ë¶Å‰πàÊòØ 1ÔºåË¶Å‰πàÊòØÊó†ÁºìÂÜ≤ÁöÑ</a></li>
        <li><a href="#Êûö‰∏æ‰ªé-1-ÂºÄÂßã">Êûö‰∏æ‰ªé 1 ÂºÄÂßã</a></li>
        <li><a href="#‰ΩøÁî®-time-Â§ÑÁêÜÊó∂Èó¥">‰ΩøÁî® time Â§ÑÁêÜÊó∂Èó¥</a></li>
        <li><a href="#ÈîôËØØÁ±ªÂûã">ÈîôËØØÁ±ªÂûã</a></li>
        <li><a href="#ÈîôËØØÂåÖË£Ö-error-wrapping">ÈîôËØØÂåÖË£Ö (Error Wrapping)</a></li>
        <li><a href="#Â§ÑÁêÜÁ±ªÂûãÊñ≠Ë®ÄÂ§±Ë¥•">Â§ÑÁêÜÁ±ªÂûãÊñ≠Ë®ÄÂ§±Ë¥•</a></li>
        <li><a href="#‰∏çË¶Å-panic">‰∏çË¶Å panic</a></li>
        <li><a href="#‰ΩøÁî®-gouberorgatomic">‰ΩøÁî® go.uber.org/atomic</a></li>
        <li><a href="#ÈÅøÂÖçÂèØÂèòÂÖ®Â±ÄÂèòÈáè">ÈÅøÂÖçÂèØÂèòÂÖ®Â±ÄÂèòÈáè</a></li>
        <li><a href="#ÈÅøÂÖçÂú®ÂÖ¨ÂÖ±ÁªìÊûÑ‰∏≠ÂµåÂÖ•Á±ªÂûã">ÈÅøÂÖçÂú®ÂÖ¨ÂÖ±ÁªìÊûÑ‰∏≠ÂµåÂÖ•Á±ªÂûã</a></li>
        <li><a href="#ÈÅøÂÖç‰ΩøÁî®ÂÜÖÁΩÆÂêçÁß∞">ÈÅøÂÖç‰ΩøÁî®ÂÜÖÁΩÆÂêçÁß∞</a></li>
        <li><a href="#ÈÅøÂÖç‰ΩøÁî®-init">ÈÅøÂÖç‰ΩøÁî® <code>init()</code></a></li>
        <li><a href="#ËøΩÂä†Êó∂‰ºòÂÖàÊåáÂÆöÂàáÁâáÂÆπÈáè">ËøΩÂä†Êó∂‰ºòÂÖàÊåáÂÆöÂàáÁâáÂÆπÈáè</a></li>
        <li><a href="#‰∏ªÂáΩÊï∞ÈÄÄÂá∫ÊñπÂºèexit">‰∏ªÂáΩÊï∞ÈÄÄÂá∫ÊñπÂºè(Exit)</a>
          <ol>
            <li><a href="#‰∏ÄÊ¨°ÊÄßÈÄÄÂá∫">‰∏ÄÊ¨°ÊÄßÈÄÄÂá∫</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ÊÄßËÉΩ">ÊÄßËÉΩ</a>
      <ol>
        <li><a href="#‰ºòÂÖà‰ΩøÁî®-strconv-ËÄå‰∏çÊòØ-fmt">‰ºòÂÖà‰ΩøÁî® strconv ËÄå‰∏çÊòØ fmt</a></li>
        <li><a href="#ÈÅøÂÖçÂ≠óÁ¨¶‰∏≤Âà∞Â≠óËäÇÁöÑËΩ¨Êç¢">ÈÅøÂÖçÂ≠óÁ¨¶‰∏≤Âà∞Â≠óËäÇÁöÑËΩ¨Êç¢</a></li>
        <li><a href="#ÊåáÂÆöÂÆπÂô®ÂÆπÈáè">ÊåáÂÆöÂÆπÂô®ÂÆπÈáè</a>
          <ol>
            <li><a href="#ÊåáÂÆömapÂÆπÈáèÊèêÁ§∫">ÊåáÂÆöMapÂÆπÈáèÊèêÁ§∫</a></li>
            <li><a href="#ÊåáÂÆöÂàáÁâáÂÆπÈáè">ÊåáÂÆöÂàáÁâáÂÆπÈáè</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ËßÑËåÉ">ËßÑËåÉ</a>
      <ol>
        <li><a href="#‰∏ÄËá¥ÊÄß">‰∏ÄËá¥ÊÄß</a></li>
        <li><a href="#Áõ∏‰ººÁöÑÂ£∞ÊòéÊîæÂú®‰∏ÄÁªÑ">Áõ∏‰ººÁöÑÂ£∞ÊòéÊîæÂú®‰∏ÄÁªÑ</a></li>
        <li><a href="#import-ÂàÜÁªÑ">import ÂàÜÁªÑ</a></li>
        <li><a href="#ÂåÖÂêç">ÂåÖÂêç</a></li>
        <li><a href="#ÂáΩÊï∞Âêç">ÂáΩÊï∞Âêç</a></li>
        <li><a href="#ÂØºÂÖ•Âà´Âêç">ÂØºÂÖ•Âà´Âêç</a></li>
        <li><a href="#ÂáΩÊï∞ÂàÜÁªÑ‰∏éÈ°∫Â∫è">ÂáΩÊï∞ÂàÜÁªÑ‰∏éÈ°∫Â∫è</a></li>
        <li><a href="#ÂáèÂ∞ëÂµåÂ•ó">ÂáèÂ∞ëÂµåÂ•ó</a></li>
        <li><a href="#‰∏çÂøÖË¶ÅÁöÑ-else">‰∏çÂøÖË¶ÅÁöÑ else</a></li>
        <li><a href="#È°∂Â±ÇÂèòÈáèÂ£∞Êòé">È°∂Â±ÇÂèòÈáèÂ£∞Êòé</a></li>
        <li><a href="#ÂØπ‰∫éÊú™ÂØºÂá∫ÁöÑÈ°∂Â±ÇÂ∏∏ÈáèÂíåÂèòÈáè‰ΩøÁî®_‰Ωú‰∏∫ÂâçÁºÄ">ÂØπ‰∫éÊú™ÂØºÂá∫ÁöÑÈ°∂Â±ÇÂ∏∏ÈáèÂíåÂèòÈáèÔºå‰ΩøÁî®_‰Ωú‰∏∫ÂâçÁºÄ</a></li>
        <li><a href="#ÁªìÊûÑ‰Ωì‰∏≠ÁöÑÂµåÂÖ•">ÁªìÊûÑ‰Ωì‰∏≠ÁöÑÂµåÂÖ•</a></li>
        <li><a href="#Êú¨Âú∞ÂèòÈáèÂ£∞Êòé">Êú¨Âú∞ÂèòÈáèÂ£∞Êòé</a></li>
        <li><a href="#nil-ÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑ-slice">nil ÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑ slice</a></li>
        <li><a href="#Áº©Â∞èÂèòÈáè‰ΩúÁî®Âüü">Áº©Â∞èÂèòÈáè‰ΩúÁî®Âüü</a></li>
        <li><a href="#ÈÅøÂÖçÂèÇÊï∞ËØ≠‰πâ‰∏çÊòéÁ°Æavoid-naked-parameters">ÈÅøÂÖçÂèÇÊï∞ËØ≠‰πâ‰∏çÊòéÁ°Æ(Avoid Naked Parameters)</a></li>
        <li><a href="#‰ΩøÁî®ÂéüÂßãÂ≠óÁ¨¶‰∏≤Â≠óÈù¢ÂÄºÈÅøÂÖçËΩ¨‰πâ">‰ΩøÁî®ÂéüÂßãÂ≠óÁ¨¶‰∏≤Â≠óÈù¢ÂÄºÔºåÈÅøÂÖçËΩ¨‰πâ</a></li>
        <li><a href="#ÂàùÂßãÂåñÁªìÊûÑ‰Ωì">ÂàùÂßãÂåñÁªìÊûÑ‰Ωì</a>
          <ol>
            <li><a href="#‰ΩøÁî®Â≠óÊÆµÂêçÂàùÂßãÂåñÁªìÊûÑ">‰ΩøÁî®Â≠óÊÆµÂêçÂàùÂßãÂåñÁªìÊûÑ</a></li>
            <li><a href="#ÁúÅÁï•ÁªìÊûÑ‰∏≠ÁöÑÈõ∂ÂÄºÂ≠óÊÆµ">ÁúÅÁï•ÁªìÊûÑ‰∏≠ÁöÑÈõ∂ÂÄºÂ≠óÊÆµ</a></li>
            <li><a href="#ÂØπÈõ∂ÂÄºÁªìÊûÑ‰ΩøÁî®-var">ÂØπÈõ∂ÂÄºÁªìÊûÑ‰ΩøÁî® <code>var</code></a></li>
            <li><a href="#ÂàùÂßãÂåñ-struct-ÂºïÁî®">ÂàùÂßãÂåñ Struct ÂºïÁî®</a></li>
          </ol>
        </li>
        <li><a href="#ÂàùÂßãÂåñ-maps">ÂàùÂßãÂåñ Maps</a></li>
        <li><a href="#Â≠óÁ¨¶‰∏≤-string-format">Â≠óÁ¨¶‰∏≤ string format</a></li>
        <li><a href="#ÂëΩÂêç-printf-Ê†∑ÂºèÁöÑÂáΩÊï∞">ÂëΩÂêç Printf Ê†∑ÂºèÁöÑÂáΩÊï∞</a></li>
      </ol>
    </li>
    <li><a href="#ÁºñÁ®ãÊ®°Âºè">ÁºñÁ®ãÊ®°Âºè</a>
      <ol>
        <li><a href="#Ë°®È©±Âä®ÊµãËØï">Ë°®È©±Âä®ÊµãËØï</a></li>
        <li><a href="#ÂäüËÉΩÈÄâÈ°π">ÂäüËÉΩÈÄâÈ°π</a></li>
      </ol>
    </li>
    <li><a href="#linting">Linting</a>
      <ol>
        <li><a href="#lint-runners">Lint Runners</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/golang/" >
                Golang
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/go-%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/">Go ÁºñÁ†ÅËßÑËåÉ</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jun 24, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    28 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="go-ÁºñÁ†ÅËßÑËåÉ">Go ÁºñÁ†ÅËßÑËåÉ</h1>
<p>ËΩ¨ËΩΩ‰∫é <a class="link" href="https://github.com/xxjwxc/uber_go_guide_cn#%E6%8E%A5%E6%94%B6%E5%99%A8-receiver-%E4%B8%8E%E6%8E%A5%E5%8F%A3"  target="_blank" rel="noopener"
    >Uber Go ÁºñÁ†ÅËßÑËåÉ‰∏≠ÊñáÁøªËØë</a>ÔºåÂú®ÂÖ∂Âü∫Á°Ä‰∏äÂÅö‰∫Ü‰∏Ä‰∫õÈÄÇÂêàÊàëÁöÑË°•ÂÖÖ„ÄÇ</p>
<p>Âª∫ËÆÆÊü•ÁúãÂÆòÊñπ‰ªìÂ∫ìÔºåÂæàÂèØËÉΩÊòØÊúÄÊñ∞ÁöÑ„ÄÇ</p>
<h2 id="ÊåáÂØºÂéüÂàô">ÊåáÂØºÂéüÂàô</h2>
<h3 id="ÊåáÂêë-interface-ÁöÑÊåáÈíà">ÊåáÂêë interface ÁöÑÊåáÈíà</h3>
<p>interface Ê∫êÁ†Å</p>
<p>Ëã•Â≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÊåáÈíàÔºåÂàôÁõ¥Êé•Â≠òÂÇ®ÔºåËã•Â≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÂÄºÔºåÂàôÂ≠òÂÇ®ÊåáÂêëËØ•ÂÄºÁöÑÊåáÈíà„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">eface</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  	<span class="c1">// Á±ªÂûãÊåáÈíà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">_type</span> <span class="o">*</span><span class="nx">_type</span>
</span></span><span class="line"><span class="cl">  	<span class="c1">// Êï∞ÊçÆÊåáÈíà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">data</span>  <span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">F</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nf">f</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">S1</span> <span class="kd">struct</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="nx">S1</span><span class="p">)</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">S2</span> <span class="kd">struct</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">S2</span><span class="p">)</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// f1.f()Êó†Ê≥ï‰øÆÊîπÂ∫ïÂ±ÇÊï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">f1</span> <span class="nx">F</span> <span class="p">=</span> <span class="nx">S1</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// f2.f() ÂèØ‰ª•‰øÆÊîπÂ∫ïÂ±ÇÊï∞ÊçÆ,ÁªôÊé•Âè£ÂèòÈáèf2ËµãÂÄºÊó∂‰ΩøÁî®ÁöÑÊòØÂØπË±°ÊåáÈíà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">f2</span> <span class="nx">F</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">S2</span><span class="p">{}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="interface-ÂêàÁêÜÊÄßÈ™åËØÅ">interface ÂêàÁêÜÊÄßÈ™åËØÅ</h3>
<p>ËøùÂèçÊé•Âè£ÂêàÁêÜÊÄßÊ£ÄÊü•ÁöÑÂú∫ÊôØÔºåÈÉΩ‰ºöÁªàÊ≠¢ÁºñËØë„ÄÇ</p>
<p>Â¶ÇÊûúÊé•Âè£‰∏çÂåπÈÖçÔºåÈÇ£‰πà <strong><code>var _ http.Handler = (*Handler)(nil)</code></strong> Êó†Ê≥ïÁºñËØëÈÄöËøá</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Handler</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Áî®‰∫éËß¶ÂèëÁºñËØëÊúüÁöÑÊé•Âè£ÁöÑÂêàÁêÜÊÄßÊ£ÄÊü•Êú∫Âà∂
</span></span></span><span class="line"><span class="cl"><span class="c1">// Â¶ÇÊûúHandlerÊ≤°ÊúâÂÆûÁé∞http.Handler,‰ºöÂú®ÁºñËØëÊúüÊä•Èîô
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">_</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Handler</span> <span class="p">=</span> <span class="p">(</span><span class="o">*</span><span class="nx">Handler</span><span class="p">)(</span><span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="o">*</span><span class="nx">Handler</span><span class="p">)</span> <span class="nf">ServeHTTP</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏ÄËà¨ÂÜô <code>New()</code> ÂáΩÊï∞ÔºåÊïàÊûúÁ≠âÂêå</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">New</span><span class="p">()</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Handler</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="o">&amp;</span><span class="nx">Handler</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Êé•Êî∂Âô®‰∏éÊé•Âè£">Êé•Êî∂Âô®‰∏éÊé•Âè£</h3>
<p>‰ΩøÁî®ÂÄºÊé•Êî∂Âô®ÁöÑÊñπÊ≥ïÊó¢ÂèØ‰ª•ÈÄöËøáÂÄºË∞ÉÁî®Ôºå‰πüÂèØ‰ª•ÈÄöËøáÊåáÈíàË∞ÉÁî®„ÄÇ</p>
<p>Â∏¶ÊåáÈíàÊé•Êî∂Âô®ÁöÑÊñπÊ≥ïÂè™ËÉΩÈÄöËøáÊåáÈíàÊàñ <a class="link" href="https://golang.org/ref/spec#Method_values"  target="_blank" rel="noopener"
    >addressable values</a> Ë∞ÉÁî®.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">S</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="nx">S</span><span class="p">)</span> <span class="nf">Read</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">S</span><span class="p">)</span> <span class="nf">Write</span><span class="p">(</span><span class="nx">str</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="p">=</span> <span class="nx">str</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">sVals</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="nx">S</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="s">&#34;A&#34;</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ‰Ω†Âè™ËÉΩÈÄöËøáÂÄºË∞ÉÁî® Read
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">sVals</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">Read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Ëøô‰∏çËÉΩÁºñËØëÈÄöËøáÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1">//  sVals[1].Write(&#34;test&#34;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">sPtrs</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="o">*</span><span class="nx">S</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="s">&#34;A&#34;</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÈÄöËøáÊåáÈíàÊó¢ÂèØ‰ª•Ë∞ÉÁî® ReadÔºå‰πüÂèØ‰ª•Ë∞ÉÁî® Write ÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">sPtrs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">Read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nx">sPtrs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">Write</span><span class="p">(</span><span class="s">&#34;test&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Á±ª‰ººÁöÑ,Âç≥‰ΩøÊñπÊ≥ïÊúâ‰∫ÜÂÄºÊé•Êî∂Âô®,‰πüÂêåÊ†∑ÂèØ‰ª•Áî®ÊåáÈíàÊé•Êî∂Âô®Êù•Êª°Ë∂≥Êé•Âè£.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">F</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nf">f</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">S1</span> <span class="kd">struct</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="nx">S1</span><span class="p">)</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">S2</span> <span class="kd">struct</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">S2</span><span class="p">)</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">s1Val</span> <span class="o">:=</span> <span class="nx">S1</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="nx">s1Ptr</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">S1</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="nx">s2Val</span> <span class="o">:=</span> <span class="nx">S2</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="nx">s2Ptr</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">S2</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">i</span> <span class="nx">F</span>
</span></span><span class="line"><span class="cl"><span class="nx">i</span> <span class="p">=</span> <span class="nx">s1Val</span>
</span></span><span class="line"><span class="cl"><span class="nx">i</span> <span class="p">=</span> <span class="nx">s1Ptr</span>
</span></span><span class="line"><span class="cl"><span class="nx">i</span> <span class="p">=</span> <span class="nx">s2Ptr</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//  ‰∏ãÈù¢‰ª£Á†ÅÊó†Ê≥ïÈÄöËøáÁºñËØë„ÄÇÂõ†‰∏∫ s2Val ÊòØ‰∏Ä‰∏™ÂÄºÔºåËÄå S2 ÁöÑ f ÊñπÊ≥ï‰∏≠Ê≤°Êúâ‰ΩøÁî®ÂÄºÊé•Êî∂Âô®
</span></span></span><span class="line"><span class="cl"><span class="c1">//   i = s2Val
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ë°•ÂÖÖ :</p>
<ul>
<li>‰∏Ä‰∏™Á±ªÂûãÂèØ‰ª•Êúâ‰∏§ÁßçÊé•Êî∂Âô®ÊñπÊ≥ïÈõÜÔºå  ÂÄºÊé•Êî∂Âô®ÊñπÊ≥ïÈõÜÂíåÊåáÈíàÊé•Êî∂Âô®ÊñπÊ≥ïÈõÜ
<ul>
<li>ÂÄºÊé•Êî∂Âô®ÊñπÊ≥ïÈõÜÊòØÊåáÈíàÊé•Êî∂Âô®ÊñπÊ≥ïÈõÜÁöÑÂ≠êÈõÜÔºåÂèç‰πã‰∏çÊòØ</li>
</ul>
</li>
<li>ËßÑÂàô
<ul>
<li>ÂÄºÂØπË±°Âè™ÂèØ‰ª•‰ΩøÁî®ÂÄºÊé•Êî∂Âô®ÊñπÊ≥ïÈõÜ</li>
<li>ÊåáÈíàÂØπË±°ÂèØ‰ª•‰ΩøÁî® ÂÄºÊé•Êî∂Âô®ÊñπÊ≥ïÈõÜ + ÊåáÈíàÊé•Êî∂Âô®ÊñπÊ≥ïÈõÜ</li>
</ul>
</li>
<li>Êé•Êî∂ÁöÑÂÆûÁé∞
<ul>
<li>Á±ªÂûãÂÆûÁé∞‰∫ÜÊé•Âè£ÁöÑÊâÄÊúâÊñπÊ≥ïÔºåÂè´ ÂåπÈÖç/ÂÆûÁé∞</li>
<li>ÂÖ∑‰ΩìÁöÑËÆ≤ÔºåË¶Å‰πàÊòØÁ±ªÂûãÁöÑÂÄºÊñπÊ≥ïÈõÜÂåπÈÖçÊé•Âè£ÔºåË¶Å‰πàÊòØÊåáÈíàÊñπÊ≥ïÈõÜÂåπÈÖçÊé•Âè£</li>
</ul>
</li>
</ul>
<p>ÂÖ∑‰ΩìÁöÑÂåπÈÖçÂàÜ‰∏§Áßç</p>
<ul>
<li>ÂÄºÊñπÊ≥ïÈõÜÂíåÊé•Âè£ÂåπÈÖç
<ul>
<li>ÁªôÊé•Âè£ÂèòÈáèËµãÂÄºÁöÑ‰∏çÁÆ°ÊòØÂÄºËøòÊòØÊåáÈíàÂØπË±°ÔºåÈÉΩÂèØ‰ª•ÔºåÂõ†‰∏∫ÈÉΩÂåÖÂê´ÂÄºÊñπÊ≥ïÈõÜ</li>
</ul>
</li>
<li>ÊåáÈíàÊñπÊ≥ïÈõÜÂíåÊé•Âè£ÂåπÈÖç
<ul>
<li>Âè™ËÉΩÂ∞ÜÊåáÈíàÂØπË±°ËµãÂÄºÁªôÊé•Âè£ÂèòÈáè ( <code>var i F = &amp;S2{}</code> )ÔºåÂõ†‰∏∫‰ªÖÊúâ<strong>ÊåáÈíàÊñπÊ≥ïÈõÜ‰∏éÊé•Âè£ÂåπÈÖç</strong></li>
<li>Â¶ÇÊûúÂ∞ÜÂÄºÂØπË±°ËµãÂÄºÁªôÊé•Âè£ÂèòÈáè ( <code>var i F = S2{}</code> )Ôºå‰ºöÂú®<strong>ÁºñËØëÊúüÊä•Èîô</strong></li>
</ul>
</li>
</ul>
<p>Âú®‰∏äÈù¢Á§∫‰æã‰∏≠Ôºå <code>i = s2Val</code> ‰ºöÊä•ÈîôÔºåÊòØÂõ†‰∏∫ÂÖ∂ÊñπÊ≥ïÈÉΩÊòØÊåáÈíàÊñπÊ≥ïÈõÜÔºå‰∏éÊé•Âè£‰∏çÂåπÈÖç„ÄÇÂèØ‰ª•ËøôÊ†∑Êìç‰Ωú <code>i = &amp;s2Val</code></p>
<h3 id="Èõ∂ÂÄº-mutex-ÊòØÊúâÊïàÁöÑ">Èõ∂ÂÄº Mutex ÊòØÊúâÊïàÁöÑ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">mu</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">mu</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûú‰Ω†‰ΩøÁî®ÁªìÊûÑ‰ΩìÊåáÈíàÔºåmutex ÂèØ‰ª•ÈùûÊåáÈíàÂΩ¢Âºè‰Ωú‰∏∫ÁªìÊûÑ‰ΩìÁöÑÁªÑÊàêÂ≠óÊÆµÔºåÊàñËÄÖÊõ¥Â•ΩÁöÑÊñπÂºèÊòØÁõ¥Êé•ÂµåÂÖ•Âà∞ÁªìÊûÑ‰Ωì‰∏≠„ÄÇ Â¶ÇÊûúÊòØÁßÅÊúâÁªìÊûÑ‰ΩìÁ±ªÂûãÊàñÊòØË¶ÅÂÆûÁé∞ Mutex Êé•Âè£ÁöÑÁ±ªÂûãÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ÂµåÂÖ• mutex ÁöÑÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// ‰∏∫ÁßÅÊúâÁ±ªÂûãÊàñÈúÄË¶ÅÂÆûÁé∞‰∫íÊñ•Êé•Âè£ÁöÑÁ±ªÂûãÂµåÂÖ•„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">smap</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span> <span class="c1">// ‰ªÖÈÄÇÁî®‰∫éÈùûÂØºÂá∫Á±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">data</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">newSMap</span><span class="p">()</span> <span class="o">*</span><span class="nx">smap</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="o">&amp;</span><span class="nx">smap</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="p">:</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">smap</span><span class="p">)</span> <span class="nf">Get</span><span class="p">(</span><span class="nx">k</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">m</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">defer</span> <span class="nx">m</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// ÂØπ‰∫éÂØºÂá∫ÁöÑÁ±ªÂûãÔºåËØ∑‰ΩøÁî®‰∏ìÁî®Â≠óÊÆµ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">SMap</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mu</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span> <span class="c1">// ÂØπ‰∫éÂØºÂá∫Á±ªÂûãÔºåËØ∑‰ΩøÁî®ÁßÅÊúâÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">data</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">NewSMap</span><span class="p">()</span> <span class="o">*</span><span class="nx">SMap</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="o">&amp;</span><span class="nx">SMap</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="p">:</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">SMap</span><span class="p">)</span> <span class="nf">Get</span><span class="p">(</span><span class="nx">k</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">m</span><span class="p">.</span><span class="nx">mu</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">defer</span> <span class="nx">m</span><span class="p">.</span><span class="nx">mu</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âú®ËæπÁïåÂ§ÑÊã∑Ë¥ù-slices-Âíå-maps">Âú®ËæπÁïåÂ§ÑÊã∑Ë¥ù Slices Âíå Maps</h3>
<p>slices Âíå maps ÂåÖÂê´‰∫ÜÊåáÂêëÂ∫ïÂ±ÇÊï∞ÊçÆÁöÑÊåáÈíàÔºåÂõ†Ê≠§Âú®ÈúÄË¶ÅÂ§çÂà∂ÂÆÉ‰ª¨Êó∂Ë¶ÅÁâπÂà´Ê≥®ÊÑè„ÄÇ</p>
<p><strong>Êé•Êî∂ Slices Âíå Maps</strong></p>
<p>ËØ∑ËÆ∞‰ΩèÔºåÂΩì map Êàñ slice ‰Ωú‰∏∫ÂáΩÊï∞ÂèÇÊï∞‰º†ÂÖ•Êó∂ÔºåÂ¶ÇÊûúÊÇ®Â≠òÂÇ®‰∫ÜÂØπÂÆÉ‰ª¨ÁöÑÂºïÁî®ÔºåÂàôÁî®Êà∑ÂèØ‰ª•ÂØπÂÖ∂ËøõË°å‰øÆÊîπ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">d</span> <span class="o">*</span><span class="nx">Driver</span><span class="p">)</span> <span class="nf">SetTrips</span><span class="p">(</span><span class="nx">trips</span> <span class="p">[]</span><span class="nx">Trip</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">d</span><span class="p">.</span><span class="nx">trips</span> <span class="p">=</span> <span class="nx">trips</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">trips</span> <span class="o">:=</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="nx">d1</span><span class="p">.</span><span class="nf">SetTrips</span><span class="p">(</span><span class="nx">trips</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰Ω†ÊòØË¶Å‰øÆÊîπ d1.trips ÂêóÔºü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">trips</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="o">...</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="err">#</span> <span class="nx">Good</span> 
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">d</span> <span class="o">*</span><span class="nx">Driver</span><span class="p">)</span> <span class="nf">SetTrips</span><span class="p">(</span><span class="nx">trips</span> <span class="p">[]</span><span class="nx">Trip</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">d</span><span class="p">.</span><span class="nx">trips</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">Trip</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">trips</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="nb">copy</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">trips</span><span class="p">,</span> <span class="nx">trips</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">trips</span> <span class="o">:=</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="nx">d1</span><span class="p">.</span><span class="nf">SetTrips</span><span class="p">(</span><span class="nx">trips</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ËøôÈáåÊàë‰ª¨‰øÆÊîπ trips[0]Ôºå‰ΩÜ‰∏ç‰ºöÂΩ±ÂìçÂà∞ d1.trips
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">trips</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="o">...</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ËøîÂõû slices Êàñ maps</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Stats</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mu</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">counters</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Snapshot ËøîÂõûÂΩìÂâçÁä∂ÊÄÅ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Stats</span><span class="p">)</span> <span class="nf">Snapshot</span><span class="p">()</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">s</span><span class="p">.</span><span class="nx">mu</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">defer</span> <span class="nx">s</span><span class="p">.</span><span class="nx">mu</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">counters</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// snapshot ‰∏çÂÜçÂèó‰∫íÊñ•ÈîÅ‰øùÊä§
</span></span></span><span class="line"><span class="cl"><span class="c1">// Âõ†Ê≠§ÂØπ snapshot ÁöÑ‰ªª‰ΩïËÆøÈóÆÈÉΩÂ∞ÜÂèóÂà∞Êï∞ÊçÆÁ´û‰∫âÁöÑÂΩ±Âìç
</span></span></span><span class="line"><span class="cl"><span class="c1">// ÂΩ±Âìç stats.counters
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">snapshot</span> <span class="o">:=</span> <span class="nx">stats</span><span class="p">.</span><span class="nf">Snapshot</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Stats</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mu</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">counters</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Stats</span><span class="p">)</span> <span class="nf">Snapshot</span><span class="p">()</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">s</span><span class="p">.</span><span class="nx">mu</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">defer</span> <span class="nx">s</span><span class="p">.</span><span class="nx">mu</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">result</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">counters</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">s</span><span class="p">.</span><span class="nx">counters</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">result</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="p">=</span> <span class="nx">v</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">result</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// snapshot Áé∞Âú®ÊòØ‰∏Ä‰∏™Êã∑Ë¥ù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">snapshot</span> <span class="o">:=</span> <span class="nx">stats</span><span class="p">.</span><span class="nf">Snapshot</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰ΩøÁî®-defer-ÈáäÊîæËµÑÊ∫ê">‰ΩøÁî® defer ÈáäÊîæËµÑÊ∫ê</h3>
<p>‰ΩøÁî® defer ÈáäÊîæËµÑÊ∫êÔºåËØ∏Â¶ÇÊñá‰ª∂ÂíåÈîÅ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">p</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">p</span><span class="p">.</span><span class="nx">count</span> <span class="p">&lt;</span> <span class="mi">10</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">p</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">p</span><span class="p">.</span><span class="nx">count</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">p</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span>
</span></span><span class="line"><span class="cl"><span class="nx">newCount</span> <span class="o">:=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">count</span>
</span></span><span class="line"><span class="cl"><span class="nx">p</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">newCount</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂΩìÊúâÂ§ö‰∏™ return ÂàÜÊîØÊó∂ÔºåÂæàÂÆπÊòìÈÅóÂøò unlock
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">p</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">defer</span> <span class="nx">p</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">p</span><span class="p">.</span><span class="nx">count</span> <span class="p">&lt;</span> <span class="mi">10</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">p</span><span class="p">.</span><span class="nx">count</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">p</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">p</span><span class="p">.</span><span class="nx">count</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Êõ¥ÂèØËØª
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Defer ÁöÑÂºÄÈîÄÈùûÂ∏∏Â∞èÔºåÂè™ÊúâÂú®ÊÇ®ÂèØ‰ª•ËØÅÊòéÂáΩÊï∞ÊâßË°åÊó∂Èó¥Â§Ñ‰∫éÁ∫≥ÁßíÁ∫ßÁöÑÁ®ãÂ∫¶Êó∂ÔºåÊâçÂ∫îÈÅøÂÖçËøôÊ†∑ÂÅö„ÄÇ‰ΩøÁî® defer ÊèêÂçáÂèØËØªÊÄßÊòØÂÄºÂæóÁöÑÔºåÂõ†‰∏∫‰ΩøÁî®ÂÆÉ‰ª¨ÁöÑÊàêÊú¨ÂæÆ‰∏çË∂≥ÈÅì„ÄÇÂ∞§ÂÖ∂ÈÄÇÁî®‰∫éÈÇ£‰∫õ‰∏ç‰ªÖ‰ªÖÊòØÁÆÄÂçïÂÜÖÂ≠òËÆøÈóÆÁöÑËæÉÂ§ßÁöÑÊñπÊ≥ïÔºåÂú®Ëøô‰∫õÊñπÊ≥ï‰∏≠ÂÖ∂‰ªñËÆ°ÁÆóÁöÑËµÑÊ∫êÊ∂àËÄóËøúË∂ÖËøá <code>defer</code>„ÄÇ</p>
<h3 id="channel-ÁöÑ-size-Ë¶Å‰πàÊòØ-1Ë¶Å‰πàÊòØÊó†ÁºìÂÜ≤ÁöÑ">Channel ÁöÑ size Ë¶Å‰πàÊòØ 1ÔºåË¶Å‰πàÊòØÊó†ÁºìÂÜ≤ÁöÑ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// Â∫îËØ•Ë∂≥‰ª•Êª°Ë∂≥‰ªª‰ΩïÊÉÖÂÜµÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">c</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// Â§ßÂ∞èÔºö1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">c</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">// ÊàñËÄÖ
</span></span></span><span class="line"><span class="cl"><span class="c1">// Êó†ÁºìÂÜ≤ channelÔºåÂ§ßÂ∞è‰∏∫ 0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">c</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Êûö‰∏æ‰ªé-1-ÂºÄÂßã">Êûö‰∏æ‰ªé 1 ÂºÄÂßã</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Operation</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Add</span> <span class="nx">Operation</span> <span class="p">=</span> <span class="kc">iota</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Subtract</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Multiply</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Add=0, Subtract=1, Multiply=2
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Operation</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Add</span> <span class="nx">Operation</span> <span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Subtract</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Multiply</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Add=1, Subtract=2, Multiply=3
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºå‰ΩøÁî®Èõ∂ÂÄºÊòØÊúâÊÑè‰πâÁöÑÔºàÊûö‰∏æ‰ªéÈõ∂ÂºÄÂßãÔºâÔºå‰æãÂ¶ÇÔºåÂΩìÈõ∂ÂÄºÊòØÁêÜÊÉ≥ÁöÑÈªòËÆ§Ë°å‰∏∫Êó∂„ÄÇ</p>
<h3 id="‰ΩøÁî®-time-Â§ÑÁêÜÊó∂Èó¥">‰ΩøÁî® time Â§ÑÁêÜÊó∂Èó¥</h3>
<p>Êó∂Èó¥Â§ÑÁêÜÂæàÂ§çÊùÇ„ÄÇÂÖ≥‰∫éÊó∂Èó¥ÁöÑÈîôËØØÂÅáËÆæÈÄöÂ∏∏ÂåÖÊã¨‰ª•‰∏ãÂá†ÁÇπ„ÄÇ</p>
<ol>
<li>‰∏ÄÂ§©Êúâ 24 Â∞èÊó∂</li>
<li>‰∏ÄÂ∞èÊó∂Êúâ 60 ÂàÜÈíü</li>
<li>‰∏ÄÂë®Êúâ‰∏ÉÂ§©</li>
<li>‰∏ÄÂπ¥ 365 Â§©</li>
<li><a class="link" href="https://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time"  target="_blank" rel="noopener"
    >ËøòÊúâÊõ¥Â§ö</a></li>
</ol>
<p>‰æãÂ¶ÇÔºå<em>1</em> Ë°®Á§∫Âú®‰∏Ä‰∏™Êó∂Èó¥ÁÇπ‰∏äÂä†‰∏ä 24 Â∞èÊó∂Âπ∂‰∏çÊÄªÊòØ‰∫ßÁîü‰∏Ä‰∏™Êñ∞ÁöÑÊó•ÂéÜÊó•„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂú®Â§ÑÁêÜÊó∂Èó¥Êó∂ÂßãÁªà‰ΩøÁî® <a class="link" href="https://golang.org/pkg/time/"  target="_blank" rel="noopener"
    ><code>&quot;time&quot;</code></a> ÂåÖÔºåÂõ†‰∏∫ÂÆÉÊúâÂä©‰∫é‰ª•Êõ¥ÂÆâÂÖ®„ÄÅÊõ¥ÂáÜÁ°ÆÁöÑÊñπÂºèÂ§ÑÁêÜËøô‰∫õ‰∏çÊ≠£Á°ÆÁöÑÂÅáËÆæ„ÄÇ</p>
<p><strong>‰ΩøÁî® <code>time.Time</code> Ë°®ËææÁû¨Êó∂Êó∂Èó¥</strong></p>
<p>Âú®Â§ÑÁêÜÊó∂Èó¥ÁöÑÁû¨Èó¥Êó∂‰ΩøÁî® <a class="link" href="https://golang.org/pkg/time/#Time"  target="_blank" rel="noopener"
    ><code>time.Time</code></a>ÔºåÂú®ÊØîËæÉ„ÄÅÊ∑ªÂä†ÊàñÂáèÂéªÊó∂Èó¥Êó∂‰ΩøÁî® <code>time.Time</code> ‰∏≠ÁöÑÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">isActive</span><span class="p">(</span><span class="nx">now</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">start</span> <span class="o">&lt;=</span> <span class="nx">now</span> <span class="o">&amp;&amp;</span> <span class="nx">now</span> <span class="p">&lt;</span> <span class="nx">stop</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">isActive</span><span class="p">(</span><span class="nx">now</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span><span class="nx">start</span><span class="p">.</span><span class="nf">Before</span><span class="p">(</span><span class="nx">now</span><span class="p">)</span> <span class="o">||</span> <span class="nx">start</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">now</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">now</span><span class="p">.</span><span class="nf">Before</span><span class="p">(</span><span class="nx">stop</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>‰ΩøÁî® <code>time.Duration</code> Ë°®ËææÊó∂Èó¥ÊÆµ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">poll</span><span class="p">(</span><span class="nx">delay</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Duration</span><span class="p">(</span><span class="nx">delay</span><span class="p">)</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nf">poll</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1">// ÊòØÂá†ÁßíÈíüËøòÊòØÂá†ÊØ´Áßí?
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">poll</span><span class="p">(</span><span class="nx">delay</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">delay</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nf">poll</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂõûÂà∞Á¨¨‰∏Ä‰∏™‰æãÂ≠êÔºåÂú®‰∏Ä‰∏™Êó∂Èó¥Áû¨Èó¥Âä†‰∏ä 24 Â∞èÊó∂ÔºåÊàë‰ª¨Áî®‰∫éÊ∑ªÂä†Êó∂Èó¥ÁöÑÊñπÊ≥ïÂèñÂÜ≥‰∫éÊÑèÂõæ„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶Å‰∏ã‰∏Ä‰∏™Êó•ÂéÜÊó•(ÂΩìÂâçÂ§©ÁöÑ‰∏ã‰∏ÄÂ§©)ÁöÑÂêå‰∏Ä‰∏™Êó∂Èó¥ÁÇπÔºåÊàë‰ª¨Â∫îËØ•‰ΩøÁî® <a class="link" href="https://golang.org/pkg/time/#Time.AddDate"  target="_blank" rel="noopener"
    ><code>Time.AddDate</code></a>„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥‰øùËØÅÊüê‰∏ÄÊó∂ÂàªÊØîÂâç‰∏ÄÊó∂ÂàªÊôö 24 Â∞èÊó∂ÔºåÊàë‰ª¨Â∫îËØ•‰ΩøÁî® <a class="link" href="https://golang.org/pkg/time/#Time.Add"  target="_blank" rel="noopener"
    ><code>Time.Add</code></a>„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">newDay</span> <span class="o">:=</span> <span class="nx">t</span><span class="p">.</span><span class="nf">AddDate</span><span class="p">(</span><span class="mi">0</span> <span class="cm">/* years */</span><span class="p">,</span> <span class="mi">0</span> <span class="cm">/* months */</span><span class="p">,</span> <span class="mi">1</span> <span class="cm">/* days */</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">maybeNewDay</span> <span class="o">:=</span> <span class="nx">t</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">24</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Hour</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÂØπÂ§ñÈÉ®Á≥ªÁªü‰ΩøÁî® <code>time.Time</code> Âíå <code>time.Duration</code></strong></p>
<p>Â∞ΩÂèØËÉΩÂú®‰∏éÂ§ñÈÉ®Á≥ªÁªüÁöÑ‰∫§‰∫í‰∏≠‰ΩøÁî® <code>time.Duration</code> Âíå <code>time.Time</code> ‰æãÂ¶Ç :</p>
<ul>
<li>Command-line Ê†áÂøó: <a class="link" href="https://golang.org/pkg/flag/"  target="_blank" rel="noopener"
    ><code>flag</code></a> ÈÄöËøá <a class="link" href="https://golang.org/pkg/time/#ParseDuration"  target="_blank" rel="noopener"
    ><code>time.ParseDuration</code></a> ÊîØÊåÅ <code>time.Duration</code></li>
<li>JSON: <a class="link" href="https://golang.org/pkg/encoding/json/"  target="_blank" rel="noopener"
    ><code>encoding/json</code></a> ÈÄöËøáÂÖ∂ <a class="link" href="https://golang.org/pkg/time/#Time.UnmarshalJSON"  target="_blank" rel="noopener"
    ><code>UnmarshalJSON</code> method</a> ÊñπÊ≥ïÊîØÊåÅÂ∞Ü <code>time.Time</code> ÁºñÁ†Å‰∏∫ <a class="link" href="https://tools.ietf.org/html/rfc3339"  target="_blank" rel="noopener"
    >RFC 3339</a> Â≠óÁ¨¶‰∏≤</li>
<li>SQL: <a class="link" href="https://golang.org/pkg/database/sql/"  target="_blank" rel="noopener"
    ><code>database/sql</code></a> ÊîØÊåÅÂ∞Ü <code>DATETIME</code> Êàñ <code>TIMESTAMP</code> ÂàóËΩ¨Êç¢‰∏∫ <code>time.Time</code>ÔºåÂ¶ÇÊûúÂ∫ïÂ±ÇÈ©±Âä®Á®ãÂ∫èÊîØÊåÅÂàôËøîÂõû</li>
<li>YAML: <a class="link" href="https://godoc.org/gopkg.in/yaml.v2"  target="_blank" rel="noopener"
    ><code>gopkg.in/yaml.v2</code></a> ÊîØÊåÅÂ∞Ü <code>time.Time</code> ‰Ωú‰∏∫ <a class="link" href="https://tools.ietf.org/html/rfc3339"  target="_blank" rel="noopener"
    >RFC 3339</a> Â≠óÁ¨¶‰∏≤ÔºåÂπ∂ÈÄöËøá <a class="link" href="https://golang.org/pkg/time/#ParseDuration"  target="_blank" rel="noopener"
    ><code>time.ParseDuration</code></a> ÊîØÊåÅ <code>time.Duration</code>„ÄÇ</li>
</ul>
<p>ÂΩì‰∏çËÉΩÂú®Ëøô‰∫õ‰∫§‰∫í‰∏≠‰ΩøÁî® <code>time.Duration</code> Êó∂ÔºåËØ∑‰ΩøÁî® <code>int</code> Êàñ <code>float64</code>ÔºåÂπ∂Âú®Â≠óÊÆµÂêçÁß∞‰∏≠ÂåÖÂê´Âçï‰Ωç„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÁî±‰∫é <code>encoding/json</code> ‰∏çÊîØÊåÅ <code>time.Duration</code>ÔºåÂõ†Ê≠§ËØ•Âçï‰ΩçÂåÖÂê´Âú®Â≠óÊÆµÁöÑÂêçÁß∞‰∏≠„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// {&#34;interval&#34;: 2}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Config</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Interval</span> <span class="kt">int</span> <span class="s">`json:&#34;interval&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// {&#34;intervalMillis&#34;: 2000}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Config</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">IntervalMillis</span> <span class="kt">int</span> <span class="s">`json:&#34;intervalMillis&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩìÂú®Ëøô‰∫õ‰∫§‰∫í‰∏≠‰∏çËÉΩ‰ΩøÁî® <code>time.Time</code> Êó∂ÔºåÈô§ÈùûËææÊàê‰∏ÄËá¥ÔºåÂê¶Âàô‰ΩøÁî® <code>string</code> Âíå <a class="link" href="https://tools.ietf.org/html/rfc3339"  target="_blank" rel="noopener"
    >RFC 3339</a> ‰∏≠ÂÆö‰πâÁöÑÊ†ºÂºèÊó∂Èó¥Êà≥„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå<a class="link" href="https://golang.org/pkg/time/#Time.UnmarshalText"  target="_blank" rel="noopener"
    ><code>Time.UnmarshalText</code></a> ‰ΩøÁî®Ê≠§Ê†ºÂºèÔºåÂπ∂ÂèØÈÄöËøá <a class="link" href="https://golang.org/pkg/time/#RFC3339"  target="_blank" rel="noopener"
    ><code>time.RFC3339</code></a> Âú® <code>Time.Format</code> Âíå <code>time.Parse</code> ‰∏≠‰ΩøÁî®„ÄÇ</p>
<p>Â∞ΩÁÆ°ËøôÂú®ÂÆûË∑µ‰∏≠Âπ∂‰∏çÊàêÈóÆÈ¢òÔºå‰ΩÜËØ∑ËÆ∞‰ΩèÔºå<code>&quot;time&quot;</code> ÂåÖ‰∏çÊîØÊåÅËß£ÊûêÈó∞ÁßíÊó∂Èó¥Êà≥Ôºà<a class="link" href="https://github.com/golang/go/issues/8728"  target="_blank" rel="noopener"
    >8728</a>ÔºâÔºå‰πü‰∏çÂú®ËÆ°ÁÆó‰∏≠ËÄÉËôëÈó∞ÁßíÔºà<a class="link" href="https://github.com/golang/go/issues/15190"  target="_blank" rel="noopener"
    >15190</a>Ôºâ„ÄÇÂ¶ÇÊûúÊÇ®ÊØîËæÉ‰∏§‰∏™Êó∂Èó¥Áû¨Èó¥ÔºåÂàôÂ∑ÆÂºÇÂ∞Ü‰∏çÂåÖÊã¨Ëøô‰∏§‰∏™Áû¨Èó¥‰πãÈó¥ÂèØËÉΩÂèëÁîüÁöÑÈó∞Áßí„ÄÇ</p>
<h3 id="ÈîôËØØÁ±ªÂûã">ÈîôËØØÁ±ªÂûã</h3>
<p>Go ‰∏≠ÊúâÂ§öÁßçÂ£∞ÊòéÈîôËØØÔºàError) ÁöÑÈÄâÈ°πÔºö</p>
<ul>
<li><a class="link" href="https://golang.org/pkg/errors/#New"  target="_blank" rel="noopener"
    ><code>errors.New</code></a> ÂØπ‰∫éÁÆÄÂçïÈùôÊÄÅÂ≠óÁ¨¶‰∏≤ÁöÑÈîôËØØ</li>
<li><a class="link" href="https://golang.org/pkg/fmt/#Errorf"  target="_blank" rel="noopener"
    ><code>fmt.Errorf</code></a> Áî®‰∫éÊ†ºÂºèÂåñÁöÑÈîôËØØÂ≠óÁ¨¶‰∏≤</li>
<li>ÂÆûÁé∞ <code>Error()</code> ÊñπÊ≥ïÁöÑËá™ÂÆö‰πâÁ±ªÂûã</li>
<li>Áî® <a class="link" href="https://godoc.org/github.com/pkg/errors#Wrap"  target="_blank" rel="noopener"
    ><code>&quot;pkg/errors&quot;.Wrap</code></a> ÁöÑ Wrapped errors</li>
</ul>
<p>ËøîÂõûÈîôËØØÊó∂ÔºåËØ∑ËÄÉËôë‰ª•‰∏ãÂõ†Á¥†‰ª•Á°ÆÂÆöÊúÄ‰Ω≥ÈÄâÊã©Ôºö</p>
<ul>
<li>ËøôÊòØ‰∏Ä‰∏™‰∏çÈúÄË¶ÅÈ¢ùÂ§ñ‰ø°ÊÅØÁöÑÁÆÄÂçïÈîôËØØÂêóÔºüÂ¶ÇÊûúÊòØËøôÊ†∑Ôºå<a class="link" href="https://golang.org/pkg/errors/#New"  target="_blank" rel="noopener"
    ><code>errors.New</code></a> Ë∂≥Â§ü‰∫Ü„ÄÇ</li>
<li>ÂÆ¢Êà∑ÈúÄË¶ÅÊ£ÄÊµãÂπ∂Â§ÑÁêÜÊ≠§ÈîôËØØÂêóÔºüÂ¶ÇÊûúÊòØËøôÊ†∑ÔºåÂàôÂ∫î‰ΩøÁî®Ëá™ÂÆö‰πâÁ±ªÂûãÂπ∂ÂÆûÁé∞ËØ• <code>Error()</code> ÊñπÊ≥ï„ÄÇ</li>
<li>ÊÇ®ÊòØÂê¶Ê≠£Âú®‰º†Êí≠‰∏ãÊ∏∏ÂáΩÊï∞ËøîÂõûÁöÑÈîôËØØÔºüÂ¶ÇÊûúÊòØËøôÊ†∑ÔºåËØ∑Êü•ÁúãÊú¨ÊñáÂêéÈù¢ÊúâÂÖ≥ÈîôËØØÂåÖË£Ö <a class="link" href="https://github.com/xxjwxc/uber_go_guide_cn#%e9%94%99%e8%af%af%e5%8c%85%e8%a3%85"  target="_blank" rel="noopener"
    >section on error wrapping</a> ÈÉ®ÂàÜÁöÑÂÜÖÂÆπ„ÄÇ</li>
<li>Âê¶Âàô <a class="link" href="https://golang.org/pkg/fmt/#Errorf"  target="_blank" rel="noopener"
    ><code>fmt.Errorf</code></a> Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ</li>
</ul>
<p>Â¶ÇÊûúÂÆ¢Êà∑Á´ØÈúÄË¶ÅÊ£ÄÊµãÈîôËØØÔºåÂπ∂‰∏îÊÇ®Â∑≤‰ΩøÁî®ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑÈîôËØØ <a class="link" href="https://golang.org/pkg/errors/#New"  target="_blank" rel="noopener"
    ><code>errors.New</code></a>ÔºåËØ∑‰ΩøÁî®‰∏Ä‰∏™ÈîôËØØÂèòÈáè„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// package foo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Open</span><span class="p">()</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;could not open&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// package bar
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">use</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">foo</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#34;could not open&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// handle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">panic</span><span class="p">(</span><span class="s">&#34;unknown error&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// package foo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">ErrCouldNotOpen</span> <span class="p">=</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;could not open&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Open</span><span class="p">()</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">ErrCouldNotOpen</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// package bar
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">foo</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">Is</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">ErrCouldNotOpen</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// handle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">panic</span><span class="p">(</span><span class="s">&#34;unknown error&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÊÇ®ÊúâÂèØËÉΩÈúÄË¶ÅÂÆ¢Êà∑Á´ØÊ£ÄÊµãÁöÑÈîôËØØÔºåÂπ∂‰∏îÊÉ≥ÂêëÂÖ∂‰∏≠Ê∑ªÂä†Êõ¥Â§ö‰ø°ÊÅØÔºà‰æãÂ¶ÇÔºåÂÆÉ‰∏çÊòØÈùôÊÄÅÂ≠óÁ¨¶‰∏≤ÔºâÔºåÂàôÂ∫î‰ΩøÁî®Ëá™ÂÆö‰πâÁ±ªÂûã„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">open</span><span class="p">(</span><span class="nx">file</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;file %q not found&#34;</span><span class="p">,</span> <span class="nx">file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">use</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">open</span><span class="p">(</span><span class="s">&#34;testfile.txt&#34;</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">(),</span> <span class="s">&#34;not found&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// handle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">panic</span><span class="p">(</span><span class="s">&#34;unknown error&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">errNotFound</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">file</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">e</span> <span class="nx">errNotFound</span><span class="p">)</span> <span class="nf">Error</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;file %q not found&#34;</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">open</span><span class="p">(</span><span class="nx">file</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">errNotFound</span><span class="p">{</span><span class="nx">file</span><span class="p">:</span> <span class="nx">file</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">use</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">open</span><span class="p">(</span><span class="s">&#34;testfile.txt&#34;</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">err</span><span class="p">.(</span><span class="nx">errNotFound</span><span class="p">);</span> <span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// handle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">panic</span><span class="p">(</span><span class="s">&#34;unknown error&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áõ¥Êé•ÂØºÂá∫Ëá™ÂÆö‰πâÈîôËØØÁ±ªÂûãÊó∂Ë¶ÅÂ∞èÂøÉÔºåÂõ†‰∏∫ÂÆÉ‰ª¨Â∑≤Êàê‰∏∫Á®ãÂ∫èÂåÖÂÖ¨ÂÖ± API ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÊúÄÂ•ΩÂÖ¨ÂºÄÂåπÈÖçÂô®ÂäüËÉΩ‰ª•Ê£ÄÊü•ÈîôËØØ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// package foo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">errNotFound</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">file</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">e</span> <span class="nx">errNotFound</span><span class="p">)</span> <span class="nf">Error</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;file %q not found&#34;</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">IsNotFoundError</span><span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">_</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">err</span><span class="p">.(</span><span class="nx">errNotFound</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">ok</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Open</span><span class="p">(</span><span class="nx">file</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">errNotFound</span><span class="p">{</span><span class="nx">file</span><span class="p">:</span> <span class="nx">file</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// package bar
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">foo</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">foo</span><span class="p">.</span><span class="nf">IsNotFoundError</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// handle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">panic</span><span class="p">(</span><span class="s">&#34;unknown error&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÈîôËØØÂåÖË£Ö-error-wrapping">ÈîôËØØÂåÖË£Ö (Error Wrapping)</h3>
<p>‰∏Ä‰∏™ÔºàÂáΩÊï∞/ÊñπÊ≥ïÔºâË∞ÉÁî®Â§±Ë¥•Êó∂ÔºåÊúâ‰∏âÁßç‰∏ªË¶ÅÁöÑÈîôËØØ‰º†Êí≠ÊñπÂºèÔºö</p>
<ul>
<li>Â¶ÇÊûúÊ≤°ÊúâË¶ÅÊ∑ªÂä†ÁöÑÂÖ∂‰ªñ‰∏ä‰∏ãÊñáÔºåÂπ∂‰∏îÊÇ®ÊÉ≥Ë¶ÅÁª¥Êä§ÂéüÂßãÈîôËØØÁ±ªÂûãÔºåÂàôËøîÂõûÂéüÂßãÈîôËØØ„ÄÇ</li>
<li>Ê∑ªÂä†‰∏ä‰∏ãÊñáÔºå‰ΩøÁî® <a class="link" href="https://godoc.org/github.com/pkg/errors#Wrap"  target="_blank" rel="noopener"
    ><code>&quot;pkg/errors&quot;.Wrap</code></a> ‰ª•‰æøÈîôËØØÊ∂àÊÅØÊèê‰æõÊõ¥Â§ö‰∏ä‰∏ãÊñá ,<a class="link" href="https://godoc.org/github.com/pkg/errors#Cause"  target="_blank" rel="noopener"
    ><code>&quot;pkg/errors&quot;.Cause</code></a> ÂèØÁî®‰∫éÊèêÂèñÂéüÂßãÈîôËØØ„ÄÇ</li>
<li>Â¶ÇÊûúË∞ÉÁî®ËÄÖ‰∏çÈúÄË¶ÅÊ£ÄÊµãÊàñÂ§ÑÁêÜÁöÑÁâπÂÆöÈîôËØØÊÉÖÂÜµÔºå‰ΩøÁî® <a class="link" href="https://golang.org/pkg/fmt/#Errorf"  target="_blank" rel="noopener"
    ><code>fmt.Errorf</code></a>„ÄÇ</li>
</ul>
<p>Âª∫ËÆÆÂú®ÂèØËÉΩÁöÑÂú∞Êñπ<strong>Ê∑ªÂä†‰∏ä‰∏ãÊñá</strong>Ôºå‰ª•‰ΩøÊÇ®Ëé∑ÂæóËØ∏Â¶Ç‚ÄúË∞ÉÁî®ÊúçÂä° fooÔºöËøûÊé•Ë¢´ÊãíÁªù‚Äù‰πãÁ±ªÁöÑ<strong>Êõ¥ÊúâÁî®ÁöÑÈîôËØØ</strong>ÔºåËÄå‰∏çÊòØËØ∏Â¶Ç‚ÄúËøûÊé•Ë¢´ÊãíÁªù‚Äù‰πãÁ±ªÁöÑÊ®°Á≥äÈîôËØØ„ÄÇ</p>
<p>Âú®Â∞Ü‰∏ä‰∏ãÊñáÊ∑ªÂä†Âà∞ËøîÂõûÁöÑÈîôËØØÊó∂ÔºåËØ∑ÈÅøÂÖç‰ΩøÁî®‚Äúfailed to‚Äù‰πãÁ±ªÁöÑ<strong>Áü≠ËØ≠‰ª•‰øùÊåÅ‰∏ä‰∏ãÊñáÁÆÄÊ¥Å</strong>ÔºåËøô‰∫õÁü≠ËØ≠‰ºöÈôàËø∞ÊòéÊòæÁöÑÂÜÖÂÆπÔºåÂπ∂ÈöèÁùÄÈîôËØØÂú®Â†ÜÊ†à‰∏≠ÁöÑÊ∏óÈÄèËÄåÈÄêÊ∏êÂ†ÜÁßØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">s</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">store</span><span class="p">.</span><span class="nf">New</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;failed to create new store: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">s</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">store</span><span class="p">.</span><span class="nf">New</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;new store: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩÜÊòØÔºå<strong>‰∏ÄÊó¶Â∞ÜÈîôËØØÂèëÈÄÅÂà∞Âè¶‰∏Ä‰∏™Á≥ªÁªüÔºåÂ∞±Â∫îËØ•ÊòéÁ°ÆÊ∂àÊÅØÊòØÈîôËØØÊ∂àÊÅØ</strong>Ôºà‰æãÂ¶Ç‰ΩøÁî®<code>err</code>Ê†áËÆ∞ÔºåÊàñÂú®Êó•Âøó‰∏≠‰ª•‚ÄùFailed‚Äù‰∏∫ÂâçÁºÄÔºâ„ÄÇ</p>
<p>Âè¶ËØ∑ÂèÇËßÅ <a class="link" href="https://dave.cheney.net/2016/04/27/dont-just-check-errors-handle-them-gracefully"  target="_blank" rel="noopener"
    >Don&rsquo;t just check errors, handle them gracefully</a>. ‰∏çË¶ÅÂè™ÊòØÊ£ÄÊü•ÈîôËØØÔºåË¶Å‰ºòÈõÖÂú∞Â§ÑÁêÜÈîôËØØ</p>
<h3 id="Â§ÑÁêÜÁ±ªÂûãÊñ≠Ë®ÄÂ§±Ë¥•">Â§ÑÁêÜÁ±ªÂûãÊñ≠Ë®ÄÂ§±Ë¥•</h3>
<p><a class="link" href="https://golang.org/ref/spec#Type_assertions"  target="_blank" rel="noopener"
    >type assertion</a> ÁöÑÂçï‰∏™ËøîÂõûÂÄºÂΩ¢ÂºèÈíàÂØπ‰∏çÊ≠£Á°ÆÁöÑÁ±ªÂûãÂ∞Ü‰∫ßÁîü panic„ÄÇÂõ†Ê≠§ÔºåËØ∑ÂßãÁªà‰ΩøÁî®‚Äúcomma ok‚ÄùÁöÑÊÉØÁî®Ê≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">t</span> <span class="o">:=</span> <span class="nx">i</span><span class="p">.(</span><span class="kt">string</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">t</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">i</span><span class="p">.(</span><span class="kt">string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ‰ºòÈõÖÂú∞Â§ÑÁêÜÈîôËØØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰∏çË¶Å-panic">‰∏çË¶Å panic</h3>
<p>Âú®Áîü‰∫ßÁéØÂ¢É‰∏≠ËøêË°åÁöÑ‰ª£Á†ÅÂøÖÈ°ªÈÅøÂÖçÂá∫Áé∞ panic„ÄÇpanic ÊòØ <a class="link" href="https://en.wikipedia.org/wiki/Cascading_failure"  target="_blank" rel="noopener"
    >cascading failures</a> Á∫ßËÅîÂ§±Ë¥•ÁöÑ‰∏ªË¶ÅÊ†πÊ∫ê „ÄÇÂ¶ÇÊûúÂèëÁîüÈîôËØØÔºåËØ•ÂáΩÊï∞ÂøÖÈ°ªËøîÂõûÈîôËØØÔºåÂπ∂ÂÖÅËÆ∏Ë∞ÉÁî®ÊñπÂÜ≥ÂÆöÂ¶Ç‰ΩïÂ§ÑÁêÜÂÆÉ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">run</span><span class="p">(</span><span class="nx">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">panic</span><span class="p">(</span><span class="s">&#34;an argument is required&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nf">run</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Args</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">run</span><span class="p">(</span><span class="nx">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;an argument is required&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">run</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stderr</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>panic/recover ‰∏çÊòØÈîôËØØÂ§ÑÁêÜÁ≠ñÁï•„ÄÇ‰ªÖÂΩìÂèëÁîü‰∏çÂèØÊÅ¢Â§çÁöÑ‰∫ãÊÉÖÔºà‰æãÂ¶ÇÔºönil ÂºïÁî®ÔºâÊó∂ÔºåÁ®ãÂ∫èÊâçÂøÖÈ°ª panic„ÄÇÁ®ãÂ∫èÂàùÂßãÂåñÊòØ‰∏Ä‰∏™‰æãÂ§ñÔºöÁ®ãÂ∫èÂêØÂä®Êó∂Â∫î‰ΩøÁ®ãÂ∫è‰∏≠Ê≠¢ÁöÑ‰∏çËâØÊÉÖÂÜµÂèØËÉΩ‰ºöÂºïËµ∑ panic„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">_statusTemplate</span> <span class="p">=</span> <span class="nx">template</span><span class="p">.</span><span class="nf">Must</span><span class="p">(</span><span class="nx">template</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">).</span><span class="nf">Parse</span><span class="p">(</span><span class="s">&#34;_statusHTML&#34;</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âç≥‰ΩøÂú®ÊµãËØï‰ª£Á†Å‰∏≠Ôºå‰πü‰ºòÂÖà‰ΩøÁî®<code>t.Fatal</code>ÊàñËÄÖ<code>t.FailNow</code>ËÄå‰∏çÊòØ panic Êù•Á°Æ‰øùÂ§±Ë¥•Ë¢´Ê†áËÆ∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// func TestFoo(t *testing.T)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">TempFile</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;test&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nb">panic</span><span class="p">(</span><span class="s">&#34;failed to set up test&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// func TestFoo(t *testing.T)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">TempFile</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;test&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">t</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="s">&#34;failed to set up test&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰ΩøÁî®-gouberorgatomic">‰ΩøÁî® go.uber.org/atomic</h3>
<p>( ‰ªÖÊëòÂΩïÔºåÊ≠§Êù°‰∏ç‰∏ÄÂÆöÈÄÇÂêàÊàë‰ΩøÁî® )</p>
<p>‰ΩøÁî® <a class="link" href="https://golang.org/pkg/sync/atomic/"  target="_blank" rel="noopener"
    >sync/atomic</a> ÂåÖÁöÑÂéüÂ≠êÊìç‰ΩúÂØπÂéüÂßãÁ±ªÂûã (<code>int32</code>, <code>int64</code>Á≠âÔºâËøõË°åÊìç‰ΩúÔºåÂõ†‰∏∫ÂæàÂÆπÊòìÂøòËÆ∞‰ΩøÁî®ÂéüÂ≠êÊìç‰ΩúÊù•ËØªÂèñÊàñ‰øÆÊîπÂèòÈáè„ÄÇ</p>
<p><a class="link" href="https://godoc.org/go.uber.org/atomic"  target="_blank" rel="noopener"
    >go.uber.org/atomic</a> ÈÄöËøáÈöêËóèÂü∫Á°ÄÁ±ªÂûã‰∏∫Ëøô‰∫õÊìç‰ΩúÂ¢ûÂä†‰∫ÜÁ±ªÂûãÂÆâÂÖ®ÊÄß„ÄÇÊ≠§Â§ñÔºåÂÆÉÂåÖÊã¨‰∏Ä‰∏™Êñπ‰æøÁöÑ<code>atomic.Bool</code>Á±ªÂûã„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">foo</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">running</span> <span class="kt">int32</span>  <span class="c1">// atomic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span><span class="o">*</span> <span class="nx">foo</span><span class="p">)</span> <span class="nf">start</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">atomic</span><span class="p">.</span><span class="nf">SwapInt32</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">running</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="c1">// already running‚Ä¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="k">return</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// start the Foo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">foo</span><span class="p">)</span> <span class="nf">isRunning</span><span class="p">()</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">running</span> <span class="o">==</span> <span class="mi">1</span>  <span class="c1">// race!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">foo</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">running</span> <span class="nx">atomic</span><span class="p">.</span><span class="nx">Bool</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">foo</span><span class="p">)</span> <span class="nf">start</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">f</span><span class="p">.</span><span class="nx">running</span><span class="p">.</span><span class="nf">Swap</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="c1">// already running‚Ä¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="k">return</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// start the Foo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">foo</span><span class="p">)</span> <span class="nf">isRunning</span><span class="p">()</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">running</span><span class="p">.</span><span class="nf">Load</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÈÅøÂÖçÂèØÂèòÂÖ®Â±ÄÂèòÈáè">ÈÅøÂÖçÂèØÂèòÂÖ®Â±ÄÂèòÈáè</h3>
<p>‰ΩøÁî®ÈÄâÊã©‰æùËµñÊ≥®ÂÖ•ÊñπÂºèÈÅøÂÖçÊîπÂèòÂÖ®Â±ÄÂèòÈáè„ÄÇ Êó¢ÈÄÇÁî®‰∫éÂáΩÊï∞ÊåáÈíàÂèàÈÄÇÁî®‰∫éÂÖ∂‰ªñÂÄºÁ±ªÂûã</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// sign.go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">_timeNow</span> <span class="p">=</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">sign</span><span class="p">(</span><span class="nx">msg</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">now</span> <span class="o">:=</span> <span class="nf">_timeNow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nf">signWithTime</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="nx">now</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// sign_test.go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">TestSign</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">oldTimeNow</span> <span class="o">:=</span> <span class="nx">_timeNow</span>
</span></span><span class="line"><span class="cl">  <span class="nx">_timeNow</span> <span class="p">=</span> <span class="kd">func</span><span class="p">()</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">someFixedTime</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span> <span class="nx">_timeNow</span> <span class="p">=</span> <span class="nx">oldTimeNow</span> <span class="p">}()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">want</span><span class="p">,</span> <span class="nf">sign</span><span class="p">(</span><span class="nx">give</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// sign.go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">signer</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">now</span> <span class="kd">func</span><span class="p">()</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">newSigner</span><span class="p">()</span> <span class="o">*</span><span class="nx">signer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="o">&amp;</span><span class="nx">signer</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">now</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">signer</span><span class="p">)</span> <span class="nf">Sign</span><span class="p">(</span><span class="nx">msg</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">now</span> <span class="o">:=</span> <span class="nx">s</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nf">signWithTime</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="nx">now</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// sign_test.go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">TestSigner</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">s</span> <span class="o">:=</span> <span class="nf">newSigner</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">s</span><span class="p">.</span><span class="nx">now</span> <span class="p">=</span> <span class="kd">func</span><span class="p">()</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">someFixedTime</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">want</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nf">Sign</span><span class="p">(</span><span class="nx">give</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÈÅøÂÖçÂú®ÂÖ¨ÂÖ±ÁªìÊûÑ‰∏≠ÂµåÂÖ•Á±ªÂûã">ÈÅøÂÖçÂú®ÂÖ¨ÂÖ±ÁªìÊûÑ‰∏≠ÂµåÂÖ•Á±ªÂûã</h3>
<p>Ëøô‰∫õÂµåÂÖ•ÁöÑÁ±ªÂûãÊ≥ÑÊºèÂÆûÁé∞ÁªÜËäÇ„ÄÅÁ¶ÅÊ≠¢Á±ªÂûãÊºîÂåñÂíåÊ®°Á≥äÁöÑÊñáÊ°£„ÄÇ</p>
<p>ÂÅáËÆæÊÇ®‰ΩøÁî®ÂÖ±‰∫´ÁöÑ <code>AbstractList</code> ÂÆûÁé∞‰∫ÜÂ§öÁßçÂàóË°®Á±ªÂûãÔºåËØ∑ÈÅøÂÖçÂú®ÂÖ∑‰ΩìÁöÑÂàóË°®ÂÆûÁé∞‰∏≠ÂµåÂÖ• <code>AbstractList</code>„ÄÇ Áõ∏ÂèçÔºåÂè™ÈúÄÊâãÂä®Â∞ÜÊñπÊ≥ïÂÜôÂÖ•ÂÖ∑‰ΩìÁöÑÂàóË°®ÔºåËØ•ÂàóË°®Â∞ÜÂßîÊâòÁªôÊäΩË±°ÂàóË°®„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">AbstractList</span> <span class="kd">struct</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Ê∑ªÂä†Â∞ÜÂÆû‰ΩìÊ∑ªÂä†Âà∞ÂàóË°®‰∏≠„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">l</span> <span class="o">*</span><span class="nx">AbstractList</span><span class="p">)</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">e</span> <span class="nx">Entity</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÁßªÈô§‰ªéÂàóË°®‰∏≠ÁßªÈô§ÂÆû‰Ωì„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">l</span> <span class="o">*</span><span class="nx">AbstractList</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">e</span> <span class="nx">Entity</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// ConcreteList ÊòØ‰∏Ä‰∏™ÂÆû‰ΩìÂàóË°®„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">ConcreteList</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">*</span><span class="nx">AbstractList</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// ConcreteList ÊòØ‰∏Ä‰∏™ÂÆû‰ΩìÂàóË°®„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">ConcreteList</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">list</span> <span class="o">*</span><span class="nx">AbstractList</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Ê∑ªÂä†Â∞ÜÂÆû‰ΩìÊ∑ªÂä†Âà∞ÂàóË°®‰∏≠„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">l</span> <span class="o">*</span><span class="nx">ConcreteList</span><span class="p">)</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">e</span> <span class="nx">Entity</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">l</span><span class="p">.</span><span class="nx">list</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÁßªÈô§‰ªéÂàóË°®‰∏≠ÁßªÈô§ÂÆû‰Ωì„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">l</span> <span class="o">*</span><span class="nx">ConcreteList</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">e</span> <span class="nx">Entity</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">l</span><span class="p">.</span><span class="nx">list</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go ÂÖÅËÆ∏ <a class="link" href="https://golang.org/doc/effective_go.html#embedding"  target="_blank" rel="noopener"
    >Á±ªÂûãÂµåÂÖ•</a> ‰Ωú‰∏∫ÁªßÊâøÂíåÁªÑÂêà‰πãÈó¥ÁöÑÊäòË°∑„ÄÇ Â§ñÈÉ®Á±ªÂûãËé∑ÂèñÂµåÂÖ•Á±ªÂûãÁöÑÊñπÊ≥ïÁöÑÈöêÂºèÂâØÊú¨„ÄÇ ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËøô‰∫õÊñπÊ≥ïÂßîÊâòÁªôÂµåÂÖ•ÂÆû‰æãÁöÑÂêå‰∏ÄÊñπÊ≥ï„ÄÇ</p>
<p>ÁªìÊûÑËøòËé∑Âæó‰∏éÁ±ªÂûãÂêåÂêçÁöÑÂ≠óÊÆµ„ÄÇ ÊâÄ‰ª•ÔºåÂ¶ÇÊûúÂµåÂÖ•ÁöÑÁ±ªÂûãÊòØ publicÔºåÈÇ£‰πàÂ≠óÊÆµÊòØ public„ÄÇ‰∏∫‰∫Ü‰øùÊåÅÂêëÂêéÂÖºÂÆπÊÄßÔºåÂ§ñÈÉ®Á±ªÂûãÁöÑÊØè‰∏™Êú™Êù•ÁâàÊú¨ÈÉΩÂøÖÈ°ª‰øùÁïôÂµåÂÖ•Á±ªÂûã„ÄÇ</p>
<p>ÂæàÂ∞ëÈúÄË¶ÅÂµåÂÖ•Á±ªÂûã„ÄÇ ËøôÊòØ‰∏ÄÁßçÊñπ‰æøÔºåÂèØ‰ª•Â∏ÆÂä©ÊÇ®ÈÅøÂÖçÁºñÂÜôÂÜóÈïøÁöÑÂßîÊâòÊñπÊ≥ï„ÄÇ</p>
<p>Âç≥‰ΩøÂµåÂÖ•ÂÖºÂÆπÁöÑÊäΩË±°ÂàóË°® <em>interface</em>ÔºåËÄå‰∏çÊòØÁªìÊûÑ‰ΩìÔºåËøôÂ∞Ü‰∏∫ÂºÄÂèë‰∫∫ÂëòÊèê‰æõÊõ¥Â§ßÁöÑÁÅµÊ¥ªÊÄßÊù•ÊîπÂèòÊú™Êù•Ôºå‰ΩÜ‰ªçÁÑ∂Ê≥ÑÈú≤‰∫ÜÂÖ∑‰ΩìÂàóË°®‰ΩøÁî®ÊäΩË±°ÂÆûÁé∞ÁöÑÁªÜËäÇ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// AbstractList ÊòØÂêÑÁßçÂÆû‰ΩìÂàóË°®ÁöÑÈÄöÁî®ÂÆûÁé∞„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">AbstractList</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nf">Add</span><span class="p">(</span><span class="nx">Entity</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nf">Remove</span><span class="p">(</span><span class="nx">Entity</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ConcreteList ÊòØ‰∏Ä‰∏™ÂÆû‰ΩìÂàóË°®„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">ConcreteList</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">AbstractList</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// ConcreteList ÊòØ‰∏Ä‰∏™ÂÆû‰ΩìÂàóË°®„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">ConcreteList</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">list</span> <span class="nx">AbstractList</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Ê∑ªÂä†Â∞ÜÂÆû‰ΩìÊ∑ªÂä†Âà∞ÂàóË°®‰∏≠„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">l</span> <span class="o">*</span><span class="nx">ConcreteList</span><span class="p">)</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">e</span> <span class="nx">Entity</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">l</span><span class="p">.</span><span class="nx">list</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÁßªÈô§‰ªéÂàóË°®‰∏≠ÁßªÈô§ÂÆû‰Ωì„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">l</span> <span class="o">*</span><span class="nx">ConcreteList</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">e</span> <span class="nx">Entity</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">l</span><span class="p">.</span><span class="nx">list</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êó†ËÆ∫ÊòØ‰ΩøÁî®ÂµåÂÖ•ÂºèÁªìÊûÑËøòÊòØ‰ΩøÁî®ÂµåÂÖ•ÂºèÊé•Âè£ÔºåÂµåÂÖ•ÂºèÁ±ªÂûãÈÉΩ‰ºöÈôêÂà∂Á±ªÂûãÁöÑÊºîÂåñ.</p>
<ul>
<li>ÂêëÂµåÂÖ•ÂºèÊé•Âè£Ê∑ªÂä†ÊñπÊ≥ïÊòØ‰∏Ä‰∏™Á†¥ÂùèÊÄßÁöÑÊîπÂèò„ÄÇ</li>
<li>Âà†Èô§ÂµåÂÖ•Á±ªÂûãÊòØ‰∏Ä‰∏™Á†¥ÂùèÊÄßÁöÑÊîπÂèò„ÄÇ</li>
<li>Âç≥‰Ωø‰ΩøÁî®Êª°Ë∂≥Áõ∏ÂêåÊé•Âè£ÁöÑÊõø‰ª£ÊñπÊ≥ïÊõøÊç¢ÂµåÂÖ•Á±ªÂûãÔºå‰πüÊòØ‰∏Ä‰∏™Á†¥ÂùèÊÄßÁöÑÊîπÂèò„ÄÇ</li>
</ul>
<p>Â∞ΩÁÆ°ÁºñÂÜôËøô‰∫õÂßîÊâòÊñπÊ≥ïÊòØ‰πèÂë≥ÁöÑÔºå‰ΩÜÊòØÈ¢ùÂ§ñÁöÑÂ∑•‰ΩúÈöêËóè‰∫ÜÂÆûÁé∞ÁªÜËäÇÔºåÁïô‰∏ã‰∫ÜÊõ¥Â§öÁöÑÊõ¥ÊîπÊú∫‰ºöÔºåËøòÊ∂àÈô§‰∫ÜÂú®ÊñáÊ°£‰∏≠ÂèëÁé∞ÂÆåÊï¥ÂàóË°®Êé•Âè£ÁöÑÈó¥Êé•ÊÄßÊìç‰Ωú„ÄÇ</p>
<h3 id="ÈÅøÂÖç‰ΩøÁî®ÂÜÖÁΩÆÂêçÁß∞">ÈÅøÂÖç‰ΩøÁî®ÂÜÖÁΩÆÂêçÁß∞</h3>
<p>GoËØ≠Ë®ÄËßÑËåÉ<a class="link" href="https://golang.org/ref/spec"  target="_blank" rel="noopener"
    >language specification</a> Ê¶ÇËø∞‰∫ÜÂá†‰∏™ÂÜÖÁΩÆÁöÑÔºå ‰∏çÂ∫îÂú®GoÈ°πÁõÆ‰∏≠‰ΩøÁî®ÁöÑÂêçÁß∞Ê†áËØÜ<a class="link" href="https://golang.org/ref/spec#Predeclared_identifiers"  target="_blank" rel="noopener"
    >predeclared identifiers</a>„ÄÇ</p>
<p>Ê†πÊçÆ‰∏ä‰∏ãÊñáÁöÑ‰∏çÂêåÔºåÂ∞ÜËøô‰∫õÊ†áËØÜÁ¨¶‰Ωú‰∏∫ÂêçÁß∞ÈáçÂ§ç‰ΩøÁî®Ôºå Â∞ÜÂú®ÂΩìÂâç‰ΩúÁî®ÂüüÔºàÊàñ‰ªª‰ΩïÂµåÂ•ó‰ΩúÁî®ÂüüÔºâ‰∏≠ÈöêËóèÂéüÂßãÊ†áËØÜÁ¨¶ÔºåÊàñËÄÖÊ∑∑Ê∑Ü‰ª£Á†Å„ÄÇ Âú®ÊúÄÂ•ΩÁöÑÊÉÖÂÜµ‰∏ãÔºåÁºñËØëÂô®‰ºöÊä•ÈîôÔºõÂú®ÊúÄÂùèÁöÑÊÉÖÂÜµ‰∏ãÔºåËøôÊ†∑ÁöÑ‰ª£Á†ÅÂèØËÉΩ‰ºöÂºïÂÖ•ÊΩúÂú®ÁöÑ„ÄÅÈöæ‰ª•ÊÅ¢Â§çÁöÑÈîôËØØ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="kt">error</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="c1">// `error` ‰ΩúÁî®ÂüüÈöêÂºèË¶ÜÁõñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// or
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">handleErrorMessage</span><span class="p">(</span><span class="kt">error</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// `error` ‰ΩúÁî®ÂüüÈöêÂºèË¶ÜÁõñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Foo</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ËôΩÁÑ∂Ëøô‰∫õÂ≠óÊÆµÂú®ÊäÄÊúØ‰∏ä‰∏çÊûÑÊàêÈò¥ÂΩ±Ôºå‰ΩÜ`error`Êàñ`string`Â≠óÁ¨¶‰∏≤ÁöÑÈáçÊò†Â∞ÑÁé∞Âú®ÊòØ‰∏çÊòéÁ°ÆÁöÑ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">error</span>  <span class="kt">error</span>
</span></span><span class="line"><span class="cl">    <span class="kt">string</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">Foo</span><span class="p">)</span> <span class="nf">Error</span><span class="p">()</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// `error` Âíå `f.error` Âú®ËßÜËßâ‰∏äÊòØÁõ∏‰ººÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">Foo</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// `string` and `f.string` Âú®ËßÜËßâ‰∏äÊòØÁõ∏‰ººÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">errorMessage</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="c1">// `error` ÊåáÂêëÂÜÖÁΩÆÁöÑÈùûË¶ÜÁõñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// or
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">handleErrorMessage</span><span class="p">(</span><span class="nx">msg</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// `error` ÊåáÂêëÂÜÖÁΩÆÁöÑÈùûË¶ÜÁõñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Foo</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// `error` and `string` Áé∞Âú®ÊòØÊòéÁ°ÆÁöÑ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">err</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">    <span class="nx">str</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">Foo</span><span class="p">)</span> <span class="nf">Error</span><span class="p">()</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">Foo</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">str</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÊÑèÔºåÁºñËØëÂô®Âú®‰ΩøÁî®È¢ÑÂÖàÂàÜÈöîÁöÑÊ†áËØÜÁ¨¶Êó∂‰∏ç‰ºöÁîüÊàêÈîôËØØÔºå ‰ΩÜÊòØËØ∏Â¶Ç<code>go vet</code>‰πãÁ±ªÁöÑÂ∑•ÂÖ∑‰ºöÊ≠£Á°ÆÂú∞ÊåáÂá∫Ëøô‰∫õÂíåÂÖ∂‰ªñÊÉÖÂÜµ‰∏ãÁöÑÈöêÂºèÈóÆÈ¢ò„ÄÇ</p>
<h3 id="ÈÅøÂÖç‰ΩøÁî®-init">ÈÅøÂÖç‰ΩøÁî® <code>init()</code></h3>
<p>Â∞ΩÂèØËÉΩÈÅøÂÖç‰ΩøÁî®<code>init()</code>„ÄÇÂΩì<code>init()</code>ÊòØ‰∏çÂèØÈÅøÂÖçÊàñÂèØÂèñÁöÑÔºå‰ª£Á†ÅÂ∫îÂÖàÂ∞ùËØïÔºö</p>
<ol>
<li>Êó†ËÆ∫Á®ãÂ∫èÁéØÂ¢ÉÊàñË∞ÉÁî®Â¶Ç‰ΩïÔºåÈÉΩË¶ÅÂÆåÂÖ®Á°ÆÂÆö„ÄÇ</li>
<li>ÈÅøÂÖç‰æùËµñ‰∫éÂÖ∂‰ªñ<code>init()</code>ÂáΩÊï∞ÁöÑÈ°∫Â∫èÊàñÂâØ‰ΩúÁî®„ÄÇËôΩÁÑ∂<code>init()</code>È°∫Â∫èÊòØÊòéÁ°ÆÁöÑÔºå‰ΩÜ‰ª£Á†ÅÂèØ‰ª•Êõ¥ÊîπÔºå Âõ†Ê≠§<code>init()</code>ÂáΩÊï∞‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂèØËÉΩ‰ºö‰Ωø‰ª£Á†ÅÂèòÂæóËÑÜÂº±ÂíåÂÆπÊòìÂá∫Èîô„ÄÇ</li>
<li>ÈÅøÂÖçËÆøÈóÆÊàñÊìç‰ΩúÂÖ®Â±ÄÊàñÁéØÂ¢ÉÁä∂ÊÄÅÔºåÂ¶ÇÊú∫Âô®‰ø°ÊÅØ„ÄÅÁéØÂ¢ÉÂèòÈáè„ÄÅÂ∑•‰ΩúÁõÆÂΩï„ÄÅÁ®ãÂ∫èÂèÇÊï∞/ËæìÂÖ•Á≠â„ÄÇ</li>
<li>ÈÅøÂÖç<code>I/O</code>ÔºåÂåÖÊã¨Êñá‰ª∂Á≥ªÁªü„ÄÅÁΩëÁªúÂíåÁ≥ªÁªüË∞ÉÁî®„ÄÇ</li>
</ol>
<p>‰∏çËÉΩÊª°Ë∂≥Ëøô‰∫õË¶ÅÊ±ÇÁöÑ‰ª£Á†ÅÂèØËÉΩÂ±û‰∫éË¶Å‰Ωú‰∏∫<code>main()</code>Ë∞ÉÁî®ÁöÑ‰∏ÄÈÉ®ÂàÜÔºàÊàñÁ®ãÂ∫èÁîüÂëΩÂë®Êúü‰∏≠ÁöÑÂÖ∂‰ªñÂú∞ÊñπÔºâÔºå ÊàñËÄÖ‰Ωú‰∏∫<code>main()</code>Êú¨Ë∫´ÁöÑ‰∏ÄÈÉ®ÂàÜÂÜôÂÖ•„ÄÇÁâπÂà´ÊòØÔºåÊâìÁÆóÁî±ÂÖ∂‰ªñÁ®ãÂ∫è‰ΩøÁî®ÁöÑÂ∫ìÂ∫îËØ•ÁâπÂà´Ê≥®ÊÑèÂÆåÂÖ®Á°ÆÂÆöÊÄßÔºå ËÄå‰∏çÊòØÊâßË°å‚Äúinit magic‚Äù</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Foo</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">_defaultFoo</span> <span class="nx">Foo</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">_defaultFoo</span> <span class="p">=</span> <span class="nx">Foo</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Config</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">_config</span> <span class="nx">Config</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Bad: Âü∫‰∫éÂΩìÂâçÁõÆÂΩï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">cwd</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Getwd</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Bad: I/O
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">raw</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadFile</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nx">path</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">cwd</span><span class="p">,</span> <span class="s">&#34;config&#34;</span><span class="p">,</span> <span class="s">&#34;config.yaml&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">yaml</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">(</span><span class="nx">raw</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">_config</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">_defaultFoo</span> <span class="p">=</span> <span class="nx">Foo</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// or, ‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÂèØÊµãËØïÊÄß:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">_defaultFoo</span> <span class="p">=</span> <span class="nf">defaultFoo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">defaultFoo</span><span class="p">()</span> <span class="nx">Foo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">Foo</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Config</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">loadConfig</span><span class="p">()</span> <span class="nx">Config</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cwd</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Getwd</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// handle err
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">raw</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadFile</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nx">path</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">cwd</span><span class="p">,</span> <span class="s">&#34;config&#34;</span><span class="p">,</span> <span class="s">&#34;config.yaml&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// handle err
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">var</span> <span class="nx">config</span> <span class="nx">Config</span>
</span></span><span class="line"><span class="cl">    <span class="nx">yaml</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">(</span><span class="nx">raw</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">config</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">config</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËÄÉËôëÂà∞‰∏äËø∞ÊÉÖÂÜµÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºå<code>init()</code>ÂèØËÉΩÊõ¥ÂèØÂèñÊàñÊòØÂøÖË¶ÅÁöÑÔºåÂèØËÉΩÂåÖÊã¨Ôºö</p>
<ul>
<li>‰∏çËÉΩË°®Á§∫‰∏∫Âçï‰∏™ËµãÂÄºÁöÑÂ§çÊùÇË°®ËææÂºè„ÄÇ</li>
<li>ÂèØÊèíÂÖ•ÁöÑÈí©Â≠êÔºåÂ¶Ç<code>database/sql</code>„ÄÅÁºñÁ†ÅÁ±ªÂûãÊ≥®ÂÜåË°®Á≠â„ÄÇ</li>
<li>ÂØπ<a class="link" href="https://cloud.google.com/functions/docs/bestpractices/tips#use_global_variables_to_reuse_objects_in_future_invocations"  target="_blank" rel="noopener"
    >Google Cloud Functions</a>ÂíåÂÖ∂‰ªñÂΩ¢ÂºèÁöÑÁ°ÆÂÆöÊÄßÈ¢ÑËÆ°ÁÆóÁöÑ‰ºòÂåñ„ÄÇ</li>
</ul>
<h3 id="ËøΩÂä†Êó∂‰ºòÂÖàÊåáÂÆöÂàáÁâáÂÆπÈáè">ËøΩÂä†Êó∂‰ºòÂÖàÊåáÂÆöÂàáÁâáÂÆπÈáè</h3>
<p>ËøΩÂä†Êó∂‰ºòÂÖàÊåáÂÆöÂàáÁâáÂÆπÈáè</p>
<p>Âú®Â∞ΩÂèØËÉΩÁöÑÊÉÖÂÜµ‰∏ãÔºåÂú®ÂàùÂßãÂåñË¶ÅËøΩÂä†ÁöÑÂàáÁâáÊó∂‰∏∫<code>make()</code>Êèê‰æõ‰∏Ä‰∏™ÂÆπÈáèÂÄº„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">n</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">n</span> <span class="p">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span> <span class="nx">n</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="nx">k</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">k</span> <span class="p">&lt;</span> <span class="nx">size</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// BenchmarkBad-4    100000000    2.48s
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">n</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">n</span> <span class="p">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span> <span class="nx">n</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="nx">k</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">k</span> <span class="p">&lt;</span> <span class="nx">size</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// BenchmarkGood-4   100000000    0.21s
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰∏ªÂáΩÊï∞ÈÄÄÂá∫ÊñπÂºèexit">‰∏ªÂáΩÊï∞ÈÄÄÂá∫ÊñπÂºè(Exit)</h3>
<p>GoÁ®ãÂ∫è‰ΩøÁî®<a class="link" href="https://golang.org/pkg/os/#Exit"  target="_blank" rel="noopener"
    ><code>os.Exit</code></a> ÊàñËÄÖ <a class="link" href="https://golang.org/pkg/log/#Fatal"  target="_blank" rel="noopener"
    ><code>log.Fatal*</code></a> Á´ãÂç≥ÈÄÄÂá∫ (‰ΩøÁî®<code>panic</code>‰∏çÊòØÈÄÄÂá∫Á®ãÂ∫èÁöÑÂ•ΩÊñπÊ≥ïÔºåËØ∑ <a class="link" href="https://github.com/xxjwxc/uber_go_guide_cn#%e4%b8%8d%e8%a6%81-panic"  target="_blank" rel="noopener"
    >don&rsquo;t panic</a>.)</p>
<p>**‰ªÖÂú®<code>mainÔºàÔºâ</code>**‰∏≠Ë∞ÉÁî®ÂÖ∂‰∏≠‰∏Ä‰∏™ <code>os.Exit</code> ÊàñËÄÖ <code>log.Fatal*</code>„ÄÇÊâÄÊúâÂÖ∂‰ªñÂáΩÊï∞Â∫îÂ∞ÜÈîôËØØËøîÂõûÂà∞‰ø°Âè∑Â§±Ë¥•‰∏≠„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">body</span> <span class="o">:=</span> <span class="nf">readFile</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">readFile</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">b</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nb">string</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">body</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">readFile</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">readFile</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">b</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nb">string</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂéüÂàô‰∏äÔºöÈÄÄÂá∫ÁöÑÂÖ∑ÊúâÂ§öÁßçÂäüËÉΩÁöÑÁ®ãÂ∫èÂ≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºö</p>
<ul>
<li>‰∏çÊòéÊòæÁöÑÊéßÂà∂ÊµÅÔºö‰ªª‰ΩïÂáΩÊï∞ÈÉΩÂèØ‰ª•ÈÄÄÂá∫Á®ãÂ∫èÔºåÂõ†Ê≠§ÂæàÈöæÂØπÊéßÂà∂ÊµÅËøõË°åÊé®ÁêÜ„ÄÇ</li>
<li>Èöæ‰ª•ÊµãËØïÔºöÈÄÄÂá∫Á®ãÂ∫èÁöÑÂáΩÊï∞‰πüÂ∞ÜÈÄÄÂá∫Ë∞ÉÁî®ÂÆÉÁöÑÊµãËØï„ÄÇËøô‰ΩøÂæóÂáΩÊï∞ÂæàÈöæÊµãËØïÔºåÂπ∂ÂºïÂÖ•‰∫ÜË∑≥Ëøá <code>go test</code> Â∞öÊú™ËøêË°åÁöÑÂÖ∂‰ªñÊµãËØïÁöÑÈ£éÈô©„ÄÇ</li>
<li>Ë∑≥ËøáÊ∏ÖÁêÜÔºöÂΩìÂáΩÊï∞ÈÄÄÂá∫Á®ãÂ∫èÊó∂Ôºå‰ºöË∑≥ËøáÂ∑≤ÁªèËøõÂÖ•<code>defer</code>ÈòüÂàóÈáåÁöÑÂáΩÊï∞Ë∞ÉÁî®„ÄÇËøôÂ¢ûÂä†‰∫ÜË∑≥ËøáÈáçË¶ÅÊ∏ÖÁêÜ‰ªªÂä°ÁöÑÈ£éÈô©„ÄÇ</li>
</ul>
<h4 id="‰∏ÄÊ¨°ÊÄßÈÄÄÂá∫">‰∏ÄÊ¨°ÊÄßÈÄÄÂá∫</h4>
<p>Â¶ÇÊûúÂèØËÉΩÁöÑËØùÔºå‰Ω†ÁöÑ<code>mainÔºàÔºâ</code>ÂáΩÊï∞‰∏≠<strong>ÊúÄÂ§ö‰∏ÄÊ¨°</strong> Ë∞ÉÁî® <code>os.Exit</code>ÊàñËÄÖ<code>log.Fatal</code>„ÄÇÂ¶ÇÊûúÊúâÂ§ö‰∏™ÈîôËØØÂú∫ÊôØÂÅúÊ≠¢Á®ãÂ∫èÊâßË°åÔºåËØ∑Â∞ÜËØ•ÈÄªËæëÊîæÂú®ÂçïÁã¨ÁöÑÂáΩÊï∞‰∏ãÂπ∂‰ªé‰∏≠ËøîÂõûÈîôËØØ„ÄÇ Ëøô‰ºöÁº©Áü≠ <code>main()</code>ÂáΩÊï∞ÔºåÂπ∂Â∞Ü<strong>ÊâÄÊúâÂÖ≥ÈîÆ‰∏öÂä°ÈÄªËæëÊîæÂÖ•‰∏Ä‰∏™ÂçïÁã¨ÁöÑ„ÄÅÂèØÊµãËØïÁöÑÂáΩÊï∞‰∏≠</strong>„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">args</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nx">Args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="s">&#34;missing file&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span> <span class="o">:=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">defer</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Â¶ÇÊûúÊàë‰ª¨Ë∞ÉÁî®log.Fatal Âú®ËøôÊù°Á∫ø‰πãÂêé
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// f.Close Â∞Ü‰ºöË¢´ÊâßË°å.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">b</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">run</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">run</span><span class="p">()</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">args</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nx">Args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;missing file&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span> <span class="o">:=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">defer</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">b</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÊÄßËÉΩ">ÊÄßËÉΩ</h2>
<h3 id="‰ºòÂÖà‰ΩøÁî®-strconv-ËÄå‰∏çÊòØ-fmt">‰ºòÂÖà‰ΩøÁî® strconv ËÄå‰∏çÊòØ fmt</h3>
<p>Â∞ÜÂéüËØ≠ËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤Êàñ‰ªéÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢Êó∂Ôºå<code>strconv</code>ÈÄüÂ∫¶ÊØî<code>fmt</code>Âø´„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">s</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprint</span><span class="p">(</span><span class="nx">rand</span><span class="p">.</span><span class="nf">Int</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">s</span> <span class="o">:=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">Itoa</span><span class="p">(</span><span class="nx">rand</span><span class="p">.</span><span class="nf">Int</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÈÅøÂÖçÂ≠óÁ¨¶‰∏≤Âà∞Â≠óËäÇÁöÑËΩ¨Êç¢">ÈÅøÂÖçÂ≠óÁ¨¶‰∏≤Âà∞Â≠óËäÇÁöÑËΩ¨Êç¢</h3>
<p>‰∏çË¶ÅÂèçÂ§ç‰ªéÂõ∫ÂÆöÂ≠óÁ¨¶‰∏≤ÂàõÂª∫Â≠óËäÇ slice„ÄÇÁõ∏ÂèçÔºåËØ∑ÊâßË°å‰∏ÄÊ¨°ËΩ¨Êç¢Âπ∂ÊçïËé∑ÁªìÊûú„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">w</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;Hello world&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// BenchmarkBad-4   50000000   22.2 ns/op
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">data</span> <span class="o">:=</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;Hello world&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">w</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// BenchmarkGood-4  500000000   3.25 ns/op
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÊåáÂÆöÂÆπÂô®ÂÆπÈáè">ÊåáÂÆöÂÆπÂô®ÂÆπÈáè</h3>
<p>Â∞ΩÂèØËÉΩÊåáÂÆöÂÆπÂô®ÂÆπÈáèÔºå‰ª•‰æø‰∏∫ÂÆπÂô®È¢ÑÂÖàÂàÜÈÖçÂÜÖÂ≠ò„ÄÇËøôÂ∞ÜÂú®Ê∑ªÂä†ÂÖÉÁ¥†Êó∂ÊúÄÂ∞èÂåñÂêéÁª≠ÂàÜÈÖçÔºàÈÄöËøáÂ§çÂà∂ÂíåË∞ÉÊï¥ÂÆπÂô®Â§ßÂ∞èÔºâ„ÄÇ</p>
<h4 id="ÊåáÂÆömapÂÆπÈáèÊèêÁ§∫">ÊåáÂÆöMapÂÆπÈáèÊèêÁ§∫</h4>
<p>Âú®Â∞ΩÂèØËÉΩÁöÑÊÉÖÂÜµ‰∏ãÔºåÂú®‰ΩøÁî® <code>make()</code> ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÊèê‰æõÂÆπÈáè‰ø°ÊÅØ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="nx">T1</span><span class="p">]</span><span class="nx">T2</span><span class="p">,</span> <span class="nx">hint</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âêë<code>make()</code>Êèê‰æõÂÆπÈáèÊèêÁ§∫‰ºöÂú®ÂàùÂßãÂåñÊó∂Â∞ùËØïË∞ÉÊï¥mapÁöÑÂ§ßÂ∞èÔºåËøôÂ∞ÜÂáèÂ∞ëÂú®Â∞ÜÂÖÉÁ¥†Ê∑ªÂä†Âà∞mapÊó∂‰∏∫mapÈáçÊñ∞ÂàÜÈÖçÂÜÖÂ≠ò„ÄÇ</p>
<p>Ê≥®ÊÑèÔºå‰∏éslices‰∏çÂêå„ÄÇmap capacityÊèêÁ§∫Âπ∂‰∏ç‰øùËØÅÂÆåÂÖ®ÁöÑÊä¢Âç†ÂºèÂàÜÈÖçÔºåËÄåÊòØÁî®‰∫é‰º∞ËÆ°ÊâÄÈúÄÁöÑhashmap bucketÁöÑÊï∞Èáè„ÄÇ Âõ†Ê≠§ÔºåÂú®Â∞ÜÂÖÉÁ¥†Ê∑ªÂä†Âà∞mapÊó∂ÔºåÁîöËá≥Âú®ÊåáÂÆömapÂÆπÈáèÊó∂Ôºå‰ªçÂèØËÉΩÂèëÁîüÂàÜÈÖç„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">files</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadDir</span><span class="p">(</span><span class="s">&#34;./files&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">f</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">files</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">m</span><span class="p">[</span><span class="nx">f</span><span class="p">.</span><span class="nf">Name</span><span class="p">()]</span> <span class="p">=</span> <span class="nx">f</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// m ÊòØÂú®Ê≤°ÊúâÂ§ßÂ∞èÊèêÁ§∫ÁöÑÊÉÖÂÜµ‰∏ãÂàõÂª∫ÁöÑÔºõ Âú®ËøêË°åÊó∂ÂèØËÉΩ‰ºöÊúâÊõ¥Â§öÂàÜÈÖç„ÄÇ
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">files</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadDir</span><span class="p">(</span><span class="s">&#34;./files&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">files</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">f</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">files</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">m</span><span class="p">[</span><span class="nx">f</span><span class="p">.</span><span class="nf">Name</span><span class="p">()]</span> <span class="p">=</span> <span class="nx">f</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// m ÊòØÊúâÂ§ßÂ∞èÊèêÁ§∫ÂàõÂª∫ÁöÑÔºõÂú®ËøêË°åÊó∂ÂèØËÉΩ‰ºöÊúâÊõ¥Â∞ëÁöÑÂàÜÈÖç„ÄÇ
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÊåáÂÆöÂàáÁâáÂÆπÈáè">ÊåáÂÆöÂàáÁâáÂÆπÈáè</h4>
<p>Âú®Â∞ΩÂèØËÉΩÁöÑÊÉÖÂÜµ‰∏ãÔºåÂú®‰ΩøÁî®<code>make()</code>ÂàùÂßãÂåñÂàáÁâáÊó∂Êèê‰æõÂÆπÈáè‰ø°ÊÅØÔºåÁâπÂà´ÊòØÂú®ËøΩÂä†ÂàáÁâáÊó∂„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nb">make</span><span class="p">([]</span><span class="nx">T</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">capacity</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏émaps‰∏çÂêåÔºåslice capacity‰∏çÊòØ‰∏Ä‰∏™ÊèêÁ§∫ÔºöÁºñËØëÂô®Â∞Ü‰∏∫Êèê‰æõÁªô<code>make()</code>ÁöÑsliceÁöÑÂÆπÈáèÂàÜÈÖçË∂≥Â§üÁöÑÂÜÖÂ≠òÔºå ËøôÊÑèÂë≥ÁùÄÂêéÁª≠ÁöÑappend()`Êìç‰ΩúÂ∞ÜÂØºËá¥Èõ∂ÂàÜÈÖçÔºàÁõ¥Âà∞sliceÁöÑÈïøÂ∫¶‰∏éÂÆπÈáèÂåπÈÖçÔºåÂú®Ê≠§‰πãÂêéÔºå‰ªª‰ΩïappendÈÉΩÂèØËÉΩË∞ÉÊï¥Â§ßÂ∞è‰ª•ÂÆπÁ∫≥ÂÖ∂‰ªñÂÖÉÁ¥†Ôºâ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">n</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">n</span> <span class="p">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span> <span class="nx">n</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="nx">k</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">k</span> <span class="p">&lt;</span> <span class="nx">size</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// BenchmarkBad-4    100000000    2.48s
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">n</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">n</span> <span class="p">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span> <span class="nx">n</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="nx">k</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">k</span> <span class="p">&lt;</span> <span class="nx">size</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// BenchmarkGood-4   100000000    0.21s
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ËßÑËåÉ">ËßÑËåÉ</h2>
<h3 id="‰∏ÄËá¥ÊÄß">‰∏ÄËá¥ÊÄß</h3>
<p>Êú¨Êñá‰∏≠Ê¶ÇËø∞ÁöÑ‰∏Ä‰∫õÊ†áÂáÜÈÉΩÊòØÂÆ¢ËßÇÊÄßÁöÑËØÑ‰º∞ÔºåÊòØÊ†πÊçÆÂú∫ÊôØ„ÄÅ‰∏ä‰∏ãÊñá„ÄÅÊàñËÄÖ‰∏ªËßÇÊÄßÁöÑÂà§Êñ≠Ôºõ</p>
<p>‰ΩÜÊòØÊúÄÈáçË¶ÅÁöÑÊòØÔºå<strong>‰øùÊåÅ‰∏ÄËá¥</strong>.</p>
<p>‰∏ÄËá¥ÊÄßÁöÑ‰ª£Á†ÅÊõ¥ÂÆπÊòìÁª¥Êä§„ÄÅÊòØÊõ¥ÂêàÁêÜÁöÑ„ÄÅÈúÄË¶ÅÊõ¥Â∞ëÁöÑÂ≠¶‰π†ÊàêÊú¨„ÄÅÂπ∂‰∏îÈöèÁùÄÊñ∞ÁöÑÁ∫¶ÂÆöÂá∫Áé∞ÊàñËÄÖÂá∫Áé∞ÈîôËØØÂêéÊõ¥ÂÆπÊòìËøÅÁßª„ÄÅÊõ¥Êñ∞„ÄÅ‰øÆÂ§ç bug</p>
<p>Áõ∏ÂèçÔºåÂú®‰∏Ä‰∏™‰ª£Á†ÅÂ∫ì‰∏≠ÂåÖÂê´Â§ö‰∏™ÂÆåÂÖ®‰∏çÂêåÊàñÂÜ≤Á™ÅÁöÑ‰ª£Á†ÅÈ£éÊ†º‰ºöÂØºËá¥Áª¥Êä§ÊàêÊú¨ÂºÄÈîÄ„ÄÅ‰∏çÁ°ÆÂÆöÊÄßÂíåËÆ§Áü•ÂÅèÂ∑Æ„ÄÇÊâÄÊúâËøô‰∫õÈÉΩ‰ºöÁõ¥Êé•ÂØºËá¥ÈÄüÂ∫¶Èôç‰Ωé„ÄÅ‰ª£Á†ÅÂÆ°Êü•ÁóõËã¶„ÄÅËÄå‰∏îÂ¢ûÂä† bug Êï∞Èáè„ÄÇ</p>
<p>Â∞ÜËøô‰∫õÊ†áÂáÜÂ∫îÁî®‰∫é‰ª£Á†ÅÂ∫ìÊó∂ÔºåÂª∫ËÆÆÂú® packageÔºàÊàñÊõ¥Â§ßÔºâÁ∫ßÂà´ËøõË°åÊõ¥ÊîπÔºåÂ≠êÂåÖÁ∫ßÂà´ÁöÑÂ∫îÁî®Á®ãÂ∫èÈÄöËøáÂ∞ÜÂ§ö‰∏™Ê†∑ÂºèÂºïÂÖ•Âà∞Âêå‰∏Ä‰ª£Á†Å‰∏≠ÔºåËøùÂèç‰∫Ü‰∏äËø∞ÂÖ≥Ê≥®ÁÇπ„ÄÇ</p>
<h3 id="Áõ∏‰ººÁöÑÂ£∞ÊòéÊîæÂú®‰∏ÄÁªÑ">Áõ∏‰ººÁöÑÂ£∞ÊòéÊîæÂú®‰∏ÄÁªÑ</h3>
<p>Go ËØ≠Ë®ÄÊîØÊåÅÂ∞ÜÁõ∏‰ººÁöÑÂ£∞ÊòéÊîæÂú®‰∏Ä‰∏™ÁªÑÂÜÖ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="s">&#34;a&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;b&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;a&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÂêåÊ†∑ÈÄÇÁî®‰∫éÂ∏∏Èáè„ÄÅÂèòÈáèÂíåÁ±ªÂûãÂ£∞ÊòéÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="nx">a</span> <span class="p">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="nx">b</span> <span class="p">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">b</span> <span class="p">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Area</span> <span class="kt">float64</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Volume</span> <span class="kt">float64</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">a</span> <span class="p">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nx">b</span> <span class="p">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">a</span> <span class="p">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nx">b</span> <span class="p">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Area</span> <span class="kt">float64</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Volume</span> <span class="kt">float64</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ªÖÂ∞ÜÁõ∏ÂÖ≥ÁöÑÂ£∞ÊòéÊîæÂú®‰∏ÄÁªÑ„ÄÇ‰∏çË¶ÅÂ∞Ü‰∏çÁõ∏ÂÖ≥ÁöÑÂ£∞ÊòéÊîæÂú®‰∏ÄÁªÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Operation</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Add</span> <span class="nx">Operation</span> <span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Subtract</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Multiply</span>
</span></span><span class="line"><span class="cl">  <span class="nx">EnvVar</span> <span class="p">=</span> <span class="s">&#34;MY_ENV&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Operation</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Add</span> <span class="nx">Operation</span> <span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Subtract</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Multiply</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="nx">EnvVar</span> <span class="p">=</span> <span class="s">&#34;MY_ENV&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂàÜÁªÑ‰ΩøÁî®ÁöÑ‰ΩçÁΩÆÊ≤°ÊúâÈôêÂà∂Ôºå‰æãÂ¶ÇÔºö‰Ω†ÂèØ‰ª•Âú®ÂáΩÊï∞ÂÜÖÈÉ®‰ΩøÁî®ÂÆÉ‰ª¨Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">f</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">red</span> <span class="p">=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="mh">0xff0000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">green</span> <span class="p">=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="mh">0x00ff00</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">blue</span> <span class="p">=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="mh">0x0000ff</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">f</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">red</span>   <span class="p">=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="mh">0xff0000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">green</span> <span class="p">=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="mh">0x00ff00</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">blue</span>  <span class="p">=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="mh">0x0000ff</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="import-ÂàÜÁªÑ">import ÂàÜÁªÑ</h3>
<p>ÂØºÂÖ•Â∫îËØ•ÂàÜ‰∏∫‰∏§ÁªÑÔºö</p>
<ul>
<li>Ê†áÂáÜÂ∫ì</li>
<li>ÂÖ∂‰ªñÂ∫ì</li>
</ul>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËøôÊòØ goimports Â∫îÁî®ÁöÑÂàÜÁªÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;go.uber.org/atomic&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;golang.org/x/sync/errgroup&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="s">&#34;go.uber.org/atomic&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;golang.org/x/sync/errgroup&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂåÖÂêç">ÂåÖÂêç</h3>
<p>ÂΩìÂëΩÂêçÂåÖÊó∂ÔºåËØ∑Êåâ‰∏ãÈù¢ËßÑÂàôÁ°ÆÂÆöÂêçÁß∞Ôºö</p>
<ul>
<li>ÂÖ®ÈÉ®Â∞èÂÜô„ÄÇÊ≤°ÊúâÂ§ßÂÜôÊàñ‰∏ãÂàíÁ∫ø„ÄÇ</li>
<li>Â§ßÂ§öÊï∞‰ΩøÁî®ÂëΩÂêçÂØºÂÖ•ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∏çÈúÄË¶ÅÈáçÂëΩÂêç„ÄÇ</li>
<li>ÁÆÄÁü≠ËÄåÁÆÄÊ¥Å„ÄÇËØ∑ËÆ∞‰ΩèÔºåÂú®ÊØè‰∏™‰ΩøÁî®ÁöÑÂú∞ÊñπÈÉΩÂÆåÊï¥Ê†áËØÜ‰∫ÜËØ•ÂêçÁß∞„ÄÇ</li>
<li>‰∏çÁî®Â§çÊï∞„ÄÇ‰æãÂ¶Ç<code>net/url</code>ÔºåËÄå‰∏çÊòØ<code>net/urls</code>„ÄÇ</li>
<li>‰∏çË¶ÅÁî®‚Äúcommon‚ÄùÔºå‚Äúutil‚ÄùÔºå‚Äúshared‚ÄùÊàñ‚Äúlib‚Äù„ÄÇËøô‰∫õÊòØ‰∏çÂ•ΩÁöÑÔºå‰ø°ÊÅØÈáè‰∏çË∂≥ÁöÑÂêçÁß∞„ÄÇ</li>
</ul>
<p>Âè¶ËØ∑ÂèÇÈòÖ <a class="link" href="https://blog.golang.org/package-names"  target="_blank" rel="noopener"
    >Package Names</a> Âíå <a class="link" href="https://rakyll.org/style-packages/"  target="_blank" rel="noopener"
    >Go ÂåÖÊ†∑ÂºèÊåáÂçó</a>.</p>
<h3 id="ÂáΩÊï∞Âêç">ÂáΩÊï∞Âêç</h3>
<p>Êàë‰ª¨ÈÅµÂæ™ Go Á§æÂå∫ÂÖ≥‰∫é‰ΩøÁî® <a class="link" href="https://golang.org/doc/effective_go.html#mixed-caps"  target="_blank" rel="noopener"
    >MixedCaps ‰Ωú‰∏∫ÂáΩÊï∞Âêç</a> ÁöÑÁ∫¶ÂÆö„ÄÇÊúâ‰∏Ä‰∏™‰æãÂ§ñÔºå‰∏∫‰∫ÜÂØπÁõ∏ÂÖ≥ÁöÑÊµãËØïÁî®‰æãËøõË°åÂàÜÁªÑÔºåÂáΩÊï∞ÂêçÂèØËÉΩÂåÖÂê´‰∏ãÂàíÁ∫øÔºåÂ¶ÇÔºö<code>TestMyFunction_WhatIsBeingTested</code>.</p>
<h3 id="ÂØºÂÖ•Âà´Âêç">ÂØºÂÖ•Âà´Âêç</h3>
<p>Â¶ÇÊûúÁ®ãÂ∫èÂåÖÂêçÁß∞‰∏éÂØºÂÖ•Ë∑ØÂæÑÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†‰∏çÂåπÈÖçÔºåÂàôÂøÖÈ°ª‰ΩøÁî®ÂØºÂÖ•Âà´Âêç„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;net/http&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">client</span> <span class="s">&#34;example.com/client-go&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">trace</span> <span class="s">&#34;example.com/trace/v2&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ÊâÄÊúâÂÖ∂‰ªñÊÉÖÂÜµ‰∏ãÔºåÈô§ÈùûÂØºÂÖ•‰πãÈó¥ÊúâÁõ¥Êé•ÂÜ≤Á™ÅÔºåÂê¶ÂàôÂ∫îÈÅøÂÖçÂØºÂÖ•Âà´Âêç„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">nettrace</span> <span class="s">&#34;golang.net/x/trace&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;runtime/trace&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">nettrace</span> <span class="s">&#34;golang.net/x/trace&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂáΩÊï∞ÂàÜÁªÑ‰∏éÈ°∫Â∫è">ÂáΩÊï∞ÂàÜÁªÑ‰∏éÈ°∫Â∫è</h3>
<ul>
<li>ÂáΩÊï∞Â∫îÊåâÁ≤óÁï•ÁöÑË∞ÉÁî®È°∫Â∫èÊéíÂ∫è„ÄÇ</li>
<li>Âêå‰∏ÄÊñá‰ª∂‰∏≠ÁöÑÂáΩÊï∞Â∫îÊåâÊé•Êî∂ËÄÖÂàÜÁªÑ„ÄÇ</li>
</ul>
<p>Âõ†Ê≠§ÔºåÂØºÂá∫ÁöÑÂáΩÊï∞Â∫îÂÖàÂá∫Áé∞Âú®Êñá‰ª∂‰∏≠ÔºåÊîæÂú®<code>struct</code>, <code>const</code>, <code>var</code>ÂÆö‰πâÁöÑÂêéÈù¢„ÄÇ</p>
<p>Âú®ÂÆö‰πâÁ±ªÂûã‰πãÂêéÔºå‰ΩÜÂú®Êé•Êî∂ËÄÖÁöÑÂÖ∂‰ΩôÊñπÊ≥ï‰πãÂâçÔºåÂèØËÉΩ‰ºöÂá∫Áé∞‰∏Ä‰∏™ <code>newXYZ()</code>/<code>NewXYZ()</code></p>
<p>Áî±‰∫éÂáΩÊï∞ÊòØÊåâÊé•Êî∂ËÄÖÂàÜÁªÑÁöÑÔºåÂõ†Ê≠§ÊôÆÈÄöÂ∑•ÂÖ∑ÂáΩÊï∞Â∫îÂú®Êñá‰ª∂Êú´Â∞æÂá∫Áé∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">something</span><span class="p">)</span> <span class="nf">Cost</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nf">calcCost</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">weights</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">something</span> <span class="kd">struct</span><span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">calcCost</span><span class="p">(</span><span class="nx">n</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">something</span><span class="p">)</span> <span class="nf">Stop</span><span class="p">()</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">newSomething</span><span class="p">()</span> <span class="o">*</span><span class="nx">something</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&amp;</span><span class="nx">something</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">something</span> <span class="kd">struct</span><span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">newSomething</span><span class="p">()</span> <span class="o">*</span><span class="nx">something</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&amp;</span><span class="nx">something</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">something</span><span class="p">)</span> <span class="nf">Cost</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nf">calcCost</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">weights</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">something</span><span class="p">)</span> <span class="nf">Stop</span><span class="p">()</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">calcCost</span><span class="p">(</span><span class="nx">n</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂáèÂ∞ëÂµåÂ•ó">ÂáèÂ∞ëÂµåÂ•ó</h3>
<p>‰ª£Á†ÅÂ∫îÈÄöËøáÂ∞ΩÂèØËÉΩÂÖàÂ§ÑÁêÜÈîôËØØÊÉÖÂÜµ/ÁâπÊÆäÊÉÖÂÜµÂπ∂Â∞ΩÊó©ËøîÂõûÊàñÁªßÁª≠Âæ™ÁéØÊù•ÂáèÂ∞ëÂµåÂ•ó„ÄÇÂáèÂ∞ëÂµåÂ•óÂ§ö‰∏™Á∫ßÂà´ÁöÑ‰ª£Á†ÅÁöÑ‰ª£Á†ÅÈáè„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">data</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">v</span><span class="p">.</span><span class="nx">F1</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">v</span> <span class="p">=</span> <span class="nf">process</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">v</span><span class="p">.</span><span class="nf">Call</span><span class="p">();</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">v</span><span class="p">.</span><span class="nf">Send</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Invalid v: %v&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">data</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">v</span><span class="p">.</span><span class="nx">F1</span> <span class="o">!=</span> <span class="mi">1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Invalid v: %v&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">continue</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">v</span> <span class="p">=</span> <span class="nf">process</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">v</span><span class="p">.</span><span class="nf">Call</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">v</span><span class="p">.</span><span class="nf">Send</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰∏çÂøÖË¶ÅÁöÑ-else">‰∏çÂøÖË¶ÅÁöÑ else</h3>
<p>Â¶ÇÊûúÂú® if ÁöÑ‰∏§‰∏™ÂàÜÊîØ‰∏≠ÈÉΩËÆæÁΩÆ‰∫ÜÂèòÈáèÔºåÂàôÂèØ‰ª•Â∞ÜÂÖ∂ÊõøÊç¢‰∏∫Âçï‰∏™ if„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">a</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">b</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">a</span> <span class="p">=</span> <span class="mi">100</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">a</span> <span class="p">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">a</span> <span class="o">:=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">b</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">a</span> <span class="p">=</span> <span class="mi">100</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="È°∂Â±ÇÂèòÈáèÂ£∞Êòé">È°∂Â±ÇÂèòÈáèÂ£∞Êòé</h3>
<p>Âú®È°∂Â±ÇÔºå‰ΩøÁî®Ê†áÂáÜ<code>var</code>ÂÖ≥ÈîÆÂ≠ó„ÄÇËØ∑ÂãøÊåáÂÆöÁ±ªÂûãÔºåÈô§ÈùûÂÆÉ‰∏éË°®ËææÂºèÁöÑÁ±ªÂûã‰∏çÂêå„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">_s</span> <span class="kt">string</span> <span class="p">=</span> <span class="nf">F</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">F</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span> <span class="k">return</span> <span class="s">&#34;A&#34;</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">_s</span> <span class="p">=</span> <span class="nf">F</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Áî±‰∫é F Â∑≤ÁªèÊòéÁ°Æ‰∫ÜËøîÂõû‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºåÂõ†Ê≠§Êàë‰ª¨Ê≤°ÊúâÂøÖË¶ÅÊòæÂºèÊåáÂÆö_s ÁöÑÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1">// ËøòÊòØÈÇ£ÁßçÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">F</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span> <span class="k">return</span> <span class="s">&#34;A&#34;</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúË°®ËææÂºèÁöÑÁ±ªÂûã‰∏éÊâÄÈúÄÁöÑÁ±ªÂûã‰∏çÂÆåÂÖ®ÂåπÈÖçÔºåËØ∑ÊåáÂÆöÁ±ªÂûã„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">myError</span> <span class="kd">struct</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">myError</span><span class="p">)</span> <span class="nf">Error</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span> <span class="k">return</span> <span class="s">&#34;error&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">F</span><span class="p">()</span> <span class="nx">myError</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">myError</span><span class="p">{}</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">_e</span> <span class="kt">error</span> <span class="p">=</span> <span class="nf">F</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1">// F ËøîÂõû‰∏Ä‰∏™ myError Á±ªÂûãÁöÑÂÆû‰æãÔºå‰ΩÜÊòØÊàë‰ª¨Ë¶Å error Á±ªÂûã
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂØπ‰∫éÊú™ÂØºÂá∫ÁöÑÈ°∂Â±ÇÂ∏∏ÈáèÂíåÂèòÈáè‰ΩøÁî®_‰Ωú‰∏∫ÂâçÁºÄ">ÂØπ‰∫éÊú™ÂØºÂá∫ÁöÑÈ°∂Â±ÇÂ∏∏ÈáèÂíåÂèòÈáèÔºå‰ΩøÁî®_‰Ωú‰∏∫ÂâçÁºÄ</h3>
<p>Âú®Êú™ÂØºÂá∫ÁöÑÈ°∂Á∫ß<code>vars</code>Âíå<code>consts</code>Ôºå ÂâçÈù¢Âä†‰∏äÂâçÁºÄ_Ôºå‰ª•‰ΩøÂÆÉ‰ª¨Âú®‰ΩøÁî®Êó∂ÊòéÁ°ÆË°®Á§∫ÂÆÉ‰ª¨ÊòØÂÖ®Â±ÄÁ¨¶Âè∑„ÄÇ</p>
<p>‰æãÂ§ñÔºöÊú™ÂØºÂá∫ÁöÑÈîôËØØÂÄºÔºåÂ∫î‰ª•<code>err</code>ÂºÄÂ§¥„ÄÇ</p>
<p>Âü∫Êú¨‰æùÊçÆÔºöÈ°∂Á∫ßÂèòÈáèÂíåÂ∏∏ÈáèÂÖ∑ÊúâÂåÖËåÉÂõ¥‰ΩúÁî®Âüü„ÄÇ‰ΩøÁî®ÈÄöÁî®ÂêçÁß∞ÂèØËÉΩÂæàÂÆπÊòìÂú®ÂÖ∂‰ªñÊñá‰ª∂‰∏≠ÊÑèÂ§ñ‰ΩøÁî®ÈîôËØØÁöÑÂÄº„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// foo.go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">defaultPort</span> <span class="p">=</span> <span class="mi">8080</span>
</span></span><span class="line"><span class="cl">  <span class="nx">defaultUser</span> <span class="p">=</span> <span class="s">&#34;user&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// bar.go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Bar</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">defaultPort</span> <span class="o">:=</span> <span class="mi">9090</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Default port&#34;</span><span class="p">,</span> <span class="nx">defaultPort</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// We will not see a compile error if the first line of
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// Bar() is deleted.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// foo.go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">_defaultPort</span> <span class="p">=</span> <span class="mi">8080</span>
</span></span><span class="line"><span class="cl">  <span class="nx">_defaultUser</span> <span class="p">=</span> <span class="s">&#34;user&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÁªìÊûÑ‰Ωì‰∏≠ÁöÑÂµåÂÖ•">ÁªìÊûÑ‰Ωì‰∏≠ÁöÑÂµåÂÖ•</h3>
<p>ÂµåÂÖ•ÂºèÁ±ªÂûãÔºà‰æãÂ¶Ç mutexÔºâÂ∫î‰Ωç‰∫éÁªìÊûÑ‰ΩìÂÜÖÁöÑÂ≠óÊÆµÂàóË°®ÁöÑÈ°∂ÈÉ®ÔºåÂπ∂‰∏îÂøÖÈ°ªÊúâ‰∏Ä‰∏™Á©∫Ë°åÂ∞ÜÂµåÂÖ•ÂºèÂ≠óÊÆµ‰∏éÂ∏∏ËßÑÂ≠óÊÆµÂàÜÈöîÂºÄ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Client</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">version</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">  <span class="nx">http</span><span class="p">.</span><span class="nx">Client</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Client</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">http</span><span class="p">.</span><span class="nx">Client</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">version</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜÖÂµåÂ∫îËØ•Êèê‰æõÂàáÂÆûÁöÑÂ•ΩÂ§ÑÔºåÊØîÂ¶Ç‰ª•ËØ≠‰πâ‰∏äÂêàÈÄÇÁöÑÊñπÂºèÊ∑ªÂä†ÊàñÂ¢ûÂº∫ÂäüËÉΩ„ÄÇ ÂÆÉÂ∫îËØ•Âú®ÂØπÁî®Êà∑‰∏çÂà©ÂΩ±ÂìçÁöÑÊÉÖÂÜµ‰∏ãÂÆåÊàêËøôÈ°πÂ∑•‰ΩúÔºàÂè¶ËØ∑ÂèÇËßÅÔºö<code>ÈÅøÂÖçÂú®ÂÖ¨ÂÖ±ÁªìÊûÑ‰∏≠ÂµåÂÖ•Á±ªÂûã</code><a class="link" href="https://github.com/xxjwxc/uber_go_guide_cn#avoid-embedding-types-in-public-structs"  target="_blank" rel="noopener"
    >Avoid Embedding Types in Public Structs</a>Ôºâ„ÄÇ</p>
<p>ÂµåÂÖ• <strong>‰∏çÂ∫îËØ•</strong>:</p>
<ul>
<li>Á∫ØÁ≤πÊòØ‰∏∫‰∫ÜÁæéËßÇÊàñÊñπ‰æø„ÄÇ</li>
<li>‰ΩøÂ§ñÈÉ®Á±ªÂûãÊõ¥ÈöæÊûÑÈÄ†Êàñ‰ΩøÁî®„ÄÇ</li>
<li>ÂΩ±ÂìçÂ§ñÈÉ®Á±ªÂûãÁöÑÈõ∂ÂÄº„ÄÇÂ¶ÇÊûúÂ§ñÈÉ®Á±ªÂûãÊúâ‰∏Ä‰∏™ÊúâÁî®ÁöÑÈõ∂ÂÄºÔºåÂàôÂú®ÂµåÂÖ•ÂÜÖÈÉ®Á±ªÂûã‰πãÂêéÂ∫îËØ•‰ªçÁÑ∂Êúâ‰∏Ä‰∏™ÊúâÁî®ÁöÑÈõ∂ÂÄº„ÄÇ</li>
<li>‰Ωú‰∏∫ÂµåÂÖ•ÂÜÖÈÉ®Á±ªÂûãÁöÑÂâØ‰ΩúÁî®Ôºå‰ªéÂ§ñÈÉ®Á±ªÂûãÂÖ¨ÂºÄ‰∏çÁõ∏ÂÖ≥ÁöÑÂáΩÊï∞ÊàñÂ≠óÊÆµ„ÄÇ</li>
<li>ÂÖ¨ÂºÄÊú™ÂØºÂá∫ÁöÑÁ±ªÂûã„ÄÇ</li>
<li>ÂΩ±ÂìçÂ§ñÈÉ®Á±ªÂûãÁöÑÂ§çÂà∂ÂΩ¢Âºè„ÄÇ</li>
<li>Êõ¥ÊîπÂ§ñÈÉ®Á±ªÂûãÁöÑAPIÊàñÁ±ªÂûãËØ≠‰πâ„ÄÇ</li>
<li>ÂµåÂÖ•ÂÜÖÈÉ®Á±ªÂûãÁöÑÈùûËßÑËåÉÂΩ¢Âºè„ÄÇ</li>
<li>ÂÖ¨ÂºÄÂ§ñÈÉ®Á±ªÂûãÁöÑÂÆûÁé∞ËØ¶ÁªÜ‰ø°ÊÅØ„ÄÇ</li>
<li>ÂÖÅËÆ∏Áî®Êà∑ËßÇÂØüÊàñÊéßÂà∂Á±ªÂûãÂÜÖÈÉ®„ÄÇ</li>
<li>ÈÄöËøáÂåÖË£ÖÁöÑÊñπÂºèÊîπÂèòÂÜÖÈÉ®ÂáΩÊï∞ÁöÑ‰∏ÄËà¨Ë°å‰∏∫ÔºåËøôÁßçÂåÖË£ÖÊñπÂºè‰ºöÁªôÁî®Êà∑Â∏¶Êù•‰∏Ä‰∫õÊÑèÊñô‰πãÂ§ñÊÉÖÂÜµ„ÄÇ</li>
</ul>
<p>ÁÆÄÂçïÂú∞ËØ¥ÔºåÊúâÊÑèËØÜÂú∞ÂíåÊúâÁõÆÁöÑÂú∞ÂµåÂÖ•„ÄÇ‰∏ÄÁßçÂæàÂ•ΩÁöÑÊµãËØï‰ΩìÈ™åÊòØÔºå &ldquo;ÊòØÂê¶ÊâÄÊúâËøô‰∫õÂØºÂá∫ÁöÑÂÜÖÈÉ®ÊñπÊ≥ï/Â≠óÊÆµÈÉΩÂ∞ÜÁõ¥Êé•Ê∑ªÂä†Âà∞Â§ñÈÉ®Á±ªÂûã&rdquo; Â¶ÇÊûúÁ≠îÊ°àÊòØ<code>some</code>Êàñ<code>no</code>Ôºå‰∏çË¶ÅÂµåÂÖ•ÂÜÖÈÉ®Á±ªÂûã-ËÄåÊòØ‰ΩøÁî®Â≠óÊÆµ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">A</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Bad: A.Lock() and A.Unlock() Áé∞Âú®ÂèØÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ‰∏çÊèê‰æõ‰ªª‰ΩïÂäüËÉΩÊÄßÂ•ΩÂ§ÑÔºåÂπ∂ÂÖÅËÆ∏Áî®Êà∑ÊéßÂà∂ÊúâÂÖ≥AÁöÑÂÜÖÈÉ®ÁªÜËäÇ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">countingWriteCloser</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Good: Write() Âú®Â§ñÂ±ÇÊèê‰æõÁî®‰∫éÁâπÂÆöÁõÆÁöÑÔºå
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Âπ∂‰∏îÂßîÊâòÂ∑•‰ΩúÂà∞ÂÜÖÈÉ®Á±ªÂûãÁöÑWrite()‰∏≠„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">io</span><span class="p">.</span><span class="nx">WriteCloser</span>
</span></span><span class="line"><span class="cl">    <span class="nx">count</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">w</span> <span class="o">*</span><span class="nx">countingWriteCloser</span><span class="p">)</span> <span class="nf">Write</span><span class="p">(</span><span class="nx">bs</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">w</span><span class="p">.</span><span class="nx">count</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="nx">bs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">w</span><span class="p">.</span><span class="nx">WriteCloser</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">bs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Book</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Bad: ÊåáÈíàÊõ¥ÊîπÈõ∂ÂÄºÁöÑÊúâÁî®ÊÄß
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">io</span><span class="p">.</span><span class="nx">ReadWriter</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// other fields
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// later
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">b</span> <span class="nx">Book</span>
</span></span><span class="line"><span class="cl"><span class="nx">b</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  <span class="c1">// panic: nil pointer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">b</span><span class="p">.</span><span class="nf">String</span><span class="p">()</span>   <span class="c1">// panic: nil pointer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">b</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="c1">// panic: nil pointer
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Book</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Good: ÊúâÁî®ÁöÑÈõ∂ÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">bytes</span><span class="p">.</span><span class="nx">Buffer</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// other fields
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// later
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">b</span> <span class="nx">Book</span>
</span></span><span class="line"><span class="cl"><span class="nx">b</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  <span class="c1">// ok
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">b</span><span class="p">.</span><span class="nf">String</span><span class="p">()</span>   <span class="c1">// ok
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">b</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="c1">// ok
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Client</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span>
</span></span><span class="line"><span class="cl">    <span class="nx">bytes</span><span class="p">.</span><span class="nx">Buffer</span>
</span></span><span class="line"><span class="cl">    <span class="nx">url</span><span class="p">.</span><span class="nx">URL</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Client</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mtx</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wg</span>  <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span>
</span></span><span class="line"><span class="cl">    <span class="nx">buf</span> <span class="nx">bytes</span><span class="p">.</span><span class="nx">Buffer</span>
</span></span><span class="line"><span class="cl">    <span class="nx">url</span> <span class="nx">url</span><span class="p">.</span><span class="nx">URL</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Êú¨Âú∞ÂèòÈáèÂ£∞Êòé">Êú¨Âú∞ÂèòÈáèÂ£∞Êòé</h3>
<p>Â¶ÇÊûúÂ∞ÜÂèòÈáèÊòéÁ°ÆËÆæÁΩÆ‰∏∫Êüê‰∏™ÂÄºÔºåÂàôÂ∫î‰ΩøÁî®Áü≠ÂèòÈáèÂ£∞ÊòéÂΩ¢Âºè (<code>:=</code>)„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">s</span> <span class="p">=</span> <span class="s">&#34;foo&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">s</span> <span class="o">:=</span> <span class="s">&#34;foo&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩÜÊòØÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºå<code>var</code> ‰ΩøÁî®ÂÖ≥ÈîÆÂ≠óÊó∂ÈªòËÆ§ÂÄº‰ºöÊõ¥Ê∏ÖÊô∞„ÄÇ‰æãÂ¶ÇÔºåÂ£∞ÊòéÁ©∫ÂàáÁâá„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">f</span><span class="p">(</span><span class="nx">list</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">filtered</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">list</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">v</span> <span class="p">&gt;</span> <span class="mi">10</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filtered</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">filtered</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">f</span><span class="p">(</span><span class="nx">list</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">filtered</span> <span class="p">[]</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">list</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">v</span> <span class="p">&gt;</span> <span class="mi">10</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filtered</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">filtered</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="nil-ÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑ-slice">nil ÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑ slice</h3>
<p><code>nil</code> ÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑÈïøÂ∫¶‰∏∫ 0 ÁöÑ sliceÔºåËøôÊÑèÂë≥ÁùÄÔºå</p>
<ul>
<li>ÊÇ®‰∏çÂ∫îÊòéÁ°ÆËøîÂõûÈïøÂ∫¶‰∏∫Èõ∂ÁöÑÂàáÁâá„ÄÇÂ∫îËØ•ËøîÂõû<code>nil</code> Êù•‰ª£Êõø„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">x</span> <span class="o">==</span> <span class="s">&#34;&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">x</span> <span class="o">==</span> <span class="s">&#34;&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Ë¶ÅÊ£ÄÊü•ÂàáÁâáÊòØÂê¶‰∏∫Á©∫ÔºåËØ∑ÂßãÁªà‰ΩøÁî®<code>len(s) == 0</code>„ÄÇËÄåÈùû <code>nil</code>„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">s</span> <span class="o">==</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Èõ∂ÂÄºÂàáÁâáÔºàÁî®<code>var</code>Â£∞ÊòéÁöÑÂàáÁâáÔºâÂèØÁ´ãÂç≥‰ΩøÁî®ÔºåÊó†ÈúÄË∞ÉÁî®<code>make()</code>ÂàõÂª∫„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">nums</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// or, nums := make([]int)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">add1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">nums</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">nums</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">add2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">nums</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">nums</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">nums</span> <span class="p">[]</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">add1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">nums</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">nums</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">add2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">nums</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">nums</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËÆ∞‰ΩèÔºåËôΩÁÑ∂nilÂàáÁâáÊòØÊúâÊïàÁöÑÂàáÁâáÔºå‰ΩÜÂÆÉ‰∏çÁ≠â‰∫éÈïøÂ∫¶‰∏∫0ÁöÑÂàáÁâáÔºà‰∏Ä‰∏™‰∏∫nilÔºåÂè¶‰∏Ä‰∏™‰∏çÊòØÔºâÔºåÂπ∂‰∏îÂú®‰∏çÂêåÁöÑÊÉÖÂÜµ‰∏ãÔºà‰æãÂ¶ÇÂ∫èÂàóÂåñÔºâÔºåËøô‰∏§‰∏™ÂàáÁâáÁöÑÂ§ÑÁêÜÊñπÂºèÂèØËÉΩ‰∏çÂêå„ÄÇ</p>
<h3 id="Áº©Â∞èÂèòÈáè‰ΩúÁî®Âüü">Áº©Â∞èÂèòÈáè‰ΩúÁî®Âüü</h3>
<p>Â¶ÇÊûúÊúâÂèØËÉΩÔºåÂ∞ΩÈáèÁº©Â∞èÂèòÈáè‰ΩúÁî®ËåÉÂõ¥„ÄÇÈô§ÈùûÂÆÉ‰∏é <a class="link" href="https://github.com/xxjwxc/uber_go_guide_cn#%e5%87%8f%e5%b0%91%e5%b5%8c%e5%a5%97"  target="_blank" rel="noopener"
    >ÂáèÂ∞ëÂµåÂ•ó</a>ÁöÑËßÑÂàôÂÜ≤Á™Å„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">WriteFile</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="mo">0644</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">WriteFile</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="mo">0644</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÈúÄË¶ÅÂú® if ‰πãÂ§ñ‰ΩøÁî®ÂáΩÊï∞Ë∞ÉÁî®ÁöÑÁªìÊûúÔºåÂàô‰∏çÂ∫îÂ∞ùËØïÁº©Â∞èËåÉÂõ¥„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadFile</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">err</span> <span class="p">=</span> <span class="nx">cfg</span><span class="p">.</span><span class="nf">Decode</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">cfg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">data</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadFile</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">cfg</span><span class="p">.</span><span class="nf">Decode</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">cfg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="kc">nil</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÈÅøÂÖçÂèÇÊï∞ËØ≠‰πâ‰∏çÊòéÁ°Æavoid-naked-parameters">ÈÅøÂÖçÂèÇÊï∞ËØ≠‰πâ‰∏çÊòéÁ°Æ(Avoid Naked Parameters)</h3>
<p>ÂáΩÊï∞Ë∞ÉÁî®‰∏≠ÁöÑ<code>ÊÑè‰πâ‰∏çÊòéÁ°ÆÁöÑÂèÇÊï∞</code>ÂèØËÉΩ‰ºöÊçüÂÆ≥ÂèØËØªÊÄß„ÄÇÂΩìÂèÇÊï∞ÂêçÁß∞ÁöÑÂê´‰πâ‰∏çÊòéÊòæÊó∂ÔºåËØ∑‰∏∫ÂèÇÊï∞Ê∑ªÂä† C Ê†∑ÂºèÊ≥®Èáä (<code>/* ... */</code>)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// func printInfo(name string, isLocal, done bool)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">printInfo</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// func printInfo(name string, isLocal, done bool)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">printInfo</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">,</span> <span class="kc">true</span> <span class="cm">/* isLocal */</span><span class="p">,</span> <span class="kc">true</span> <span class="cm">/* done */</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂØπ‰∫é‰∏äÈù¢ÁöÑÁ§∫‰æã‰ª£Á†ÅÔºåËøòÊúâ‰∏ÄÁßçÊõ¥Â•ΩÁöÑÂ§ÑÁêÜÊñπÂºèÊòØÂ∞Ü‰∏äÈù¢ÁöÑ <code>bool</code> Á±ªÂûãÊç¢ÊàêËá™ÂÆö‰πâÁ±ªÂûã„ÄÇÂ∞ÜÊù•ÔºåËØ•ÂèÇÊï∞ÂèØ‰ª•ÊîØÊåÅ‰∏ç‰ªÖ‰ªÖÂ±ÄÈôê‰∫é‰∏§‰∏™Áä∂ÊÄÅÔºàtrue/falseÔºâ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Region</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">UnknownRegion</span> <span class="nx">Region</span> <span class="p">=</span> <span class="kc">iota</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Local</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Status</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">StatusReady</span> <span class="nx">Status</span><span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nx">StatusDone</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Maybe we will have a StatusInProgress in the future.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">printInfo</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">region</span> <span class="nx">Region</span><span class="p">,</span> <span class="nx">status</span> <span class="nx">Status</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰ΩøÁî®ÂéüÂßãÂ≠óÁ¨¶‰∏≤Â≠óÈù¢ÂÄºÈÅøÂÖçËΩ¨‰πâ">‰ΩøÁî®ÂéüÂßãÂ≠óÁ¨¶‰∏≤Â≠óÈù¢ÂÄºÔºåÈÅøÂÖçËΩ¨‰πâ</h3>
<p>Go ÊîØÊåÅ‰ΩøÁî® <a class="link" href="https://golang.org/ref/spec#raw_string_lit"  target="_blank" rel="noopener"
    >ÂéüÂßãÂ≠óÁ¨¶‰∏≤Â≠óÈù¢ÂÄº</a>Ôºå‰πüÂ∞±ÊòØ &quot; ` &quot; Êù•Ë°®Á§∫ÂéüÁîüÂ≠óÁ¨¶‰∏≤ÔºåÂú®ÈúÄË¶ÅËΩ¨‰πâÁöÑÂú∫ÊôØ‰∏ãÔºåÊàë‰ª¨Â∫îËØ•Â∞ΩÈáè‰ΩøÁî®ËøôÁßçÊñπÊ°àÊù•ÊõøÊç¢„ÄÇ</p>
<p>ÂèØ‰ª•Ë∑®Ë∂äÂ§öË°åÂπ∂ÂåÖÂê´ÂºïÂè∑„ÄÇ‰ΩøÁî®Ëøô‰∫õÂ≠óÁ¨¶‰∏≤ÂèØ‰ª•ÈÅøÂÖçÊõ¥ÈöæÈòÖËØªÁöÑÊâãÂ∑•ËΩ¨‰πâÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wantError</span> <span class="o">:=</span> <span class="s">&#34;unknown name:\&#34;test\&#34;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wantError</span> <span class="o">:=</span> <span class="s">`unknown error:&#34;test&#34;`</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂàùÂßãÂåñÁªìÊûÑ‰Ωì">ÂàùÂßãÂåñÁªìÊûÑ‰Ωì</h3>
<h4 id="‰ΩøÁî®Â≠óÊÆµÂêçÂàùÂßãÂåñÁªìÊûÑ">‰ΩøÁî®Â≠óÊÆµÂêçÂàùÂßãÂåñÁªìÊûÑ</h4>
<p>ÂàùÂßãÂåñÁªìÊûÑÊó∂ÔºåÂá†‰πéÂ∫îËØ•ÂßãÁªàÊåáÂÆöÂ≠óÊÆµÂêç„ÄÇÁõÆÂâçÁî±<a class="link" href="https://golang.org/cmd/vet/"  target="_blank" rel="noopener"
    ><code>go vet</code></a>Âº∫Âà∂ÊâßË°å„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">k</span> <span class="o">:=</span> <span class="nx">User</span><span class="p">{</span><span class="s">&#34;John&#34;</span><span class="p">,</span> <span class="s">&#34;Doe&#34;</span><span class="p">,</span> <span class="kc">true</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">k</span> <span class="o">:=</span> <span class="nx">User</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">FirstName</span><span class="p">:</span> <span class="s">&#34;John&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">LastName</span><span class="p">:</span> <span class="s">&#34;Doe&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Admin</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰æãÂ§ñÔºöÂΩìÊúâ3‰∏™ÊàñÊõ¥Â∞ëÁöÑÂ≠óÊÆµÊó∂ÔºåÊµãËØïË°®‰∏≠ÁöÑÂ≠óÊÆµÂêç<em>may</em>ÂèØ‰ª•ÁúÅÁï•„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">tests</span> <span class="o">:=</span> <span class="p">[]</span><span class="kd">struct</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">op</span> <span class="nx">Operation</span>
</span></span><span class="line"><span class="cl">  <span class="nx">want</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}{</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span><span class="nx">Add</span><span class="p">,</span> <span class="s">&#34;add&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span><span class="nx">Subtract</span><span class="p">,</span> <span class="s">&#34;subtract&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÁúÅÁï•ÁªìÊûÑ‰∏≠ÁöÑÈõ∂ÂÄºÂ≠óÊÆµ">ÁúÅÁï•ÁªìÊûÑ‰∏≠ÁöÑÈõ∂ÂÄºÂ≠óÊÆµ</h4>
<p>ÂàùÂßãÂåñÂÖ∑ÊúâÂ≠óÊÆµÂêçÁöÑÁªìÊûÑÊó∂ÔºåÈô§ÈùûÊèê‰æõÊúâÊÑè‰πâÁöÑ‰∏ä‰∏ãÊñáÔºåÂê¶ÂàôÂøΩÁï•ÂÄº‰∏∫Èõ∂ÁöÑÂ≠óÊÆµ„ÄÇ ‰πüÂ∞±ÊòØÔºåËÆ©Êàë‰ª¨Ëá™Âä®Â∞ÜËøô‰∫õËÆæÁΩÆ‰∏∫Èõ∂ÂÄº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">user</span> <span class="o">:=</span> <span class="nx">User</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">FirstName</span><span class="p">:</span> <span class="s">&#34;John&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LastName</span><span class="p">:</span> <span class="s">&#34;Doe&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">MiddleName</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Admin</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">user</span> <span class="o">:=</span> <span class="nx">User</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">FirstName</span><span class="p">:</span> <span class="s">&#34;John&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LastName</span><span class="p">:</span> <span class="s">&#34;Doe&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊúâÂä©‰∫éÈÄöËøáÁúÅÁï•ËØ•‰∏ä‰∏ãÊñá‰∏≠ÁöÑÈªòËÆ§ÂÄºÊù•ÂáèÂ∞ëÈòÖËØªÁöÑÈöúÁ¢ç„ÄÇÂè™ÊåáÂÆöÊúâÊÑè‰πâÁöÑÂÄº„ÄÇ</p>
<p>Âú®Â≠óÊÆµÂêçÊèê‰æõÊúâÊÑè‰πâ‰∏ä‰∏ãÊñáÁöÑÂú∞ÊñπÂåÖÂê´Èõ∂ÂÄº„ÄÇ‰æãÂ¶ÇÔºå<a class="link" href="https://github.com/xxjwxc/uber_go_guide_cn#%e8%a1%a8%e9%a9%b1%e5%8a%a8%e6%b5%8b%e8%af%95"  target="_blank" rel="noopener"
    >Ë°®È©±Âä®ÊµãËØï</a> ‰∏≠ÁöÑÊµãËØïÁî®‰æãÂèØ‰ª•ÂèóÁõä‰∫éÂ≠óÊÆµÁöÑÂêçÁß∞ÔºåÂç≥‰ΩøÂÆÉ‰ª¨ÊòØÈõ∂ÂÄºÁöÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">tests</span> <span class="o">:=</span> <span class="p">[]</span><span class="kd">struct</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">give</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">want</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}{</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span><span class="nx">give</span><span class="p">:</span> <span class="s">&#34;0&#34;</span><span class="p">,</span> <span class="nx">want</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÂØπÈõ∂ÂÄºÁªìÊûÑ‰ΩøÁî®-var">ÂØπÈõ∂ÂÄºÁªìÊûÑ‰ΩøÁî® <code>var</code></h4>
<p>Â¶ÇÊûúÂú®Â£∞Êòé‰∏≠ÁúÅÁï•‰∫ÜÁªìÊûÑÁöÑÊâÄÊúâÂ≠óÊÆµÔºåËØ∑‰ΩøÁî® <code>var</code> Â£∞ÊòéÁªìÊûÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">user</span> <span class="o">:=</span> <span class="nx">User</span><span class="p">{}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">user</span> <span class="nx">User</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÂ∞ÜÈõ∂ÂÄºÁªìÊûÑ‰∏éÈÇ£‰∫õÂÖ∑ÊúâÁ±ª‰ºº‰∫é‰∏∫[ÂàùÂßãÂåñ Maps]ÂàõÂª∫ÁöÑ,Âå∫Âà´‰∫éÈùûÈõ∂ÂÄºÂ≠óÊÆµÁöÑÁªìÊûÑÂå∫ÂàÜÂºÄÊù•Ôºå Âπ∂‰∏éÊàë‰ª¨Êõ¥ÂñúÊ¨¢ÁöÑ<a class="link" href="https://github.com/golang/go/wiki/CodeReviewComments#declaring-empty-slices"  target="_blank" rel="noopener"
    >declare empty slices</a>ÊñπÂºèÁõ∏ÂåπÈÖç„ÄÇ</p>
<h4 id="ÂàùÂßãÂåñ-struct-ÂºïÁî®">ÂàùÂßãÂåñ Struct ÂºïÁî®</h4>
<p>Âú®ÂàùÂßãÂåñÁªìÊûÑÂºïÁî®Êó∂ÔºåËØ∑‰ΩøÁî®<code>&amp;T{}</code>‰ª£Êõø<code>new(T)</code>Ôºå‰ª•‰ΩøÂÖ∂‰∏éÁªìÊûÑ‰ΩìÂàùÂßãÂåñ‰∏ÄËá¥„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">sval</span> <span class="o">:=</span> <span class="nx">T</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;foo&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// inconsistent
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">sptr</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">T</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">sptr</span><span class="p">.</span><span class="nx">Name</span> <span class="p">=</span> <span class="s">&#34;bar&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">sval</span> <span class="o">:=</span> <span class="nx">T</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;foo&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">sptr</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">T</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;bar&#34;</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂàùÂßãÂåñ-maps">ÂàùÂßãÂåñ Maps</h3>
<p>ÂØπ‰∫éÁ©∫ map ËØ∑‰ΩøÁî® <code>make(..)</code> ÂàùÂßãÂåñÔºå Âπ∂‰∏î map ÊòØÈÄöËøáÁºñÁ®ãÊñπÂºèÂ°´ÂÖÖÁöÑ„ÄÇ Ëøô‰ΩøÂæó map ÂàùÂßãÂåñÂú®Ë°®Áé∞‰∏ä‰∏çÂêå‰∫éÂ£∞ÊòéÔºåÂπ∂‰∏îÂÆÉËøòÂèØ‰ª•Êñπ‰æøÂú∞Âú® make ÂêéÊ∑ªÂä†Â§ßÂ∞èÊèêÁ§∫„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// m1 ËØªÂÜôÂÆâÂÖ®;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// m2 Âú®ÂÜôÂÖ•Êó∂‰ºö panic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">m1</span> <span class="p">=</span> <span class="kd">map</span><span class="p">[</span><span class="nx">T1</span><span class="p">]</span><span class="nx">T2</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">m2</span> <span class="kd">map</span><span class="p">[</span><span class="nx">T1</span><span class="p">]</span><span class="nx">T2</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Â£∞ÊòéÂíåÂàùÂßãÂåñÁúãËµ∑Êù•ÈùûÂ∏∏Áõ∏‰ººÁöÑ„ÄÇ
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// m1 ËØªÂÜôÂÆâÂÖ®;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// m2 Âú®ÂÜôÂÖ•Êó∂‰ºö panic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">m1</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="nx">T1</span><span class="p">]</span><span class="nx">T2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">m2</span> <span class="kd">map</span><span class="p">[</span><span class="nx">T1</span><span class="p">]</span><span class="nx">T2</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Â£∞ÊòéÂíåÂàùÂßãÂåñÁúãËµ∑Êù•Â∑ÆÂà´ÈùûÂ∏∏Â§ß„ÄÇ
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Â∞ΩÂèØËÉΩÁöÑÊÉÖÂÜµ‰∏ãÔºåËØ∑Âú®ÂàùÂßãÂåñÊó∂Êèê‰æõ map ÂÆπÈáèÂ§ßÂ∞èÔºåËØ¶ÁªÜËØ∑Áúã <a class="link" href="https://github.com/xxjwxc/uber_go_guide_cn#%e6%8c%87%e5%ae%9aMap%e5%ae%b9%e9%87%8f%e6%8f%90%e7%a4%ba"  target="_blank" rel="noopener"
    >ÊåáÂÆöMapÂÆπÈáèÊèêÁ§∫</a>„ÄÇ</p>
<p>Âè¶Â§ñÔºåÂ¶ÇÊûú map ÂåÖÂê´Âõ∫ÂÆöÁöÑÂÖÉÁ¥†ÂàóË°®ÔºåÂàô‰ΩøÁî® map literals(map ÂàùÂßãÂåñÂàóË°®) ÂàùÂßãÂåñÊò†Â∞Ñ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="nx">T1</span><span class="p">]</span><span class="nx">T2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">m</span><span class="p">[</span><span class="nx">k1</span><span class="p">]</span> <span class="p">=</span> <span class="nx">v1</span>
</span></span><span class="line"><span class="cl"><span class="nx">m</span><span class="p">[</span><span class="nx">k2</span><span class="p">]</span> <span class="p">=</span> <span class="nx">v2</span>
</span></span><span class="line"><span class="cl"><span class="nx">m</span><span class="p">[</span><span class="nx">k3</span><span class="p">]</span> <span class="p">=</span> <span class="nx">v3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">m</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="nx">T1</span><span class="p">]</span><span class="nx">T2</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">k1</span><span class="p">:</span> <span class="nx">v1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">k2</span><span class="p">:</span> <span class="nx">v2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">k3</span><span class="p">:</span> <span class="nx">v3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âü∫Êú¨ÂáÜÂàôÊòØÔºöÂú®ÂàùÂßãÂåñÊó∂‰ΩøÁî® map ÂàùÂßãÂåñÂàóË°® Êù•Ê∑ªÂä†‰∏ÄÁªÑÂõ∫ÂÆöÁöÑÂÖÉÁ¥†„ÄÇÂê¶Âàô‰ΩøÁî® <code>make</code> (Â¶ÇÊûúÂèØ‰ª•ÔºåËØ∑Â∞ΩÈáèÊåáÂÆö map ÂÆπÈáè)„ÄÇ</p>
<h3 id="Â≠óÁ¨¶‰∏≤-string-format">Â≠óÁ¨¶‰∏≤ string format</h3>
<p>Â¶ÇÊûú‰Ω†Âú®ÂáΩÊï∞Â§ñÂ£∞Êòé<code>Printf</code>-style ÂáΩÊï∞ÁöÑÊ†ºÂºèÂ≠óÁ¨¶‰∏≤ÔºåËØ∑Â∞ÜÂÖ∂ËÆæÁΩÆ‰∏∫<code>const</code>Â∏∏Èáè„ÄÇ</p>
<p>ËøôÊúâÂä©‰∫é<code>go vet</code>ÂØπÊ†ºÂºèÂ≠óÁ¨¶‰∏≤ÊâßË°åÈùôÊÄÅÂàÜÊûê„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">msg</span> <span class="o">:=</span> <span class="s">&#34;unexpected values %v, %v\n&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span> <span class="nx">msg</span> <span class="p">=</span> <span class="s">&#34;unexpected values %v, %v\n&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂëΩÂêç-printf-Ê†∑ÂºèÁöÑÂáΩÊï∞">ÂëΩÂêç Printf Ê†∑ÂºèÁöÑÂáΩÊï∞</h3>
<p>Â£∞Êòé<code>Printf</code>-style ÂáΩÊï∞Êó∂ÔºåËØ∑Á°Æ‰øù<code>go vet</code>ÂèØ‰ª•Ê£ÄÊµãÂà∞ÂÆÉÂπ∂Ê£ÄÊü•Ê†ºÂºèÂ≠óÁ¨¶‰∏≤„ÄÇ</p>
<p>ËøôÊÑèÂë≥ÁùÄÊÇ®Â∫îÂ∞ΩÂèØËÉΩ‰ΩøÁî®È¢ÑÂÆö‰πâÁöÑ<code>Printf</code>-style ÂáΩÊï∞ÂêçÁß∞„ÄÇ<code>go vet</code>Â∞ÜÈªòËÆ§Ê£ÄÊü•Ëøô‰∫õ„ÄÇÊúâÂÖ≥Êõ¥Â§ö‰ø°ÊÅØÔºåËØ∑ÂèÇËßÅ <a class="link" href="https://golang.org/cmd/vet/#hdr-Printf_family"  target="_blank" rel="noopener"
    >Printf Á≥ªÂàó</a>„ÄÇ</p>
<p>Â¶ÇÊûú‰∏çËÉΩ‰ΩøÁî®È¢ÑÂÆö‰πâÁöÑÂêçÁß∞ÔºåËØ∑‰ª• f ÁªìÊùüÈÄâÊã©ÁöÑÂêçÁß∞Ôºö<code>Wrapf</code>ÔºåËÄå‰∏çÊòØ<code>Wrap</code>„ÄÇ<code>go vet</code>ÂèØ‰ª•Ë¶ÅÊ±ÇÊ£ÄÊü•ÁâπÂÆöÁöÑ Printf Ê†∑ÂºèÂêçÁß∞Ôºå‰ΩÜÂêçÁß∞ÂøÖÈ°ª‰ª•<code>f</code>ÁªìÂ∞æ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="err">$</span> <span class="k">go</span> <span class="nx">vet</span> <span class="o">-</span><span class="nx">printfuncs</span><span class="p">=</span><span class="nx">wrapf</span><span class="p">,</span><span class="nx">statusf</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âè¶ËØ∑ÂèÇÈòÖ <a class="link" href="https://kuzminva.wordpress.com/2017/11/07/go-vet-printf-family-check/"  target="_blank" rel="noopener"
    >go vet: Printf family check</a>.</p>
<h2 id="ÁºñÁ®ãÊ®°Âºè">ÁºñÁ®ãÊ®°Âºè</h2>
<h3 id="Ë°®È©±Âä®ÊµãËØï">Ë°®È©±Âä®ÊµãËØï</h3>
<p>ÂΩìÊµãËØïÈÄªËæëÊòØÈáçÂ§çÁöÑÊó∂ÂÄôÔºåÈÄöËøá <a class="link" href="https://blog.golang.org/subtests"  target="_blank" rel="noopener"
    >subtests</a> ‰ΩøÁî® table È©±Âä®ÁöÑÊñπÂºèÁºñÂÜô case ‰ª£Á†ÅÁúã‰∏äÂéª‰ºöÊõ¥ÁÆÄÊ¥Å„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// func TestSplitHostPort(t *testing.T)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">host</span><span class="p">,</span> <span class="nx">port</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">SplitHostPort</span><span class="p">(</span><span class="s">&#34;192.0.2.0:8000&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nf">NoError</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="s">&#34;192.0.2.0&#34;</span><span class="p">,</span> <span class="nx">host</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="s">&#34;8000&#34;</span><span class="p">,</span> <span class="nx">port</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">host</span><span class="p">,</span> <span class="nx">port</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">SplitHostPort</span><span class="p">(</span><span class="s">&#34;192.0.2.0:http&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nf">NoError</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="s">&#34;192.0.2.0&#34;</span><span class="p">,</span> <span class="nx">host</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="s">&#34;http&#34;</span><span class="p">,</span> <span class="nx">port</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">host</span><span class="p">,</span> <span class="nx">port</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">SplitHostPort</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nf">NoError</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="nx">host</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="s">&#34;8000&#34;</span><span class="p">,</span> <span class="nx">port</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">host</span><span class="p">,</span> <span class="nx">port</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">SplitHostPort</span><span class="p">(</span><span class="s">&#34;1:8&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nf">NoError</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="s">&#34;1&#34;</span><span class="p">,</span> <span class="nx">host</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="s">&#34;8&#34;</span><span class="p">,</span> <span class="nx">port</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// func TestSplitHostPort(t *testing.T)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">tests</span> <span class="o">:=</span> <span class="p">[]</span><span class="kd">struct</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">give</span>     <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">wantHost</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">wantPort</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}{</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">give</span><span class="p">:</span>     <span class="s">&#34;192.0.2.0:8000&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wantHost</span><span class="p">:</span> <span class="s">&#34;192.0.2.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wantPort</span><span class="p">:</span> <span class="s">&#34;8000&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">give</span><span class="p">:</span>     <span class="s">&#34;192.0.2.0:http&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wantHost</span><span class="p">:</span> <span class="s">&#34;192.0.2.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wantPort</span><span class="p">:</span> <span class="s">&#34;http&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">give</span><span class="p">:</span>     <span class="s">&#34;:8000&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wantHost</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wantPort</span><span class="p">:</span> <span class="s">&#34;8000&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">give</span><span class="p">:</span>     <span class="s">&#34;1:8&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wantHost</span><span class="p">:</span> <span class="s">&#34;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wantPort</span><span class="p">:</span> <span class="s">&#34;8&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">tt</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tests</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">t</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="nx">tt</span><span class="p">.</span><span class="nx">give</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">host</span><span class="p">,</span> <span class="nx">port</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">SplitHostPort</span><span class="p">(</span><span class="nx">tt</span><span class="p">.</span><span class="nx">give</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">require</span><span class="p">.</span><span class="nf">NoError</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">tt</span><span class="p">.</span><span class="nx">wantHost</span><span class="p">,</span> <span class="nx">host</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">tt</span><span class="p">.</span><span class="nx">wantPort</span><span class="p">,</span> <span class="nx">port</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂæàÊòéÊòæÔºå‰ΩøÁî® test table ÁöÑÊñπÂºèÂú®‰ª£Á†ÅÈÄªËæëÊâ©Â±ïÁöÑÊó∂ÂÄôÔºåÊØîÂ¶ÇÊñ∞Â¢û test caseÔºåÈÉΩ‰ºöÊòæÂæóÊõ¥Âä†ÁöÑÊ∏ÖÊô∞„ÄÇ</p>
<p>Êàë‰ª¨ÈÅµÂæ™ËøôÊ†∑ÁöÑÁ∫¶ÂÆöÔºöÂ∞ÜÁªìÊûÑ‰ΩìÂàáÁâáÁß∞‰∏∫<code>tests</code>„ÄÇ ÊØè‰∏™ÊµãËØïÁî®‰æãÁß∞‰∏∫<code>tt</code>„ÄÇÊ≠§Â§ñÔºåÊàë‰ª¨ÈºìÂä±‰ΩøÁî®<code>give</code>Âíå<code>want</code>ÂâçÁºÄËØ¥ÊòéÊØè‰∏™ÊµãËØïÁî®‰æãÁöÑËæìÂÖ•ÂíåËæìÂá∫ÂÄº„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">tests</span> <span class="o">:=</span> <span class="p">[]</span><span class="kd">struct</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">give</span>     <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">wantHost</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">wantPort</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">tt</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tests</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂäüËÉΩÈÄâÈ°π">ÂäüËÉΩÈÄâÈ°π</h3>
<p>ÂäüËÉΩÈÄâÈ°πÊòØ‰∏ÄÁßçÊ®°ÂºèÔºåÊÇ®ÂèØ‰ª•Âú®ÂÖ∂‰∏≠Â£∞Êòé‰∏Ä‰∏™‰∏çÈÄèÊòé Option Á±ªÂûãÔºåËØ•Á±ªÂûãÂú®Êüê‰∫õÂÜÖÈÉ®ÁªìÊûÑ‰∏≠ËÆ∞ÂΩï‰ø°ÊÅØ„ÄÇÊÇ®Êé•ÂèóËøô‰∫õÈÄâÈ°πÁöÑÂèØÂèòÁºñÂè∑ÔºåÂπ∂Ê†πÊçÆÂÜÖÈÉ®ÁªìÊûÑ‰∏äÁöÑÈÄâÈ°πËÆ∞ÂΩïÁöÑÂÖ®ÈÉ®‰ø°ÊÅØÈááÂèñË°åÂä®„ÄÇ</p>
<p>Â∞ÜÊ≠§Ê®°ÂºèÁî®‰∫éÊÇ®ÈúÄË¶ÅÊâ©Â±ïÁöÑÊûÑÈÄ†ÂáΩÊï∞ÂíåÂÖ∂‰ªñÂÖ¨ÂÖ± API ‰∏≠ÁöÑÂèØÈÄâÂèÇÊï∞ÔºåÂ∞§ÂÖ∂ÊòØÂú®Ëøô‰∫õÂäüËÉΩ‰∏äÂ∑≤ÁªèÂÖ∑Êúâ‰∏â‰∏™ÊàñÊõ¥Â§öÂèÇÊï∞ÁöÑÊÉÖÂÜµ‰∏ã„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Bad
</span></span></span><span class="line"><span class="cl"><span class="c1">// package db
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">addr</span> <span class="kt">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">cache</span> <span class="kt">bool</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">logger</span> <span class="o">*</span><span class="nx">zap</span><span class="p">.</span><span class="nx">Logger</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Connection</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂøÖÈ°ªÂßãÁªàÊèê‰æõÁºìÂ≠òÂíåËÆ∞ÂΩïÂô®ÂèÇÊï∞ÔºåÂç≥‰ΩøÁî®Êà∑Â∏åÊúõ‰ΩøÁî®ÈªòËÆ§ÂÄº„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">addr</span><span class="p">,</span> <span class="nx">db</span><span class="p">.</span><span class="nx">DefaultCache</span><span class="p">,</span> <span class="nx">zap</span><span class="p">.</span><span class="nf">NewNop</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">addr</span><span class="p">,</span> <span class="nx">db</span><span class="p">.</span><span class="nx">DefaultCache</span><span class="p">,</span> <span class="nx">log</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">addr</span><span class="p">,</span> <span class="kc">false</span> <span class="cm">/* cache */</span><span class="p">,</span> <span class="nx">zap</span><span class="p">.</span><span class="nf">NewNop</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">addr</span><span class="p">,</span> <span class="kc">false</span> <span class="cm">/* cache */</span><span class="p">,</span> <span class="nx">log</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Good
</span></span></span><span class="line"><span class="cl"><span class="c1">// package db
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Option</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">WithCache</span><span class="p">(</span><span class="nx">c</span> <span class="kt">bool</span><span class="p">)</span> <span class="nx">Option</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">WithLogger</span><span class="p">(</span><span class="nx">log</span> <span class="o">*</span><span class="nx">zap</span><span class="p">.</span><span class="nx">Logger</span><span class="p">)</span> <span class="nx">Option</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Open creates a connection.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">Open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">addr</span> <span class="kt">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">opts</span> <span class="o">...</span><span class="nx">Option</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Connection</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Âè™ÊúâÂú®ÈúÄË¶ÅÊó∂ÊâçÊèê‰æõÈÄâÈ°π„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">addr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">addr</span><span class="p">,</span> <span class="nx">db</span><span class="p">.</span><span class="nf">WithLogger</span><span class="p">(</span><span class="nx">log</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">addr</span><span class="p">,</span> <span class="nx">db</span><span class="p">.</span><span class="nf">WithCache</span><span class="p">(</span><span class="kc">false</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">addr</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">db</span><span class="p">.</span><span class="nf">WithCache</span><span class="p">(</span><span class="kc">false</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="nx">db</span><span class="p">.</span><span class="nf">WithLogger</span><span class="p">(</span><span class="nx">log</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨Âª∫ËÆÆÂÆûÁé∞Ê≠§Ê®°ÂºèÁöÑÊñπÊ≥ïÊòØ‰ΩøÁî®‰∏Ä‰∏™ <code>Option</code> Êé•Âè£ÔºåËØ•Êé•Âè£‰øùÂ≠ò‰∏Ä‰∏™Êú™ÂØºÂá∫ÁöÑÊñπÊ≥ïÔºåÂú®‰∏Ä‰∏™Êú™ÂØºÂá∫ÁöÑ <code>options</code> ÁªìÊûÑ‰∏äËÆ∞ÂΩïÈÄâÈ°π„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">options</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">cache</span>  <span class="kt">bool</span>
</span></span><span class="line"><span class="cl">  <span class="nx">logger</span> <span class="o">*</span><span class="nx">zap</span><span class="p">.</span><span class="nx">Logger</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Option</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nf">apply</span><span class="p">(</span><span class="o">*</span><span class="nx">options</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">cacheOption</span> <span class="kt">bool</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="nx">cacheOption</span><span class="p">)</span> <span class="nf">apply</span><span class="p">(</span><span class="nx">opts</span> <span class="o">*</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">opts</span><span class="p">.</span><span class="nx">cache</span> <span class="p">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">WithCache</span><span class="p">(</span><span class="nx">c</span> <span class="kt">bool</span><span class="p">)</span> <span class="nx">Option</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nf">cacheOption</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">loggerOption</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Log</span> <span class="o">*</span><span class="nx">zap</span><span class="p">.</span><span class="nx">Logger</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">l</span> <span class="nx">loggerOption</span><span class="p">)</span> <span class="nf">apply</span><span class="p">(</span><span class="nx">opts</span> <span class="o">*</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">opts</span><span class="p">.</span><span class="nx">logger</span> <span class="p">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">Log</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">WithLogger</span><span class="p">(</span><span class="nx">log</span> <span class="o">*</span><span class="nx">zap</span><span class="p">.</span><span class="nx">Logger</span><span class="p">)</span> <span class="nx">Option</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">loggerOption</span><span class="p">{</span><span class="nx">Log</span><span class="p">:</span> <span class="nx">log</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Open creates a connection.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">Open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">addr</span> <span class="kt">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">opts</span> <span class="o">...</span><span class="nx">Option</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Connection</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">options</span> <span class="o">:=</span> <span class="nx">options</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cache</span><span class="p">:</span>  <span class="nx">defaultCache</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">logger</span><span class="p">:</span> <span class="nx">zap</span><span class="p">.</span><span class="nf">NewNop</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">o</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">opts</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">o</span><span class="p">.</span><span class="nf">apply</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">options</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÊÑè: ËøòÊúâ‰∏ÄÁßç‰ΩøÁî®Èó≠ÂåÖÂÆûÁé∞Ëøô‰∏™Ê®°ÂºèÁöÑÊñπÊ≥ïÔºå‰ΩÜÊòØÊàë‰ª¨Áõ∏‰ø°‰∏äÈù¢ÁöÑÊ®°Âºè‰∏∫‰ΩúËÄÖÊèê‰æõ‰∫ÜÊõ¥Â§öÁöÑÁÅµÊ¥ªÊÄßÔºåÂπ∂‰∏îÊõ¥ÂÆπÊòìÂØπÁî®Êà∑ËøõË°åË∞ÉËØïÂíåÊµãËØï„ÄÇÁâπÂà´ÊòØÔºåÂú®‰∏çÂèØËÉΩËøõË°åÊØîËæÉÁöÑÊÉÖÂÜµ‰∏ãÂÆÉÂÖÅËÆ∏Âú®ÊµãËØïÂíåÊ®°Êãü‰∏≠ÂØπÈÄâÈ°πËøõË°åÊØîËæÉ„ÄÇÊ≠§Â§ñÔºåÂÆÉËøòÂÖÅËÆ∏ÈÄâÈ°πÂÆûÁé∞ÂÖ∂‰ªñÊé•Âè£ÔºåÂåÖÊã¨ <code>fmt.Stringer</code>ÔºåÂÖÅËÆ∏Áî®Êà∑ËØªÂèñÈÄâÈ°πÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ÂΩ¢Âºè„ÄÇ</p>
<p>ËøòÂèØ‰ª•ÂèÇËÄÉ‰∏ãÈù¢ËµÑÊñôÔºö</p>
<ul>
<li><a class="link" href="https://commandcenter.blogspot.com/2014/01/self-referential-functions-and-design.html"  target="_blank" rel="noopener"
    >Self-referential functions and the design of options</a></li>
<li><a class="link" href="https://dave.cheney.net/2014/10/17/functional-options-for-friendly-apis"  target="_blank" rel="noopener"
    >Functional options for friendly APIs</a></li>
</ul>
<h2 id="linting">Linting</h2>
<p>ÊØî‰ªª‰Ωï &ldquo;blessed&rdquo; linter ÈõÜÊõ¥ÈáçË¶ÅÁöÑÊòØÔºålintÂú®‰∏Ä‰∏™‰ª£Á†ÅÂ∫ì‰∏≠ÂßãÁªà‰øùÊåÅ‰∏ÄËá¥„ÄÇ</p>
<p>Êàë‰ª¨Âª∫ËÆÆËá≥Â∞ë‰ΩøÁî®‰ª•‰∏ãlintersÔºåÂõ†‰∏∫ÊàëËÆ§‰∏∫ÂÆÉ‰ª¨ÊúâÂä©‰∫éÂèëÁé∞ÊúÄÂ∏∏ËßÅÁöÑÈóÆÈ¢òÔºåÂπ∂Âú®‰∏çÈúÄË¶ÅËßÑÂÆöÁöÑÊÉÖÂÜµ‰∏ã‰∏∫‰ª£Á†ÅË¥®ÈáèÂª∫Á´ã‰∏Ä‰∏™È´òÊ†áÂáÜÔºö</p>
<ul>
<li><a class="link" href="https://github.com/kisielk/errcheck"  target="_blank" rel="noopener"
    >errcheck</a> ‰ª•Á°Æ‰øùÈîôËØØÂæóÂà∞Â§ÑÁêÜ</li>
<li><a class="link" href="https://godoc.org/golang.org/x/tools/cmd/goimports"  target="_blank" rel="noopener"
    >goimports</a> Ê†ºÂºèÂåñ‰ª£Á†ÅÂíåÁÆ°ÁêÜ imports</li>
<li><a class="link" href="https://github.com/golang/lint"  target="_blank" rel="noopener"
    >golint</a> ÊåáÂá∫Â∏∏ËßÅÁöÑÊñá‰ΩìÈîôËØØ</li>
<li><a class="link" href="https://golang.org/cmd/vet/"  target="_blank" rel="noopener"
    >govet</a> ÂàÜÊûê‰ª£Á†Å‰∏≠ÁöÑÂ∏∏ËßÅÈîôËØØ</li>
<li><a class="link" href="https://staticcheck.io/"  target="_blank" rel="noopener"
    >staticcheck</a> ÂêÑÁßçÈùôÊÄÅÂàÜÊûêÊ£ÄÊü•</li>
</ul>
<h3 id="lint-runners">Lint Runners</h3>
<p>Êàë‰ª¨Êé®Ëçê <a class="link" href="https://github.com/golangci/golangci-lint"  target="_blank" rel="noopener"
    >golangci-lint</a> ‰Ωú‰∏∫go-to lintÁöÑËøêË°åÁ®ãÂ∫èÔºåËøô‰∏ªË¶ÅÊòØÂõ†‰∏∫ÂÆÉÂú®ËæÉÂ§ßÁöÑ‰ª£Á†ÅÂ∫ì‰∏≠ÁöÑÊÄßËÉΩ‰ª•ÂèäËÉΩÂ§üÂêåÊó∂ÈÖçÁΩÆÂíå‰ΩøÁî®ËÆ∏Â§öËßÑËåÉ„ÄÇËøô‰∏™repoÊúâ‰∏Ä‰∏™Á§∫‰æãÈÖçÁΩÆÊñá‰ª∂<a class="link" href="https://github.com/uber-go/guide/blob/master/.golangci.yml"  target="_blank" rel="noopener"
    >.golangci.yml</a>ÂíåÊé®ËçêÁöÑlinterËÆæÁΩÆ„ÄÇ</p>
<p>golangci-lint Êúâ<a class="link" href="https://golangci-lint.run/usage/linters/"  target="_blank" rel="noopener"
    >various-linters</a>ÂèØ‰æõ‰ΩøÁî®„ÄÇÂª∫ËÆÆÂ∞Ü‰∏äËø∞linters‰Ωú‰∏∫Âü∫Êú¨setÔºåÊàë‰ª¨ÈºìÂä±Âõ¢ÈòüÊ∑ªÂä†ÂØπ‰ªñ‰ª¨ÁöÑÈ°πÁõÆÊúâÊÑè‰πâÁöÑ‰ªª‰ΩïÈôÑÂä†linters„ÄÇ</p>
<p><strong>vscode Â¶Ç‰ΩïÈõÜÊàê ?</strong></p>
<p>settings.json</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;go.lintTool&#34;</span><span class="err">:</span> <span class="s2">&#34;golangci-lint&#34;</span><span class="err">,</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;go.lintFlags&#34;</span><span class="err">:</span> <span class="p">[</span><span class="s2">&#34;--config=~/.golangci.yml&#34;</span><span class="p">,</span> <span class="s2">&#34;--fast&#34;</span><span class="p">]</span><span class="err">,</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>È°πÁõÆÁõÆÂΩï‰∏ãÂàõÂª∫ <code>.golangci.yml</code> Êñá‰ª∂Ôºå<a class="link" href="https://golangci-lint.run/usage/configuration/"  target="_blank" rel="noopener"
    >ÈÖçÁΩÆËØ¥Êòé</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="c"># 2021-06-05</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># ixugo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># options for analysis running</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">run</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l">1m</span><span class="w"> </span><span class="c"># ÂàÜÊûêË∂ÖÊó∂Êó∂Èó¥</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">issues-exit-code</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c"># ÂèëÁé∞Ëá≥Â∞ë‰∏Ä‰∏™ÈóÆÈ¢òÊó∂ÈÄÄÂá∫‰ª£Á†Å</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tests</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># ÊòØÂê¶ÂåÖÂê´ÊµãËØïÊñá‰ª∂</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">modules-download-mode</span><span class="p">:</span><span class="w"> </span><span class="l">readonly</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">linters</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">enable</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">errcheck</span><span class="w"> </span><span class="c"># ‰ª•Á°Æ‰øùÈîôËØØÂæóÂà∞Â§ÑÁêÜ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">goimports</span><span class="w"> </span><span class="c"># Ê†ºÂºèÂåñ‰ª£Á†ÅÂíåÁÆ°ÁêÜ imports</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">golint</span><span class="w"> </span><span class="c"># ÊåáÂá∫Â∏∏ËßÅÁöÑÊñá‰ΩìÈîôËØØ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">govet</span><span class="w"> </span><span class="c"># ÂàÜÊûê‰ª£Á†Å‰∏≠ÁöÑÂ∏∏ËßÅÈîôËØØ,‰æãÂ¶ÇÊï∞‰∏éÊ†ºÂºèÂ≠óÁ¨¶‰∏≤‰∏çÂØπÈΩêÁöÑ Printf Ë∞ÉÁî®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">staticcheck</span><span class="w"> </span><span class="c"># ÂêÑÁßçÈùôÊÄÅÂàÜÊûêÊ£ÄÊü•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">deadcode</span><span class="w"> </span><span class="c"># Êú™‰ΩøÁî®ÁöÑ‰ª£Á†Å</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">unused</span><span class="w"> </span><span class="c"># Êú™‰ΩøÁî®ÁöÑÂ∏∏Èáè/ÂèòÈáè/ÂáΩÊï∞/Á±ªÂûã</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">varcheck</span><span class="w"> </span><span class="c"># Êú™‰ΩøÁî®ÁöÑÂÖ®Â±ÄÂèòÈáè/Â∏∏Èáè</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">funlen</span><span class="w"> </span><span class="c"># Ê£ÄÊü•ÈïøÂáΩÊï∞ÔºåÈªòËÆ§ 60 Ë°å 40 Êù°ËØ≠Âè•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">nestif</span><span class="w"> </span><span class="c"># Ê∑±Â∫¶ÂµåÂ•óÁöÑ if ËØ≠Âè•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">unconvert</span><span class="w"> </span><span class="c"># ‰∏çÂøÖË¶ÅÁöÑÁ±ªÂûãËΩ¨Êç¢</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">issues</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">exclude-use-default</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">max-issues-per-linter</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">max-same-issues</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/go/">Go</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/http-%E8%AF%BB%E5%86%99%E8%B6%85%E6%97%B6/">
        
        

        <div class="article-details">
            <h2 class="article-title">HTTP ËØªÂÜôË∂ÖÊó∂</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/json/">
        
        

        <div class="article-details">
            <h2 class="article-title">JSON</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/25.%E6%B3%9B%E5%9E%8B/">
        
        

        <div class="article-details">
            <h2 class="article-title">25.Ê≥õÂûã</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/22.%E6%B5%8B%E8%AF%95/">
        
        

        <div class="article-details">
            <h2 class="article-title">22.ÊµãËØï</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/go-module/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go Module</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="ixugo/ixugo.github.io"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
  <section class="copyright">
    &copy;
    
    2018 -
    
    2024 ixugo
  </section>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <section class="powerby">

    
    <span id="busuanzi_container_page_pv">Êú¨ÊñáÈòÖËØªÈáè
      <span style="font-size: 14px" id="busuanzi_value_page_pv"></span>
      Ê¨°Ôºå</span>
    <span id="busuanzi_container_site_pv">ÊÄªËÆøÈóÆÈáè
      <span style="font-size: 14px" id="busuanzi_value_site_pv"></span>
      Ê¨° </span>ÔºåÊÄªËÆøÂÆ¢Êï∞
    <span style="font-size: 14px" id="busuanzi_value_site_uv"></span> ‰∫∫
    <br />


    Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> .&nbsp;&nbsp;
    Theme <a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener"
      data-version="3.16.0">Stack</a> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
  </section>




  <script>
    function count() {
      let href = window.location.href;
      let regexp = /^https?:\/\/blog.golang.space\/?(page\/[\d]+\/?)?$/;
      if (regexp.test(href)) {
        let e = document.getElementById("busuanzi_container_page_pv");
        e.innerText = "";
      }
    }
    window.onload = count;
  </script>
</footer>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
